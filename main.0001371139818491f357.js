(self.webpackChunkcargonaut=self.webpackChunkcargonaut||[]).push([[179],{8255:He=>{function _e(F){return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+F+"'");throw u.code="MODULE_NOT_FOUND",u})}_e.keys=()=>[],_e.resolve=_e,_e.id=8255,He.exports=_e},7716:(He,_e,F)=>{"use strict";F.d(_e,{deG:()=>mh,tb:()=>tT,AFp:()=>XC,ip1:()=>vw,CZH:()=>_f,hGG:()=>tr,z2F:()=>Ql,sBO:()=>HA,Sil:()=>Jl,_Vd:()=>rf,EJc:()=>ww,SBq:()=>Mu,qLn:()=>Ra,vpe:()=>_s,gxx:()=>Ol,tBr:()=>Ta,XFs:()=>Ge,OlP:()=>cn,zs3:()=>Sn,ZZ4:()=>R_,aQg:()=>x_,soG:()=>Pu,YKP:()=>KA,v3s:()=>Nw,h0i:()=>pd,PXZ:()=>BN,R0b:()=>Xr,FiY:()=>Ia,Lbi:()=>ys,g9A:()=>AN,Qsj:()=>RA,FYo:()=>M_,JOm:()=>y,Tiy:()=>ub,q3G:()=>Ln,tp0:()=>or,EAV:()=>jN,Rgc:()=>sf,dDg:()=>Eg,DyG:()=>Os,q4F:()=>lb,GfV:()=>nC,s_b:()=>F_,ifc:()=>Oe,eFA:()=>Cg,G48:()=>ON,Gpc:()=>U,X6Q:()=>Nd,_c5:()=>zN,VLi:()=>sT,c2e:()=>Bt,zSh:()=>nd,wAp:()=>ot,vHH:()=>Me,EiD:()=>Hc,mCW:()=>Aa,qzn:()=>bl,JVY:()=>dm,pB0:()=>Vc,eBb:()=>ip,L6k:()=>rp,LAX:()=>$o,cg1:()=>g_,Tjo:()=>Sg,kL8:()=>W0,yhl:()=>Dh,dqk:()=>pt,sIi:()=>Op,CqO:()=>N0,QGY:()=>A0,F4k:()=>oD,RDi:()=>No,AaK:()=>K,z3N:()=>jo,qOj:()=>p0,TTD:()=>hn,_Bn:()=>ob,xp6:()=>Mv,uIk:()=>_0,Tol:()=>mD,DjV:()=>ID,ekj:()=>F0,Suo:()=>Jb,Xpm:()=>Dr,lG2:()=>hc,Yz7:()=>an,cJS:()=>gn,oAB:()=>To,Yjl:()=>Ci,Y36:()=>Fp,_UZ:()=>iD,BQk:()=>S0,ynx:()=>I0,qZA:()=>T0,TgZ:()=>C0,EpF:()=>sD,n5z:()=>ul,Ikx:()=>f_,SDv:()=>nb,QtT:()=>WD,pQV:()=>hd,LFG:()=>fn,$8M:()=>ph,NdJ:()=>M0,CRH:()=>cy,oxw:()=>Un,ALo:()=>OC,lcZ:()=>Fa,Hsn:()=>aD,F$t:()=>id,Q6J:()=>E0,s9C:()=>o_,MGl:()=>a_,VKq:()=>Hb,WLB:()=>Gb,kEZ:()=>xC,iGM:()=>UC,MAs:()=>WE,CHM:()=>tl,LSH:()=>ap,kYT:()=>qu,Udp:()=>jp,YNc:()=>qE,W1O:()=>$C,_uU:()=>HS,Oqu:()=>d_,hij:()=>Xn,Gf:()=>Kb});var u=F(9765),te=F(5319),L=F(7574),ce=F(6682),ie=F(8819);function J(i){for(let s in i)if(i[s]===J)return s;throw Error("Could not find renamed property on target object.")}function oe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function K(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(K).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function z(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const P=J({__forward_ref__:J});function U(i){return i.__forward_ref__=U,i.toString=function(){return K(this())},i}function G(i){return de(i)?i():i}function de(i){return"function"==typeof i&&i.hasOwnProperty(P)&&i.__forward_ref__===U}class Me extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function X(i){return"string"==typeof i?i:null==i?"":String(i)}function re(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():X(i)}function It(i,s){const a=s?` in ${s}`:"";throw new Me("201",`No provider for ${re(i)} found${a}`)}function jt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}function an(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function gn(i){return{providers:i.providers||[],imports:i.imports||[]}}function rr(i){return Lt(i,os)||Lt(i,ir)}function Lt(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ui(i){return i&&(i.hasOwnProperty(De)||i.hasOwnProperty(Hn))?i[De]:null}const os=J({\u0275prov:J}),De=J({\u0275inj:J}),ir=J({ngInjectableDef:J}),Hn=J({ngInjectorDef:J});var Ge=(()=>((Ge=Ge||{})[Ge.Default=0]="Default",Ge[Ge.Host=1]="Host",Ge[Ge.Self=2]="Self",Ge[Ge.SkipSelf=4]="SkipSelf",Ge[Ge.Optional=8]="Optional",Ge))();let $t;function si(i){const s=$t;return $t=i,s}function et(i,s,a){const l=rr(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ge.Optional?null:void 0!==s?s:void It(K(i),"Injector")}function Nt(i){return{toString:i}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),Oe=(()=>((Oe=Oe||{})[Oe.Emulated=0]="Emulated",Oe[Oe.None=2]="None",Oe[Oe.ShadowDom=3]="ShadowDom",Oe))();const Je="undefined"!=typeof globalThis&&globalThis,Hu="undefined"!=typeof window&&window,Zs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pt=Je||"undefined"!=typeof global&&global||Hu||Zs,W={},j=[],Z=J({\u0275cmp:J}),ye=J({\u0275dir:J}),se=J({\u0275pipe:J}),Ve=J({\u0275mod:J}),gt=J({\u0275loc:J}),Vt=J({\u0275fac:J}),Mn=J({__NG_ELEMENT_ID__:J});let Rn=0;function Dr(i){return Nt(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||j,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Oe.Emulated,id:"c",styles:i.styles||j,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,h=i.features,m=i.pipes;return l.id+=Rn++,l.inputs=Io(i.inputs,a),l.outputs=Io(i.outputs),h&&h.forEach(v=>v(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(hr):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(Co):null,l})}function hr(i){return Zn(i)||function(i){return i[ye]||null}(i)}function Co(i){return function(i){return i[se]||null}(i)}const Gu={};function To(i){return Nt(()=>{const s={type:i.type,bootstrap:i.bootstrap||j,declarations:i.declarations||j,imports:i.imports||j,exports:i.exports||j,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Gu[i.id]=i.type),s})}function qu(i,s){return Nt(()=>{const a=Ti(i,!0);a.declarations=s.declarations||j,a.imports=s.imports||j,a.exports=s.exports||j})}function Io(i,s){if(null==i)return W;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const hc=Dr;function Ci(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zn(i){return i[Z]||null}function Ti(i,s){const a=i[Ve]||null;if(!a&&!0===s)throw new Error(`Type ${K(i)} does not have '\u0275mod' property.`);return a}function un(i){return Array.isArray(i)&&"object"==typeof i[1]}function gr(i){return Array.isArray(i)&&!0===i[1]}function qd(i){return 0!=(8&i.flags)}function za(i){return 2==(2&i.flags)}function Gr(i){return 1==(1&i.flags)}function Hi(i){return null!==i.template}function Gi(i){return 0!=(512&i[2])}function as(i,s){return i.hasOwnProperty(Vt)?i[Vt]:null}class Ja{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function hn(){return Qa}function Qa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ir),Jg}function Jg(){const i=zu(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===W)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Ir(i,s,a,l){const d=zu(i)||function(i,s){return i[us]=s}(i,{previous:W,current:null}),h=d.current||(d.current={}),m=d.previous,v=this.declaredInputs[a],E=m[v];h[v]=new Ja(E&&E.currentValue,s,m===W),i[l]=s}hn.ngInherit=!0;const us="__ngSimpleChanges__";function zu(i){return i[us]||null}let ca;function No(i){ca=i}function Js(){return void 0!==ca?ca:"undefined"!=typeof document?document:void 0}function Xt(i){return!!i.listen}const ls={createRenderer:(i,s)=>Js()};function qt(i){for(;Array.isArray(i);)i=i[0];return i}function Mo(i,s){return qt(s[i])}function di(i,s){return qt(s[i.index])}function Qs(i,s){return i.data[s]}function Xs(i,s){return i[s]}function mr(i,s){const a=s[i];return un(a)?a:a[0]}function Ju(i){return 4==(4&i[2])}function Qu(i){return 128==(128&i[2])}function kn(i,s){return null==s?null:i[s]}function eu(i){i[18]=0}function tu(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const st={lFrame:Ec(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nu(){return st.bindingsEnabled}function ve(){return st.lFrame.lView}function Et(){return st.lFrame.tView}function tl(i){return st.lFrame.contextLView=i,i[8]}function rn(){let i=nl();for(;null!==i&&64===i.type;)i=i.parent;return i}function nl(){return st.lFrame.currentTNode}function cs(){const i=st.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}function Sr(i,s){const a=st.lFrame;a.currentTNode=i,a.isParent=s}function ha(){return st.lFrame.isParent}function ru(){st.lFrame.isParent=!1}function fa(){return st.isInCheckNoChangesMode}function pa(i){st.isInCheckNoChangesMode=i}function On(){const i=st.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Si(){return st.lFrame.bindingIndex}function Wi(){return st.lFrame.bindingIndex++}function Ar(i){const s=st.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function rl(i){st.lFrame.inI18n=i}function su(i,s){const a=st.lFrame;a.bindingIndex=a.bindingRootIndex=i,ou(s)}function ou(i){st.lFrame.currentDirectiveIndex=i}function il(){return st.lFrame.currentQueryIndex}function ga(i){st.lFrame.currentQueryIndex=i}function ma(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function wc(i,s,a){if(a&Ge.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&Ge.Host||(d=ma(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=st.lFrame=sh();return l.currentTNode=s,l.lView=i,!0}function Ro(i){const s=sh(),a=i[1];st.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function sh(){const i=st.lFrame,s=null===i?null:i.child;return null===s?Ec(i):s}function Ec(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function oh(){const i=st.lFrame;return st.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ah=oh;function Ns(){const i=oh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Yn(){return st.lFrame.selectedIndex}function _a(i){st.lFrame.selectedIndex=i}function _n(){const i=st.lFrame;return Qs(i.tView,i.selectedIndex)}function sl(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:D,ngOnDestroy:A}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),D&&((i.viewHooks||(i.viewHooks=[])).push(a,D),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,D)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(a,A)}}function to(i,s,a){Cc(i,s,3,a)}function lu(i,s,a,l){(3&i[2])===a&&Cc(i,s,a,l)}function En(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Cc(i,s,a,l){const h=null!=l?l:-1,m=s.length-1;let v=0;for(let E=void 0!==l?65535&i[18]:0;E<m;E++)if("number"==typeof s[E+1]){if(v=s[E],null!=l&&v>=l)break}else s[E]<0&&(i[18]+=65536),(v<h||-1==h)&&(Wf(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Wf(i,s,a,l){const d=a[l]<0,h=a[l+1],v=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class va{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ch(i,s,a){const l=Xt(i);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const m=a[d++],v=a[d++],E=a[d++];l?i.setAttribute(s,v,E,m):s.setAttributeNS(m,v,E)}else{const m=h,v=a[++d];Rs(m)?l&&i.setProperty(s,m,v):l?i.setAttribute(s,m,v):s.setAttribute(m,v),d++}}return d}function Zf(i){return 3===i||4===i||6===i}function Rs(i){return 64===i.charCodeAt(0)}function ol(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Yf(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Yf(i,s,a,l,d){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Ic(i){return-1!==i}function ro(i){return 32767&i}function hi(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let cu=!0;function wa(i){const s=cu;return cu=i,s}let fh=0;function du(i,s){const a=Zt(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,xo(l.data,i),xo(s,null),xo(l.blueprint,null));const d=Be(i,s),h=i.injectorIndex;if(Ic(d)){const m=ro(d),v=hi(d,s),E=v[1].data;for(let D=0;D<8;D++)s[h+D]=v[m+D]|E[m+D]}return s[h+8]=d,h}function xo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Zt(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Be(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const h=d[1],m=h.type;if(l=2===m?h.declTNode:1===m?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Yt(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Mn)&&(l=a[Mn]),null==l&&(l=a[Mn]=fh++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function yn(i,s,a){if(a&Ge.Optional)return i;It(s,"NodeInjector")}function xs(i,s,a,l){if(a&Ge.Optional&&void 0===l&&(l=null),0==(a&(Ge.Self|Ge.Host))){const d=i[9],h=si(void 0);try{return d?d.get(s,l,a&Ge.Optional):et(s,l,a&Ge.Optional)}finally{si(h)}}return yn(l,s,a)}function ko(i,s,a,l=Ge.Default,d){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Mn)?i[Mn]:void 0;return"number"==typeof s?s>=0?255&s:hu:s}(a);if("function"==typeof h){if(!wc(s,i,l))return l&Ge.Host?yn(d,a,l):xs(s,a,l,d);try{const m=h(l);if(null!=m||l&Ge.Optional)return m;It(a)}finally{ah()}}else if("number"==typeof h){let m=null,v=Zt(i,s),E=-1,D=l&Ge.Host?s[16][6]:null;for((-1===v||l&Ge.SkipSelf)&&(E=-1===v?Be(i,s):s[v+8],-1!==E&&fu(l,!1)?(m=s[1],v=ro(E),s=hi(E,s)):v=-1);-1!==v;){const A=s[1];if(Ea(h,v,A.data)){const k=tm(v,s,a,m,l,D);if(k!==sn)return k}E=s[v+8],-1!==E&&fu(l,s[1].data[v+8]===D)&&Ea(h,v,s)?(m=A,v=ro(E),s=hi(E,s)):v=-1}}}return xs(s,a,l,d)}const sn={};function hu(){return new ds(rn(),ve())}function tm(i,s,a,l,d,h){const m=s[1],v=m.data[i+8],A=io(v,m,a,null==l?za(v)&&cu:l!=m&&0!=(3&v.type),d&Ge.Host&&h===v);return null!==A?Dn(s,m,A,v):sn}function io(i,s,a,l,d){const h=i.providerIndexes,m=s.data,v=1048575&h,E=i.directiveStart,A=h>>20,O=d?v+A:i.directiveEnd;for(let H=l?v:v+A;H<O;H++){const Y=m[H];if(H<E&&a===Y||H>=E&&Y.type===a)return H}if(d){const H=m[E];if(H&&Hi(H)&&H.type===a)return E}return null}function Dn(i,s,a,l){let d=i[a];const h=s.data;if(function(i){return i instanceof va}(d)){const m=d;m.resolving&&function(i,s){throw new Me("200",`Circular dependency in DI detected for ${i}`)}(re(h[a]));const v=wa(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?si(m.injectImpl):null;wc(i,l,Ge.Default);try{d=i[a]=m.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const m=Qa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==E&&si(E),wa(v),m.resolving=!1,ah()}}return d}function Ea(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fu(i,s){return!(i&Ge.Self||i&Ge.Host&&s)}class ds{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ko(this._tNode,this._lView,s,l,a)}}function ul(i){return Nt(()=>{const s=i.prototype.constructor,a=s[Vt]||pu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[Vt]||pu(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function pu(i){return de(i)?()=>{const s=pu(G(i));return s&&s()}:as(i)}function ph(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(Zf(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(rn(),i)}const ks="__parameters__";function Yi(i,s,a){return Nt(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const m=new d(...h);return v.annotation=m,v;function v(E,D,A){const k=E.hasOwnProperty(ks)?E[ks]:Object.defineProperty(E,ks,{value:[]})[ks];for(;k.length<=A;)k.push(null);return(k[A]=k[A]||[]).push(m),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=an({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const mh=new cn("AnalyzeForEntryComponents"),Os=Function;function fi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),fi(l,s)):s!==i&&s.push(l)}return s}function hs(i,s){i.forEach(a=>Array.isArray(a)?hs(a,s):s(a))}function mu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Mi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Ps(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function Kn(i,s,a){let l=Ca(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function bn(i,s){const a=Ca(i,s);if(a>=0)return i[1|a]}function Ca(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),m=i[h<<a];if(s===m)return h<<a;m>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const Rt={},en="__NG_DI_FLAG__",Fn="ngTempTokenPath",Jn=/\n/gm,Lo="__source",Ki=J({provide:String,useValue:J});let Ji;function lt(i){const s=Ji;return Ji=i,s}function Qf(i,s=Ge.Default){if(void 0===Ji)throw new Error("inject() must be called from an injection context");return null===Ji?et(i,void 0,s):Ji.get(i,s&Ge.Optional?null:void 0,s)}function fn(i,s=Ge.Default){return($t||Qf)(G(i),s)}function _u(i){const s=[];for(let a=0;a<i.length;a++){const l=G(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,h=Ge.Default;for(let m=0;m<l.length;m++){const v=l[m],E=Xf(v);"number"==typeof E?-1===E?d=v.token:h|=E:d=v}s.push(fn(d,h))}else s.push(fn(l))}return s}function yu(i,s){return i[en]=s,i.prototype[en]=s,i}function Xf(i){return i[en]}function Qi(i,s,a,l){const d=i[Fn];throw s[Lo]&&d.unshift(s[Lo]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=K(s);if(Array.isArray(s))d=s.map(K).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):K(v)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Jn,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Fn]=null,i}const Ta=yu(Yi("Inject",i=>({token:i})),-1),Ia=yu(Yi("Optional"),8),or=yu(Yi("SkipSelf"),4);let _l;function Uo(i){var s;return(null===(s=function(){if(void 0===_l&&(_l=null,pt.trustedTypes))try{_l=pt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return _l}())||void 0===s?void 0:s.createHTML(i))||i}class bu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class uv extends bu{getTypeName(){return"HTML"}}class lv extends bu{getTypeName(){return"Style"}}class Eh extends bu{getTypeName(){return"Script"}}class cv extends bu{getTypeName(){return"URL"}}class dv extends bu{getTypeName(){return"ResourceURL"}}function jo(i){return i instanceof bu?i.changingThisBreaksApplicationSecurity:i}function bl(i,s){const a=Dh(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Dh(i){return i instanceof bu&&i.getTypeName()||null}function dm(i){return new uv(i)}function rp(i){return new lv(i)}function ip(i){return new Eh(i)}function $o(i){return new cv(i)}function Vc(i){return new dv(i)}function Ch(i){const s=new hv(i);return function(){try{return!!(new window.DOMParser).parseFromString(Uo(""),"text/html")}catch(i){return!1}}()?new hm(s):s}class hm{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Uo(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class hv{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Uo(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Uo(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const m=a.item(d).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const fm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Th=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Aa(i){return(i=String(i)).match(fm)||i.match(Th)?i:"unsafe:"+i}function Ih(i){return(i=String(i)).split(",").map(s=>Aa(s.trim())).join(", ")}function fs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function wu(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const El=fs("area,br,col,hr,img,wbr"),gm=fs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dl=fs("rp,rt"),sp=wu(El,wu(gm,fs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wu(Dl,fs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wu(Dl,gm)),Bc=fs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xi=fs("srcset"),Uc=wu(Bc,Xi,fs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pv=fs("script,style,template");class jc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!sp.hasOwnProperty(a))return this.sanitizedSomething=!0,!pv.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const h=l.item(d),m=h.name,v=m.toLowerCase();if(!Uc.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let E=h.value;Bc[v]&&(E=Aa(E)),Xi[v]&&(E=Ih(E)),this.buf.push(" ",m,'="',Sh(E),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();sp.hasOwnProperty(a)&&!El.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Sh(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const gv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mv=/([^\#-~ |!])/g;function Sh(i){return i.replace(/&/g,"&amp;").replace(gv,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(mv,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $c;function Hc(i,s){let a=null;try{$c=$c||Ch(i);let l=s?String(s):"";a=$c.getInertBodyElement(l);let d=5,h=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=h,h=a.innerHTML,a=$c.getInertBodyElement(l)}while(l!==h);return Uo((new jc).sanitizeChildren(Gc(a)||a))}finally{if(a){const l=Gc(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Gc(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function ap(i){const s=function(){const i=ve();return i&&i[12]}();return s?s.sanitize(Ln.URL,i)||"":bl(i,"URL")?jo(i):Aa(X(i))}const Eu="__ngContext__";function Mr(i,s){i[Eu]=s}function hp(i){const s=function(i){return i[Eu]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ma(i){return i.ngOriginalError}function _p(i,...s){i.error(...s)}class Ra{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||_p;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Ma(s)):null}_findOriginalError(s){let a=s&&Ma(s);for(;a&&Ma(a);)a=Ma(a);return a||null}}const wv=/^>|^->|<!--|-->|--!>|<!-$/g,uo=/(<|>)/;const Im=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pt))();function ps(i){return i instanceof Function?i():i}var y=(()=>((y=y||{})[y.Important=1]="Important",y[y.DashCase=2]="DashCase",y))();let p;function g(i,s){return p(i,s)}function M(i){const s=i[3];return gr(s)?s[3]:s}function xe(i){return $e(i[13])}function Ie(i){return $e(i[4])}function $e(i){for(;null!==i&&!gr(i);)i=i[4];return i}function Dt(i,s,a,l,d){if(null!=l){let h,m=!1;gr(l)?h=l:un(l)&&(m=!0,l=l[0]);const v=qt(l);0===i&&null!==a?null==d?A1(s,a,v):Nl(s,a,v,d||null,!0):1===i&&null!==a?Nl(s,a,v,d||null,!0):2===i?Tv(s,v,m):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,l,d){const h=a[7];h!==qt(a)&&Dt(s,i,l,h,d);for(let v=10;v<a.length;v++){const E=a[v];Jc(E[1],E,i,s,l,h)}}(s,i,h,a,d)}}function Wn(i,s){return Xt(i)?i.createText(s):i.createTextNode(s)}function qo(i,s,a){Xt(i)?i.setValue(s,a):s.textContent=a}function kh(i,s){return i.createComment(function(i){return i.replace(wv,s=>s.replace(uo,"\u200b$1\u200b"))}(s))}function zc(i,s,a){return Xt(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function Yc(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,tu(d,-1)),a.splice(l,1)}function Oh(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Yc(d,l),s>0&&(i[a-1][4]=l[4]);const h=Mi(i,10+s);!function(i,s){Jc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const m=h[19];null!==m&&m.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Ph(i,s){if(!(256&s[2])){const a=s[11];Xt(a)&&a.destroyNode&&Jc(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return xa(i[1],i);for(;s;){let a=null;if(un(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)un(s)&&xa(s[1],s),s=s[3];null===s&&(s=i),un(s)&&xa(s[1],s),a=s&&s[4]}s=a}}(s)}}function xa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof va)){const h=a[l+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=d[h[m]],E=h[m+1];try{E.call(v)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],v="function"==typeof m?m(s):qt(s[m]),E=l[d=a[h+2]],D=a[h+3];"boolean"==typeof D?v.removeEventListener(a[h],E,D):D>=0?l[d=D]():l[d=-D].unsubscribe(),h+=2}else{const m=l[d=a[h+1]];a[h].call(m)}if(null!==l){for(let h=d+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Xt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&gr(s[3])){a!==s[3]&&Yc(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function I1(i,s,a){return S1(i,s.parent,a)}function S1(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Oe.None||d===Oe.Emulated)return null}return di(l,a)}function Nl(i,s,a,l,d){Xt(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function A1(i,s,a){Xt(i)?i.appendChild(s,a):s.appendChild(a)}function N1(i,s,a,l,d){null!==l?Nl(i,s,a,l,d):A1(i,s,a)}function km(i,s){return Xt(i)?i.parentNode(s):s.parentNode}function Pm(i,s,a){return Kc(i,s,a)}function Fm(i,s,a){return 40&i.type?di(i,a):null}let Ev,Kc=Fm;function M1(i,s){Kc=i,Ev=s}function vp(i,s,a,l){const d=I1(i,l,s),h=s[11],v=Pm(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)N1(h,d,a[E],v,!1);else N1(h,d,a,v,!1);void 0!==Ev&&Ev(h,l,s,a,d)}function Lm(i,s){if(null!==s){const a=s.type;if(3&a)return di(s,i);if(4&a)return Cv(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Lm(i,l);{const d=i[s.index];return gr(d)?Cv(-1,d):qt(d)}}if(32&a)return g(s,i)()||qt(i[s.index]);{const l=Dv(i,s);return null!==l?Array.isArray(l)?l[0]:Lm(M(i[16]),l):Lm(i,s.next)}}return null}function Dv(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Cv(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return Lm(l,d)}return s[7]}function Tv(i,s,a){const l=km(i,s);l&&function(i,s,a,l){Xt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}function Vm(i,s,a,l,d,h,m){for(;null!=a;){const v=l[a.index],E=a.type;if(m&&0===s&&(v&&Mr(qt(v),l),a.flags|=4),64!=(64&a.flags))if(8&E)Vm(i,s,a.child,l,d,h,!1),Dt(s,i,d,v,h);else if(32&E){const D=g(a,l);let A;for(;A=D();)Dt(s,i,d,A,h);Dt(s,i,d,v,h)}else 16&E?Ml(i,s,l,a,d,h):Dt(s,i,d,v,h);a=m?a.projectionNext:a.next}}function Jc(i,s,a,l,d,h){Vm(a,l,i.firstChild,s,d,h,!1)}function Ml(i,s,a,l,d,h){const m=a[16],E=m[6].projection[l.projection];if(Array.isArray(E))for(let D=0;D<E.length;D++)Dt(s,i,d,E[D],h);else Vm(i,s,E,m[3],d,h,!0)}function x1(i,s,a){Xt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Iv(i,s,a){Xt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Sv(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const k1="ng-template";function wI(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Sv(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Av(i){return 4===i.type&&i.value!==k1}function EI(i,s,a){return s===(4!==i.type||a?i.value:k1)}function DI(i,s,a){let l=4;const d=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(Zf(i[s]))return s;return i.length}(d);let m=!1;for(let v=0;v<s.length;v++){const E=s[v];if("number"!=typeof E){if(!m)if(4&l){if(l=2|1&l,""!==E&&!EI(i,E,a)||""===E&&1===s.length){if(Wo(l))return!1;m=!0}}else{const D=8&l?E:s[++v];if(8&l&&null!==i.attrs){if(!wI(i.attrs,D,a)){if(Wo(l))return!1;m=!0}continue}const k=Nv(8&l?"class":E,d,Av(i),a);if(-1===k){if(Wo(l))return!1;m=!0;continue}if(""!==D){let O;O=k>h?"":d[k+1].toLowerCase();const H=8&l?O:null;if(H&&-1!==Sv(H,D,0)||2&l&&D!==O){if(Wo(l))return!1;m=!0}}}}else{if(!m&&!Wo(l)&&!Wo(E))return!1;if(m&&Wo(E))continue;m=!1,l=E|1&l}}return Wo(l)||m}function Wo(i){return 0==(1&i)}function Nv(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const m=s[d];if(m===i)return d;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++d];for(;"string"==typeof v;)v=s[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function O1(i,s,a=!1){for(let l=0;l<s.length;l++)if(DI(i,s[l],a))return!0;return!1}function Tx(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function F1(i,s){return i?":not("+s.trim()+")":s}function II(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&l){const v=i[++a];d+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&l?d+="."+m:4&l&&(d+=" "+m);else""!==d&&!Wo(m)&&(s+=F1(h,d),d=""),l=m,h=h||!Wo(l);a++}return""!==d&&(s+=F1(h,d)),s}const Ze={};function Mv(i){L1(Et(),ve(),Yn()+i,fa())}function L1(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&to(s,h,a)}else{const h=i.preOrderHooks;null!==h&&lu(s,h,0,a)}_a(a)}function Bm(i,s){return i<<17|s<<2}function zo(i){return i>>17&32767}function Um(i){return 2|i}function Iu(i){return(131068&i)>>2}function jm(i,s){return-131069&i|s<<2}function Rv(i){return 1|i}function qm(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const m=i.data[h];ga(d),m.contentQueries(2,s[h],h)}}}function ur(i,s,a,l,d,h,m,v,E,D){const A=s.blueprint.slice();return A[0]=d,A[2]=140|l,eu(A),A[3]=A[15]=i,A[8]=a,A[10]=m||i&&i[10],A[11]=v||i&&i[11],A[12]=E||i&&i[12]||null,A[9]=D||i&&i[9]||null,A[6]=h,A[16]=2==s.type?i[16]:A,A}function Fs(i,s,a,l,d){let h=i.data[s];if(null===h)h=Vv(i,s,a,l,d),st.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const m=cs();h.injectorIndex=null===m?-1:m.injectorIndex}return Sr(h,!0),h}function Vv(i,s,a,l,d){const h=nl(),m=ha(),E=i.data[s]=function(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=E),null!==h&&(m?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E)),E}function Ep(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Fh(i,s,a){Ro(s);try{const l=i.viewQuery;null!==l&&dE(1,l,a);const d=i.template;null!==d&&Bv(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&qm(i,s),i.staticViewQueries&&dE(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)Qm(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Ns()}}function ed(i,s,a,l){const d=s[2];if(256==(256&d))return;Ro(s);const h=fa();try{eu(s),function(i){st.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Bv(i,s,a,2,l);const m=3==(3&d);if(!h)if(m){const D=i.preOrderCheckHooks;null!==D&&to(s,D,null)}else{const D=i.preOrderHooks;null!==D&&lu(s,D,0,null),En(s,0)}if(function(i){for(let s=xe(i);null!==s;s=Ie(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(1024&d[2])&&tu(h,1),d[2]|=1024}}}(s),function(i){for(let s=xe(i);null!==s;s=Ie(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Qu(l)&&ed(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&qm(i,s),!h)if(m){const D=i.contentCheckHooks;null!==D&&to(s,D)}else{const D=i.contentHooks;null!==D&&lu(s,D,1),En(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)_a(~d);else{const h=d,m=a[++l],v=a[++l];su(m,h),v(2,s[h])}}}finally{_a(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)Cp(i,s[a])}(s,v);const E=i.viewQuery;if(null!==E&&dE(2,E,l),!h)if(m){const D=i.viewCheckHooks;null!==D&&to(s,D)}else{const D=i.viewHooks;null!==D&&lu(s,D,2),En(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,tu(s[3],-1))}finally{Ns()}}function K1(i,s,a,l){const d=s[10],h=!fa(),m=Ju(s);try{h&&!m&&d.begin&&d.begin(),m&&Fh(i,s,l),ed(i,s,a,l)}finally{h&&!m&&d.end&&d.end()}}function Bv(i,s,a,l,d){const h=Yn(),m=2&l;try{_a(-1),m&&s.length>20&&L1(i,s,20,fa()),a(l,d)}finally{_a(h)}}function Uv(i,s,a){if(qd(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}function Wm(i,s,a){!nu()||(function(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||du(a,s),Mr(l,s);const m=a.initialInputs;for(let v=d;v<h;v++){const E=i.data[v],D=Hi(E);D&&BI(s,a,E);const A=Dn(s,i,v,a);Mr(A,s),null!==m&&Vx(0,v-d,A,E,0,m),D&&(mr(a.index,s)[8]=A)}}(i,s,a,di(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,m=a.index,v=st.lFrame.currentDirectiveIndex;try{_a(m);for(let E=l;E<d;E++){const D=i.data[E],A=s[E];ou(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&LI(D,A)}}finally{_a(-1),ou(v)}}(i,s,a))}function zm(i,s,a=di){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const m=l[h+1],v=-1===m?a(s,i):i[m];i[d++]=v}}}function jv(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Zo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Zo(i,s,a,l,d,h,m,v,E,D){const A=20+l,k=A+d,O=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ze);return a}(A,k),H="function"==typeof D?D():D;return O[1]={type:i,blueprint:O,template:a,queries:null,viewQuery:v,declTNode:s,data:O.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:H,incompleteFirstPass:!1}}function Q1(i,s,a,l){const d=hE(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Yv(i).push(l,d.length-1))}function Gv(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function ts(i,s,a,l,d,h,m,v){const E=di(s,a);let A,D=s.inputs;!v&&null!=D&&(A=D[l])?(qI(i,a,A,l,d),za(s)&&function(i,s){const a=mr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=m?m(d,s.value||"",l):d,Xt(h)?h.setProperty(E,l,d):Rs(l)||(E.setProperty?E.setProperty(l,d):E[l]=d))}function Zm(i,s,a,l){let d=!1;if(nu()){const h=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const m=l[h];O1(a,m.selectors,!1)&&(d||(d=[]),Yt(du(a,s),i,m.type),Hi(m)?(oE(i,a),d.unshift(m)):d.push(m))}return d}(i,s,a),m=null===l?null:{"":-1};if(null!==h){d=!0,aE(a,i.data.length,h.length);for(let A=0;A<h.length;A++){const k=h[A];k.providersResolver&&k.providersResolver(k)}let v=!1,E=!1,D=Ep(i,s,h.length,null);for(let A=0;A<h.length;A++){const k=h[A];a.mergedAttrs=ol(a.mergedAttrs,k.hostAttrs),Km(i,a,s,D,k),Ym(D,k,m),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const O=k.type.prototype;!v&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(O.ngOnChanges||O.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),D++}!function(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,m=[];let v=null,E=null;for(let D=s.directiveStart;D<l;D++){const A=d[D],k=A.inputs,O=null===h||Av(s)?null:Bx(k,h);m.push(O),v=Gv(k,D,v),E=Gv(A.outputs,D,E)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=E}(i,a)}m&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new Me("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],h)}}}(a,l,m)}return a.mergedAttrs=ol(a.mergedAttrs,a.attrs),d}function Ri(i,s,a,l,d,h){const m=h.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(l,d,m)}}function LI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function oE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ym(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Hi(s)&&(a[""]=i)}}function aE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Km(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=as(d.type)),m=new va(h,Hi(d),null);i.blueprint[l]=m,a[l]=m,Ri(i,s,0,l,Ep(i,a,d.hostVars,Ze),d)}function BI(i,s,a){const l=di(s,i),d=jv(a),h=i[10],m=Vh(i,ur(i,d,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=m}function uE(i,s,a,l,d,h,m){if(null==h)Xt(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const v=null==m?X(h):m(h,l||"",d);Xt(i)?i.setAttribute(s,d,v,a):a?s.setAttributeNS(a,d,v):s.setAttribute(d,v)}}function Vx(i,s,a,l,d,h){const m=h[s];if(null!==m){const v=l.setInput;for(let E=0;E<m.length;){const D=m[E++],A=m[E++],k=m[E++];null!==v?l.setInput(a,k,D,A):a[A]=k}}}function Bx(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function UI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Cp(i,s){const a=mr(s,i);if(Qu(a)){const l=a[1];80&a[2]?ed(l,a,l.template,a[8]):a[5]>0&&Lh(a)}}function Lh(i){for(let l=xe(i);null!==l;l=Ie(l))for(let d=10;d<l.length;d++){const h=l[d];if(1024&h[2]){const m=h[1];ed(m,h,m.template,h[8])}else h[5]>0&&Lh(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=mr(a[l],i);Qu(d)&&d[5]>0&&Lh(d)}}function Qm(i,s){const a=mr(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Fh(l,a,a[8])}function Vh(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Bh(i){for(;i;){i[2]|=64;const s=M(i);if(Gi(i)&&!s)return i;i=s}return null}function Xm(i,s,a){const l=s[10];l.begin&&l.begin();try{ed(i,s,i.template,a)}catch(d){throw Tp(s,d),d}finally{l.end&&l.end()}}function lE(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=hp(a),d=l[1];K1(d,l,d.template,a)}}(i[8])}function dE(i,s,a){ga(0),s(i,a)}const Zv=(()=>Promise.resolve(null))();function hE(i){return i[7]||(i[7]=[])}function Yv(i){return i.cleanup||(i.cleanup=[])}function Tp(i,s){const a=i[9],l=a?a.get(Ra,null):null;l&&l.handleError(s)}function qI(i,s,a,l,d){for(let h=0;h<a.length;){const m=a[h++],v=a[h++],E=s[m],D=i.data[m];null!==D.setInput?D.setInput(E,d,l,v):E[v]=d}}function td(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?d=z(d,v):2==h&&(l=z(l,v+": "+s[++m]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Ol=new cn("INJECTOR",-1);class Kv{get(s,a=Rt){if(a===Rt){const l=new Error(`NullInjectorError: No provider for ${K(s)}!`);throw l.name="NullInjectorError",l}return a}}const nd=new cn("Set Injector scope."),jh={},Jv={};let Sp;function Ap(){return void 0===Sp&&(Sp=new Kv),Sp}function fE(i,s=null,a=null,l){return new WI(i,a,s||Ap(),l)}class WI{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&hs(a,v=>this.processProvider(v,s,a)),hs([s],v=>this.processInjectorType(v,[],h)),this.records.set(Ol,Mp(void 0,this));const m=this.records.get(nd);this.scope=null!=m?m.value:null,this.source=d||("object"==typeof s?null:K(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Rt,l=Ge.Default){this.assertNotDestroyed();const d=lt(this),h=si(void 0);try{if(!(l&Ge.SkipSelf)){let v=this.records.get(s);if(void 0===v){const E=("function"==typeof(i=s)||"object"==typeof i&&i instanceof cn)&&rr(s);v=E&&this.injectableDefInScope(E)?Mp(pE(s),jh):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(l&Ge.Self?Ap():this.parent).get(s,a=l&Ge.Optional&&a===Rt?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[Fn]=m[Fn]||[]).unshift(K(s)),d)throw m;return Qi(m,s,"R3InjectorError",this.source)}throw m}finally{si(h),lt(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(K(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=G(s)))return!1;let d=Ui(s);const h=null==d&&s.ngModule||void 0,m=void 0===h?s:h,v=-1!==l.indexOf(m);if(void 0!==h&&(d=Ui(h)),null==d)return!1;if(null!=d.imports&&!v){let A;l.push(m);try{hs(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===A&&(A=[]),A.push(k))})}finally{}if(void 0!==A)for(let k=0;k<A.length;k++){const{ngModule:O,providers:H}=A[k];hs(H,Y=>this.processProvider(Y,O,H||j))}}this.injectorDefTypes.add(m);const E=as(m)||(()=>new m);this.records.set(m,Mp(E,jh));const D=d.providers;if(null!=D&&!v){const A=s;hs(D,k=>this.processProvider(k,A,D))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let d=$h(s=G(s))?s:G(s&&s.provide);const h=zI(i=s)?Mp(void 0,i.useValue):Mp(e0(i),jh);var i;if($h(s)||!0!==s.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=Mp(void 0,jh,!0),m.factory=()=>_u(m.multi),this.records.set(d,m)),d=s,m.multi.push(s)}this.records.set(d,h)}hydrate(s,a){return a.value===jh&&(a.value=Jv,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=G(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function pE(i){const s=rr(i),a=null!==s?s.factory:as(i);if(null!==a)return a;if(i instanceof cn)throw new Error(`Token ${K(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=Ps(s,"?");throw new Error(`Can't resolve all parameters for ${K(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[os]||i[ir]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function e0(i,s,a){let l;if($h(i)){const d=G(i);return as(d)||pE(d)}if(zI(i))l=()=>G(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(..._u(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>fn(G(i.useExisting));else{const d=G(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return as(d)||pE(d);l=()=>new d(..._u(i.deps))}return l}function Mp(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function zI(i){return null!==i&&"object"==typeof i&&Ki in i}function $h(i){return"function"==typeof i}const _E=function(i,s,a){return function(i,s=null,a=null,l){const d=fE(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let Sn=(()=>{class i{static create(a,l){return Array.isArray(a)?_E(a,l,""):_E(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=Rt,i.NULL=new Kv,i.\u0275prov=an({token:i,providedIn:"any",factory:()=>fn(Ol)}),i.__NG_ELEMENT_ID__=-1,i})();function RE(i,s){sl(hp(i)[1],rn())}function p0(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(Hi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const m=i;m.inputs=kE(i.inputs),m.declaredInputs=kE(i.declaredInputs),m.outputs=kE(i.outputs);const v=d.hostBindings;v&&OE(i,v);const E=d.viewQuery,D=d.contentQueries;if(E&&Yx(i,E),D&&Kx(i,D),oe(i.inputs,d.inputs),oe(i.declaredInputs,d.declaredInputs),oe(i.outputs,d.outputs),Hi(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let m=0;m<h.length;m++){const v=h[m];v&&v.ngInherit&&v(i),v===p0&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=ol(d.hostAttrs,a=ol(a,d.hostAttrs))}}(l)}function kE(i){return i===W?{}:i===j?[]:i}function Yx(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function Kx(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function OE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let g0=null;function kp(){if(!g0){const i=pt.Symbol;if(i&&i.iterator)g0=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(g0=l)}}}return g0}class Ko{constructor(s){this.wrapped=s}static wrap(s){return new Ko(s)}static unwrap(s){return Ko.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof Ko}}function Op(i){return!!m0(i)&&(Array.isArray(i)||!(i instanceof Map)&&kp()in i)}function m0(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Oa(i,s,a){return i[s]=a}function lr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function rd(i,s,a,l){const d=lr(i,s,a);return lr(i,s+1,l)||d}function _0(i,s,a,l){const d=ve();return lr(d,Wi(),s)&&(Et(),function(i,s,a,l,d,h){const m=di(i,s);uE(s[11],m,h,i.value,a,l,d)}(_n(),d,i,s,a,l)),_0}function Gh(i,s,a,l){return lr(i,Wi(),a)?s+X(a)+l:Ze}function zh(i,s,a,l,d,h,m,v,E,D){const k=function(i,s,a,l,d,h){const m=rd(i,s,a,l);return rd(i,s+2,d,h)||m}(i,Si(),a,d,m,E);return Ar(4),k?s+X(a)+l+X(d)+h+X(m)+v+X(E)+D:Ze}function qE(i,s,a,l,d,h,m,v){const E=ve(),D=Et(),A=i+20,k=D.firstCreatePass?function(i,s,a,l,d,h,m,v,E){const D=s.consts,A=Fs(s,i,4,m||null,kn(D,v));Zm(s,a,A,kn(D,E)),sl(s,A);const k=A.tViews=Zo(2,A,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,D);return null!==s.queries&&(s.queries.template(s,A),k.queries=s.queries.embeddedTView(A)),A}(A,D,E,s,a,l,d,h,m):D.data[A];Sr(k,!1);const O=E[11].createComment("");vp(D,E,O,k),Mr(O,E),Vh(E,E[A]=UI(O,E,O,k)),Gr(k)&&Wm(D,E,k),null!=m&&zm(E,k,v)}function WE(i){return Xs(st.lFrame.contextLView,20+i)}function Fp(i,s=Ge.Default){const a=ve();return null===a?fn(i,s):ko(rn(),a,G(i),s)}function E0(i,s,a){const l=ve();return lr(l,Wi(),s)&&ts(Et(),_n(),l,i,s,l[11],a,!1),E0}function D0(i,s,a,l,d){const m=d?"class":"style";qI(i,a,s.inputs[m],m,l)}function C0(i,s,a,l){const d=ve(),h=Et(),m=20+i,v=d[11],E=d[m]=zc(v,s,st.lFrame.currentNamespace),D=h.firstCreatePass?function(i,s,a,l,d,h,m){const v=s.consts,D=Fs(s,i,2,d,kn(v,h));return Zm(s,a,D,kn(v,m)),null!==D.attrs&&td(D,D.attrs,!1),null!==D.mergedAttrs&&td(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(m,h,d,0,s,a,l):h.data[m];Sr(D,!0);const A=D.mergedAttrs;null!==A&&ch(v,E,A);const k=D.classes;null!==k&&Iv(v,E,k);const O=D.styles;null!==O&&x1(v,E,O),64!=(64&D.flags)&&vp(h,d,E,D),0===st.lFrame.elementDepthCount&&Mr(E,d),st.lFrame.elementDepthCount++,Gr(D)&&(Wm(h,d,D),Uv(h,D,d)),null!==l&&zm(d,D)}function T0(){let i=rn();ha()?ru():(i=i.parent,Sr(i,!1));const s=i;st.lFrame.elementDepthCount--;const a=Et();a.firstCreatePass&&(sl(a,i),qd(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&D0(a,s,ve(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&D0(a,s,ve(),s.stylesWithoutHost,!1)}function iD(i,s,a,l){C0(i,s,a,l),T0()}function I0(i,s,a){const l=ve(),d=Et(),h=i+20,m=d.firstCreatePass?function(i,s,a,l,d){const h=s.consts,m=kn(h,l),v=Fs(s,i,8,"ng-container",m);return null!==m&&td(v,m,!0),Zm(s,a,v,kn(h,d)),null!==s.queries&&s.queries.elementStart(s,v),v}(h,d,l,s,a):d.data[h];Sr(m,!0);const v=l[h]=l[11].createComment("");vp(d,l,v,m),Mr(v,l),Gr(m)&&(Wm(d,l,m),Uv(d,m,l)),null!=a&&zm(l,m)}function S0(){let i=rn();const s=Et();ha()?ru():(i=i.parent,Sr(i,!1)),s.firstCreatePass&&(sl(s,i),qd(i)&&s.queries.elementEnd(i))}function sD(){return ve()}function A0(i){return!!i&&"function"==typeof i.then}function oD(i){return!!i&&"function"==typeof i.subscribe}const N0=oD;function M0(i,s,a,l){const d=ve(),h=Et(),m=rn();return function(i,s,a,l,d,h,m,v){const E=Gr(l),A=i.firstCreatePass&&Yv(i),k=s[8],O=hE(s);let H=!0;if(3&l.type||v){const ne=di(l,s),Ne=v?v(ne):ne,ge=O.length,Ke=v?ht=>v(qt(ht[l.index])):l.index;if(Xt(a)){let ht=null;if(!v&&E&&(ht=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const m=d[h];if(m===a&&d[h+1]===l){const v=s[7],E=d[h+2];return v.length>E?v[E]:null}"string"==typeof m&&(h+=2)}return null}(i,s,d,l.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=h,ht.__ngLastListenerFn__=h,H=!1;else{h=Bn(l,s,k,h,!1);const Ut=a.listen(Ne,d,h);O.push(h,Ut),A&&A.push(d,Ke,ge,ge+1)}}else h=Bn(l,s,k,h,!0),Ne.addEventListener(d,h,m),O.push(h),A&&A.push(d,Ke,ge,m)}else h=Bn(l,s,k,h,!1);const Y=l.outputs;let le;if(H&&null!==Y&&(le=Y[d])){const ne=le.length;if(ne)for(let Ne=0;Ne<ne;Ne+=2){const wr=s[le[Ne]][le[Ne+1]].subscribe(h),Br=O.length;O.push(h,wr),A&&A.push(d,l.index,Br,-(Br+1))}}}(h,d,d[11],m,i,s,!!a,l),M0}function Bp(i,s,a,l){try{return!1!==a(l)}catch(d){return Tp(i,d),!1}}function Bn(i,s,a,l,d){return function h(m){if(m===Function)return l;const v=2&i.flags?mr(i.index,s):s;0==(32&s[2])&&Bh(v);let E=Bp(s,0,l,m),D=h.__ngNextListenerFn__;for(;D;)E=Bp(s,0,D,m)&&E,D=D.__ngNextListenerFn__;return d&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function Un(i=1){return function(i){return(st.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,st.lFrame.contextLView))[8]}(i)}function Fl(i,s){let a=null;const l=function(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let d=0;d<s.length;d++){const h=s[d];if("*"!==h){if(null===l?O1(i,h,!0):Tx(l,h))return d}else a=d}return a}function id(i){const s=ve()[16][6];if(!s.projection){const l=s.projection=Ps(i?i.length:1,null),d=l.slice();let h=s.child;for(;null!==h;){const m=i?Fl(h,i):0;null!==m&&(d[m]?d[m].projectionNext=h:l[m]=h,d[m]=h),h=h.next}}}function aD(i,s=0,a){const l=ve(),d=Et(),h=Fs(d,20+i,16,null,a||null);null===h.projection&&(h.projection=s),ru(),64!=(64&h.flags)&&function(i,s,a){Ml(s[11],0,s,a,I1(i,a,s),Pm(a.parent||s[6],a,s))}(d,l,h)}function o_(i,s,a){return a_(i,"",s,"",a),o_}function a_(i,s,a,l,d){const h=ve(),m=Gh(h,s,a,l);return m!==Ze&&ts(Et(),_n(),h,i,m,h[11],d,!1),a_}function _r(i,s,a,l,d){const h=i[a+1],m=null===s;let v=l?zo(h):Iu(h),E=!1;for(;0!==v&&(!1===E||m);){const A=i[v+1];LS(i[v],s)&&(E=!0,i[v+1]=l?Rv(A):Um(A)),v=l?zo(A):Iu(A)}E&&(i[a+1]=l?Um(h):Rv(h))}function LS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ca(i,s)>=0}const kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function u_(i){return i.substring(kr.key,kr.keyEnd)}function O0(i,s){const a=kr.textEnd;return a===s?-1:(s=kr.keyEnd=function(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,kr.key=s,a),od(i,s,a))}function od(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function jp(i,s,a){return ho(i,s,a,!1),jp}function F0(i,s){return ho(i,s,null,!0),F0}function mD(i){Jo(Kn,Au,i,!0)}function Au(i,s){for(let a=function(i){return function(i){kr.key=0,kr.keyEnd=0,kr.value=0,kr.valueEnd=0,kr.textEnd=i.length}(i),O0(i,od(i,0,kr.textEnd))}(s);a>=0;a=O0(s,a))Kn(i,u_(s),!0)}function ho(i,s,a,l){const d=ve(),h=Et(),m=Ar(2);h.firstUpdatePass&&L0(h,i,m,l),s!==Ze&&lr(d,m,s)&&bD(h,h.data[Yn()],d,d[11],i,d[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=K(jo(i)))),i}(s,a),l,m)}function Jo(i,s,a,l){const d=Et(),h=Ar(2);d.firstUpdatePass&&L0(d,null,h,l);const m=ve();if(a!==Ze&&lr(m,h,a)){const v=d.data[Yn()];if(ED(v,l)&&!Nu(d,h)){let E=l?v.classesWithoutHost:v.stylesWithoutHost;null!==E&&(a=z(E,a||"")),D0(d,v,m,a,l)}else!function(i,s,a,l,d,h,m,v){d===Ze&&(d=j);let E=0,D=0,A=0<d.length?d[0]:null,k=0<h.length?h[0]:null;for(;null!==A||null!==k;){const O=E<d.length?d[E+1]:void 0,H=D<h.length?h[D+1]:void 0;let le,Y=null;A===k?(E+=2,D+=2,O!==H&&(Y=k,le=H)):null===k||null!==A&&A<k?(E+=2,Y=A):(D+=2,Y=k,le=H),null!==Y&&bD(i,s,a,l,Y,le,m,v),A=E<d.length?d[E]:null,k=D<h.length?h[D]:null}}(d,v,m,m[11],m[h+1],m[h+1]=function(i,s,a){if(null==a||""===a)return j;const l=[],d=jo(a);if(Array.isArray(d))for(let h=0;h<d.length;h++)i(l,d[h],!0);else if("object"==typeof d)for(const h in d)d.hasOwnProperty(h)&&i(l,h,d[h]);else"string"==typeof d&&s(l,d);return l}(i,s,a),l,h)}}function Nu(i,s){return s>=i.expandoStartIndex}function L0(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[Yn()],m=Nu(i,a);ED(h,l)&&null===s&&!m&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=st.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Hp(a=_D(null,i,s,a,l),s.attrs,l),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==d)if(a=_D(d,i,s,a,l),null===h){let E=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Iu(l))return i[zo(l)]}(i,s,l);void 0!==E&&Array.isArray(E)&&(E=_D(null,i,s,E[1],l),E=Hp(E,s.attrs,l),function(i,s,a,l){i[zo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,E))}else h=function(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=Hp(l,i[h].hostAttrs,a);return Hp(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function(i,s,a,l,d,h){let m=h?s.classBindings:s.styleBindings,v=zo(m),E=Iu(m);i[l]=a;let A,D=!1;if(Array.isArray(a)){const k=a;A=k[1],(null===A||Ca(k,A)>0)&&(D=!0)}else A=a;if(d)if(0!==E){const O=zo(i[v+1]);i[l+1]=Bm(O,v),0!==O&&(i[O+1]=jm(i[O+1],l)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],l)}else i[l+1]=Bm(v,0),0!==v&&(i[v+1]=jm(i[v+1],l)),v=l;else i[l+1]=Bm(E,0),0===v?v=l:i[E+1]=jm(i[E+1],l),E=l;D&&(i[l+1]=Um(i[l+1])),_r(i,A,l,!0),_r(i,A,l,!1),function(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Ca(h,s)>=0&&(a[l+1]=Rv(a[l+1]))}(s,A,i,l,h),m=Bm(v,E),h?s.classBindings=m:s.styleBindings=m}(d,h,s,a,m,l)}}function _D(i,s,a,l,d){let h=null;const m=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<m&&(h=s[v],l=Hp(l,h.hostAttrs,d),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),l}function Hp(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?d=m:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Kn(i,m,!!a||s[++h]))}return void 0===i?null:i}function bD(i,s,a,l,d,h,m,v){if(!(3&s.type))return;const E=i.data,D=E[v+1];V0(function(i){return 1==(1&i)}(D)?Ll(E,s,a,d,Iu(D),m):void 0)||(V0(h)||function(i){return 2==(2&i)}(D)&&(h=Ll(E,null,a,d,v,m)),function(i,s,a,l,d){const h=Xt(i);if(s)d?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:y.DashCase;if(null==d)h?i.removeStyle(a,l,m):a.style.removeProperty(l);else{const v="string"==typeof d&&d.endsWith("!important");v&&(d=d.slice(0,-10),m|=y.Important),h?i.setStyle(a,l,d,m):a.style.setProperty(l,d,v?"important":"")}}}(l,m,Mo(Yn(),a),d,h))}function Ll(i,s,a,l,d,h){const m=null===s;let v;for(;d>0;){const E=i[d],D=Array.isArray(E),A=D?E[1]:E,k=null===A;let O=a[d+1];O===Ze&&(O=k?j:void 0);let H=k?bn(O,l):A===l?O:void 0;if(D&&!V0(H)&&(H=bn(E,l)),V0(H)&&(v=H,m))return v;const Y=i[d+1];d=m?zo(Y):Iu(Y)}if(null!==s){let E=h?s.residualClasses:s.residualStyles;null!=E&&(v=bn(E,l))}return v}function V0(i){return void 0!==i}function ED(i,s){return 0!=(i.flags&(s?16:32))}function HS(i,s=""){const a=ve(),l=Et(),d=i+20,h=l.firstCreatePass?Fs(l,d,1,s,null):l.data[d],m=a[d]=Wn(a[11],s);vp(l,a,m,h),Sr(h,!1)}function d_(i){return Xn("",i,""),d_}function Xn(i,s,a){const l=ve(),d=Gh(l,i,s,a);return d!==Ze&&function(i,s,a){const l=Mo(s,i);qo(i[11],l,a)}(l,Yn(),d),Xn}function ID(i,s,a,l,d,h,m,v,E){Jo(Kn,Au,zh(ve(),i,s,a,l,d,h,m,v,E),!0)}function f_(i,s,a){const l=ve();return lr(l,Wi(),s)&&ts(Et(),_n(),l,i,s,l[11],a,!0),f_}const Xh=void 0;var rA=["en",[["a","p"],["AM","PM"],Xh],[["AM","PM"],Xh,Xh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xh,"{1} 'at' {0}",Xh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let zp={};function g_(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=xD(s);if(a)return a;const l=s.split("-")[0];if(a=xD(l),a)return a;if("en"===l)return rA;throw new Error(`Missing locale data for the locale "${i}".`)}function W0(i){return g_(i)[ot.PluralCase]}function xD(i){return i in zp||(zp[i]=pt.ng&&pt.ng.common&&pt.ng.common.locales&&pt.ng.common.locales[i]),zp[i]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const sA=["zero","one","two","few","many"],m_="en-US",z0={marker:"element"},__={marker:"ICU"};var er=(()=>((er=er||{})[er.SHIFT=2]="SHIFT",er[er.APPEND_EAGERLY=1]="APPEND_EAGERLY",er[er.COMMENT=2]="COMMENT",er))();let oA=m_;function PD(i){(function(i,s){null==i&&jt(s,i,null,"!=")})(i,"Expected localeId to be defined"),"string"==typeof i&&(oA=i.toLowerCase().replace(/_/g,"-"))}function aA(i,s,a){const l=s.insertBeforeIndex,d=Array.isArray(l)?l[0]:l;return null===d?Fm(i,0,a):qt(a[d])}function uA(i,s,a,l,d){const h=s.insertBeforeIndex;if(Array.isArray(h)){let m=l,v=null;if(3&s.type||(v=m,m=d),null!==m&&0==(2&s.flags))for(let E=1;E<h.length;E++)Nl(i,m,a[h[E]],v,!1)}}function lA(i,s){if(i.push(s),i.length>1)for(let a=i.length-2;a>=0;a--){const l=i[a];cA(l)||_k(l,s)&&null===yk(l)&&vk(l,s.index)}}function cA(i){return!(64&i.type)}function _k(i,s){return cA(s)||i.index>s.index}function yk(i){const s=i.insertBeforeIndex;return Array.isArray(s)?s[0]:s}function vk(i,s){const a=i.insertBeforeIndex;Array.isArray(a)?a[0]=s:(M1(aA,uA),i.insertBeforeIndex=s)}function y_(i,s){const a=i.data[s];return null===a||"string"==typeof a?null:a.hasOwnProperty("currentCaseLViewIndex")?a:a.value}function wk(i,s,a){const l=Vv(i,a,64,null,null);return lA(s,l),l}function Z0(i,s){const a=s[i.currentCaseLViewIndex];return null===a?a:a<0?~a:a}function hA(i){return i>>>17}function fA(i){return(131070&i)>>>1}let ef=0,v_=0;function K0(i,s,a,l){const d=a[11];let m,h=null;for(let v=0;v<s.length;v++){const E=s[v];if("string"==typeof E){const D=s[++v];null===a[D]&&(a[D]=Wn(d,E))}else if("number"==typeof E)switch(1&E){case 0:const D=hA(E);let A,k;if(null===h&&(h=D,m=km(d,l)),D===h?(A=l,k=m):(A=null,k=qt(a[D])),null!==k){const le=fA(E);Nl(d,k,a[le],A,!1);const Ne=y_(i,le);if(null!==Ne&&"object"==typeof Ne){const ge=Z0(Ne,a);null!==ge&&K0(i,Ne.create[ge],a,a[Ne.anchorIdx])}}break;case 1:const H=s[++v],Y=s[++v];uE(d,Mo(E>>>1,a),null,null,H,Y,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${E}"`)}else switch(E){case __:const D=s[++v],A=s[++v];null===a[A]&&Mr(a[A]=kh(d,D),a);break;case z0:const k=s[++v],O=s[++v];null===a[O]&&Mr(a[O]=zc(d,k,null),a)}}}function b_(i,s,a,l,d){for(let h=0;h<a.length;h++){const m=a[h],v=a[++h];if(m&d){let E="";for(let D=h+1;D<=h+v;D++){const A=a[D];if("string"==typeof A)E+=A;else if("number"==typeof A)if(A<0)E+=X(s[l-A]);else{const k=A>>>2;switch(3&A){case 1:const O=a[++D],H=a[++D],Y=i.data[k];"string"==typeof Y?uE(s[11],s[k],null,Y,O,E,H):ts(i,Y,s,O,E,s[11],H,!1);break;case 0:const le=s[k];null!==le&&qo(s[11],le,E);break;case 2:gA(i,y_(i,k),s,E);break;case 3:FD(i,y_(i,k),l,s)}}}}else{const E=a[h+1];if(E>0&&3==(3&E)){const A=y_(i,E>>>2);s[A.currentCaseLViewIndex]<0&&FD(i,A,l,s)}}h+=v}}function FD(i,s,a,l){let d=l[s.currentCaseLViewIndex];if(null!==d){let h=ef;d<0&&(d=l[s.currentCaseLViewIndex]=~d,h=-1),b_(i,l,s.update[d],a,h)}}function gA(i,s,a,l){const d=function(i,s){let a=i.cases.indexOf(s);if(-1===a)switch(i.type){case 1:{const l=function(i,s){const a=W0(s)(parseInt(i,10)),l=sA[a];return void 0!==l?l:"other"}(s,oA);a=i.cases.indexOf(l),-1===a&&"other"!==l&&(a=i.cases.indexOf("other"));break}case 0:a=i.cases.indexOf("other")}return-1===a?null:a}(s,l);if(Z0(s,a)!==d&&(w_(i,s,a),a[s.currentCaseLViewIndex]=null===d?null:~d,null!==d)){const m=a[s.anchorIdx];m&&K0(i,s.create[d],a,m)}}function w_(i,s,a){let l=Z0(s,a);if(null!==l){const d=s.remove[l];for(let h=0;h<d.length;h++){const m=d[h];if(m>0){const v=Mo(m,a);null!==v&&Tv(a[11],v)}else w_(i,y_(i,~m),a)}}}function Yp(){const i=[];let a,l,s=-1;function h(v,E){s=0;const D=Z0(v,E);l=null!==D?v.remove[D]:j}function m(){if(s<l.length){const v=l[s++];return v>0?a[v]:(i.push(s,l),h(a[1].data[~v],a),m())}return 0===i.length?null:(l=i.pop(),s=i.pop(),m())}return function(v,E){for(a=E;i.length;)i.pop();return h(v.value,E),m}}const E_=/\ufffd(\d+):?\d*\ufffd/gi,ld=/\ufffd(\d+)\ufffd/,nf=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,VD=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,D_=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,cd=/\uE500/g;function _A(i,s,a,l,d,h,m){const v=Ep(i,l,1,null);let E=v<<er.SHIFT,D=cs();s===D&&(D=null),null===D&&(E|=er.APPEND_EAGERLY),m&&(E|=er.COMMENT,function(i){void 0===p&&(p=i())}(Yp)),d.push(E,null===h?"":h);const A=Vv(i,v,m?32:1,null===h?"":h,null);lA(a,A);const k=A.index;return Sr(A,!1),null!==D&&s!==D&&function(i,s){let a=i.insertBeforeIndex;null===a?(M1(aA,uA),a=i.insertBeforeIndex=[null,s]):(function(i,s,a){i!=s&&jt(a,i,s,"==")}(Array.isArray(a),!0,"Expecting array here"),a.push(s))}(D,k),A}function Sk(i,s,a,l,d,h,m){const v=m.match(E_),E=_A(i,s,a,h,l,v?null:m,!1);v&&Kp(d,m,E.index,null,0,null)}function Kp(i,s,a,l,d,h){const m=i.length,v=m+1;i.push(null,null);const E=m+2,D=s.split(E_);let A=0;for(let k=0;k<D.length;k++){const O=D[k];if(1&k){const H=d+parseInt(O,10);i.push(-1-H),A|=yA(H)}else""!==O&&i.push(O)}return i.push(a<<2|(l?1:0)),l&&i.push(l,h),i[m]=A,i[v]=i.length-E,A}function yA(i){return 1<<Math.min(i,31)}function vA(i){let s,h,a="",l=0,d=!1;for(;null!==(s=VD.exec(i));)d?s[0]===`\ufffd/*${h}\ufffd`&&(l=s.index,d=!1):(a+=i.substring(l,s.index+s[0].length),h=s[1],d=!0);return a+=i.substr(l),a}function bA(i,s,a,l,d,h){let m=0;const v={type:d.type,currentCaseLViewIndex:Ep(i,s,1,null),anchorIdx:h,cases:[],create:[],remove:[],update:[]};(function(i,s,a){i.push(yA(s.mainBinding),2,-1-s.mainBinding,a<<2|2)})(a,d,h),function(i,s,a){const l=i.data[s];null===l?i.data[s]=a:l.value=a}(i,h,v);const E=d.values;for(let D=0;D<E.length;D++){const A=E[D],k=[];for(let O=0;O<A.length;O++){const H=A[O];if("string"!=typeof H){const Y=k.push(H)-1;A[O]=`\x3c!--\ufffd${Y}\ufffd--\x3e`}}m=kk(i,v,s,a,l,d.cases[D],A.join(""),k)|m}m&&function(i,s,a){i.push(s,1,a<<2|3)}(a,m,h)}function xk(i){const s=[],a=[];let l=1,d=0;const h=UD(i=i.replace(nf,function(m,v,E){return l="select"===E?0:1,d=parseInt(v.substr(1),10),""}));for(let m=0;m<h.length;){let v=h[m++].trim();1===l&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&s.push(v);const E=UD(h[m++]);s.length>a.length&&a.push(E)}return{type:l,mainBinding:d,cases:s,values:a}}function UD(i){if(!i)return[];let s=0;const a=[],l=[],d=/[{}]/g;let h;for(d.lastIndex=0;h=d.exec(i);){const v=h.index;if("}"==h[0]){if(a.pop(),0==a.length){const E=i.substring(s,v);nf.test(E)?l.push(xk(E)):l.push(E),s=v+1}}else{if(0==a.length){const E=i.substring(s,v);l.push(E),s=v+1}a.push("{")}}const m=i.substring(s);return l.push(m),l}function kk(i,s,a,l,d,h,m,v){const E=[],D=[],A=[];s.cases.push(h),s.create.push(E),s.remove.push(D),s.update.push(A);const O=Ch(Js()).getInertBodyElement(m),H=Gc(O)||O;return H?wA(i,s,a,l,E,D,A,H,d,v,0):0}function wA(i,s,a,l,d,h,m,v,E,D,A){let k=0,O=v.firstChild;for(;O;){const H=Ep(i,a,1,null);switch(O.nodeType){case Node.ELEMENT_NODE:const Y=O,le=Y.tagName.toLowerCase();if(sp.hasOwnProperty(le)){C_(d,z0,le,E,H),i.data[H]=le;const Ke=Y.attributes;for(let ht=0;ht<Ke.length;ht++){const Ut=Ke.item(ht),wr=Ut.name.toLowerCase();Ut.value.match(E_)?Uc.hasOwnProperty(wr)&&Kp(m,Ut.value,H,Ut.name,0,Bc[wr]?Aa:Xi[wr]?Ih:null):T_(d,H,Ut)}k=wA(i,s,a,l,d,h,m,O,H,D,A+1)|k,Q0(h,H,A)}break;case Node.TEXT_NODE:const ne=O.textContent||"",Ne=ne.match(E_);C_(d,null,Ne?"":ne,E,H),Q0(h,H,A),Ne&&(k=Kp(m,ne,H,null,0,null)|k);break;case Node.COMMENT_NODE:const ge=ld.exec(O.textContent||"");if(ge){const ht=D[parseInt(ge[1],10)];C_(d,__,"",E,H),bA(i,a,l,E,ht,H),EA(h,H,A)}}O=O.nextSibling}return k}function Q0(i,s,a){0===a&&i.push(s)}function EA(i,s,a){0===a&&(i.push(~s),i.push(s))}function C_(i,s,a,l,d){null!==s&&i.push(s),i.push(a,d,function(i,s,a){return 0|s<<17|a<<1}(0,l,d))}function T_(i,s,a){i.push(s<<1|1,a.name,a.value)}function tb(i,s,a=-1){const l=Et(),d=ve(),h=20+i,m=kn(l.consts,s),v=cs();l.firstCreatePass&&function(i,s,a,l,d,h){const m=cs(),v=[],E=[],D=[[]],A=function(i){return i.replace(cd," ")}(d=function(i,s){if(function(i){return-1===i}(s))return vA(i);{const a=i.indexOf(`:${s}\ufffd`)+2+s.toString().length,l=i.search(new RegExp(`\ufffd\\/\\*\\d+:${s}\ufffd`));return vA(i.substring(a,l))}}(d,h)).split(D_);for(let k=0;k<A.length;k++){let O=A[k];if(0==(1&k)){const H=UD(O);for(let Y=0;Y<H.length;Y++){let le=H[Y];if(0==(1&Y)){const ne=le;""!==ne&&Sk(i,m,D[0],v,E,a,ne)}else{const ne=le;if("object"!=typeof ne)throw new Error(`Unable to parse ICU expression in "${d}" message.`);bA(i,a,E,s,ne,_A(i,m,D[0],a,v,"",!0).index)}}}else{const H=47===O.charCodeAt(0),le=(O.charCodeAt(H?1:0),20+Number.parseInt(O.substring(H?2:1)));if(H)D.shift(),Sr(cs(),!1);else{const ne=wk(i,D[0],le);D.unshift([]),Sr(ne,!0)}}}i.data[l]={create:v,update:E}}(l,null===v?0:v.index,d,h,m,a);const E=l.data[h],A=S1(l,v===d[6]?null:v,d);(function(i,s,a,l){const d=i[11];for(let h=0;h<s.length;h++){const m=s[h++],v=s[h],E=(m&er.COMMENT)===er.COMMENT,D=(m&er.APPEND_EAGERLY)===er.APPEND_EAGERLY,A=m>>>er.SHIFT;let k=i[A];null===k&&(k=i[A]=E?d.createComment(v):Wn(d,v)),D&&null!==a&&Nl(d,a,k,l,!1)}})(d,E.create,A,v&&8&v.type?d[v.index]:null),rl(!0)}function nb(i,s,a){tb(i,s,a),rl(!1)}function hd(i){return function(i){i&&(ef|=1<<Math.min(v_,31)),v_++}(lr(ve(),Wi(),i)),hd}function WD(i){!function(i,s,a){if(v_>0){const l=i.data[a];b_(i,s,Array.isArray(l)?l:l.update,Si()-v_-1,ef)}ef=0,v_=0}(Et(),ve(),i+20)}function S_(i,s,a,l,d){if(i=G(i),Array.isArray(i))for(let h=0;h<i.length;h++)S_(i[h],s,a,l,d);else{const h=Et(),m=ve();let v=$h(i)?i:G(i.provide),E=e0(i);const D=rn(),A=1048575&D.providerIndexes,k=D.directiveStart,O=D.providerIndexes>>20;if($h(i)||!i.multi){const H=new va(E,d,Fp),Y=ZD(v,s,d?A:A+O,k);-1===Y?(Yt(du(D,m),h,v),rb(h,i,s.length),s.push(v),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),a.push(H),m.push(H)):(a[Y]=H,m[Y]=H)}else{const H=ZD(v,s,A+O,k),Y=ZD(v,s,A,A+O),le=H>=0&&a[H],ne=Y>=0&&a[Y];if(d&&!ne||!d&&!le){Yt(du(D,m),h,v);const Ne=function(i,s,a,l,d){const h=new va(i,a,Fp);return h.multi=[],h.index=s,h.componentProviders=0,ib(h,d,l&&!a),h}(d?YD:IA,a.length,d,l,E);!d&&ne&&(a[Y].providerFactory=Ne),rb(h,i,s.length,0),s.push(v),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),a.push(Ne),m.push(Ne)}else rb(h,i,H>-1?H:Y,ib(a[d?Y:H],E,!d&&l));!d&&l&&ne&&a[Y].componentProviders++}}}function rb(i,s,a,l){const d=$h(s);if(d||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const E=v.indexOf(a);-1===E?v.push(a,[l,m]):v[E+1].push(l,m)}else v.push(a,m)}}}function ib(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function ZD(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function IA(i,s,a,l){return Jp(this.multi,[])}function YD(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Dn(a,a[1],this.providerFactory.index,l);h=v.slice(0,m),Jp(d,h);for(let E=m;E<v.length;E++)h.push(v[E])}else h=[],Jp(d,h);return h}function Jp(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ob(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Et();if(l.firstCreatePass){const d=Hi(i);S_(a,l.data,l.blueprint,d,!0),S_(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class KD{}const JD="ngComponent";class QD{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${K(i)}. Did you add it to @NgModule.entryComponents?`);return s[JD]=i,s}(s)}}let rf=(()=>{class i{}return i.NULL=new QD,i})();function Qp(...i){}function fd(i,s){return new Mu(di(i,s))}const MA=function(){return fd(rn(),ve())};let Mu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=MA,i})();function ab(i){return i instanceof Mu?i.nativeElement:i}class M_{}let RA=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Lk(),i})();const Lk=function(){const i=ve(),a=mr(rn().index,i);return function(i){return i[11]}(un(a)?a:i)};let ub=(()=>{class i{}return i.\u0275prov=an({token:i,providedIn:"root",factory:()=>null}),i})();class nC{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const lb=new nC("12.2.13");class PA{constructor(){}supports(s){return Op(s)}create(s){return new Bk(s)}}const rC=(i,s)=>s;class Bk{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const m=!l||a&&a.currentIndex<cb(l,d,h)?a:l,v=cb(m,d,h),E=m.currentIndex;if(m===l)d--,l=l._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{h||(h=[]);const D=v-d,A=E-d;if(D!=A){for(let O=0;O<D;O++){const H=O<h.length?h[O]:h[O]=0,Y=H+O;A<=Y&&Y<D&&(h[O]=H+1)}h[m.previousIndex]=A-D}}v!==E&&s(m,v,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Op(s))throw new Error(`Error trying to diff '${K(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,m,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,h,m,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,v),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[kp()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,v=>{m=this._trackByFn(d,v),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,v,m,d)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,m,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new iC(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new LA),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LA),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class iC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FA{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class LA{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new FA,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class db{constructor(){}supports(s){return s instanceof Map||m0(s)}create(){return new VA}}class VA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||m0(s)))throw new Error(`Error trying to diff '${K(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,m=d._next;return h&&(h._next=m),m&&(m._prev=h),d._next=null,d._prev=null,d}const l=new BA(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class BA{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new R_([new PA])}let R_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||hb()),deps:[[i,new or,new Ia]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=an({token:i,providedIn:"root",factory:hb}),i})();function fb(){return new x_([new db])}let x_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||fb()),deps:[[i,new or,new Ia]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=an({token:i,providedIn:"root",factory:fb}),i})();function k_(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(qt(h)),gr(h))for(let v=10;v<h.length;v++){const E=h[v],D=E[1].firstChild;null!==D&&k_(E[1],E,D,l)}const m=a.type;if(8&m)k_(i,s,a.child,l);else if(32&m){const v=g(a,s);let E;for(;E=v();)l.push(E)}else if(16&m){const v=Dv(s,a);if(Array.isArray(v))l.push(...v);else{const E=M(s[16]);k_(E[1],E,v,l,!0)}}a=d?a.projectionNext:a.next}return l}class O_{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return k_(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(gr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Oh(s,l),Mi(a,l))}this._attachedToViewContainer=!1}Ph(this._lView[1],this._lView)}onDestroy(s){Q1(this._lView[1],this._lView,null,s)}markForCheck(){Bh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){pa(!0);try{Xm(i,s,a)}finally{pa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Jc(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class sC extends O_{constructor(s){super(s),this._view=s}detectChanges(){lE(this._view)}checkNoChanges(){!function(i){pa(!0);try{lE(i)}finally{pa(!1)}}(this._view)}get context(){return null}}const $A=function(i){return function(i,s,a){if(za(i)&&!a){const l=mr(i.index,s);return new O_(l,l)}return 47&i.type?new O_(s[16],s):null}(rn(),ve(),16==(16&i))};let HA=(()=>{class i{}return i.__NG_ELEMENT_ID__=$A,i})();const GA=[new db],WA=new R_([new PA]),$k=new x_(GA),zA=function(){return P_(rn(),ve())};let sf=(()=>{class i{}return i.__NG_ELEMENT_ID__=zA,i})();const ZA=sf,uC=class extends ZA{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=ur(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),Fh(a,l,s),new O_(l)}};function P_(i,s){return 4&i.type?new uC(s,i,fd(i,s)):null}class pd{}class KA{}const JA=function(){return cC(rn(),ve())};let F_=(()=>{class i{}return i.__NG_ELEMENT_ID__=JA,i})();const ns=F_,An=class extends ns{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return fd(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){const s=Be(this._hostTNode,this._hostLView);if(Ic(s)){const a=hi(s,this._hostLView),l=ro(s);return new ds(a[1].data[l+8],a)}return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=L_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,h){const m=l||this.parentInjector;if(!h&&null==s.ngModule&&m){const E=m.get(pd,null);E&&(h=E)}const v=s.create(m,d,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const l=s._lView,d=l[1];if(gr(l[3])){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const k=l[3],O=new An(k,k[6],k[3]);O.detach(O.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],mu(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(d,l,m,h);const v=Cv(h,m),E=l[11],D=km(E,m[7]);return null!==D&&function(i,s,a,l,d,h){l[0]=d,l[6]=s,Jc(i,l,a,1,d,h)}(d,m[6],E,l,D,v),s.attachToViewContainerRef(),mu(pb(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=L_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Oh(this._lContainer,a);l&&(Mi(pb(this._lContainer),a),Ph(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Oh(this._lContainer,a);return l&&null!=Mi(pb(this._lContainer),a)?new O_(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function L_(i){return i[8]}function pb(i){return i[8]||(i[8]=[])}function cC(i,s){let a;const l=s[i.index];if(gr(l))a=l;else{let d;if(8&i.type)d=qt(l);else{const h=s[11];d=h.createComment("");const m=di(i,s);Nl(h,km(h,m),d,function(i,s){return Xt(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=UI(l,s,d,i),Vh(s,a)}return new An(a,i,s)}const mo={};class Lb extends rf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Zn(s);return new Bb(a,this.ngModule)}}function hf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const AC=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Im});class Bb extends KD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(II).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return hf(this.componentDef.inputs)}get outputs(){return hf(this.componentDef.outputs)}create(s,a,l,d){const h=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const h=i.get(a,mo,d);return h!==mo||l===mo?h:s.get(a,l,d)}}}(s,d.injector):s,m=h.get(M_,ls),v=h.get(ub,null),E=m.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",A=l?function(i,s,a){if(Xt(i))return i.selectRootElement(s,a===Oe.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(E,l,this.componentDef.encapsulation):zc(m.createRenderer(null,this.componentDef),D,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(D)),k=this.componentDef.onPush?576:528,O=function(i,s){return{components:[],scheduler:i||Im,clean:Zv,playerHandler:s||null,flags:0}}(),H=Zo(0,null,null,1,0,null,null,null,null,null),Y=ur(null,H,O,k,null,null,m,E,v,h);let le,ne;Ro(Y);try{const Ne=function(i,s,a,l,d,h){const m=a[1];a[20]=i;const E=Fs(m,20,2,"#host",null),D=E.mergedAttrs=s.hostAttrs;null!==D&&(td(E,D,!0),null!==i&&(ch(d,i,D),null!==E.classes&&Iv(d,i,E.classes),null!==E.styles&&x1(d,i,E.styles)));const A=l.createRenderer(i,s),k=ur(a,jv(s),null,s.onPush?64:16,a[20],E,l,A,h||null,null);return m.firstCreatePass&&(Yt(du(E,a),m,s.type),oE(m,E),aE(E,a.length,1)),Vh(a,k),a[20]=k}(A,this.componentDef,Y,m,E);if(A)if(l)ch(E,A,["ng-version",lb.full]);else{const{attrs:ge,classes:Ke}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!Wo(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);ge&&ch(E,A,ge),Ke&&Ke.length>0&&Iv(E,A,Ke.join(" "))}if(ne=Qs(H,20),void 0!==a){const ge=ne.projection=[];for(let Ke=0;Ke<this.ngContentSelectors.length;Ke++){const ht=a[Ke];ge.push(null!=ht?Array.from(ht):null)}}le=function(i,s,a,l,d){const h=a[1],m=function(i,s,a){const l=rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Km(i,l,s,Ep(i,s,1,null),a));const d=Dn(s,i,l.directiveStart,l);Mr(d,s);const h=di(l,s);return h&&Mr(h,s),d}(h,a,s);if(l.components.push(m),i[8]=m,d&&d.forEach(E=>E(m,s)),s.contentQueries){const E=rn();s.contentQueries(1,m,E.directiveStart)}const v=rn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(_a(v.index),Ri(a[1],v,0,v.directiveStart,v.directiveEnd,s),LI(s,m)),m}(Ne,this.componentDef,Y,O,[RE]),Fh(H,Y,null)}finally{Ns()}return new Ub(this.componentType,le,fd(ne,Y),Y,ne)}}class Ub extends class{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new sC(d),this.componentType=s}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Hl=new Map;class ey extends pd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lb(this);const l=Ti(s),d=s[gt]||null;d&&PD(d),this._bootstrapComponents=ps(l.bootstrap),this._r3Injector=fE(s,a,[{provide:pd,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],K(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Sn.THROW_IF_NOT_FOUND,l=Ge.Default){return s===Sn||s===pd||s===Ol?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class og extends KA{constructor(s){super(),this.moduleType=s,null!==Ti(s)&&function(i){const s=new Set;!function a(l){const d=Ti(l,!0),h=d.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${K(s)} vs ${K(s.name)}`)}(h,Hl.get(h),l),Hl.set(h,l));const m=ps(d.imports);for(const v of m)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new ey(this.moduleType,s)}}function Hb(i,s,a,l){return ny(ve(),On(),i,s,a,l)}function Gb(i,s,a,l,d){return function(i,s,a,l,d,h,m){const v=s+a;return rd(i,v,d,h)?Oa(i,v+2,m?l.call(m,d,h):l(d,h)):lg(i,v+2)}(ve(),On(),i,s,a,l,d)}function xC(i,s,a,l,d,h){return function(i,s,a,l,d,h,m,v){const E=s+a;return function(i,s,a,l,d){const h=rd(i,s,a,l);return lr(i,s+2,d)||h}(i,E,d,h,m)?Oa(i,E+3,v?l.call(v,d,h,m):l(d,h,m)):lg(i,E+3)}(ve(),On(),i,s,a,l,d,h)}function lg(i,s){const a=i[s];return a===Ze?void 0:a}function ny(i,s,a,l,d,h){const m=s+a;return lr(i,m,d)?Oa(i,m+1,h?l.call(h,d):l(d)):lg(i,m+1)}function OC(i,s){const a=Et();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}throw new Me("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const h=l.factory||(l.factory=as(l.type)),m=si(Fp);try{const v=wa(!1),E=h();return wa(v),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,ve(),d,E),E}finally{si(m)}}function Fa(i,s,a){const l=i+20,d=ve(),h=Xs(d,l);return function(i,s){Ko.isWrapped(s)&&(s=Ko.unwrap(s),i[Si()]=Ze);return s}(d,function(i,s){return i[1].data[s].pure}(d,l)?ny(d,On(),s,h.transform,a,h):h.transform(a))}function zb(i){return s=>{setTimeout(i,void 0,s)}}const _s=class extends u.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,h,m;let v=s,E=a||(()=>null),D=l;if(s&&"object"==typeof s){const k=s;v=null===(d=k.next)||void 0===d?void 0:d.bind(k),E=null===(h=k.error)||void 0===h?void 0:h.bind(k),D=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(E=zb(E),v&&(v=zb(v)),D&&(D=zb(D)));const A=super.subscribe({next:v,error:E,complete:D});return s instanceof te.w&&s.add(A),A}};function cg(){return this._results[kp()]()}class ay{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=kp(),l=ay.prototype;l[a]||(l[a]=cg)}get changes(){return this._changes||(this._changes=new _s)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=fi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Zb{constructor(s){this.queryList=s,this.matches=null}clone(){return new Zb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const m=a.getByIndex(h);d.push(this.queries[m.indexInDeclarationView].clone())}return new Yb(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==jC(s,a).matches&&this.queries[a].setDirty()}}class pf{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class La{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new La(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class uy{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new uy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,LC(a,h)),this.matchTNodeWithReadOption(s,a,io(a,s,h,!1,!1))}else l===sf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,io(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Mu||d===F_||d===sf&&4&a.type)this.addMatch(a.index,-2);else{const h=io(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function LC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function gf(i,s,a,l){return-1===a?function(i,s){return 11&i.type?fd(i,s):4&i.type?P_(i,s):null}(s,i):-2===a?function(i,s,a){return a===Mu?fd(s,i):a===sf?P_(s,i):a===F_?cC(s,i):void 0}(i,s,l):Dn(i,i[1],a,s)}function BC(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,m=a.matches,v=[];for(let E=0;E<m.length;E+=2){const D=m[E];v.push(D<0?null:gf(s,h[D],m[E+1],a.metadata.read))}d.matches=v}return d.matches}function ly(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const m=BC(i,s,d,a);for(let v=0;v<h.length;v+=2){const E=h[v];if(E>0)l.push(m[v/2]);else{const D=h[v+1],A=s[-E];for(let k=10;k<A.length;k++){const O=A[k];O[17]===O[3]&&ly(O[1],O,D,l)}if(null!==A[9]){const k=A[9];for(let O=0;O<k.length;O++){const H=k[O];ly(H[1],H,D,l)}}}}}return l}function UC(i){const s=ve(),a=Et(),l=il();ga(l+1);const d=jC(a,l);if(i.dirty&&Ju(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?ly(a,s,l,[]):BC(a,s,d,l);i.reset(h,ab),i.notifyOnChanges()}return!0}return!1}function Kb(i,s,a){const l=Et();l.firstCreatePass&&(ew(l,new pf(i,s,a),-1),2==(2&s)&&(l.staticViewQueries=!0)),Xb(l,ve(),s)}function Jb(i,s,a,l){const d=Et();if(d.firstCreatePass){const h=rn();ew(d,new pf(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}Xb(d,ve(),a)}function cy(){return i=ve(),s=il(),i[19].queries[s].queryList;var i,s}function Xb(i,s,a){const l=new ay(4==(4&a));Q1(i,s,l,l.destroy),null===s[19]&&(s[19]=new Yb),s[19].queries.push(new Zb(l))}function ew(i,s,a){null===i.queries&&(i.queries=new La),i.queries.track(new uy(s,a))}function jC(i,s){return i.queries.getByIndex(s)}function $C(i,s){return P_(i,s)}const vw=new cn("Application Initializer");let _f=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Qp,this.reject=Qp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(A0(h))a.push(h);else if(N0(h)){const m=new Promise((v,E)=>{h.subscribe({complete:v,error:E})});a.push(m)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(fn(vw,8))},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();const XC=new cn("AppId"),eT={provide:XC,useFactory:function(){return`${bw()}${bw()}${bw()}`},deps:[]};function bw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const AN=new cn("Platform Initializer"),ys=new cn("Platform ID"),tT=new cn("appBootstrapListener");let Bt=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();const Pu=new cn("LocaleId"),ww=new cn("DefaultCurrencyCode");class on{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Yl=function(i){return new og(i)},xN=Yl,Kl=function(i){return Promise.resolve(Yl(i))},Id=function(i){const s=Yl(i),l=ps(Ti(i).declarations).reduce((d,h)=>{const m=Zn(h);return m&&d.push(new Bb(m)),d},[]);return new on(s,l)},Ew=Id,Sd=function(i){return Promise.resolve(Id(i))};let Jl=(()=>{class i{constructor(){this.compileModuleSync=xN,this.compileModuleAsync=Kl,this.compileModuleAndAllComponentsSync=Ew,this.compileModuleAndAllComponentsAsync=Sd}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();const Ad=(()=>Promise.resolve(0))();function vo(i){"undefined"==typeof Zone?Ad.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Xr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _s(!1),this.onMicrotaskEmpty=new _s(!1),this.onStable=new _s(!1),this.onError=new _s(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=pt.requestAnimationFrame,s=pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,wg(i),i.isCheckStableRunning=!0,bg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),wg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,m,v)=>{try{return Ey(i),a.invokeTask(d,h,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Cw(i)}},onInvoke:(a,l,d,h,m,v,E)=>{try{return Ey(i),a.invoke(d,h,m,v,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Cw(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,wg(i),bg(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+d,s,rT,Qp,Qp);try{return h.runTask(m,a,l)}finally{h.cancelTask(m)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const rT={};function bg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function wg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ey(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Cw(i){i._nesting--,bg(i)}class iT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _s,this.onMicrotaskEmpty=new _s,this.onStable=new _s,this.onError=new _s}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Eg=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xr.assertNotInAngularZone(),vo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vo(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(fn(Xr))},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})(),yf=(()=>{class i{constructor(){this._applications=new Map,wn.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return wn.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();class Li{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function sT(i){wn=i}let wn=new Li,oT=!0,Tw=!1;function Nd(){return Tw=!0,oT}function ON(){if(Tw)throw new Error("Cannot enable prod mode after platform setup.");oT=!1}let vs;const uT=new cn("AllowMultipleToken");class BN{constructor(s,a){this.name=s,this.token=a}}function Cg(i,s,a=[]){const l=`Platform: ${s}`,d=new cn(l);return(h=[])=>{let m=Iw();if(!m||m.injector.get(uT,!1))if(i)i(a.concat(h).concat({provide:d,useValue:!0}));else{const v=a.concat(h).concat({provide:d,useValue:!0},{provide:nd,useValue:"platform"});!function(i){if(vs&&!vs.destroyed&&!vs.injector.get(uT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vs=i.get(Sw);const s=i.get(AN,null);s&&s.forEach(a=>a())}(Sn.create({providers:v,name:l}))}return function(i){const s=Iw();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function Iw(){return vs&&!vs.destroyed?vs:null}let Sw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const v=function(i,s){let a;return a="noop"===i?new iT:("zone.js"===i?void 0:i)||new Xr({enableLongStackTrace:Nd(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),E=[{provide:Xr,useValue:v}];return v.run(()=>{const D=Sn.create({providers:E,parent:this.injector,name:a.moduleType.name}),A=a.create(D),k=A.injector.get(Ra,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const O=v.onError.subscribe({next:H=>{k.handleError(H)}});A.onDestroy(()=>{bf(this._modules,A),O.unsubscribe()})}),function(i,s,a){try{const l=a();return A0(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,v,()=>{const O=A.injector.get(_f);return O.runInitializers(),O.donePromise.then(()=>(PD(A.injector.get(Pu,m_)||m_),this._moduleDoBootstrap(A),A))})})}bootstrapModule(a,l=[]){const d=Md({},l);return function(i,s,a){const l=new og(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(Ql);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${K(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(fn(Sn))},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();function Md(i,s){return Array.isArray(s)?s.reduce(Md,i):Object.assign(Object.assign({},i),s)}let Ql=(()=>{class i{constructor(a,l,d,h,m){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),E=new L.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),vo(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ce.T)(v,E.pipe((0,ie.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof KD?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(pd),v=d.create(Sn.NULL,[],l||d.selector,h),E=v.location.nativeElement,D=v.injector.get(Eg,null),A=D&&v.injector.get(yf);return D&&A&&A.registerApplication(E,D),v.onDestroy(()=>{this.detachView(v.hostView),bf(this.components,v),A&&A.unregisterApplication(E)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;bf(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(tT,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(fn(Xr),fn(Sn),fn(Ra),fn(rf),fn(_f))},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();function bf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class Nw{}class Ig{}const cT={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let jN=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||cT}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),F(8255)(l).then(h=>h[d]).then(h=>xw(h,l,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),F(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(m=>m[d+h]).then(m=>xw(m,l,d))}}return i.\u0275fac=function(a){return new(a||i)(fn(Jl),fn(Ig,8))},i.\u0275prov=an({token:i,factory:i.\u0275fac}),i})();function xw(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const Sg=function(i){return null},zN=Cg(null,"core",[{provide:ys,useValue:"unknown"},{provide:Sw,deps:[Sn]},{provide:yf,deps:[]},{provide:Bt,deps:[]}]),Ny=[{provide:Ql,useClass:Ql,deps:[Xr,Sn,Ra,rf,_f]},{provide:AC,deps:[Xr],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:_f,useClass:_f,deps:[[new Ia,vw]]},{provide:Jl,useClass:Jl,deps:[]},eT,{provide:R_,useFactory:function(){return WA},deps:[]},{provide:x_,useFactory:function(){return $k},deps:[]},{provide:Pu,useFactory:function(i){return PD(i=i||"undefined"!=typeof $localize&&$localize.locale||m_),i},deps:[[new Ta(Pu),new Ia,new or]]},{provide:ww,useValue:"USD"}];let tr=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(fn(Ql))},i.\u0275mod=To({type:i}),i.\u0275inj=gn({providers:Ny}),i})()},8939:(He,_e,F)=>{"use strict";F.d(_e,{hO:()=>de,xv:()=>z,Dh:()=>K,GT:()=>J,cc:()=>Re,on:()=>P,pX:()=>ie});var u=F(7716),te=F(7841),L=F(9396);He=F.hmd(He);const ce=["ngOnDestroy"],ie=(X,re,we,Ae={})=>new Proxy(X,{get:(Tt,It)=>we.runOutsideAngular(()=>{var Ht;if(X[It])return(null===(Ht=null==Ae?void 0:Ae.spy)||void 0===Ht?void 0:Ht.get)&&Ae.spy.get(It,X[It]),X[It];if(ce.indexOf(It)>-1)return()=>{};const yt=re.toPromise().then(pn=>{const vt=pn&&pn[It];return"function"==typeof vt?vt.bind(pn):vt&&vt.then?vt.then(ft=>we.run(()=>ft)):we.run(()=>vt)});return new Proxy(()=>{},{get:(pn,vt)=>yt[vt],apply:(pn,vt,ft)=>yt.then(kt=>{var rt;const Ft=kt&&kt(...ft);return(null===(rt=null==Ae?void 0:Ae.spy)||void 0===rt?void 0:rt.apply)&&Ae.spy.apply(It,ft,Ft),Ft})})})}),J=(X,re)=>{re.forEach(we=>{Object.getOwnPropertyNames(we.prototype||we).forEach(Ae=>{Object.defineProperty(X.prototype,Ae,Object.getOwnPropertyDescriptor(we.prototype||we,Ae))})})};class oe{constructor(re){return re}}const K=new u.OlP("angularfire2.app.options"),z=new u.OlP("angularfire2.app.name");function P(X,re,we){const Tt="object"==typeof we&&we||{};Tt.name=Tt.name||"string"==typeof we&&we||"[DEFAULT]";const Ht=te.Z.apps.filter(yt=>yt&&yt.name===Tt.name)[0]||re.runOutsideAngular(()=>te.Z.initializeApp(X,Tt));try{JSON.stringify(X)!==JSON.stringify(Ht.options)&&U("error",`${Ht.name} Firebase App already initialized with different options${He.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(yt){}return new oe(Ht)}const U=(X,...re)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...re)},G={provide:oe,useFactory:P,deps:[K,u.R0b,[new u.FiY,z]]};let de=(()=>{class X{constructor(we){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",u.q4F.full,we.toString())}static initializeApp(we,Ae){return{ngModule:X,providers:[{provide:K,useValue:we},{provide:z,useValue:Ae}]}}}return X.\u0275fac=function(we){return new(we||X)(u.LFG(u.Lbi))},X.\u0275mod=u.oAB({type:X}),X.\u0275inj=u.cJS({providers:[G]}),X})();function Re(X,re,we,Ae,Tt){const[,It,Ht]=globalThis.\u0275AngularfireInstanceCache.find(yt=>yt[0]===X)||[];if(It)return function(X,re){try{return X.toString()===re.toString()}catch(we){return X===re}}(Tt,Ht)||(he("error",`${re} was already initialized on the ${we} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Tt,was:Ht})),It;{const yt=Ae();return globalThis.\u0275AngularfireInstanceCache.push([X,yt,Tt]),yt}}const be=!!He.hot,he=(X,...re)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9396:(He,_e,F)=>{"use strict";F.d(_e,{q4:()=>_h,iC:()=>bn,fc:()=>dl,HU:()=>Mc,vb:()=>mu,JM:()=>hs});var u=F(7716),te=F(2329),L=F(8239),ce=F(8026),ie=F(3854),J=F(3910),oe=F(5422),K=F(6676);const z="@firebase/installations",P="0.5.4",G=`w:${P}`,de="FIS_v2",re=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function we(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function Ae({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Tt(C){return{token:C.token,requestStatus:2,expiresIn:kt(C.expiresIn),creationTime:Date.now()}}function It(C,S){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,L.Z)(function*(C,S){const B=(yield S.json()).error;return re.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function yt({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function pn(C,{refreshToken:S}){const x=yt(C);return x.append("Authorization",function(C){return`${de} ${C}`}(S)),x}function vt(C){return ft.apply(this,arguments)}function ft(){return(ft=(0,L.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function kt(C){return Number(C.replace("s","000"))}function Ft(C,S){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(C,{fid:S}){const x=Ae(C),ue={method:"POST",headers:yt(C),body:JSON.stringify({fid:S,authVersion:de,appId:C.appId,sdkVersion:G})},Ee=yield vt(()=>fetch(x,ue));if(Ee.ok){const Le=yield Ee.json();return{fid:Le.fid||S,registrationStatus:2,refreshToken:Le.refreshToken,authToken:Tt(Le.authToken)}}throw yield It("Create Installation",Ee)})).apply(this,arguments)}function $u(C){return new Promise(S=>{setTimeout(S,C)})}const Cs=/^[cdef][\w-]{21}$/;function Ot(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function(C){return function(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Cs.test(x)?x:""}catch(C){return""}}function Ts(C){return`${C.appName}!${C.appId}`}const Do=new Map;function Is(C,S){const x=Ts(C);gn(x,S),function(C,S){const x=(!Lt&&"BroadcastChannel"in self&&(Lt=new BroadcastChannel("[Firebase] FID Change"),Lt.onmessage=C=>{gn(C.data.key,C.data.fid)}),Lt);x&&x.postMessage({key:C,fid:S}),0===Do.size&&Lt&&(Lt.close(),Lt=null)}(x,S)}function gn(C,S){const x=Do.get(C);if(x)for(const B of x)B(S)}let Lt=null;const De="firebase-installations-store";let ir=null;function Hn(){return ir||(ir=(0,K.openDb)("firebase-installations-database",1,C=>{switch(C.oldVersion){case 0:C.createObjectStore(De)}})),ir}function Ge(C,S){return $t.apply(this,arguments)}function $t(){return($t=(0,L.Z)(function*(C,S){const x=Ts(C),Q=(yield Hn()).transaction(De,"readwrite"),ue=Q.objectStore(De),Ee=yield ue.get(x);return yield ue.put(S,x),yield Q.complete,(!Ee||Ee.fid!==S.fid)&&Is(C,S.fid),S})).apply(this,arguments)}function ji(C){return si.apply(this,arguments)}function si(){return(si=(0,L.Z)(function*(C){const S=Ts(C),B=(yield Hn()).transaction(De,"readwrite");yield B.objectStore(De).delete(S),yield B.complete})).apply(this,arguments)}function et(C,S){return it.apply(this,arguments)}function it(){return(it=(0,L.Z)(function*(C,S){const x=Ts(C),Q=(yield Hn()).transaction(De,"readwrite"),ue=Q.objectStore(De),Ee=yield ue.get(x),Le=S(Ee);return void 0===Le?yield ue.delete(x):yield ue.put(Le,x),yield Q.complete,Le&&(!Ee||Ee.fid!==Le.fid)&&Is(C,Le.fid),Le})).apply(this,arguments)}function Nt(C){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,L.Z)(function*(C){let S;const x=yield et(C,B=>{const Q=oi(B),ue=Gt(C,Q);return S=ue.registrationPromise,ue.installationEntry});return""===x.fid?{installationEntry:yield S}:{installationEntry:x,registrationPromise:S}})).apply(this,arguments)}function oi(C){return pt(C||{fid:Ot(),registrationStatus:0})}function Gt(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(re.create("app-offline"))};const x={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(C,S){return Je.apply(this,arguments)}(C,x)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Hu(C)}:{installationEntry:S}}function Je(){return(Je=(0,L.Z)(function*(C,S){try{return Ge(C,yield Ft(C,S))}catch(x){throw we(x)&&409===x.customData.serverCode?yield ji(C):yield Ge(C,{fid:S.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Hu(C){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,L.Z)(function*(C){let S=yield zt(C);for(;1===S.registrationStatus;)yield $u(100),S=yield zt(C);if(0===S.registrationStatus){const{installationEntry:x,registrationPromise:B}=yield Nt(C);return B||x}return S})).apply(this,arguments)}function zt(C){return et(C,S=>{if(!S)throw re.create("installation-not-found");return pt(S)})}function pt(C){return function(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function dc(C,S){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*({appConfig:C,platformLoggerProvider:S},x){const B=j(C,x),Q=pn(C,x),ue=S.getImmediate({optional:!0});ue&&Q.append("x-firebase-client",ue.getPlatformInfoString());const Le={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:G}})},je=yield vt(()=>fetch(B,Le));if(je.ok)return Tt(yield je.json());throw yield It("Generate Auth Token",je)})).apply(this,arguments)}function j(C,{fid:S}){return`${Ae(C)}/${S}/authTokens:generate`}function Z(C){return ye.apply(this,arguments)}function ye(){return(ye=(0,L.Z)(function*(C,S=!1){let x;const B=yield et(C.appConfig,ue=>{if(!Rn(ue))throw re.create("not-registered");const Ee=ue.authToken;if(!S&&Dr(Ee))return ue;if(1===Ee.requestStatus)return x=se(C,S),ue;{if(!navigator.onLine)throw re.create("app-offline");const Le=hr(ue);return x=Vt(C,Le),Le}});return x?yield x:B.authToken})).apply(this,arguments)}function se(C,S){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,L.Z)(function*(C,S){let x=yield gt(C.appConfig);for(;1===x.authToken.requestStatus;)yield $u(100),x=yield gt(C.appConfig);const B=x.authToken;return 0===B.requestStatus?Z(C,S):B})).apply(this,arguments)}function gt(C){return et(C,S=>{if(!Rn(S))throw re.create("not-registered");return function(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Vt(C,S){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,L.Z)(function*(C,S){try{const x=yield dc(C,S),B=Object.assign(Object.assign({},S),{authToken:x});return yield Ge(C.appConfig,B),x}catch(x){if(!we(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ge(C.appConfig,B)}else yield ji(C.appConfig);throw x}})).apply(this,arguments)}function Rn(C){return void 0!==C&&2===C.registrationStatus}function Dr(C){return 2===C.requestStatus&&!function(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function hr(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function To(){return(To=(0,L.Z)(function*(C){const S=C,{installationEntry:x,registrationPromise:B}=yield Nt(S.appConfig);return B?B.catch(console.error):Z(S).catch(console.error),x.fid})).apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(C,S=!1){const x=C;return yield hc(x.appConfig),(yield Z(x,S)).token})).apply(this,arguments)}function hc(C){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,L.Z)(function*(C){const{registrationPromise:S}=yield Nt(C);S&&(yield S)})).apply(this,arguments)}function Jt(C){return re.create("missing-app-config-values",{valueName:C})}const $r="installations";(0,ce._registerComponent)(new J.wA($r,C=>{const S=C.getProvider("app").getImmediate();return{app:S,appConfig:function(C){if(!C||!C.options)throw Jt("App Configuration");if(!C.name)throw Jt("App Name");const S=["projectId","apiKey","appId"];for(const x of S)if(!C.options[x])throw Jt(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S),platformLoggerProvider:(0,ce._getProvider)(S,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new J.wA("installations-internal",C=>{const S=C.getProvider("app").getImmediate(),x=(0,ce._getProvider)(S,$r).getImmediate();return{getId:()=>function(C){return To.apply(this,arguments)}(x),getToken:Q=>function(C){return Io.apply(this,arguments)}(x,Q)}},"PRIVATE")),(0,ce.registerVersion)(z,P),(0,ce.registerVersion)(z,P,"esm2017");const li="@firebase/remote-config",sr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gr{constructor(S,x,B,Q){this.client=S,this.storage=x,this.storageCache=B,this.logger=Q}isCachedDataFresh(S,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-x,Q=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Q}.`),Q}fetch(S){var x=this;return(0,L.Z)(function*(){const[B,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(S.cacheMaxAgeMillis,B))return Q;S.eTag=Q&&Q.eTag;const ue=yield x.client.fetch(S),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ee),ue})()}}function Hi(C=navigator){return C.languages&&C.languages[0]||C.language}class Gi{constructor(S,x,B,Q,ue,Ee){this.firebaseInstallations=S,this.sdkVersion=x,this.namespace=B,this.projectId=Q,this.apiKey=ue,this.appId=Ee}fetch(S){var x=this;return(0,L.Z)(function*(){const[B,Q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ee=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},je={sdk_version:x.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:x.appId,language_code:Hi()},Rt={method:"POST",headers:Le,body:JSON.stringify(je)},en=fetch(Ee,Rt),Fn=new Promise((Ki,Ji)=>{S.signal.addEventListener(()=>{const lt=new Error("The operation was aborted.");lt.name="AbortError",Ji(lt)})});let Wr;try{yield Promise.race([en,Fn]),Wr=yield en}catch(Ki){let Ji="fetch-client-network";throw"AbortError"===Ki.name&&(Ji="fetch-timeout"),sr.create(Ji,{originalErrorMessage:Ki.message})}let Jn=Wr.status;const hl=Wr.headers.get("ETag")||void 0;let Lo,fl;if(200===Wr.status){let Ki;try{Ki=yield Wr.json()}catch(Ji){throw sr.create("fetch-client-parse",{originalErrorMessage:Ji.message})}Lo=Ki.entries,fl=Ki.state}if("INSTANCE_STATE_UNSPECIFIED"===fl?Jn=500:"NO_CHANGE"===fl?Jn=304:("NO_TEMPLATE"===fl||"EMPTY_CONFIG"===fl)&&(Lo={}),304!==Jn&&200!==Jn)throw sr.create("fetch-status",{httpStatus:Jn});return{status:Jn,eTag:hl,config:Lo}})()}}class pc{constructor(S,x){this.client=S,this.storage=x}fetch(S){var x=this;return(0,L.Z)(function*(){const B=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:x,backoffCount:B}){var Q=this;return(0,L.Z)(function*(){yield function(C,S){return new Promise((x,B)=>{const Q=Math.max(S-Date.now(),0),ue=setTimeout(x,Q);C.addEventListener(()=>{clearTimeout(ue),B(sr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,x);try{const ue=yield Q.client.fetch(S);return yield Q.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Ee={throttleEndTimeMillis:Date.now()+(0,ie.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(Ee),Q.attemptFetch(S,Ee)}})()}}class zg{constructor(S,x,B,Q,ue){this.app=S,this._client=x,this._storageCache=B,this._storage=Q,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ya(C,S){const x=C.target.error||void 0;return sr.create(S,{originalErrorMessage:x&&x.message})}const ua="app_namespace_store";class Zg{constructor(S,x,B,Q=function(){return new Promise((C,S)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=B=>{S(Ya(B,"storage-open"))},x.onsuccess=B=>{C(B.target.result)},x.onupgradeneeded=B=>{const Q=B.target.result;switch(B.oldVersion){case 0:Q.createObjectStore(ua,{keyPath:"compositeKey"})}}}catch(x){S(sr.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=S,this.appName=x,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var x=this;return(0,L.Z)(function*(){const B=yield x.openDbPromise;return new Promise((Q,ue)=>{const Le=B.transaction([ua],"readonly").objectStore(ua),je=x.createCompositeKey(S);try{const Rt=Le.get(je);Rt.onerror=en=>{ue(Ya(en,"storage-get"))},Rt.onsuccess=en=>{const Fn=en.target.result;Q(Fn?Fn.value:void 0)}}catch(Rt){ue(sr.create("storage-get",{originalErrorMessage:Rt&&Rt.message}))}})})()}set(S,x){var B=this;return(0,L.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((ue,Ee)=>{const je=Q.transaction([ua],"readwrite").objectStore(ua),Rt=B.createCompositeKey(S);try{const en=je.put({compositeKey:Rt,value:x});en.onerror=Fn=>{Ee(Ya(Fn,"storage-set"))},en.onsuccess=()=>{ue()}}catch(en){Ee(sr.create("storage-set",{originalErrorMessage:en&&en.message}))}})})()}delete(S){var x=this;return(0,L.Z)(function*(){const B=yield x.openDbPromise;return new Promise((Q,ue)=>{const Le=B.transaction([ua],"readwrite").objectStore(ua),je=x.createCompositeKey(S);try{const Rt=Le.delete(je);Rt.onerror=en=>{ue(Ya(en,"storage-delete"))},Rt.onsuccess=()=>{Q()}}catch(Rt){ue(sr.create("storage-delete",{originalErrorMessage:Rt&&Rt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Kd{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const x=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),Q=S.storage.getActiveConfig(),ue=yield x;ue&&(S.lastFetchStatus=ue);const Ee=yield B;Ee&&(S.lastSuccessfulFetchTimestampMillis=Ee);const Le=yield Q;Le&&(S.activeConfig=Le)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function mc(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,L.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new J.wA("remote-config",function(S,{instanceIdentifier:x}){const B=S.getProvider("app").getImmediate(),Q=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw sr.create("registration-window");if(!(0,ie.hl)())throw sr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ee,appId:Le}=B.options;if(!ue)throw sr.create("registration-project-id");if(!Ee)throw sr.create("registration-api-key");if(!Le)throw sr.create("registration-app-id");const je=new Zg(Le,B.name,x=x||"firebase"),Rt=new Kd(je),en=new oe.Yd(li);en.logLevel=oe.in.ERROR;const Fn=new Gi(Q,ce.SDK_VERSION,x,ue,Ee,Le),Wr=new pc(Fn,je),Jn=new Gr(Wr,je,Rt,en),hl=new zg(B,Jn,Rt,je,en);return function(C){const S=(0,ie.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(hl),hl},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(li,"0.3.3"),(0,ce.registerVersion)(li,"0.3.3","esm2017");const la="/firebase-messaging-sw.js",Kg="/firebase-cloud-messaging-push-scope",Ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",as="google.c.a.c_id",Ja="google.c.a.c_l",hn="google.c.a.ts",Qa="google.c.a.e";var Ir=(()=>{return(C=Ir||(Ir={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ir;var C})();function us(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zu(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(x),Q=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)Q[ue]=B.charCodeAt(ue);return Q}const Zu="fcm_token_details_db",$f="fcm_token_object_Store";function ci(C){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Zu))return null;let S=null;return(yield(0,K.openDb)(Zu,5,function(){var B=(0,L.Z)(function*(Q){var ue;if(Q.oldVersion<2||!Q.objectStoreNames.contains($f))return;const Ee=Q.transaction.objectStore($f),Le=yield Ee.index("fcmSenderId").get(C);if(yield Ee.clear(),Le)if(2===Q.oldVersion){const je=Le;if(!je.auth||!je.p256dh||!je.endpoint)return;S={token:je.fcmToken,createTime:null!==(ue=je.createTime)&&void 0!==ue?ue:Date.now(),subscriptionOptions:{auth:je.auth,p256dh:je.p256dh,endpoint:je.endpoint,swScope:je.swScope,vapidKey:"string"==typeof je.vapidKey?je.vapidKey:us(je.vapidKey)}}}else if(3===Q.oldVersion){const je=Le;S={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:us(je.auth),p256dh:us(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:us(je.vapidKey)}}}else if(4===Q.oldVersion){const je=Le;S={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:us(je.auth),p256dh:us(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:us(je.vapidKey)}}}});return function(Q){return B.apply(this,arguments)}}())).close(),yield(0,K.deleteDb)(Zu),yield(0,K.deleteDb)("fcm_vapid_details_db"),yield(0,K.deleteDb)("undefined"),Xd(S)?S:null})).apply(this,arguments)}function Xd(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Js="firebase-messaging-store";let eh=null;function Xt(){return eh||(eh=(0,K.openDb)("firebase-messaging-database",1,C=>{switch(C.oldVersion){case 0:C.createObjectStore(Js)}})),eh}function th(C){return ls.apply(this,arguments)}function ls(){return(ls=(0,L.Z)(function*(C){const S=Mo(C),B=yield(yield Xt()).transaction(Js).objectStore(Js).get(S);if(B)return B;{const Q=yield ci(C.appConfig.senderId);if(Q)return yield qi(C,Q),Q}})).apply(this,arguments)}function qi(C,S){return qt.apply(this,arguments)}function qt(){return(qt=(0,L.Z)(function*(C,S){const x=Mo(C),Q=(yield Xt()).transaction(Js,"readwrite");return yield Q.objectStore(Js).put(S,x),yield Q.complete,S})).apply(this,arguments)}function da(C){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,L.Z)(function*(C){const S=Mo(C),B=(yield Xt()).transaction(Js,"readwrite");yield B.objectStore(Js).delete(S),yield B.complete})).apply(this,arguments)}function Mo({appConfig:C}){return C.appId}const qn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qs(C,S){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,L.Z)(function*(C,S){const x=yield eu(C),B=st(S),Q={method:"POST",headers:x,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(kn(C.appConfig),Q)).json()}catch(Ee){throw qn.create("token-subscribe-failed",{errorInfo:Ee})}if(ue.error)throw qn.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw qn.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function mr(C,S){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,L.Z)(function*(C,S){const x=yield eu(C),B=st(S.subscriptionOptions),Q={method:"PATCH",headers:x,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(`${kn(C.appConfig)}/${S.token}`,Q)).json()}catch(Ee){throw qn.create("token-update-failed",{errorInfo:Ee})}if(ue.error)throw qn.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw qn.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Qu(C,S){return eo.apply(this,arguments)}function eo(){return(eo=(0,L.Z)(function*(C,S){const B={method:"DELETE",headers:yield eu(C)};try{const ue=yield(yield fetch(`${kn(C.appConfig)}/${S}`,B)).json();if(ue.error)throw qn.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(Q){throw qn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function kn({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function eu(C){return tu.apply(this,arguments)}function tu(){return(tu=(0,L.Z)(function*({appConfig:C,installations:S}){const x=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function st({p256dh:C,auth:S,endpoint:x,vapidKey:B}){const Q={web:{endpoint:x,auth:S,p256dh:C}};return B!==Ka&&(Q.web.applicationPubKey=B),Q}const Xu=6048e5;function nh(C){return el.apply(this,arguments)}function el(){return(el=(0,L.Z)(function*(C){const S=yield tl(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:us(S.getKey("auth")),p256dh:us(S.getKey("p256dh"))},B=yield th(C.firebaseDependencies);if(B){if(nl(B.subscriptionOptions,x))return Date.now()>=B.createTime+Xu?_c(C,{token:B.token,createTime:Date.now(),subscriptionOptions:x}):B.token;try{yield Qu(C.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return ve(C.firebaseDependencies,x)}return ve(C.firebaseDependencies,x)})).apply(this,arguments)}function rh(C){return nu.apply(this,arguments)}function nu(){return(nu=(0,L.Z)(function*(C){const S=yield th(C.firebaseDependencies);S&&(yield Qu(C.firebaseDependencies,S.token),yield da(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function _c(C,S){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(C,S){try{const x=yield mr(C.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:x,createTime:Date.now()});return yield qi(C.firebaseDependencies,B),x}catch(x){throw yield rh(C),x}})).apply(this,arguments)}function ve(C,S){return Et.apply(this,arguments)}function Et(){return(Et=(0,L.Z)(function*(C,S){const B={token:yield Qs(C,S),createTime:Date.now(),subscriptionOptions:S};return yield qi(C,B),B.token})).apply(this,arguments)}function tl(C,S){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zu(S)})})).apply(this,arguments)}function nl(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function cs(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcm_message_id};return function(C,S){if(!S.notification)return;C.notification={};const x=S.notification.title;x&&(C.notification.title=x);const B=S.notification.body;B&&(C.notification.body=B);const Q=S.notification.image;Q&&(C.notification.image=Q)}(S,C),function(C,S){!S.data||(C.data=S.data)}(S,C),function(C,S){if(!S.fcmOptions)return;C.fcmOptions={};const x=S.fcmOptions.link;x&&(C.fcmOptions.link=x);const B=S.fcmOptions.analytics_label;B&&(C.fcmOptions.analyticsLabel=B)}(S,C),S}function ih(C){return"object"==typeof C&&!!C&&as in C}function yc(C,S){const x=[];for(let B=0;B<C.length;B++)x.push(C.charAt(B)),B<S.length&&x.push(S.charAt(B));return x.join("")}function pa(C){return qn.create("missing-app-config-values",{valueName:C})}yc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class On{constructor(S,x,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function(C){if(!C||!C.options)throw pa("App Configuration Object");if(!C.name)throw pa("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const B of S)if(!x[B])throw pa(B);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Q,installations:x,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Si(C){return iu.apply(this,arguments)}function iu(){return(iu=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(la,{scope:Kg}),C.swRegistration.update().catch(()=>{})}catch(S){throw qn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Wi(C,S){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,L.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield Si(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function vc(C,S){return rl.apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Ka)})).apply(this,arguments)}function bc(){return(bc=(0,L.Z)(function*(C,S){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield vc(C,null==S?void 0:S.vapidKey),yield Wi(C,null==S?void 0:S.serviceWorkerRegistration),nh(C)})).apply(this,arguments)}function ou(C,S,x){return au.apply(this,arguments)}function au(){return(au=(0,L.Z)(function*(C,S,x){const B=il(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:x[as],message_name:x[Ja],message_time:x[hn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(C){switch(C){case Ir.NOTIFICATION_CLICKED:return"notification_open";case Ir.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ma(){return(ma=(0,L.Z)(function*(C,S){const x=S.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===Ir.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(cs(x)):C.onMessageHandler.next(cs(x)));const B=x.data;ih(B)&&"1"===B[Qa]&&(yield ou(C,x.messageType,B))})).apply(this,arguments)}const wc="@firebase/messaging";function ah(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(){return"undefined"!=typeof window&&(0,ie.hl)()&&(yield(0,ie.eu)())&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new J.wA("messaging",C=>{const S=new On(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(C,S){return ma.apply(this,arguments)}(S,x)),S},"PUBLIC")),(0,ce._registerComponent)(new J.wA("messaging-internal",C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:B=>function(C,S){return bc.apply(this,arguments)}(S,B)}},"PRIVATE")),(0,ce.registerVersion)(wc,"0.9.4"),(0,ce.registerVersion)(wc,"0.9.4","esm2017");const ya="analytics",qf="firebase_id",to="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lu="https://www.googletagmanager.com/gtag/js",En=new oe.Yd("@firebase/analytics");function Cc(C){return Promise.all(C.map(S=>S.catch(x=>x)))}function Wf(C,S){const x=document.createElement("script");x.src=`${lu}?l=${C}&id=${S}`,x.async=!0,document.head.appendChild(x)}function va(C,S,x,B,Q,ue){return lh.apply(this,arguments)}function lh(){return(lh=(0,L.Z)(function*(C,S,x,B,Q,ue){const Ee=B[Q];try{if(Ee)yield S[Ee];else{const je=(yield Cc(x)).find(Rt=>Rt.measurementId===Q);je&&(yield S[je.appId])}}catch(Le){En.error(Le)}C("config",Q,ue)})).apply(this,arguments)}function ba(C,S,x,B,Q){return no.apply(this,arguments)}function no(){return(no=(0,L.Z)(function*(C,S,x,B,Q){try{let ue=[];if(Q&&Q.send_to){let Ee=Q.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Le=yield Cc(x);for(const je of Ee){const Rt=Le.find(Fn=>Fn.measurementId===je),en=Rt&&S[Rt.appId];if(!en){ue=[];break}ue.push(en)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),C("event",B,Q||{})}catch(ue){En.error(ue)}})).apply(this,arguments)}function Xg(){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(lu))return S;return null}const zi=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ol=new class{constructor(S={},x=1e3){this.throttleMetadata=S,this.intervalMillis=x}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,x){this.throttleMetadata[S]=x}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Yf(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Ic(C){return ro.apply(this,arguments)}function ro(){return(ro=(0,L.Z)(function*(C){var S;const{appId:x,apiKey:B}=C,Q={method:"GET",headers:Yf(B)},ue=to.replace("{app-id}",x),Ee=yield fetch(ue,Q);if(200!==Ee.status&&304!==Ee.status){let Le="";try{const je=yield Ee.json();(null===(S=je.error)||void 0===S?void 0:S.message)&&(Le=je.error.message)}catch(je){}throw zi.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Le})}return Ee.json()})).apply(this,arguments)}function dh(C){return hi.apply(this,arguments)}function hi(){return(hi=(0,L.Z)(function*(C,S=ol,x){const{appId:B,apiKey:Q,measurementId:ue}=C.options;if(!B)throw zi.create("no-app-id");if(!Q){if(ue)return{measurementId:ue,appId:B};throw zi.create("no-api-key")}const Ee=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new Kf;return setTimeout((0,L.Z)(function*(){Le.abort()}),void 0!==x?x:6e4),cu({appId:B,apiKey:Q,measurementId:ue},Ee,Le,S)})).apply(this,arguments)}function cu(C,S,x){return wa.apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:x},B,Q=ol){const{appId:ue,measurementId:Ee}=C;try{yield rv(B,S)}catch(Le){if(Ee)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ee} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ue,measurementId:Ee};throw Le}try{const Le=yield Ic(C);return Q.deleteThrottleMetadata(ue),Le}catch(Le){if(!hh(Le)){if(Q.deleteThrottleMetadata(ue),Ee)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ee} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ue,measurementId:Ee};throw Le}const je=503===Number(Le.customData.httpStatus)?(0,ie.$s)(x,Q.intervalMillis,30):(0,ie.$s)(x,Q.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+je,backoffCount:x+1};return Q.setThrottleMetadata(ue,Rt),En.debug(`Calling attemptFetch again in ${je} millis`),cu(C,Rt,B,Q)}})).apply(this,arguments)}function rv(C,S){return new Promise((x,B)=>{const Q=Math.max(S-Date.now(),0),ue=setTimeout(x,Q);C.addEventListener(()=>{clearTimeout(ue),B(zi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function hh(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Kf{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function fh(){return al.apply(this,arguments)}function al(){return(al=(0,L.Z)(function*(){if(!(0,ie.hl)())return En.warn(zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return En.warn(zi.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,L.Z)(function*(C,S,x,B,Q,ue,Ee){var Le;const je=dh(C);je.then(Jn=>{x[Jn.measurementId]=Jn.appId,C.options.measurementId&&Jn.measurementId!==C.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Jn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Jn=>En.error(Jn)),S.push(je);const Rt=fh().then(Jn=>{if(Jn)return B.getId()}),[en,Fn]=yield Promise.all([je,Rt]);Xg()||Wf(ue,en.measurementId),Q("js",new Date);const Wr=null!==(Le=null==Ee?void 0:Ee.config)&&void 0!==Le?Le:{};return Wr.origin="firebase",Wr.update=!0,null!=Fn&&(Wr[qf]=Fn),Q("config",en.measurementId,Wr),en.measurementId})).apply(this,arguments)}class Zt{constructor(S){this.app=S}_delete(){return delete Be[this.app.options.appId],Promise.resolve()}}let Be={},Yt=[];const Sc={};let ko,sn,yn="dataLayer",hu=!1;function Dn(C,S,x){!function(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),x=zi.create("invalid-analytics-context",{errorInfo:S});En.warn(x.message)}}();const B=C.options.appId;if(!B)throw zi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw zi.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Be[B])throw zi.create("already-exists",{id:B});if(!hu){!function(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(yn);const{wrappedGtag:ue,gtagCore:Ee}=function(C,S,x,B,Q){let ue=function(...Ee){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ue=window[Q]),window[Q]=function(C,S,x,B){function ue(){return(ue=(0,L.Z)(function*(Ee,Le,je){try{"event"===Ee?yield ba(C,S,x,Le,je):"config"===Ee?yield va(C,S,x,B,Le,je):C("set",Le)}catch(Rt){En.error(Rt)}})).apply(this,arguments)}return function(Ee,Le,je){return ue.apply(this,arguments)}}(ue,C,S,x),{gtagCore:ue,wrappedGtag:window[Q]}}(Be,Yt,Sc,yn,"gtag");sn=ue,ko=Ee,hu=!0}return Be[B]=function(C,S,x,B,Q,ue,Ee){return xo.apply(this,arguments)}(C,Yt,Sc,S,ko,yn,x),new Zt(C)}function Ea(){return(Ea=(0,L.Z)(function*(C,S,x,B,Q){if(Q&&Q.global)C("event",x,B);else{const ue=yield S;C("event",x,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function Yi(){return gh.apply(this,arguments)}function gh(){return(gh=(0,L.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}const mh="@firebase/analytics";(0,ce._registerComponent)(new J.wA(ya,(S,{options:x})=>Dn(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new J.wA("analytics-internal",function(S){try{const x=S.getProvider(ya).getImmediate();return{logEvent:(B,Q,ue)=>function(C,S,x,B){C=(0,ie.m9)(C),function(C,S,x,B,Q){return Ea.apply(this,arguments)}(sn,Be[C.app.options.appId],S,x,B).catch(Q=>En.error(Q))}(x,B,Q,ue)}}catch(x){throw zi.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(mh,"0.7.4"),(0,ce.registerVersion)(mh,"0.7.4","esm2017");var iv=F(7771),cl=F(3637),Da=F(8307),gu=F(9746),rm=F(2639);const _h=new u.GfV("7.2.0"),Ac="__angularfire_symbol__analyticsIsSupported",oo="__angularfire_symbol__remoteConfigIsSupported",Os="__angularfire_symbol__messagingIsSupported";function hs(C,S,x){if(S){if(1===S.length)return S[0];const ue=S.filter(Ee=>Ee.app===x);if(1===ue.length)return ue[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ac]||(globalThis[Ac]=Yi().then(C=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=C)),globalThis[Os]||(globalThis[Os]=ah().then(C=>globalThis.__angularfire_symbol__messagingIsSupportedValue=C)),globalThis[oo]||(globalThis[oo]=mc().then(C=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=C));const mu=(C,S)=>{const x=S?[S]:(0,te.C6)(),B=[];return x.forEach(Q=>{Q.container.getProvider(C).instances.forEach(Ee=>{B.includes(Ee)||B.push(Ee)})}),B};function Mi(){}class Ps{constructor(S,x=iv.N){this.zone=S,this.delegate=x}now(){return this.delegate.now()}schedule(S,x,B){const Q=this.zone;return this.delegate.schedule(function(Ee){Q.runGuarded(()=>{S.apply(this,[Ee])})},x,B)}}class vh{constructor(S){this.zone=S,this.task=null}call(S,x){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mi,{},Mi,Mi)),x.pipe((0,Da.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mc=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ps(Zone.current)),this.insideAngular=x.run(()=>new Ps(Zone.current,cl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(u.LFG(u.R0b))},C.\u0275prov=u.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Po(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function dl(C){return C.pipe((0,gu.QV)(Po().outsideAngular))}function bn(C){return Po(),function(C){return function(x){return(x=x.lift(new vh(C.ngZone))).pipe((0,rm.R)(C.outsideAngular),(0,gu.QV)(C.insideAngular))}}(Po())(C)}},3854:(He,_e,F)=>{"use strict";F.d(_e,{BH:()=>de,LL:()=>We,ZR:()=>Ft,zI:()=>ft,US:()=>J,tV:()=>z,$s:()=>zt,r3:()=>an,Sg:()=>Re,ne:()=>ir,vZ:()=>Lt,ZB:()=>U,pd:()=>os,m9:()=>dc,z$:()=>Me,jU:()=>X,ru:()=>re,d:()=>Ae,xb:()=>gn,w1:()=>Tt,hl:()=>pn,uI:()=>be,UG:()=>he,b$:()=>we,G6:()=>yt,Mn:()=>It,xO:()=>na,zd:()=>Ui,eu:()=>vt});const ce=function(W){const j=[];let Z=0;for(let ye=0;ye<W.length;ye++){let se=W.charCodeAt(ye);se<128?j[Z++]=se:se<2048?(j[Z++]=se>>6|192,j[Z++]=63&se|128):55296==(64512&se)&&ye+1<W.length&&56320==(64512&W.charCodeAt(ye+1))?(se=65536+((1023&se)<<10)+(1023&W.charCodeAt(++ye)),j[Z++]=se>>18|240,j[Z++]=se>>12&63|128,j[Z++]=se>>6&63|128,j[Z++]=63&se|128):(j[Z++]=se>>12|224,j[Z++]=se>>6&63|128,j[Z++]=63&se|128)}return j},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,j){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let se=0;se<W.length;se+=3){const Ve=W[se],gt=se+1<W.length,Vt=gt?W[se+1]:0,Mn=se+2<W.length,Rn=Mn?W[se+2]:0;let hr=(15&Vt)<<2|Rn>>6,Co=63&Rn;Mn||(Co=64,gt||(hr=64)),ye.push(Z[Ve>>2],Z[(3&Ve)<<4|Vt>>4],Z[hr],Z[Co])}return ye.join("")},encodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(W):this.encodeByteArray(ce(W),j)},decodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(W):function(W){const j=[];let Z=0,ye=0;for(;Z<W.length;){const se=W[Z++];if(se<128)j[ye++]=String.fromCharCode(se);else if(se>191&&se<224){const Ve=W[Z++];j[ye++]=String.fromCharCode((31&se)<<6|63&Ve)}else if(se>239&&se<365){const Mn=((7&se)<<18|(63&W[Z++])<<12|(63&W[Z++])<<6|63&W[Z++])-65536;j[ye++]=String.fromCharCode(55296+(Mn>>10)),j[ye++]=String.fromCharCode(56320+(1023&Mn))}else{const Ve=W[Z++],gt=W[Z++];j[ye++]=String.fromCharCode((15&se)<<12|(63&Ve)<<6|63&gt)}}return j.join("")}(this.decodeStringToByteArray(W,j))},decodeStringToByteArray(W,j){this.init_();const Z=j?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let se=0;se<W.length;){const Ve=Z[W.charAt(se++)],Vt=se<W.length?Z[W.charAt(se)]:0;++se;const Rn=se<W.length?Z[W.charAt(se)]:64;++se;const Pt=se<W.length?Z[W.charAt(se)]:64;if(++se,null==Ve||null==Vt||null==Rn||null==Pt)throw Error();ye.push(Ve<<2|Vt>>4),64!==Rn&&(ye.push(Vt<<4&240|Rn>>2),64!==Pt&&ye.push(Rn<<6&192|Pt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},K=function(W){return function(W){const j=ce(W);return J.encodeByteArray(j,!0)}(W).replace(/\./g,"")},z=function(W){try{return J.decodeString(W,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function U(W,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return j}for(const Z in j)!j.hasOwnProperty(Z)||!G(Z)||(W[Z]=U(W[Z],j[Z]));return W}function G(W){return"__proto__"!==W}class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Z)=>{this.resolve=j,this.reject=Z})}wrapCallback(j){return(Z,ye)=>{Z?this.reject(Z):this.resolve(ye),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Z):j(Z,ye))}}}function Re(W,j){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=j||"demo-project",se=W.iat||0,Ve=W.sub||W.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:se,exp:se+3600,auth_time:se,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},W);return[K(JSON.stringify({alg:"none",type:"JWT"})),K(JSON.stringify(gt)),""].join(".")}function Me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function X(){return"object"==typeof self&&self.self===self}function re(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Me().indexOf("Electron/")>=0}function Tt(){const W=Me();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function It(){return Me().indexOf("MSAppHost/")>=0}function yt(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pn(){return"object"==typeof indexedDB}function vt(){return new Promise((W,j)=>{try{let Z=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(ye);se.onsuccess=()=>{se.result.close(),Z||self.indexedDB.deleteDatabase(ye),W(!0)},se.onupgradeneeded=()=>{Z=!1},se.onerror=()=>{var Ve;j((null===(Ve=se.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(Z){j(Z)}})}function ft(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ft extends Error{constructor(j,Z,ye){super(Z),this.code=j,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(j,Z,ye){this.service=j,this.serviceName=Z,this.errors=ye}create(j,...Z){const ye=Z[0]||{},se=`${this.service}/${j}`,Ve=this.errors[j],gt=Ve?function(W,j){return W.replace(zs,(Z,ye)=>{const se=j[ye];return null!=se?String(se):`<${ye}?>`})}(Ve,ye):"Error";return new Ft(se,`${this.serviceName}: ${gt} (${se}).`,ye)}}const zs=/\{\$([^}]+)}/g;function an(W,j){return Object.prototype.hasOwnProperty.call(W,j)}function gn(W){for(const j in W)if(Object.prototype.hasOwnProperty.call(W,j))return!1;return!0}function Lt(W,j){if(W===j)return!0;const Z=Object.keys(W),ye=Object.keys(j);for(const se of Z){if(!ye.includes(se))return!1;const Ve=W[se],gt=j[se];if(mn(Ve)&&mn(gt)){if(!Lt(Ve,gt))return!1}else if(Ve!==gt)return!1}for(const se of ye)if(!Z.includes(se))return!1;return!0}function mn(W){return null!==W&&"object"==typeof W}function na(W){const j=[];for(const[Z,ye]of Object.entries(W))Array.isArray(ye)?ye.forEach(se=>{j.push(encodeURIComponent(Z)+"="+encodeURIComponent(se))}):j.push(encodeURIComponent(Z)+"="+encodeURIComponent(ye));return j.length?"&"+j.join("&"):""}function Ui(W){const j={};return W.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[se,Ve]=ye.split("=");j[decodeURIComponent(se)]=decodeURIComponent(Ve)}}),j}function os(W){const j=W.indexOf("?");if(!j)return"";const Z=W.indexOf("#",j);return W.substring(j,Z>0?Z:void 0)}function ir(W,j){const Z=new Hn(W,j);return Z.subscribe.bind(Z)}class Hn{constructor(j,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{j(this)}).catch(ye=>{this.error(ye)})}next(j){this.forEachObserver(Z=>{Z.next(j)})}error(j){this.forEachObserver(Z=>{Z.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Z,ye){let se;if(void 0===j&&void 0===Z&&void 0===ye)throw new Error("Missing Observer.");se=function(W,j){if("object"!=typeof W||null===W)return!1;for(const Z of["next","error","complete"])if(Z in W&&"function"==typeof W[Z])return!0;return!1}(j)?j:{next:j,error:Z,complete:ye},void 0===se.next&&(se.next=ji),void 0===se.error&&(se.error=ji),void 0===se.complete&&(se.complete=ji);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(gt){}}),this.observers.push(se),Ve}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,j)}sendOne(j,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Z(this.observers[j])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ji(){}function zt(W,j=1e3,Z=2){const ye=j*Math.pow(Z,W),se=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+se)}function dc(W){return W&&W._delegate?W._delegate:W}},2329:(He,_e,F)=>{"use strict";F.d(_e,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=F(8026);(0,u.registerVersion)("firebase","9.6.0","app")},7841:(He,_e,F)=>{"use strict";F.d(_e,{Z:()=>u.Z});var u=F(3394);u.Z.registerVersion("firebase","9.6.0","app-compat")},941:(He,_e,F)=>{"use strict";F.r(_e);var u=F(8239),te=F(3394),L=F(3854),ce=F(8026);function K(y,p){var g={};for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&p.indexOf(b)<0&&(g[b]=y[b]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(b=Object.getOwnPropertySymbols(y);I<b.length;I++)p.indexOf(b[I])<0&&Object.prototype.propertyIsEnumerable.call(y,b[I])&&(g[b[I]]=y[b[I]])}return g}var Ft=F(5422),We=F(3910);const Do=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Is=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},an=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gn=new Ft.Yd("@firebase/auth");function rr(y,...p){gn.logLevel<=Ft.in.ERROR&&gn.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function Lt(y,...p){throw os(y,...p)}function mn(y,...p){return os(y,...p)}function na(y,p,g){const b=Object.assign(Object.assign({},Is()),{[p]:g});return new L.LL("auth","Firebase",b).create(p,{appName:y.name})}function Ui(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Lt(y,"argument-error"),na(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function os(y,...p){if("string"!=typeof y){const g=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return an.create(y,...p)}function De(y,p,...g){if(!y)throw os(p,...g)}function ir(y){const p="INTERNAL ASSERTION FAILED: "+y;throw rr(p),new Error(p)}function Hn(y,p){y||ir(p)}const Ge=new Map;function $t(y){Hn(y instanceof Function,"Expected a class definition");let p=Ge.get(y);return p?(Hn(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Ge.set(y,p),p)}function et(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function it(){return"http:"===Nt()||"https:"===Nt()}function Nt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Gt{constructor(p,g){this.shortDelay=p,this.longDelay=g,Hn(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(it()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Oe(y,p){Hn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Je{static initialize(p,g,b){this.fetchImpl=p,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zs=new Gt(3e4,6e4);function zt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function pt(y,p,g,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,u.Z)(function*(y,p,g,b,I={}){return dc(y,I,()=>{let M={},q={};b&&("GET"===p?q=b:M={body:JSON.stringify(b)});const ae=(0,L.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),xe=new(Je.headers());return xe.set("Content-Type","application/json"),xe.set("X-Client-Version",y._getSdkClientVersion()),y.languageCode&&xe.set("X-Firebase-Locale",y.languageCode),Je.fetch()(ye(y,y.config.apiHost,g,ae),Object.assign({method:p,headers:xe,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function dc(y,p,g){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(y,p,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Hu),p);try{const I=new se(y),M=yield Promise.race([g(),I.promise]);I.clearNetworkTimeout();const q=yield M.json();if("needConfirmation"in q)throw Ve(y,"account-exists-with-different-credential",q);if(M.ok&&!("errorMessage"in q))return q;{const ae=M.ok?q.errorMessage:q.error.message,[xe,Ie]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Ve(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===xe)throw Ve(y,"email-already-in-use",q);const $e=b[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw na(y,$e,Ie);Lt(y,$e)}}catch(I){if(I instanceof L.ZR)throw I;Lt(y,"network-request-failed")}})).apply(this,arguments)}function j(y,p,g,b){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(function*(y,p,g,b,I={}){const M=yield pt(y,p,g,b,I);return"mfaPendingCredential"in M&&Lt(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function ye(y,p,g,b){const I=`${p}${g}?${b}`;return y.config.emulator?Oe(y.config,I):`${y.config.apiScheme}://${I}`}class se{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(mn(this.auth,"timeout")),Zs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ve(y,p,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const I=mn(y,p,b);return I.customData._tokenResponse=g,I}function Vt(){return(Vt=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Mn(y,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Dr(y,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function hr(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function To(){return(To=(0,u.Z)(function*(y,p=!1){const g=(0,L.m9)(y),b=yield g.getIdToken(p),I=Io(b);De(I&&I.exp&&I.auth_time&&I.iat,g.auth,"internal-error");const M="object"==typeof I.firebase?I.firebase:void 0,q=null==M?void 0:M.sign_in_provider;return{claims:I,token:b,authTime:hr(qu(I.auth_time)),issuedAtTime:hr(qu(I.iat)),expirationTime:hr(qu(I.exp)),signInProvider:q||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function qu(y){return 1e3*Number(y)}function Io(y){const[p,g,b]=y.split(".");if(void 0===p||void 0===g||void 0===b)return rr("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,L.tV)(g);return I?JSON.parse(I):(rr("Failed to decode base64 JWT payload"),null)}catch(I){return rr("Caught error parsing JWT payload as JSON",I),null}}function Ci(y,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,u.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(b){throw b instanceof L.ZR&&ai(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function ai({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class $i{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const I=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),b)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class Ti{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function So(y){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(y){var p;const g=y.auth,b=yield y.getIdToken(),I=yield Ci(y,Dr(g,{idToken:b}));De(null==I?void 0:I.users.length,g,"internal-error");const M=I.users[0];y._notifyReloadListener(M);const q=(null===(p=M.providerUserInfo)||void 0===p?void 0:p.length)?$r(M.providerUserInfo):[],ae=Jt(y.providerData,q),$e=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==ae?void 0:ae.length)),qe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ae,metadata:new Ti(M.createdAt,M.lastLoginAt),isAnonymous:$e};Object.assign(y,qe)})).apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*(y){const p=(0,L.m9)(y);yield So(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Jt(y,p){return[...y.filter(b=>!p.some(I=>I.providerId===b.providerId)),...p]}function $r(y){return y.map(p=>{var{providerId:g}=p,b=K(p,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function xn(){return(xn=(0,u.Z)(function*(y,p){const g=yield dc(y,{},()=>{const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:I,apiKey:M}=y.config,q=ye(y,I,"/v1/token",`key=${M}`);return Je.fetch()(q,{method:"POST",headers:{"X-Client-Version":y._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){De(p.idToken,"internal-error"),De(void 0!==p.idToken,"internal-error"),De(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(y){const p=Io(y);return De(p,"internal-error"),De(void 0!==p.exp,"internal-error"),De(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var b=this;return(0,u.Z)(function*(){return De(!b.accessToken||b.refreshToken,p,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var b=this;return(0,u.Z)(function*(){const{accessToken:I,refreshToken:M,expiresIn:q}=yield function(y,p){return xn.apply(this,arguments)}(p,g);b.updateTokensAndExpiration(I,M,Number(q))})()}updateTokensAndExpiration(p,g,b){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,g){const{refreshToken:b,accessToken:I,expirationTime:M}=g,q=new ui;return b&&(De("string"==typeof b,"internal-error",{appName:p}),q.refreshToken=b),I&&(De("string"==typeof I,"internal-error",{appName:p}),q.accessToken=I),M&&(De("number"==typeof M,"internal-error",{appName:p}),q.expirationTime=M),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ui,this.toJSON())}_performRefresh(){return ir("not implemented")}}function Qt(y,p){De("string"==typeof y||void 0===y,"internal-error",{appName:p})}class li{constructor(p){var{uid:g,auth:b,stsTokenManager:I}=p,M=K(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.metadata=new Ti(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,u.Z)(function*(){const b=yield Ci(g,g.stsTokenManager.getToken(g.auth,p));return De(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(p){return function(y){return To.apply(this,arguments)}(this,p)}reload(){return function(y){return bt.apply(this,arguments)}(this)}_assign(p){this!==p&&(De(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new li(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var b=this;return(0,u.Z)(function*(){let I=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),I=!0),g&&(yield So(b)),yield b.auth._persistUserIfCurrent(b),I&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,u.Z)(function*(){const g=yield p.getIdToken();return yield Ci(p,function(y,p){return Vt.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var b,I,M,q,ae,xe,Ie,$e;const qe=null!==(b=g.displayName)&&void 0!==b?b:void 0,Dt=null!==(I=g.email)&&void 0!==I?I:void 0,Wn=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,qo=null!==(q=g.photoURL)&&void 0!==q?q:void 0,kh=null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,zc=null!==(xe=g._redirectEventId)&&void 0!==xe?xe:void 0,Nm=null!==(Ie=g.createdAt)&&void 0!==Ie?Ie:void 0,Mm=null!==($e=g.lastLoginAt)&&void 0!==$e?$e:void 0,{uid:Zc,emailVerified:Rm,isAnonymous:xm,providerData:yp,stsTokenManager:Yc}=g;De(Zc&&Yc,p,"internal-error");const Oh=ui.fromJSON(this.name,Yc);De("string"==typeof Zc,p,"internal-error"),Qt(qe,p.name),Qt(Dt,p.name),De("boolean"==typeof Rm,p,"internal-error"),De("boolean"==typeof xm,p,"internal-error"),Qt(Wn,p.name),Qt(qo,p.name),Qt(kh,p.name),Qt(zc,p.name),Qt(Nm,p.name),Qt(Mm,p.name);const Ph=new li({uid:Zc,auth:p,email:Dt,emailVerified:Rm,displayName:qe,isAnonymous:xm,photoURL:qo,phoneNumber:Wn,tenantId:kh,stsTokenManager:Oh,createdAt:Nm,lastLoginAt:Mm});return yp&&Array.isArray(yp)&&(Ph.providerData=yp.map(xa=>Object.assign({},xa))),zc&&(Ph._redirectEventId=zc),Ph}static _fromIdTokenResponse(p,g,b=!1){return(0,u.Z)(function*(){const I=new ui;I.updateFromServerResponse(g);const M=new li({uid:g.localId,auth:p,stsTokenManager:I,isAnonymous:b});return yield So(M),M})()}}const ut=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,b){var I=this;return(0,u.Z)(function*(){I.storage[g]=b})()}_get(g){var b=this;return(0,u.Z)(function*(){const I=b.storage[g];return void 0===I?null:I})()}_remove(g){var b=this;return(0,u.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function Hr(y,p,g){return`firebase:${y}:${p}:${g}`}class Ii{constructor(p,g,b){this.persistence=p,this.auth=g,this.userKey=b;const{config:I,name:M}=this.auth;this.fullUserKey=Hr(this.userKey,I.apiKey,M),this.fullPersistenceKey=Hr("persistence",I.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?li._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,u.Z)(function*(){if(g.persistence===p)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,b="authUser"){return(0,u.Z)(function*(){if(!g.length)return new Ii($t(ut),p,b);const I=(yield Promise.all(g.map(function(){var Ie=(0,u.Z)(function*($e){if(yield $e._isAvailable())return $e});return function($e){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let M=I[0]||$t(ut);const q=Hr(b,p.config.apiKey,p.name);let ae=null;for(const Ie of g)try{const $e=yield Ie._get(q);if($e){const qe=li._fromJSON(p,$e);Ie!==M&&(ae=qe),M=Ie;break}}catch($e){}const xe=I.filter(Ie=>Ie._shouldAllowMigration);return M._shouldAllowMigration&&xe.length?(M=xe[0],ae&&(yield M._set(q,ae.toJSON())),yield Promise.all(g.map(function(){var Ie=(0,u.Z)(function*($e){if($e!==M)try{yield $e._remove(q)}catch(qe){}});return function($e){return Ie.apply(this,arguments)}}())),new Ii(M,p,b)):new Ii(M,p,b)})()}}function sr(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ys(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ia(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(wt(p))return"Blackberry";if(Gd(p))return"Webos";if(fr(p))return"Safari";if((p.includes("chrome/")||sa(p))&&!p.includes("edge/"))return"Chrome";if(Tr(p))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function ia(y=(0,L.z$)()){return/firefox\//i.test(y)}function fr(y=(0,L.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function sa(y=(0,L.z$)()){return/crios\//i.test(y)}function Ys(y=(0,L.z$)()){return/iemobile/i.test(y)}function Tr(y=(0,L.z$)()){return/android/i.test(y)}function wt(y=(0,L.z$)()){return/blackberry/i.test(y)}function Gd(y=(0,L.z$)()){return/webos/i.test(y)}function oa(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ss(y=(0,L.z$)()){return oa(y)||Tr(y)||Gd(y)||wt(y)||/windows phone/i.test(y)||Ys(y)}function pr(y,p=[]){let g;switch(y){case"Browser":g=sr((0,L.z$)());break;case"Worker":g=`${sr((0,L.z$)())}-${y}`;break;default:g=y}const b=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${b}`}class Wg{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gr(this),this.idTokenSubscription=new gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=an,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var b=this;return g&&(this._popupRedirectResolver=$t(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var I,M;b._deleted||(b.persistenceManager=yield Ii.create(b,p),!b._deleted&&((null===(I=b._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(M=b.currentUser)||void 0===M?void 0:M.uid)||null,!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,u.Z)(function*(){var b;let I=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,q=null==I?void 0:I._redirectEventId,ae=yield g.tryRedirectSignIn(p);(!M||M===q)&&(null==ae?void 0:ae.user)&&(I=ae.user)}return I?I._redirectEventId?(De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===I._redirectEventId?g.directlySetCurrentUser(I):g.reloadAndSetCurrentUserOrClear(I)):g.reloadAndSetCurrentUserOrClear(I):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,u.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(I){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,u.Z)(function*(){try{yield So(p)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,u.Z)(function*(){const b=p?(0,L.m9)(p):null;return b&&De(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,u.Z)(function*(){if(!g._deleted)return p&&De(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,u.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence($t(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,g,b){return this.registerStateListener(this.authStateSubscription,p,g,b)}onIdTokenChanged(p,g,b){return this.registerStateListener(this.idTokenSubscription,p,g,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var b=this;return(0,u.Z)(function*(){const I=yield b.getOrInitRedirectPersistenceManager(g);return null===p?I.removeCurrentUser():I.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const b=p&&$t(p)||g._popupRedirectResolver;De(b,g,"argument-error"),g.redirectPersistenceManager=yield Ii.create(g,[$t(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,u.Z)(function*(){var b,I;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===p?g._currentUser:(null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,u.Z)(function*(){if(p===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,b,I){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return De(q,this,"internal-error"),q.then(()=>M(this.currentUser)),"function"==typeof g?p.addObserver(g,b,I):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=pr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function un(y){return(0,L.m9)(y)}class gr{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function za(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function Hi(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Za{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return ir("not implemented")}_getIdTokenResponse(p){return ir("not implemented")}_linkToIdToken(p,g){return ir("not implemented")}_getReauthenticationResolver(p){return ir("not implemented")}}function Wd(y,p){return pc.apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:resetPassword",zt(y,p))})).apply(this,arguments)}function Uf(y,p){return zd.apply(this,arguments)}function zd(){return(zd=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function zg(y,p){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:update",zt(y,p))})).apply(this,arguments)}function Zd(){return(Zd=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithPassword",zt(y,p))})).apply(this,arguments)}function gc(y,p){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:sendOobCode",zt(y,p))})).apply(this,arguments)}function Zg(y,p){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,u.Z)(function*(y,p){return gc(y,p)})).apply(this,arguments)}function Yg(y,p){return jf.apply(this,arguments)}function jf(){return(jf=(0,u.Z)(function*(y,p){return gc(y,p)})).apply(this,arguments)}function Jd(y,p){return mc.apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(y,p){return gc(y,p)})).apply(this,arguments)}function Wu(y,p){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(y,p){return gc(y,p)})).apply(this,arguments)}function Ka(){return(Ka=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,p))})).apply(this,arguments)}function as(){return(as=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,p))})).apply(this,arguments)}class Ja extends Za{constructor(p,g,b,I=null){super("password",b),this._email=p,this._password=g,this._tenantId=I}static _fromEmailAndPassword(p,g){return new Ja(p,g,"password")}static _fromEmailAndCode(p,g,b=null){return new Ja(p,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function(y,p){return Zd.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(y,p){return Ka.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Lt(p,"internal-error")}})()}_linkToIdToken(p,g){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Uf(p,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(y,p){return as.apply(this,arguments)}(p,{idToken:g,email:b._email,oobCode:b._password});default:Lt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function hn(y,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithIdp",zt(y,p))})).apply(this,arguments)}class Ir extends Za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Ir(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Lt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:I}=g,M=K(g,["providerId","signInMethod"]);if(!b||!I)return null;const q=new Ir(b,I);return q.idToken=M.idToken||void 0,q.accessToken=M.accessToken||void 0,q.secret=M.secret,q.nonce=M.nonce,q.pendingToken=M.pendingToken||null,q}_getIdTokenResponse(p){return hn(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,hn(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,hn(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,L.xO)(g)}return p}}function us(y,p){return zu.apply(this,arguments)}function zu(){return(zu=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,p))})).apply(this,arguments)}function Yu(){return(Yu=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,p))})).apply(this,arguments)}function ci(){return(ci=(0,u.Z)(function*(y,p){const g=yield j(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,p));if(g.temporaryProof)throw Ve(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Xa={USER_NOT_FOUND:"user-not-found"};function ca(){return(ca=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Xa)})).apply(this,arguments)}class No extends Za{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new No({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new No({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(y,p){return Yu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(y,p){return ci.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(y,p){return ca.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:b,verificationCode:I}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:b,code:I}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:b,phoneNumber:I,temporaryProof:M}=p;return b||g||I||M?new No({verificationId:g,verificationCode:b,phoneNumber:I,temporaryProof:M}):null}}class Xt{constructor(p){var g,b,I,M,q,ae;const xe=(0,L.zd)((0,L.pd)(p)),Ie=null!==(g=xe.apiKey)&&void 0!==g?g:null,$e=null!==(b=xe.oobCode)&&void 0!==b?b:null,qe=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=xe.mode)&&void 0!==I?I:null);De(Ie&&$e&&qe,"argument-error"),this.apiKey=Ie,this.operation=qe,this.code=$e,this.continueUrl=null!==(M=xe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(q=xe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ae=xe.tenantId)&&void 0!==ae?ae:null}static parseLink(p){const g=function(y){const p=(0,L.zd)((0,L.pd)(y)).link,g=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||g||p||y}(p);try{return new Xt(g)}catch(b){return null}}}let ls=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Ja._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const I=Xt.parseLink(b);return De(I,"argument-error"),Ja._fromEmailAndCode(g,I.code,I.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class qi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class qt extends qi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class da extends qt{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return De("providerId"in g&&"signInMethod"in g,"argument-error"),Ir._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return De(p.idToken||p.accessToken,"argument-error"),Ir._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return da.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return da.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:I,pendingToken:M,nonce:q,providerId:ae}=p;if(!b&&!I&&!g&&!M||!ae)return null;try{return new da(ae)._credential({idToken:g,accessToken:b,nonce:q,pendingToken:M})}catch(xe){return null}}}let Ku=(()=>{class y extends qt{constructor(){super("facebook.com")}static credential(g){return Ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Mo=(()=>{class y extends qt{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:I}=g;if(!b&&!I)return null;try{return y.credential(b,I)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),di=(()=>{class y extends qt{constructor(){super("github.com")}static credential(g){return Ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qs extends Za{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return hn(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,hn(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,hn(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:I,pendingToken:M}=g;return b&&I&&M&&b===I?new Qs(b,M):null}static _create(p,g){return new Qs(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mr extends qi{constructor(p){De(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return mr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return mr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Qs.fromJSON(p);return De(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:b}=p;if(!g||!b)return null;try{return Qs._create(b,g)}catch(I){return null}}}let Ju=(()=>{class y extends qt{constructor(){super("twitter.com")}static credential(g,b){return Ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:I}=g;if(!b||!I)return null;try{return y.credential(b,I)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Qu(y,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signUp",zt(y,p))})).apply(this,arguments)}class kn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,b,I=!1){return(0,u.Z)(function*(){const M=yield li._fromIdTokenResponse(p,b,I),q=eu(b);return new kn({user:M,providerId:q,_tokenResponse:b,operationType:g})})()}static _forOperation(p,g,b){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const I=eu(b);return new kn({user:p,providerId:I,_tokenResponse:b,operationType:g})})()}}function eu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function st(){return(st=(0,u.Z)(function*(y){var p;const g=un(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new kn({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield Qu(g,{returnSecureToken:!0}),I=yield kn._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class Xu extends L.ZR{constructor(p,g,b,I){var M;super(g.code,g.message),this.operationType=b,this.user=I,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,g,b,I){return new Xu(p,g,b,I)}}function nh(y,p,g,b){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Xu._fromErrorAndOperation(y,M,p,b):M})}function el(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function nu(){return(nu=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y);yield ve(!0,g,p);const{providerUserInfo:b}=yield Mn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),I=el(b||[]);return g.providerData=g.providerData.filter(M=>I.has(M.providerId)),I.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function _c(y,p){return As.apply(this,arguments)}function As(){return(As=(0,u.Z)(function*(y,p,g=!1){const b=yield Ci(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return kn._forOperation(y,"link",b)})).apply(this,arguments)}function ve(y,p,g){return Et.apply(this,arguments)}function Et(){return(Et=(0,u.Z)(function*(y,p,g){yield So(p);const I=!1===y?"provider-already-linked":"no-such-provider";De(el(p.providerData).has(g)===y,p.auth,I)})).apply(this,arguments)}function tl(y,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,u.Z)(function*(y,p,g=!1){const{auth:b}=y,I="reauthenticate";try{const M=yield Ci(y,nh(b,I,p,y),g);De(M.idToken,b,"internal-error");const q=Io(M.idToken);De(q,b,"internal-error");const{sub:ae}=q;return De(y.uid===ae,b,"user-mismatch"),kn._forOperation(y,I,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Lt(b,"user-mismatch"),M}})).apply(this,arguments)}function nl(y,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,u.Z)(function*(y,p,g=!1){const b="signIn",I=yield nh(y,b,p),M=yield kn._fromIdTokenResponse(y,b,I);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Sr(y,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(y,p){return nl(un(y),p)})).apply(this,arguments)}function ru(y,p){return ih.apply(this,arguments)}function ih(){return(ih=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y);return yield ve(!1,g,p.providerId),_c(g,p)})).apply(this,arguments)}function yc(y,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,u.Z)(function*(y,p){return tl((0,L.m9)(y),p)})).apply(this,arguments)}function pa(y,p){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(y,p){return j(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,p))})).apply(this,arguments)}function iu(){return(iu=(0,u.Z)(function*(y,p){const g=un(y),b=yield pa(g,{token:p,returnSecureToken:!0}),I=yield kn._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class Wi{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Ar._fromServerResponse(p,g):Lt(p,"internal-error")}}class Ar extends Wi{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Ar(g)}}function vc(y,p,g){var b;De((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),De(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function su(){return(su=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y),I={requestType:"PASSWORD_RESET",email:p};g&&vc(b,I,g),yield Yg(b,I)})).apply(this,arguments)}function ou(){return(ou=(0,u.Z)(function*(y,p,g){yield Wd((0,L.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function il(){return(il=(0,u.Z)(function*(y,p){yield zg((0,L.m9)(y),{oobCode:p})})).apply(this,arguments)}function ga(y,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y),b=yield Wd(g,{oobCode:p}),I=b.requestType;switch(De(I,g,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(b.mfaInfo,g,"internal-error");default:De(b.email,g,"internal-error")}let M=null;return b.mfaInfo&&(M=Wi._fromServerResponse(un(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:M},operation:I}})).apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(y,p){const{data:g}=yield ga((0,L.m9)(y),p);return g.email})).apply(this,arguments)}function Ec(){return(Ec=(0,u.Z)(function*(y,p,g){const b=un(y),I=yield Qu(b,{returnSecureToken:!0,email:p,password:g}),M=yield kn._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(M.user),M})).apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y),I={requestType:"EMAIL_SIGNIN",email:p};De(g.handleCodeInApp,b,"argument-error"),g&&vc(b,I,g),yield Jd(b,I)})).apply(this,arguments)}function Yn(){return(Yn=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y),I=ls.credentialWithLink(p,g||et());return De(I._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Sr(b,I)})).apply(this,arguments)}function _a(y,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:createAuthUri",zt(y,p))})).apply(this,arguments)}function Gf(){return(Gf=(0,u.Z)(function*(y,p){const b={identifier:p,continueUri:it()?et():"http://localhost"},{signinMethods:I}=yield _a((0,L.m9)(y),b);return I||[]})).apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y),I={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&vc(g.auth,I,p);const{email:M}=yield Zg(g.auth,I);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(){return(uu=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&vc(b.auth,M,g);const{email:q}=yield Wu(b.auth,M);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function sl(y,p){return to.apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(y,p){return pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const b=(0,L.m9)(y),M={idToken:yield b.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},q=yield Ci(b,sl(b.auth,M));b.displayName=q.displayName||null,b.photoURL=q.photoUrl||null;const ae=b.providerData.find(({providerId:xe})=>"password"===xe);ae&&(ae.displayName=b.displayName,ae.photoURL=b.photoURL),yield b._updateTokensIfNecessary(q)})).apply(this,arguments)}function Ms(y,p,g){return va.apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(y,p,g){const{auth:b}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(M.email=p),g&&(M.password=g);const q=yield Ci(y,Uf(b,M));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ba{constructor(p,g,b={}){this.isNewUser=p,this.providerId=g,this.profile=b}}class no extends ba{constructor(p,g,b,I){super(p,g,b),this.username=I}}class Tc extends ba{constructor(p,g){super(p,"facebook.com",g)}}class zf extends no{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Xg extends ba{constructor(p,g){super(p,"google.com",g)}}class em extends no{constructor(p,g,b){super(p,"twitter.com",g,b)}}function zi(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(y){var p,g;if(!y)return null;const{providerId:b}=y,I=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const q=null===(g=null===(p=Io(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ba(M,"anonymous"!==q&&"custom"!==q?q:null)}if(!b)return null;switch(b){case"facebook.com":return new Tc(M,I);case"github.com":return new zf(M,I);case"google.com":return new Xg(M,I);case"twitter.com":return new em(M,I,y.screenName||null);case"custom":case"anonymous":return new ba(M,null);default:return new ba(M,b,I)}}(g)}class hi{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new hi("enroll",p)}static _fromMfaPendingCredential(p){return new hi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,b;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return hi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return hi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cu{constructor(p,g,b){this.session=p,this.hints=g,this.signInResolver=b}static _fromError(p,g){const b=un(p),I=g.customData._serverResponse,M=(I.mfaInfo||[]).map(ae=>Wi._fromServerResponse(b,ae));De(I.mfaPendingCredential,b,"internal-error");const q=hi._fromMfaPendingCredential(I.mfaPendingCredential);return new cu(q,M,function(){var ae=(0,u.Z)(function*(xe){const Ie=yield xe._process(b,q);delete I.mfaInfo,delete I.mfaPendingCredential;const $e=Object.assign(Object.assign({},I),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(g.operationType){case"signIn":const qe=yield kn._fromIdTokenResponse(b,g.operationType,$e);return yield b._updateCurrentUser(qe.user),qe;case"reauthenticate":return De(g.user,b,"internal-error"),kn._forOperation(g.user,g.operationType,$e);default:Lt(b,"internal-error")}});return function(xe){return ae.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,u.Z)(function*(){return g.signInResolver(p)})()}}function rv(y,p){return pt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,p))}class fh{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>Wi._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new fh(p)}getSession(){var p=this;return(0,u.Z)(function*(){return hi._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var b=this;return(0,u.Z)(function*(){const I=p,M=yield b.getSession(),q=yield Ci(b.user,I._process(b.user.auth,M,g));return yield b.user._updateTokensIfNecessary(q),b.user.reload()})()}unenroll(p){var g=this;return(0,u.Z)(function*(){const b="string"==typeof p?p:p.uid,I=yield g.user.getIdToken(),M=yield Ci(g.user,function(y,p){return pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,p))}(g.user.auth,{idToken:I,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==b),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const al=new WeakMap,xo="__sak";class Zt{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const xs=(()=>{class y extends Zt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,L.z$)();return fr(y)||oa(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const I=this.storage.getItem(b),M=this.localCache[b];I!==M&&g(b,M,I)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((ae,xe,Ie)=>{this.notifyListeners(ae,Ie)});const I=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(I);if(g.newValue!==ae)null!==g.newValue?this.storage.setItem(I,g.newValue):this.storage.removeItem(I);else if(this.localCache[I]===g.newValue&&!b)return}const M=()=>{const ae=this.storage.getItem(I);!b&&this.localCache[I]===ae||this.notifyListeners(I,ae)},q=this.storage.getItem(I);(0,L.w1)()&&10===document.documentMode&&q!==g.newValue&&g.newValue!==g.oldValue?setTimeout(M,10):M()}notifyListeners(g,b){this.localCache[g]=b;const I=this.listeners[g];if(I)for(const M of Array.from(I))M(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var I=()=>super._set,M=this;return(0,u.Z)(function*(){yield I().call(M,g,b),M.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,I=this;return(0,u.Z)(function*(){const M=yield b().call(I,g);return I.localCache[g]=JSON.stringify(M),M})()}_remove(g){var b=()=>super._remove,I=this;return(0,u.Z)(function*(){yield b().call(I,g),delete I.localCache[g]})()}}return y.type="LOCAL",y})(),sn=(()=>{class y extends Zt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let tm=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(M=>M.isListeningto(g));if(b)return b;const I=new y(g);return this.receivers.push(I),I}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,u.Z)(function*(){const I=g,{eventId:M,eventType:q,data:ae}=I.data,xe=b.handlersMap[q];if(!(null==xe?void 0:xe.size))return;I.ports[0].postMessage({status:"ack",eventId:M,eventType:q});const Ie=Array.from(xe).map(function(){var qe=(0,u.Z)(function*(Dt){return Dt(I.origin,ae)});return function(Dt){return qe.apply(this,arguments)}}()),$e=yield function(y){return Promise.all(y.map(function(){var p=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return p.apply(this,arguments)}}()))}(Ie);I.ports[0].postMessage({status:"done",eventId:M,eventType:q,response:$e})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function io(y="",p=10){let g="";for(let b=0;b<p;b++)g+=Math.floor(10*Math.random());return y+g}class Dn{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,b=50){var I=this;return(0,u.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let q,ae;return new Promise((xe,Ie)=>{const $e=io("",20);M.port1.start();const qe=setTimeout(()=>{Ie(new Error("unsupported_event"))},b);ae={messageChannel:M,onMessage(Dt){const Wn=Dt;if(Wn.data.eventId===$e)switch(Wn.data.status){case"ack":clearTimeout(qe),q=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),xe(Wn.data.response);break;default:clearTimeout(qe),clearTimeout(q),Ie(new Error("invalid_response"))}}},I.handlers.add(ae),M.port1.addEventListener("message",ae.onMessage),I.target.postMessage({eventType:p,eventId:$e,data:g},[M.port2])}).finally(()=>{ae&&I.removeMessageHandler(ae)})})()}}function Cn(){return window}function fu(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}function ul(){return(ul=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ai="firebaseLocalStorageDb",Zi="firebaseLocalStorage",so="fbase_key";class Nr{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Yi(y,p){return y.transaction([Zi],p?"readwrite":"readonly").objectStore(Zi)}function tt(){const y=indexedDB.open(Ai,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Zi,{keyPath:so})}catch(I){g(I)}}),y.addEventListener("success",(0,u.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Zi)?p(b):(b.close(),yield function(){const y=indexedDB.deleteDatabase(Ai);return new Nr(y).toPromise()}(),p(yield tt()))}))})}function Ni(y,p,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(y,p,g){const b=Yi(y,!0).put({[so]:p,value:g});return new Nr(b).toPromise()})).apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(y,p){const g=Yi(y,!1).get(p),b=yield new Nr(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function mh(y,p){const g=Yi(y,!0).delete(p);return new Nr(g).toPromise()}const cl=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield tt()),g.db})()}_withRetries(g){var b=this;return(0,u.Z)(function*(){let I=0;for(;;)try{const M=yield b._openDb();return yield g(M)}catch(M){if(I++>3)throw M;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return fu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=tm._getInstance(fu()?self:null),g.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(I,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(I,M){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(I,M){return["keyChanged"]});return function(I,M){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var b,I;if(g.activeServiceWorker=yield function(){return ul.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Dn(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(b=M[0])||void 0===b?void 0:b.fulfilled)&&(null===(I=M[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield tt();return yield Ni(g,xo,"1"),yield mh(g,xo),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var I=this;return(0,u.Z)(function*(){return I._withPendingWrite((0,u.Z)(function*(){return yield I._withRetries(M=>Ni(M,g,b)),I.localCache[g]=b,I.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,u.Z)(function*(){const I=yield b._withRetries(M=>function(y,p){return cn.apply(this,arguments)}(M,g));return b.localCache[g]=I,I})()}_remove(g){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(I=>mh(I,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const b=yield g._withRetries(q=>{const ae=Yi(q,!1).getAll();return new Nr(ae).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const I=[],M=new Set;for(const{fbase_key:q,value:ae}of b)M.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ae)&&(g.notifyListeners(q,ae),I.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!M.has(q)&&(g.notifyListeners(q,null),I.push(q));return I})()}notifyListeners(g,b){this.localCache[g]=b;const I=this.listeners[g];if(I)for(const M of Array.from(I))M(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Da(y,p){return pt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,p))}function _h(){return(_h=(0,u.Z)(function*(y){return(yield pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ac(y){return new Promise((p,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=p,b.onerror=I=>{const M=mn("internal-error");M.customData=I,g(M)},b.type="text/javascript",b.charset="UTF-8",function(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(b)})}function Oo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Os=1e12;class In{constructor(p){this.auth=p,this.counter=Os,this._widgets=new Map}render(p,g){const b=this.counter;return this._widgets.set(b,new Nc(p,this.auth.name,g||{})),this.counter++,b}reset(p){var g;const b=p||Os;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Os))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,u.Z)(function*(){var b;return null===(b=g._widgets.get(p||Os))||void 0===b||b.execute(),""})()}}class Nc{constructor(p,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof p?document.getElementById(p):p;De(I,"argument-error",{appName:g}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fi=Oo("rcb"),hs=new Gt(3e4,6e4);class Mi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(p,g=""){return De((y=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Cn().grecaptcha):new Promise((b,I)=>{const M=Cn().setTimeout(()=>{I(mn(p,"network-request-failed"))},hs.get());Cn()[fi]=()=>{Cn().clearTimeout(M),delete Cn()[fi];const ae=Cn().grecaptcha;if(!ae)return void I(mn(p,"internal-error"));const xe=ae.render;ae.render=(Ie,$e)=>{const qe=xe(Ie,$e);return this.counter++,qe},this.hostLanguage=g,b(ae)},Ac(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:fi,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),I(mn(p,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Cn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vh{load(p){return(0,u.Z)(function*(){return new In(p)})()}clearedOneInstance(){}}const Mc="recaptcha",Po={theme:"light",type:"image"};class im{constructor(p,g=Object.assign({},Po),b){this.parameters=g,this.type=Mc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(b),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof p?document.getElementById(p):p;De(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vh:new Mi,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(g)||new Promise(M=>{const q=ae=>{!ae||(p.tokenChangeListeners.delete(q),M(ae))};p.tokenChangeListeners.add(q),p.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof p)p(g);else if("string"==typeof p){const b=Cn()[p];"function"==typeof b&&b(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){De(it()&&!fu(),p.auth,"internal-error"),yield function(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(y){return _h.apply(this,arguments)}(p.auth);De(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dl{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=No._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function bn(){return(bn=(0,u.Z)(function*(y,p,g){const b=un(y),I=yield S(b,p,(0,L.m9)(g));return new dl(I,M=>Sr(b,M))})).apply(this,arguments)}function Rc(){return(Rc=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y);yield ve(!1,b,"phone");const I=yield S(b.auth,p,(0,L.m9)(g));return new dl(I,M=>ru(b,M))})).apply(this,arguments)}function C(){return(C=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y),I=yield S(b.auth,p,(0,L.m9)(g));return new dl(I,M=>yc(b,M))})).apply(this,arguments)}function S(y,p,g){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(function*(y,p,g){var b;const I=yield g.verify();try{let M;if(De("string"==typeof I,y,"argument-error"),De(g.type===Mc,y,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const q=M.session;if("phoneNumber"in M)return De("enroll"===q.type,y,"internal-error"),(yield rv(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{De("signin"===q.type,y,"internal-error");const ae=(null===(b=M.multiFactorHint)||void 0===b?void 0:b.uid)||M.multiFactorUid;return De(ae,y,"missing-multi-factor-info"),(yield Da(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield us(y,{phoneNumber:M.phoneNumber,recaptchaToken:I});return q}}finally{g._reset()}})).apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(y,p){yield _c((0,L.m9)(y),p)})).apply(this,arguments)}let ue=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=un(g)}verifyPhoneNumber(g,b){return S(this.auth,g,(0,L.m9)(b))}static credential(g,b){return No._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:I}=g;return b&&I?No._fromTokenResponse(b,I):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ee(y,p){return p?$t(p):(De(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Le extends Za{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return hn(p,this._buildIdpRequest())}_linkToIdToken(p,g){return hn(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return hn(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function je(y){return nl(y.auth,new Le(y),y.bypassAuthState)}function Rt(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),tl(g,new Le(y),y.bypassAuthState)}function en(y){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,u.Z)(function*(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),_c(g,new Le(y),y.bypassAuthState)})).apply(this,arguments)}class Wr{constructor(p,g,b,I,M=!1){this.auth=p,this.resolver=b,this.user=I,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,u.Z)(function*(b,I){p.pendingPromise={resolve:b,reject:I};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(b,I){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:I,postBody:M,tenantId:q,error:ae,type:xe}=p;if(ae)return void g.reject(ae);const Ie={auth:g.auth,requestUri:b,sessionId:I,tenantId:q||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xe)(Ie))}catch($e){g.reject($e)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return je;case"linkViaPopup":case"linkViaRedirect":return en;case"reauthViaPopup":case"reauthViaRedirect":return Rt;default:Lt(this.auth,"internal-error")}}resolve(p){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jn=new Gt(2e3,1e4);function Lo(){return(Lo=(0,u.Z)(function*(y,p,g){const b=un(y);Ui(y,p,qi);const I=Ee(b,g);return new Qf(b,"signInViaPopup",p,I).executeNotNull()})).apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y);Ui(b.auth,p,qi);const I=Ee(b.auth,g);return new Qf(b.auth,"reauthViaPopup",p,I,b).executeNotNull()})).apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y);Ui(b.auth,p,qi);const I=Ee(b.auth,g);return new Qf(b.auth,"linkViaPopup",p,I,b).executeNotNull()})).apply(this,arguments)}let Qf=(()=>{class y extends Wr{constructor(g,b,I,M,q){super(g,b,M,q),this.provider=I,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const b=yield g.execute();return De(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,u.Z)(function*(){Hn(1===g.filter.length,"Popup operations only handle one event");const b=io();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(I=>{g.reject(I)}),g.resolver._isIframeWebStorageSupported(g.auth,I=>{I||g.reject(mn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,I;this.pollId=(null===(I=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Jn.get())};g()}}return y.currentPopupAction=null,y})();const pl=new Map;class sm extends Wr{constructor(p,g,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,u.Z)(function*(){let b=pl.get(g.auth._key());if(!b){try{const M=(yield function(y,p){return yu.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;b=()=>Promise.resolve(M)}catch(I){b=()=>Promise.reject(I)}pl.set(g.auth._key(),b)}return g.bypassAuthState||pl.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(b,p);if("unknown"!==p.type){if(p.eventId){const I=yield b.auth._redirectUserForId(p.eventId);if(I)return b.user=I,g().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function yu(){return(yu=(0,u.Z)(function*(y,p){const g=Ta(p),b=om(y);if(!(yield b._isAvailable()))return!1;const I="true"===(yield b._get(g));return yield b._remove(g),I})).apply(this,arguments)}function Xf(y,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,u.Z)(function*(y,p){return om(y)._set(Ta(p),"true")})).apply(this,arguments)}function om(y){return $t(y._redirectPersistence)}function Ta(y){return Hr("pendingRedirect",y.config.apiKey,y.name)}function or(){return(or=(0,u.Z)(function*(y,p,g){const b=un(y);Ui(y,p,qi);const I=Ee(b,g);return yield Xf(I,b),I._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function gl(){return(gl=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y);Ui(b.auth,p,qi);const I=Ee(b.auth,g);yield Xf(I,b.auth);const M=yield vu(b);return I._openRedirect(b.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function bh(){return(bh=(0,u.Z)(function*(y,p,g){const b=(0,L.m9)(y);Ui(b.auth,p,qi);const I=Ee(b.auth,g);yield ve(!1,b,p.providerId),yield Xf(I,b.auth);const M=yield vu(b);return I._openRedirect(b.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(y,p){return yield un(y)._initializationPromise,Bo(y,p,!1)})).apply(this,arguments)}function Bo(y,p){return ml.apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(y,p,g=!1){const b=un(y),I=Ee(b,p),q=yield new sm(b,I,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield b._persistUserIfCurrent(q.user),yield b._setRedirectUser(null,p)),q})).apply(this,arguments)}function vu(y){return St.apply(this,arguments)}function St(){return(St=(0,u.Z)(function*(y){const p=io(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class av{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(g=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lm(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var b;if(p.error&&!lm(p)){const I=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(mn(this.auth,I))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const b=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(p))}saveEventToCache(p){this.cachedEventUids.add(Sa(p)),this.lastProcessedEventTime=Date.now()}}function Sa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function lm({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function _l(y){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,u.Z)(function*(y,p={}){return pt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Uo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Fc(){return(Fc=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield _l(y);for(const g of p)try{if(wh(g))return}catch(b){}Lt(y,"unauthorized-domain")})).apply(this,arguments)}function wh(y){const p=et(),{protocol:g,hostname:b}=new URL(p);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===b}if(!Pc.test(g))return!1;if(Uo.test(y))return b===y;const I=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(b)}const Lc=new Gt(3e4,6e4);function yl(){const y=Cn().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let vl=null;function bu(y){return vl=vl||function(y){return new Promise((p,g)=>{var b,I,M;function q(){yl(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{yl(),g(mn(y,"network-request-failed"))},timeout:Lc.get()})}if(null===(I=null===(b=Cn().gapi)||void 0===b?void 0:b.iframes)||void 0===I?void 0:I.Iframe)p(gapi.iframes.getContext());else{if(!(null===(M=Cn().gapi)||void 0===M?void 0:M.load)){const ae=Oo("iframefcb");return Cn()[ae]=()=>{gapi.load?q():g(mn(y,"network-request-failed"))},Ac(`https://apis.google.com/js/api.js?onload=${ae}`)}q()}}).catch(p=>{throw vl=null,p})}(y),vl}const uv=new Gt(5e3,15e3),cv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jo(y){const p=y.config;De(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?Oe(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},I=dv.get(y.config.apiHost);I&&(b.eid=I);const M=y._getFrameworks();return M.length&&(b.fw=M.join(",")),`${g}?${(0,L.xO)(b).slice(1)}`}function Dh(){return(Dh=(0,u.Z)(function*(y){const p=yield bu(y),g=Cn().gapi;return De(g,y,"internal-error"),p.open({where:document.body,url:jo(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cv,dontclear:!0},b=>new Promise(function(){var I=(0,u.Z)(function*(M,q){yield b.restyle({setHideOnLeave:!1});const ae=mn(y,"network-request-failed"),xe=Cn().setTimeout(()=>{q(ae)},uv.get());function Ie(){Cn().clearTimeout(xe),M(b)}b.ping(Ie).then(Ie,()=>{q(ae)})});return function(M,q){return I.apply(this,arguments)}}()))})).apply(this,arguments)}const dm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ch{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function pm(y,p,g,b,I,M){De(y.config.authDomain,y,"auth-domain-config-required"),De(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:ce.SDK_VERSION,eventId:I};if(p instanceof qi){p.setDefaultLanguage(y.languageCode),q.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[xe,Ie]of Object.entries(M||{}))q[xe]=Ie}if(p instanceof qt){const xe=p.getScopes().filter(Ie=>""!==Ie);xe.length>0&&(q.scopes=xe.join(","))}y.tenantId&&(q.tid=y.tenantId);const ae=q;for(const xe of Object.keys(ae))void 0===ae[xe]&&delete ae[xe];return`${function({config:y}){return y.emulator?Oe(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(ae).slice(1)}`}const Aa="webStorageSupport";class El extends class{constructor(p){this.factorId=p}_process(p,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,b);case"signin":return this._finalizeSignIn(p,g.credential);default:return ir("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new El(p)}_finalizeEnroll(p,g,b){return function(y,p){return pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,p))}(p,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(y,p){return pt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gm=(()=>{class y{constructor(){}static assertion(g){return El._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var y,Dl="@firebase/auth";class b1{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(b=>{var I;p((null===(I=b)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xi(){return window}function Uc(){return(Uc=(0,u.Z)(function*(y,p,g){var b;const{BuildInfo:I}=Xi();Hn(p.sessionId,"AuthEvent did not contain a session ID");const M=yield Hc(p.sessionId),q={};return oa()?q.ibi=I.packageName:Tr()?q.apn=I.packageName:Lt(y,"operation-not-supported-in-this-environment"),I.displayName&&(q.appDisplayName=I.displayName),q.sessionId=M,pm(y,g,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,q)})).apply(this,arguments)}function jc(){return(jc=(0,u.Z)(function*(y){const{BuildInfo:p}=Xi(),g={};oa()?g.iosBundleId=p.packageName:Tr()?g.androidPackageName=p.packageName:Lt(y,"operation-not-supported-in-this-environment"),yield _l(y,g)})).apply(this,arguments)}function Sh(){return(Sh=(0,u.Z)(function*(y,p,g){const{cordova:b}=Xi();let I=()=>{};try{yield new Promise((M,q)=>{let ae=null;function xe(){var qe;M();const Dt=null===(qe=b.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof Dt&&Dt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ie(){ae||(ae=window.setTimeout(()=>{q(mn(y,"redirect-cancelled-by-user"))},2e3))}function $e(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}p.addPassiveListener(xe),document.addEventListener("resume",Ie,!1),Tr()&&document.addEventListener("visibilitychange",$e,!1),I=()=>{p.removePassiveListener(xe),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",$e,!1),ae&&window.clearTimeout(ae)}})}finally{I()}})).apply(this,arguments)}function Hc(y){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,u.Z)(function*(y){const p=op(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(I=>I.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function op(y){if(Hn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}y="Browser",(0,ce._registerComponent)(new We.wA("auth",(p,{options:g})=>{const b=p.getProvider("app").getImmediate(),{apiKey:I,authDomain:M}=b.options;return(q=>{De(I&&!I.includes(":"),"invalid-api-key",{appName:q.name}),De(!(null==M?void 0:M.includes(":")),"argument-error",{appName:q.name});const ae={apiKey:I,authDomain:M,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pr(y)},xe=new Wg(q,ae);return function(y,p){const g=(null==p?void 0:p.persistence)||[],b=(Array.isArray(g)?g:[g]).map($t);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(xe,g),xe})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,b)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new We.wA("auth-internal",p=>{const g=un(p.getProvider("auth").getImmediate());return new b1(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Dl,"0.19.3",void 0),(0,ce.registerVersion)(Dl,"0.19.3","esm2017");class ym extends av{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function up(y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,u.Z)(function*(y){const p=yield ao()._get(cp(y));return p&&(yield ao()._remove(cp(y))),p})).apply(this,arguments)}function lp(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*p.length);y.push(p.charAt(b))}return y.join("")}function ao(){return $t(xs)}function cp(y){return Hr("authEvent",y.config.apiKey,y.name)}function Na(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,L.zd)(g.join("?"))}function Eu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mn("no-auth-event")}}function Sl(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function fp(y=(0,L.z$)()){return!("file:"!==Sl()&&"ionic:"!==Sl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function bm(){try{const y=self.localStorage,p=io();if(y)return y.setItem(p,"1"),y.removeItem(p),!function(y=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch(y){return gp()&&(0,L.hl)()}return!1}function gp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Mh(){return("http:"===Sl()||"https:"===Sl()||(0,L.ru)()||fp())&&!((0,L.b$)()||(0,L.UG)())&&bm()&&!gp()}function Du(){return fp()&&"undefined"!=typeof document}function Rh(){return(Rh=(0,u.Z)(function*(){return!!Du()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const zr={LOCAL:"local",NONE:"none",SESSION:"session"},Cu=De,Ma="persistence";function _p(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(y){yield y._initializationPromise;const p=Em(),g=Hr(Ma,y.config.apiKey,y.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(g,y._getPersistence())})).apply(this,arguments)}function Em(){return"undefined"!=typeof window?window:null}const wv=De;class uo{constructor(){this.browserResolver=$t(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sn,this._completeRedirectFn=Bo}_openPopup(p,g,b,I){var M=this;return(0,u.Z)(function*(){var q;Hn(null===(q=M.eventManagers[p._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ae=pm(p,g,b,et(),I);return function(y,p,g,b=500,I=600){const M=Math.max((window.screen.availHeight-I)/2,0).toString(),q=Math.max((window.screen.availWidth-b)/2,0).toString();let ae="";const xe=Object.assign(Object.assign({},dm),{width:b.toString(),height:I.toString(),top:M,left:q}),Ie=(0,L.z$)().toLowerCase();g&&(ae=sa(Ie)?"_blank":g),ia(Ie)&&(p=p||"http://localhost",xe.scrollbars="yes");const $e=Object.entries(xe).reduce((Dt,[Wn,qo])=>`${Dt}${Wn}=${qo},`,"");if(function(y=(0,L.z$)()){var p;return oa(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ie)&&"_self"!==ae)return function(y,p){const g=document.createElement("a");g.href=y,g.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(p||"",ae),new Ch(null);const qe=window.open(p||"",ae,$e);De(qe,y,"popup-blocked");try{qe.focus()}catch(Dt){}return new Ch(qe)}(p,ae,io())})()}_openRedirect(p,g,b,I){var M=this;return(0,u.Z)(function*(){return yield M._originValidation(p),y=pm(p,g,b,et(),I),Cn().location.href=y,new Promise(()=>{});var y})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:I,promise:M}=this.eventManagers[g];return I?Promise.resolve(I):(Hn(M,"If manager is not set, promise should be"),M)}const b=this.initAndGetManager(p);return this.eventManagers[g]={promise:b},b}initAndGetManager(p){var g=this;return(0,u.Z)(function*(){const b=yield function(y){return Dh.apply(this,arguments)}(p),I=new av(p);return b.register("authEvent",M=>(De(null==M?void 0:M.authEvent,p,"invalid-auth-event"),{status:I.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:I},g.iframes[p._key()]=b,I})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Aa,{type:Aa},I=>{var M;const q=null===(M=null==I?void 0:I[0])||void 0===M?void 0:M[Aa];void 0!==q&&g(!!q),Lt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return Fc.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ss()||fr()||oa()}}),this.cordovaResolver=$t(class{constructor(){this._redirectPersistence=sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bo}_initialize(p){var g=this;return(0,u.Z)(function*(){const b=p._key();let I=g.eventManagers.get(b);return I||(I=new ym(p),g.eventManagers.set(b,I),g.attachCallbackListeners(p,I)),I})()}_openPopup(p){Lt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,b,I){var M=this;return(0,u.Z)(function*(){!function(y){var p,g,b,I,M,q,ae,xe,Ie,$e;const qe=Xi();De("function"==typeof(null===(p=null==qe?void 0:qe.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(g=null==qe?void 0:qe.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(M=null===(I=null===(b=null==qe?void 0:qe.cordova)||void 0===b?void 0:b.plugins)||void 0===I?void 0:I.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(xe=null===(ae=null===(q=null==qe?void 0:qe.cordova)||void 0===q?void 0:q.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===xe?void 0:xe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===($e=null===(Ie=null==qe?void 0:qe.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===$e?void 0:$e.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const q=yield M._initialize(p);yield q.initialized(),q.resetRedirect(),pl.clear(),yield M._originValidation(p);const ae=function(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:lp(),postBody:null,tenantId:y.tenantId,error:mn(y,"no-auth-event")}}(p,b,I);yield function(y,p){return ao()._set(cp(y),p)}(p,ae);const xe=yield function(y,p,g){return Uc.apply(this,arguments)}(p,ae,g),Ie=yield function(y){const{cordova:p}=Xi();return new Promise(g=>{p.plugins.browsertab.isAvailable(b=>{let I=null;b?p.plugins.browsertab.openUrl(y):I=p.InAppBrowser.open(y,function(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(I)})})}(xe);return function(y,p,g){return Sh.apply(this,arguments)}(p,q,Ie)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return jc.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:b,handleOpenURL:I,BuildInfo:M}=Xi(),q=setTimeout((0,u.Z)(function*(){yield up(p),g.onEvent(Eu())}),500),ae=function(){var $e=(0,u.Z)(function*(qe){clearTimeout(q);const Dt=yield up(p);let Wn=null;Dt&&(null==qe?void 0:qe.url)&&(Wn=function(y,p){var g,b;const I=function(y){const p=Na(y),g=p.link?decodeURIComponent(p.link):void 0,b=Na(g).link,I=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Na(I).link||I||b||g||y}(p);if(I.includes("/__/auth/callback")){const M=Na(I),q=M.firebaseError?function(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(M.firebaseError)):null,ae=null===(b=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],xe=ae?mn(ae):null;return xe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:I,postBody:null}}return null}(Dt,qe.url)),g.onEvent(Wn||Eu())});return function(Dt){return $e.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ae);const xe=I,Ie=`${M.packageName.toLowerCase()}://`;Xi().handleOpenURL=function(){var $e=(0,u.Z)(function*(qe){if(qe.toLowerCase().startsWith(Ie)&&ae({url:qe}),"function"==typeof xe)try{xe(qe)}catch(Dt){console.error(Dt)}});return function(qe){return $e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=sn,this._completeRedirectFn=Bo}_initialize(p){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,b,I){var M=this;return(0,u.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(p,g,b,I)})()}_openRedirect(p,g,b,I){var M=this;return(0,u.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(p,g,b,I)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Du()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return Rh.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Dm(y){return y.unwrap()}function gi(y){return Tm(y)}function Tm(y){const{_tokenResponse:p}=y instanceof L.ZR?y.customData:y;if(!p)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ue.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Mo;break;case"facebook.com":b=Ku;break;case"github.com":b=di;break;case"twitter.com":b=Ju;break;default:const{oauthIdToken:I,oauthAccessToken:M,oauthTokenSecret:q,pendingToken:ae,nonce:xe}=p;return M||q||I||ae?ae?g.startsWith("saml.")?Qs._create(g,ae):Ir._fromParams({providerId:g,signInMethod:g,pendingToken:ae,idToken:I,accessToken:M}):new da(g).credential({idToken:I,accessToken:M,rawNonce:xe}):null}return y instanceof L.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function Rr(y,p){return p.catch(g=>{throw g instanceof L.ZR&&function(y,p){var g;const b=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Im(y,function(y,p){var g;const b=(0,L.m9)(y),I=p;return De(p.customData.operationType,b,"argument-error"),De(null===(g=I.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),cu._fromError(b,I)}(y,p));else if(b){const I=Tm(p),M=p;I&&(M.credential=I,M.tenantId=b.tenantId||void 0,M.email=b.email||void 0,M.phoneNumber=b.phoneNumber||void 0)}}(y,g),g}).then(g=>{const I=g.user;return{operationType:g.operationType,credential:gi(g),additionalUserInfo:zi(g),user:Ho.getOrCreate(I)}})}function xh(y,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,u.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:b=>Rr(y,g.confirm(b))}})).apply(this,arguments)}class Im{constructor(p,g){this.resolver=g,this.auth=function(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Rr(Dm(this.auth),this.resolver.resolveSignIn(p))}}class Ho{constructor(p){this._delegate=p,this.multiFactor=function(y){const p=(0,L.m9)(y);return al.has(p)||al.set(p,fh._fromUser(p)),al.get(p)}(p)}static getOrCreate(p){return Ho.USER_MAP.has(p)||Ho.USER_MAP.set(p,new Ho(p)),Ho.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,u.Z)(function*(){return Rr(g.auth,ru(g._delegate,p))})()}linkWithPhoneNumber(p,g){var b=this;return(0,u.Z)(function*(){return xh(b.auth,function(y,p,g){return Rc.apply(this,arguments)}(b._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,u.Z)(function*(){return Rr(g.auth,function(y,p,g){return lt.apply(this,arguments)}(g._delegate,p,uo))})()}linkWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield _p(un(g.auth)),function(y,p,g){return function(y,p,g){return bh.apply(this,arguments)}(y,p,g)}(g._delegate,p,uo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,u.Z)(function*(){return Rr(g.auth,yc(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return xh(this.auth,function(y,p,g){return C.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Rr(this.auth,function(y,p,g){return Ki.apply(this,arguments)}(this._delegate,p,uo))}reauthenticateWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield _p(un(g.auth)),function(y,p,g){return function(y,p,g){return gl.apply(this,arguments)}(y,p,g)}(g._delegate,p,uo)})()}sendEmailVerification(p){return function(y,p){return ya.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,u.Z)(function*(){return yield function(y,p){return nu.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(y,p){return Ms((0,L.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function(y,p){return Ms((0,L.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(y,p){return Q.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(y,p){return En.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(y,p,g){return uu.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ho.USER_MAP=new WeakMap;const Go=De;let Sm=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=g.options;Go(I,"invalid-api-key",{appName:g.name});let M=[ut];if("undefined"!=typeof window){M=function(y,p){const g=Em();if(!(null==g?void 0:g.sessionStorage))return[];const b=Hr(Ma,y,p);switch(g.sessionStorage.getItem(b)){case zr.NONE:return[ut];case zr.LOCAL:return[cl,sn];case zr.SESSION:return[sn];default:return[]}}(I,g.name);for(const ae of[cl,xs,sn])M.includes(ae)||M.push(ae)}Go(I,"invalid-api-key",{appName:g.name});const q="undefined"!=typeof window?uo:void 0;this._delegate=b.initialize({options:{persistence:M,popupRedirectResolver:q}}),this._delegate._updateErrorMap(Do),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ho.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function(y,p,g){const b=un(y);De(b._canInitEmulator,b,"emulator-config-failed"),De(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const I=!!(null==g?void 0:g.disableWarnings),M=za(p),{host:q,port:ae}=function(y){const p=za(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(b);if(I){const M=I[1];return{host:M,port:Hi(b.substr(M.length+1))}}{const[M,q]=b.split(":");return{host:M,port:Hi(q)}}}(p);b.config.emulator={url:`${M}//${q}${null===ae?"":`:${ae}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:q,port:ae,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function(y,p){return il.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ga(this._delegate,g)}confirmPasswordReset(g,b){return function(y,p,g){return ou.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var I=this;return(0,u.Z)(function*(){return Rr(I._delegate,function(y,p,g){return Ec.apply(this,arguments)}(I._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(y,p){return Gf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(y,p){const g=Xt.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){Go(Mh(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function(y,p){return Vo.apply(this,arguments)}(g._delegate,uo);return b?Rr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(y,p){un(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,b,I){const{next:M,error:q,complete:ae}=Tu(g,b,I);return this._delegate.onAuthStateChanged(M,q,ae)}onIdTokenChanged(g,b,I){const{next:M,error:q,complete:ae}=Tu(g,b,I);return this._delegate.onIdTokenChanged(M,q,ae)}sendSignInLinkToEmail(g,b){return function(y,p,g){return Ns.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function(y,p,g){return su.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,u.Z)(function*(){let I;switch(function(y,p){Cu(Object.values(zr).includes(p),y,"invalid-persistence-type"),(0,L.b$)()?Cu(p!==zr.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?Cu(p===zr.NONE,y,"unsupported-persistence-type"):gp()?Cu(p===zr.NONE||p===zr.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):Cu(p===zr.NONE||bm(),y,"unsupported-persistence-type")}(b._delegate,g),g){case zr.SESSION:I=sn;break;case zr.LOCAL:I=(yield $t(cl)._isAvailable())?cl:xs;break;case zr.NONE:I=ut;break;default:return Lt("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Rr(this._delegate,function(y){return st.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Rr(this._delegate,Sr(this._delegate,g))}signInWithCustomToken(g){return Rr(this._delegate,function(y,p){return iu.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return Rr(this._delegate,function(y,p,g){return Sr((0,L.m9)(y),ls.credential(p,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return Rr(this._delegate,function(y,p,g){return Yn.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return xh(this._delegate,function(y,p,g){return bn.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,u.Z)(function*(){return Go(Mh(),b._delegate,"operation-not-supported-in-this-environment"),Rr(b._delegate,function(y,p,g){return Lo.apply(this,arguments)}(b._delegate,g,uo))})()}signInWithRedirect(g){var b=this;return(0,u.Z)(function*(){return Go(Mh(),b._delegate,"operation-not-supported-in-this-environment"),yield _p(b._delegate),function(y,p,g){return function(y,p,g){return or.apply(this,arguments)}(y,p,g)}(b._delegate,g,uo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(y,p){return Ro.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=zr,y})();function Tu(y,p,g){let b=y;"function"!=typeof y&&({next:b,error:p,complete:g}=y);const I=b;return{next:q=>I(q&&Ho.getOrCreate(q)),error:p,complete:g}}class ps{constructor(){this.providerId="phone",this._delegate=new ue(Dm(te.Z.auth()))}static credential(p,g){return ue.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}ps.PHONE_SIGN_IN_METHOD=ue.PHONE_SIGN_IN_METHOD,ps.PROVIDER_ID=ue.PROVIDER_ID;const D1=De;class C1{constructor(p,g,b=te.Z.app()){var I;D1(null===(I=b.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new im(p,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new We.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Sm(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ls,FacebookAuthProvider:Ku,GithubAuthProvider:di,GoogleAuthProvider:Mo,OAuthProvider:da,SAMLAuthProvider:mr,PhoneAuthProvider:ps,PhoneMultiFactorGenerator:gm,RecaptchaVerifier:C1,TwitterAuthProvider:Ju,Auth:Sm,AuthCredential:Za,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.3")}(te.Z)},6676:function(He,_e){!function(F){"use strict";function u(he){return Array.prototype.slice.call(he)}function te(he){return new Promise(function(X,re){he.onsuccess=function(){X(he.result)},he.onerror=function(){re(he.error)}})}function L(he,X,re){var we,Ae=new Promise(function(Tt,It){te(we=he[X].apply(he,re)).then(Tt,It)});return Ae.request=we,Ae}function ce(he,X,re){var we=L(he,X,re);return we.then(function(Ae){if(Ae)return new P(Ae,we.request)})}function ie(he,X,re){re.forEach(function(we){Object.defineProperty(he.prototype,we,{get:function(){return this[X][we]},set:function(Ae){this[X][we]=Ae}})})}function J(he,X,re,we){we.forEach(function(Ae){Ae in re.prototype&&(he.prototype[Ae]=function(){return L(this[X],Ae,arguments)})})}function oe(he,X,re,we){we.forEach(function(Ae){Ae in re.prototype&&(he.prototype[Ae]=function(){return this[X][Ae].apply(this[X],arguments)})})}function K(he,X,re,we){we.forEach(function(Ae){Ae in re.prototype&&(he.prototype[Ae]=function(){return ce(this[X],Ae,arguments)})})}function z(he){this._index=he}function P(he,X){this._cursor=he,this._request=X}function U(he){this._store=he}function G(he){this._tx=he,this.complete=new Promise(function(X,re){he.oncomplete=function(){X()},he.onerror=function(){re(he.error)},he.onabort=function(){re(he.error)}})}function de(he,X,re){this._db=he,this.oldVersion=X,this.transaction=new G(re)}function Re(he){this._db=he}ie(z,"_index",["name","keyPath","multiEntry","unique"]),J(z,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),K(z,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie(P,"_cursor",["direction","key","primaryKey","value"]),J(P,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(he){he in IDBCursor.prototype&&(P.prototype[he]=function(){var X=this,re=arguments;return Promise.resolve().then(function(){return X._cursor[he].apply(X._cursor,re),te(X._request).then(function(we){if(we)return new P(we,X._request)})})})}),U.prototype.createIndex=function(){return new z(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new z(this._store.index.apply(this._store,arguments))},ie(U,"_store",["name","keyPath","indexNames","autoIncrement"]),J(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),K(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe(U,"_store",IDBObjectStore,["deleteIndex"]),G.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},ie(G,"_tx",["objectStoreNames","mode"]),oe(G,"_tx",IDBTransaction,["abort"]),de.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},ie(de,"_db",["name","version","objectStoreNames"]),oe(de,"_db",IDBDatabase,["deleteObjectStore","close"]),Re.prototype.transaction=function(){return new G(this._db.transaction.apply(this._db,arguments))},ie(Re,"_db",["name","version","objectStoreNames"]),oe(Re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(he){[U,z].forEach(function(X){he in X.prototype&&(X.prototype[he.replace("open","iterate")]=function(){var re=u(arguments),we=re[re.length-1],Ae=this._store||this._index,Tt=Ae[he].apply(Ae,re.slice(0,-1));Tt.onsuccess=function(){we(Tt.result)}})})}),[z,U].forEach(function(he){he.prototype.getAll||(he.prototype.getAll=function(X,re){var we=this,Ae=[];return new Promise(function(Tt){we.iterateCursor(X,function(It){It?(Ae.push(It.value),void 0===re||Ae.length!=re?It.continue():Tt(Ae)):Tt(Ae)})})})}),F.openDb=function(he,X,re){var we=L(indexedDB,"open",[he,X]),Ae=we.request;return Ae&&(Ae.onupgradeneeded=function(Tt){re&&re(new de(Ae.result,Tt.oldVersion,Ae.transaction))}),we.then(function(Tt){return new Re(Tt)})},F.deleteDb=function(he){return L(indexedDB,"deleteDatabase",[he])},Object.defineProperty(F,"__esModule",{value:!0})}(_e)},1593:(He,_e,F)=>{"use strict";F.d(_e,{P:()=>oe});var u=F(9193),te=F(5917),L=F(7574);class oe{constructor(z,P,U){this.kind=z,this.value=P,this.error=U,this.hasValue="N"===z}observe(z){switch(this.kind){case"N":return z.next&&z.next(this.value);case"E":return z.error&&z.error(this.error);case"C":return z.complete&&z.complete()}}do(z,P,U){switch(this.kind){case"N":return z&&z(this.value);case"E":return P&&P(this.error);case"C":return U&&U()}}accept(z,P,U){return z&&"function"==typeof z.next?this.observe(z):this.do(z,P,U)}toObservable(){switch(this.kind){case"N":return(0,te.of)(this.value);case"E":return K=this.error,new L.y(P=>P.error(K));case"C":return(0,u.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(z){return void 0!==z?new oe("N",z):oe.undefinedValueNotification}static createError(z){return new oe("E",void 0,z)}static createComplete(){return oe.completeNotification}}oe.completeNotification=new oe("C"),oe.undefinedValueNotification=new oe("N",void 0)},7574:(He,_e,F)=>{"use strict";F.d(_e,{y:()=>U});var u=F(7393),L=F(9181),ce=F(6490),J=F(6554),oe=F(4487);var P=F(2494);let U=(()=>{class de{constructor(Me){this._isScalar=!1,Me&&(this._subscribe=Me)}lift(Me){const be=new de;return be.source=this,be.operator=Me,be}subscribe(Me,be,he){const{operator:X}=this,re=function(de,Re,Me){if(de){if(de instanceof u.L)return de;if(de[L.b])return de[L.b]()}return de||Re||Me?new u.L(de,Re,Me):new u.L(ce.c)}(Me,be,he);if(re.add(X?X.call(re,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!re.syncErrorThrowable?this._subscribe(re):this._trySubscribe(re)),P.v.useDeprecatedSynchronousErrorHandling&&re.syncErrorThrowable&&(re.syncErrorThrowable=!1,re.syncErrorThrown))throw re.syncErrorValue;return re}_trySubscribe(Me){try{return this._subscribe(Me)}catch(be){P.v.useDeprecatedSynchronousErrorHandling&&(Me.syncErrorThrown=!0,Me.syncErrorValue=be),function(de){for(;de;){const{closed:Re,destination:Me,isStopped:be}=de;if(Re||be)return!1;de=Me&&Me instanceof u.L?Me:null}return!0}(Me)?Me.error(be):console.warn(be)}}forEach(Me,be){return new(be=G(be))((he,X)=>{let re;re=this.subscribe(we=>{try{Me(we)}catch(Ae){X(Ae),re&&re.unsubscribe()}},X,he)})}_subscribe(Me){const{source:be}=this;return be&&be.subscribe(Me)}[J.L](){return this}pipe(...Me){return 0===Me.length?this:function(de){return 0===de.length?oe.y:1===de.length?de[0]:function(Me){return de.reduce((be,he)=>he(be),Me)}}(Me)(this)}toPromise(Me){return new(Me=G(Me))((be,he)=>{let X;this.subscribe(re=>X=re,re=>he(re),()=>be(X))})}}return de.create=Re=>new de(Re),de})();function G(de){if(de||(de=P.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},6490:(He,_e,F)=>{"use strict";F.d(_e,{c:()=>L});var u=F(2494),te=F(4449);const L={closed:!0,next(ce){},error(ce){if(u.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,te.z)(ce)},complete(){}}},9765:(He,_e,F)=>{"use strict";F.d(_e,{Yc:()=>oe,xQ:()=>K});var u=F(7574),te=F(7393),L=F(5319),ce=F(7971),ie=F(8858),J=F(9181);class oe extends te.L{constructor(U){super(U),this.destination=U}}let K=(()=>{class P extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[J.b](){return new oe(this)}lift(G){const de=new z(this,this);return de.operator=G,de}next(G){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:de}=this,Re=de.length,Me=de.slice();for(let be=0;be<Re;be++)Me[be].next(G)}}error(G){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:de}=this,Re=de.length,Me=de.slice();for(let be=0;be<Re;be++)Me[be].error(G);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:G}=this,de=G.length,Re=G.slice();for(let Me=0;Me<de;Me++)Re[Me].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ce.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ce.N;return this.hasError?(G.error(this.thrownError),L.w.EMPTY):this.isStopped?(G.complete(),L.w.EMPTY):(this.observers.push(G),new ie.W(this,G))}asObservable(){const G=new u.y;return G.source=this,G}}return P.create=(U,G)=>new z(U,G),P})();class z extends K{constructor(U,G){super(),this.destination=U,this.source=G}next(U){const{destination:G}=this;G&&G.next&&G.next(U)}error(U){const{destination:G}=this;G&&G.error&&this.destination.error(U)}complete(){const{destination:U}=this;U&&U.complete&&this.destination.complete()}_subscribe(U){const{source:G}=this;return G?this.source.subscribe(U):L.w.EMPTY}}},8858:(He,_e,F)=>{"use strict";F.d(_e,{W:()=>te});var u=F(5319);class te extends u.w{constructor(ce,ie){super(),this.subject=ce,this.subscriber=ie,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,ie=ce.observers;if(this.subject=null,!ie||0===ie.length||ce.isStopped||ce.closed)return;const J=ie.indexOf(this.subscriber);-1!==J&&ie.splice(J,1)}}},7393:(He,_e,F)=>{"use strict";F.d(_e,{L:()=>oe});var u=F(9105),te=F(6490),L=F(5319),ce=F(9181),ie=F(2494),J=F(4449);class oe extends L.w{constructor(P,U,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=te.c;break;case 1:if(!P){this.destination=te.c;break}if("object"==typeof P){P instanceof oe?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new K(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new K(this,P,U,G)}}[ce.b](){return this}static create(P,U,G){const de=new oe(P,U,G);return de.syncErrorThrowable=!1,de}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class K extends oe{constructor(P,U,G,de){super(),this._parentSubscriber=P;let Re,Me=this;(0,u.m)(U)?Re=U:U&&(Re=U.next,G=U.error,de=U.complete,U!==te.c&&(Me=Object.create(U),(0,u.m)(Me.unsubscribe)&&this.add(Me.unsubscribe.bind(Me)),Me.unsubscribe=this.unsubscribe.bind(this))),this._context=Me,this._next=Re,this._error=G,this._complete=de}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:U}=this;ie.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?this.__tryOrSetError(U,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:U}=this,{useDeprecatedSynchronousErrorHandling:G}=ie.v;if(this._error)G&&U.syncErrorThrowable?(this.__tryOrSetError(U,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(U.syncErrorThrowable)G?(U.syncErrorValue=P,U.syncErrorThrown=!0):(0,J.z)(P),this.unsubscribe();else{if(this.unsubscribe(),G)throw P;(0,J.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const U=()=>this._complete.call(this._context);ie.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,U),this.unsubscribe()):(this.__tryOrUnsub(U),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,U){try{P.call(this._context,U)}catch(G){if(this.unsubscribe(),ie.v.useDeprecatedSynchronousErrorHandling)throw G;(0,J.z)(G)}}__tryOrSetError(P,U,G){if(!ie.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{U.call(this._context,G)}catch(de){return ie.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=de,P.syncErrorThrown=!0,!0):((0,J.z)(de),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(He,_e,F)=>{"use strict";F.d(_e,{w:()=>J});var u=F(9796),te=F(1555),L=F(9105);const ie=(()=>{function K(z){return Error.call(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((P,U)=>`${U+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z,this}return K.prototype=Object.create(Error.prototype),K})();class J{constructor(z){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,z&&(this._ctorUnsubscribe=!0,this._unsubscribe=z)}unsubscribe(){let z;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:U,_unsubscribe:G,_subscriptions:de}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof J)P.remove(this);else if(null!==P)for(let Re=0;Re<P.length;++Re)P[Re].remove(this);if((0,L.m)(G)){U&&(this._unsubscribe=void 0);try{G.call(this)}catch(Re){z=Re instanceof ie?oe(Re.errors):[Re]}}if((0,u.k)(de)){let Re=-1,Me=de.length;for(;++Re<Me;){const be=de[Re];if((0,te.K)(be))try{be.unsubscribe()}catch(he){z=z||[],he instanceof ie?z=z.concat(oe(he.errors)):z.push(he)}}}if(z)throw new ie(z)}add(z){let P=z;if(!z)return J.EMPTY;switch(typeof z){case"function":P=new J(z);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof J)){const de=P;P=new J,P._subscriptions=[de]}break;default:throw new Error("unrecognized teardown "+z+" added to Subscription.")}let{_parentOrParents:U}=P;if(null===U)P._parentOrParents=this;else if(U instanceof J){if(U===this)return P;P._parentOrParents=[U,this]}else{if(-1!==U.indexOf(this))return P;U.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[P]:G.push(P),P}remove(z){const P=this._subscriptions;if(P){const U=P.indexOf(z);-1!==U&&P.splice(U,1)}}}var K;function oe(K){return K.reduce((z,P)=>z.concat(P instanceof ie?P.errors:P),[])}J.EMPTY=((K=new J).closed=!0,K)},2494:(He,_e,F)=>{"use strict";F.d(_e,{v:()=>te});let u=!1;const te={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=L},get useDeprecatedSynchronousErrorHandling(){return u}}},5345:(He,_e,F)=>{"use strict";F.d(_e,{IY:()=>ce,Ds:()=>J,ft:()=>K});var u=F(7393),te=F(7574),L=F(7444);class ce extends u.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends u.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function K(z,P){if(P.closed)return;if(z instanceof te.y)return z.subscribe(P);let U;try{U=(0,L.s)(z)(P)}catch(G){P.error(G)}return U}},2441:(He,_e,F)=>{"use strict";F.d(_e,{c:()=>ie,N:()=>J});var u=F(9765),te=F(7574),L=F(5319),ce=F(1307);class ie extends te.y{constructor(U,G){super(),this.source=U,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let U=this._connection;return U||(this._isComplete=!1,U=this._connection=new L.w,U.add(this.source.subscribe(new oe(this.getSubject(),this))),U.closed&&(this._connection=null,U=L.w.EMPTY)),U}refCount(){return(0,ce.x)()(this)}}const J=(()=>{const P=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:P._subscribe},_isComplete:{value:P._isComplete,writable:!0},getSubject:{value:P.getSubject},connect:{value:P.connect},refCount:{value:P.refCount}}})();class oe extends u.Yc{constructor(U,G){super(U),this.connectable=G}_error(U){this._unsubscribe(),super._error(U)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const U=this.connectable;if(U){this.connectable=null;const G=U._connection;U._refCount=0,U._subject=null,U._connection=null,G&&G.unsubscribe()}}}},9193:(He,_e,F)=>{"use strict";F.d(_e,{E:()=>te,c:()=>L});var u=F(7574);const te=new u.y(ie=>ie.complete());function L(ie){return ie?function(ie){return new u.y(J=>ie.schedule(()=>J.complete()))}(ie):te}},4402:(He,_e,F)=>{"use strict";F.d(_e,{D:()=>Me});var u=F(7574),te=F(7444),L=F(5319),ce=F(6554),oe=F(4087),K=F(377),U=F(4072),G=F(9489);function Me(be,he){return he?function(be,he){if(null!=be){if(function(be){return be&&"function"==typeof be[ce.L]}(be))return function(be,he){return new u.y(X=>{const re=new L.w;return re.add(he.schedule(()=>{const we=be[ce.L]();re.add(we.subscribe({next(Ae){re.add(he.schedule(()=>X.next(Ae)))},error(Ae){re.add(he.schedule(()=>X.error(Ae)))},complete(){re.add(he.schedule(()=>X.complete()))}}))})),re})}(be,he);if((0,U.t)(be))return function(be,he){return new u.y(X=>{const re=new L.w;return re.add(he.schedule(()=>be.then(we=>{re.add(he.schedule(()=>{X.next(we),re.add(he.schedule(()=>X.complete()))}))},we=>{re.add(he.schedule(()=>X.error(we)))}))),re})}(be,he);if((0,G.z)(be))return(0,oe.r)(be,he);if(function(be){return be&&"function"==typeof be[K.hZ]}(be)||"string"==typeof be)return function(be,he){if(!be)throw new Error("Iterable cannot be null");return new u.y(X=>{const re=new L.w;let we;return re.add(()=>{we&&"function"==typeof we.return&&we.return()}),re.add(he.schedule(()=>{we=be[K.hZ](),re.add(he.schedule(function(){if(X.closed)return;let Ae,Tt;try{const It=we.next();Ae=It.value,Tt=It.done}catch(It){return void X.error(It)}Tt?X.complete():(X.next(Ae),this.schedule())}))})),re})}(be,he)}throw new TypeError((null!==be&&typeof be||be)+" is not observable")}(be,he):be instanceof u.y?be:new u.y((0,te.s)(be))}},6693:(He,_e,F)=>{"use strict";F.d(_e,{n:()=>ce});var u=F(7574),te=F(5015),L=F(4087);function ce(ie,J){return J?(0,L.r)(ie,J):new u.y((0,te.V)(ie))}},6682:(He,_e,F)=>{"use strict";F.d(_e,{T:()=>ie});var u=F(7574),te=F(4869),L=F(3282),ce=F(6693);function ie(...J){let oe=Number.POSITIVE_INFINITY,K=null,z=J[J.length-1];return(0,te.K)(z)?(K=J.pop(),J.length>1&&"number"==typeof J[J.length-1]&&(oe=J.pop())):"number"==typeof z&&(oe=J.pop()),null===K&&1===J.length&&J[0]instanceof u.y?J[0]:(0,L.J)(oe)((0,ce.n)(J,K))}},5917:(He,_e,F)=>{"use strict";F.d(_e,{of:()=>ce});var u=F(4869),te=F(6693),L=F(4087);function ce(...ie){let J=ie[ie.length-1];return(0,u.K)(J)?(ie.pop(),(0,L.r)(ie,J)):(0,te.n)(ie)}},8002:(He,_e,F)=>{"use strict";F.d(_e,{U:()=>te});var u=F(7393);function te(ie,J){return function(K){if("function"!=typeof ie)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return K.lift(new L(ie,J))}}class L{constructor(J,oe){this.project=J,this.thisArg=oe}call(J,oe){return oe.subscribe(new ce(J,this.project,this.thisArg))}}class ce extends u.L{constructor(J,oe,K){super(J),this.project=oe,this.count=0,this.thisArg=K||this}_next(J){let oe;try{oe=this.project.call(this.thisArg,J,this.count++)}catch(K){return void this.destination.error(K)}this.destination.next(oe)}}},3282:(He,_e,F)=>{"use strict";F.d(_e,{J:()=>L});var u=F(9773),te=F(4487);function L(ce=Number.POSITIVE_INFINITY){return(0,u.zg)(te.y,ce)}},9773:(He,_e,F)=>{"use strict";F.d(_e,{zg:()=>ce});var u=F(8002),te=F(4402),L=F(5345);function ce(K,z,P=Number.POSITIVE_INFINITY){return"function"==typeof z?U=>U.pipe(ce((G,de)=>(0,te.D)(K(G,de)).pipe((0,u.U)((Re,Me)=>z(G,Re,de,Me))),P)):("number"==typeof z&&(P=z),U=>U.lift(new ie(K,P)))}class ie{constructor(z,P=Number.POSITIVE_INFINITY){this.project=z,this.concurrent=P}call(z,P){return P.subscribe(new J(z,this.project,this.concurrent))}}class J extends L.Ds{constructor(z,P,U=Number.POSITIVE_INFINITY){super(z),this.project=P,this.concurrent=U,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(z){this.active<this.concurrent?this._tryNext(z):this.buffer.push(z)}_tryNext(z){let P;const U=this.index++;try{P=this.project(z,U)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(P)}_innerSub(z){const P=new L.IY(this),U=this.destination;U.add(P);const G=(0,L.ft)(z,P);G!==P&&U.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(z){this.destination.next(z)}notifyComplete(){const z=this.buffer;this.active--,z.length>0?this._next(z.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(He,_e,F)=>{"use strict";F.d(_e,{QV:()=>L,ht:()=>ie});var u=F(7393),te=F(1593);function L(oe,K=0){return function(P){return P.lift(new ce(oe,K))}}class ce{constructor(K,z=0){this.scheduler=K,this.delay=z}call(K,z){return z.subscribe(new ie(K,this.scheduler,this.delay))}}class ie extends u.L{constructor(K,z,P=0){super(K),this.scheduler=z,this.delay=P}static dispatch(K){const{notification:z,destination:P}=K;z.observe(P),this.unsubscribe()}scheduleMessage(K){this.destination.add(this.scheduler.schedule(ie.dispatch,this.delay,new J(K,this.destination)))}_next(K){this.scheduleMessage(te.P.createNext(K))}_error(K){this.scheduleMessage(te.P.createError(K)),this.unsubscribe()}_complete(){this.scheduleMessage(te.P.createComplete()),this.unsubscribe()}}class J{constructor(K,z){this.notification=K,this.destination=z}}},1307:(He,_e,F)=>{"use strict";F.d(_e,{x:()=>te});var u=F(7393);function te(){return function(J){return J.lift(new L(J))}}class L{constructor(J){this.connectable=J}call(J,oe){const{connectable:K}=this;K._refCount++;const z=new ce(J,K),P=oe.subscribe(z);return z.closed||(z.connection=K.connect()),P}}class ce extends u.L{constructor(J,oe){super(J),this.connectable=oe}_unsubscribe(){const{connectable:J}=this;if(!J)return void(this.connection=null);this.connectable=null;const oe=J._refCount;if(oe<=0)return void(this.connection=null);if(J._refCount=oe-1,oe>1)return void(this.connection=null);const{connection:K}=this,z=J._connection;this.connection=null,z&&(!K||z===K)&&z.unsubscribe()}}},8819:(He,_e,F)=>{"use strict";F.d(_e,{B:()=>oe});var u=F(2441);var ce=F(1307),ie=F(9765);function J(){return new ie.xQ}function oe(){return K=>(0,ce.x)()(function(K,z){return function(U){let G;G="function"==typeof K?K:function(){return K};const de=Object.create(U,u.N);return de.source=U,de.subjectFactory=G,de}}(J)(K))}},2639:(He,_e,F)=>{"use strict";F.d(_e,{R:()=>be});var u=F(7574);let te=1;const L=Promise.resolve(),ce={};function ie(X){return X in ce&&(delete ce[X],!0)}const J={setImmediate(X){const re=te++;return ce[re]=!0,L.then(()=>ie(re)&&X()),re},clearImmediate(X){ie(X)}};var K=F(6465),P=F(6102);const de=new class extends P.v{flush(re){this.active=!0,this.scheduled=void 0;const{actions:we}=this;let Ae,Tt=-1,It=we.length;re=re||we.shift();do{if(Ae=re.execute(re.state,re.delay))break}while(++Tt<It&&(re=we.shift()));if(this.active=!1,Ae){for(;++Tt<It&&(re=we.shift());)re.unsubscribe();throw Ae}}}(class extends K.o{constructor(re,we){super(re,we),this.scheduler=re,this.work=we}requestAsyncId(re,we,Ae=0){return null!==Ae&&Ae>0?super.requestAsyncId(re,we,Ae):(re.actions.push(this),re.scheduled||(re.scheduled=J.setImmediate(re.flush.bind(re,null))))}recycleAsyncId(re,we,Ae=0){if(null!==Ae&&Ae>0||null===Ae&&this.delay>0)return super.recycleAsyncId(re,we,Ae);0===re.actions.length&&(J.clearImmediate(we),re.scheduled=void 0)}});var Re=F(6561);class Me extends u.y{constructor(re,we=0,Ae=de){super(),this.source=re,this.delayTime=we,this.scheduler=Ae,(!(0,Re.k)(we)||we<0)&&(this.delayTime=0),(!Ae||"function"!=typeof Ae.schedule)&&(this.scheduler=de)}static create(re,we=0,Ae=de){return new Me(re,we,Ae)}static dispatch(re){const{source:we,subscriber:Ae}=re;return this.add(we.subscribe(Ae))}_subscribe(re){return this.scheduler.schedule(Me.dispatch,this.delayTime,{source:this.source,subscriber:re})}}function be(X,re=0){return function(Ae){return Ae.lift(new he(X,re))}}class he{constructor(re,we){this.scheduler=re,this.delay=we}call(re,we){return new Me(we,this.delay,this.scheduler).subscribe(re)}}},8307:(He,_e,F)=>{"use strict";F.d(_e,{b:()=>ce});var u=F(7393),te=F(8640),L=F(9105);function ce(oe,K,z){return function(U){return U.lift(new ie(oe,K,z))}}class ie{constructor(K,z,P){this.nextOrObserver=K,this.error=z,this.complete=P}call(K,z){return z.subscribe(new J(K,this.nextOrObserver,this.error,this.complete))}}class J extends u.L{constructor(K,z,P,U){super(K),this._tapNext=te.Z,this._tapError=te.Z,this._tapComplete=te.Z,this._tapError=P||te.Z,this._tapComplete=U||te.Z,(0,L.m)(z)?(this._context=this,this._tapNext=z):z&&(this._context=z,this._tapNext=z.next||te.Z,this._tapError=z.error||te.Z,this._tapComplete=z.complete||te.Z)}_next(K){try{this._tapNext.call(this._context,K)}catch(z){return void this.destination.error(z)}this.destination.next(K)}_error(K){try{this._tapError.call(this._context,K)}catch(z){return void this.destination.error(z)}this.destination.error(K)}_complete(){try{this._tapComplete.call(this._context)}catch(K){return void this.destination.error(K)}return this.destination.complete()}}},4087:(He,_e,F)=>{"use strict";F.d(_e,{r:()=>L});var u=F(7574),te=F(5319);function L(ce,ie){return new u.y(J=>{const oe=new te.w;let K=0;return oe.add(ie.schedule(function(){K!==ce.length?(J.next(ce[K++]),J.closed||oe.add(this.schedule())):J.complete()})),oe})}},6465:(He,_e,F)=>{"use strict";F.d(_e,{o:()=>L});var u=F(5319);class te extends u.w{constructor(ie,J){super()}schedule(ie,J=0){return this}}class L extends te{constructor(ie,J){super(ie,J),this.scheduler=ie,this.work=J,this.pending=!1}schedule(ie,J=0){if(this.closed)return this;this.state=ie;const oe=this.id,K=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(K,oe,J)),this.pending=!0,this.delay=J,this.id=this.id||this.requestAsyncId(K,this.id,J),this}requestAsyncId(ie,J,oe=0){return setInterval(ie.flush.bind(ie,this),oe)}recycleAsyncId(ie,J,oe=0){if(null!==oe&&this.delay===oe&&!1===this.pending)return J;clearInterval(J)}execute(ie,J){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const oe=this._execute(ie,J);if(oe)return oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,J){let K,oe=!1;try{this.work(ie)}catch(z){oe=!0,K=!!z&&z||new Error(z)}if(oe)return this.unsubscribe(),K}_unsubscribe(){const ie=this.id,J=this.scheduler,oe=J.actions,K=oe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==K&&oe.splice(K,1),null!=ie&&(this.id=this.recycleAsyncId(J,ie,null)),this.delay=null}}},6102:(He,_e,F)=>{"use strict";F.d(_e,{v:()=>te});let u=(()=>{class L{constructor(ie,J=L.now){this.SchedulerAction=ie,this.now=J}schedule(ie,J=0,oe){return new this.SchedulerAction(this,ie).schedule(oe,J)}}return L.now=()=>Date.now(),L})();class te extends u{constructor(ce,ie=u.now){super(ce,()=>te.delegate&&te.delegate!==this?te.delegate.now():ie()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,ie=0,J){return te.delegate&&te.delegate!==this?te.delegate.schedule(ce,ie,J):super.schedule(ce,ie,J)}flush(ce){const{actions:ie}=this;if(this.active)return void ie.push(ce);let J;this.active=!0;do{if(J=ce.execute(ce.state,ce.delay))break}while(ce=ie.shift());if(this.active=!1,J){for(;ce=ie.shift();)ce.unsubscribe();throw J}}}},3637:(He,_e,F)=>{"use strict";F.d(_e,{z:()=>L,P:()=>ce});var u=F(6465);const L=new(F(6102).v)(u.o),ce=L},7771:(He,_e,F)=>{"use strict";F.d(_e,{c:()=>J,N:()=>ie});var u=F(6465),L=F(6102);const ie=new class extends L.v{}(class extends u.o{constructor(K,z){super(K,z),this.scheduler=K,this.work=z}schedule(K,z=0){return z>0?super.schedule(K,z):(this.delay=z,this.state=K,this.scheduler.flush(this),this)}execute(K,z){return z>0||this.closed?super.execute(K,z):this._execute(K,z)}requestAsyncId(K,z,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(K,z,P):K.flush(this)}}),J=ie},377:(He,_e,F)=>{"use strict";F.d(_e,{hZ:()=>te});const te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(He,_e,F)=>{"use strict";F.d(_e,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(He,_e,F)=>{"use strict";F.d(_e,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(He,_e,F)=>{"use strict";F.d(_e,{N:()=>te});const te=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(He,_e,F)=>{"use strict";function u(te){setTimeout(()=>{throw te},0)}F.d(_e,{z:()=>u})},4487:(He,_e,F)=>{"use strict";function u(te){return te}F.d(_e,{y:()=>u})},9796:(He,_e,F)=>{"use strict";F.d(_e,{k:()=>u});const u=Array.isArray||(te=>te&&"number"==typeof te.length)},9489:(He,_e,F)=>{"use strict";F.d(_e,{z:()=>u});const u=te=>te&&"number"==typeof te.length&&"function"!=typeof te},9105:(He,_e,F)=>{"use strict";function u(te){return"function"==typeof te}F.d(_e,{m:()=>u})},6561:(He,_e,F)=>{"use strict";F.d(_e,{k:()=>te});var u=F(9796);function te(L){return!(0,u.k)(L)&&L-parseFloat(L)+1>=0}},1555:(He,_e,F)=>{"use strict";function u(te){return null!==te&&"object"==typeof te}F.d(_e,{K:()=>u})},4072:(He,_e,F)=>{"use strict";function u(te){return!!te&&"function"!=typeof te.subscribe&&"function"==typeof te.then}F.d(_e,{t:()=>u})},4869:(He,_e,F)=>{"use strict";function u(te){return te&&"function"==typeof te.schedule}F.d(_e,{K:()=>u})},8640:(He,_e,F)=>{"use strict";function u(){}F.d(_e,{Z:()=>u})},7444:(He,_e,F)=>{"use strict";F.d(_e,{s:()=>U});var u=F(5015),te=F(4449),ce=F(377),J=F(6554),K=F(9489),z=F(4072),P=F(1555);const U=G=>{if(G&&"function"==typeof G[J.L])return(G=>de=>{const Re=G[J.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(de)})(G);if((0,K.z)(G))return(0,u.V)(G);if((0,z.t)(G))return(G=>de=>(G.then(Re=>{de.closed||(de.next(Re),de.complete())},Re=>de.error(Re)).then(null,te.z),de))(G);if(G&&"function"==typeof G[ce.hZ])return(G=>de=>{const Re=G[ce.hZ]();for(;;){let Me;try{Me=Re.next()}catch(be){return de.error(be),de}if(Me.done){de.complete();break}if(de.next(Me.value),de.closed)break}return"function"==typeof Re.return&&de.add(()=>{Re.return&&Re.return()}),de})(G);{const Re=`You provided ${(0,P.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(He,_e,F)=>{"use strict";F.d(_e,{V:()=>u});const u=te=>L=>{for(let ce=0,ie=te.length;ce<ie&&!L.closed;ce++)L.next(te[ce]);L.complete()}},6977:(He,_e,F)=>{"use strict";var u=F(7716);let te=null;function L(){return te}const oe=new u.OlP("DocumentToken");let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:z,token:n,providedIn:"platform"}),n})();function z(){return(0,u.LFG)(U)}const P=new u.OlP("Location Initialized");let U=(()=>{class n extends K{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){G()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){G()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=(0,u.Yz7)({factory:de,token:n,providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function de(){return new U((0,u.LFG)(oe))}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function be(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:X,token:n,providedIn:"root"}),n})();function X(n){const e=(0,u.LFG)(oe).location;return new we((0,u.LFG)(K),e&&e.origin||"")}const re=new u.OlP("appBaseHref");let we=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const f=this.prepareExternalUrl(o+be(c));this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,c){const f=this.prepareExternalUrl(o+be(c));this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(K),u.LFG(re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let f=this.prepareExternalUrl(o+be(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,c){let f=this.prepareExternalUrl(o+be(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(K),u.LFG(re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Tt=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(yt(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+be(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,yt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he),u.LFG(K))},n.normalizeQueryParams=be,n.joinWithSlash=Re,n.stripTrailingSlash=Me,n.\u0275prov=(0,u.Yz7)({factory:It,token:n,providedIn:"root"}),n})();function It(){return new Tt((0,u.LFG)(he),(0,u.LFG)(K))}function yt(n){return n.replace(/\/index.html$/,"")}var ft=(()=>((ft=ft||{})[ft.Zero=0]="Zero",ft[ft.One=1]="One",ft[ft.Two=2]="Two",ft[ft.Few=3]="Few",ft[ft.Many=4]="Many",ft[ft.Other=5]="Other",ft))();const os=u.kL8;class Hr{}let sr=(()=>{class n extends Hr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(os(r||this.locale)(t)){case ft.Zero:return"zero";case ft.One:return"one";case ft.Two:return"two";case ft.Few:return"few";case ft.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:Hr,useClass:sr}]}),n})();function Zu(n){return"server"===n}let Xa=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Xd((0,u.LFG)(oe),window)}),n})();class Xd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const f=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(f)return f}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ca(this.window.history)||ca(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ca(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class th extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new th,te||(te=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ls=ls||document.querySelector("base"),ls?ls.getAttribute("href"):null);return null==t?null:function(n){qt=qt||document.createElement("a"),qt.setAttribute("href",n);const e=qt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let qt,ls=null;const Ku=new u.OlP("TRANSITION_ID"),di=[{provide:u.ip1,useFactory:function(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=L(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[Ku,oe,u.zs3],multi:!0}];class qn{static init(){(0,u.VLi)(new qn)}addToWindow(e){u.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const o=u.dqk.getAllAngularTestabilities();let c=o.length,f=!1;const _=function(w){f=f||w,c--,0==c&&r(f)};o.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Qs=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const As=new u.OlP("EventManagerPlugins");let ve=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const f=o[c];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(As),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Et{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=L().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let tl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),rn=(()=>{class n extends tl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,o.push(r.appendChild(f))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(nl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(nl))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function nl(n){L().remove(n)}const cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sr=/%COMP%/g;function On(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?On(n,o,t):(o=o.replace(Sr,n),t.push(o))}return t}function Si(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wi=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ar(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new bc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case u.ifc.ShadowDom:return new ou(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=On(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ve),u.LFG(rn),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ar{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(cs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=cs[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=cs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,o&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Si(r)):this.eventManager.addEventListener(e,t,Si(r))}}class bc extends Ar{constructor(e,t,r,o){super(e),this.component=r;const c=On(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Sr,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Sr,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ou extends Ar{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=On(o.id,o.styles,[]);for(let f=0;f<c.length;f++){const _=document.createElement("style");_.textContent=c[f],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let au=(()=>{class n extends Et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ns=["alt","control","meta","shift"],Dc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ya=(()=>{class n extends Et{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),f=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,c.domEventName,f))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let f="";if(Ns.forEach(w=>{const T=r.indexOf(w);T>-1&&(r.splice(T,1),f+=w+".")}),f+=c,0!=r.length||0===c.length)return null;const _={};return _.domEventName=o,_.fullKey=f,_}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Yn.hasOwnProperty(e)&&(e=Yn[e]))}return Dc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ns.forEach(c=>{c!=o&&Qg[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const no=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){th.makeCurrent(),qn.init()},multi:!0},{provide:oe,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),Tc=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:As,useClass:au,multi:!0,deps:[oe,u.R0b,u.Lbi]},{provide:As,useClass:ya,multi:!0,deps:[oe]},[],{provide:Wi,useClass:Wi,deps:[ve,rn,u.AFp]},{provide:u.FYo,useExisting:Wi},{provide:tl,useExisting:rn},{provide:rn,useClass:rn,deps:[oe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ve,useClass:ve,deps:[As,u.R0b]},{provide:class{},useClass:Qs,deps:[]},[]];let zf=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Ku,useExisting:u.AFp},di]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Tc,imports:[hn,u.hGG]}),n})();"undefined"!=typeof window&&window;var Zt=F(4402),Be=F(5917),Yt=F(9765),Sc=F(7971);class yn extends Yt.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Sc.N;return this._value}next(e){super.next(this._value=e)}}var xs=F(4869),ko=F(9796),sn=F(7393);class hu extends sn.L{notifyNext(e,t,r,o,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class tm extends sn.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var io=F(7444),Dn=F(7574);function Cn(n,e,t,r,o=new tm(n,t,r)){if(!o.closed)return e instanceof Dn.y?e.subscribe(o):(0,io.s)(e)(o)}var Ea=F(6693);const fu={};class ul{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new pu(e,this.resultSelector))}}class pu extends hu{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(fu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Cn(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,f=this.toRespond?o[r]===fu?--this.toRespond:this.toRespond:0;o[r]=t,0===f&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Ai=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var ks=F(3282);function so(...n){return(0,ks.J)(1)((0,Be.of)(...n))}var Nr=F(9193);function Yi(n){return new Dn.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Zt.D)(t):(0,Nr.c)()).subscribe(e)})}var gh=F(2441),tt=F(8002),Ni=F(5345);function Tn(n,e){return"function"==typeof e?t=>t.pipe(Tn((r,o)=>(0,Zt.D)(n(r,o)).pipe((0,tt.U)((c,f)=>e(r,c,o,f))))):t=>t.lift(new nm(n))}class nm{constructor(e){this.project=e}call(e,t){return t.subscribe(new cn(e,this.project))}}class cn extends Ni.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Ni.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Ni.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const ll=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function qr(n){return e=>0===n?(0,Nr.c)():e.lift(new iv(n))}class iv{constructor(e){if(this.total=e,this.total<0)throw new ll}call(e,t){return t.subscribe(new cl(e,this.total))}}class cl extends sn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Da(...n){const e=n[n.length-1];return(0,xs.K)(e)?(n.pop(),t=>so(n,t,e)):t=>so(n,t)}function gu(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new rm(n,e,t))}}class rm{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new _h(e,this.accumulator,this.seed,this.hasSeed))}}class _h extends sn.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function vn(n,e){return function(r){return r.lift(new Ac(n,e))}}class Ac{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Oo(e,this.predicate,this.thisArg))}}class Oo extends sn.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function oo(n){return function(t){const r=new Pn(n),o=t.lift(r);return r.caught=o}}class Pn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Os(e,this.selector,this.caught))}}class Os extends Ni.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new Ni.IY(this);this.add(r);const o=(0,Ni.ft)(t,r);o!==r&&this.add(o)}}}var In=F(9773);function Nc(n,e){return(0,In.zg)(n,e,1)}function yh(n){return function(t){return 0===n?(0,Nr.c)():t.lift(new fi(n))}}class fi{constructor(e){if(this.total=e,this.total<0)throw new ll}call(e,t){return t.subscribe(new hs(e,this.total))}}class hs extends sn.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let c=0;c<r;c++){const f=t++%r;e.next(o[f])}}e.complete()}}function mu(n=vh){return e=>e.lift(new Mi(n))}class Mi{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Ps(e,this.errorFactory))}}class Ps extends sn.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function vh(){return new Ai}function Mc(n=null){return e=>e.lift(new Po(n))}class Po{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new im(e,this.defaultValue))}}class im extends sn.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Fo=F(4487);function Kn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vn((o,c)=>n(o,c,r)):Fo.y,qr(1),t?Mc(e):mu(()=>new Ai))}var bn=F(8307),Ca=F(1307),Rc=F(5319);class C{constructor(e){this.callback=e}call(e,t){return t.subscribe(new S(e,this.callback))}}class S extends sn.L{constructor(e,t){super(e),this.add(new Rc.w(t))}}class x{constructor(e,t){this.id=e,this.url=t}}class B extends x{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Q extends x{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ue extends x{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ee extends x{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Le extends x{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends x{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends x{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class en extends x{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fn extends x{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jn{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class Qf{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fn(n){return new Qf(n)}const pl="ngNavigationCancelingError";function sm(n){const e=Error("NavigationCancelingError: "+n);return e[pl]=!0,e}function yu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const f=r[c],_=n[c];if(f.startsWith(":"))o[f.substring(1)]=_;else if(f!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Qi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!ep(n[o],e[o]))return!1;return!0}function ep(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function om(n){return Array.prototype.concat.apply([],n)}function Ta(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function or(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Zt.D)(Promise.resolve(n)):(0,Be.of)(n)}const am={exact:function bh(n,e,t){if(!Sa(n.segments,e.segments)||!ml(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bh(n.children[r],e.children[r],t))return!1;return!0},subset:Vo},gl={exact:function(n,e){return Qi(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ep(n[t],e[t]))},ignored:()=>!0};function xc(n,e,t){return am[t.paths](n.root,e.root,t.matrixParams)&&gl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vo(n,e,t){return Bo(n,e,e.segments,t)}function Bo(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Sa(o,t)||e.hasChildren()||!ml(o,t,r))}if(n.segments.length===t.length){if(!Sa(n.segments,t)||!ml(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Vo(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Sa(n.segments,o)&&ml(n.segments,o,r)&&n.children[lt])&&Bo(n.children[lt],e,c,r)}}function ml(n,e,t){return e.every((r,o)=>gl[t](n[o].parameters,r.parameters))}class vu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return Oc.serialize(this)}}class St{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uo(this)}}class kc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fn(this.parameters)),this._parameterMap}toString(){return vl(this)}}function Sa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class tp{}class _l{parse(e){const t=new Dh(e);return new vu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Pc(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fc(t)}=${Fc(o)}`).join("&"):`${Fc(t)}=${Fc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Oc=new _l;function Uo(n){return n.segments.map(e=>vl(e)).join("/")}function Pc(n,e){if(!n.hasChildren())return Uo(n);if(e){const t=n.children[lt]?Pc(n.children[lt],!1):"",r=[];return Qn(n.children,(o,c)=>{c!==lt&&r.push(`${c}:${Pc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Qn(n.children,(r,o)=>{o===lt&&(t=t.concat(e(r,o)))}),Qn(n.children,(r,o)=>{o!==lt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===lt?[Pc(n.children[lt],!1)]:[`${o}:${Pc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[lt]?`${Uo(n)}/${t[0]}`:`${Uo(n)}/(${t.join("//")})`}}function cm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fc(n){return cm(n).replace(/%3B/gi,";")}function Lc(n){return cm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yl(n){return decodeURIComponent(n)}function np(n){return yl(n.replace(/\+/g,"%20"))}function vl(n){return`${Lc(n.path)}${function(n){return Object.keys(n).map(e=>`;${Lc(e)}=${Lc(n[e])}`).join("")}(n.parameters)}`}const lv=/^[^\/()?;=#]+/;function Eh(n){const e=n.match(lv);return e?e[0]:""}const cv=/^[^=?&#]+/,jo=/^[^?&#]+/;class Dh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[lt]=new St(e,t)),r}parseSegment(){const e=Eh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new kc(yl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Eh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Eh(this.remaining);o&&(r=o,this.capture(r))}e[yl(t)]=yl(r)}parseQueryParam(e){const t=function(n){const e=n.match(cv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(jo);return e?e[0]:""}(this.remaining);f&&(r=f,this.capture(r))}const o=np(t),c=np(r);if(e.hasOwnProperty(o)){let f=e[o];Array.isArray(f)||(f=[f],e[o]=f),f.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Eh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=lt);const f=this.parseChildren();t[c]=1===Object.keys(f).length?f[lt]:new St([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class dm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ip(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ip(e,this._root).map(t=>t.value)}}function rp(n,e){if(n===e.value)return e;for(const t of e.children){const r=rp(n,t);if(r)return r}return null}function ip(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ip(n,t);if(r.length)return r.unshift(e),r}return[]}class $o{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ch extends dm{constructor(e,t){super(e),this.snapshot=t,Ih(this,e)}toString(){return this.snapshot.toString()}}function hm(n,e){const t=function(n,e){const f=new Th([],{},{},"",{},lt,e,null,n.root,-1,{});return new Aa("",new $o(f,[]))}(n,e),r=new yn([new kc("",{})]),o=new yn({}),c=new yn({}),f=new yn({}),_=new yn(""),w=new wl(r,o,f,_,c,lt,e,t.root);return w.snapshot=t.root,new Ch(new $o(w,[]),t)}class wl{constructor(e,t,r,o,c,f,_,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=f,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(e=>fn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(e=>fn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Th{constructor(e,t,r,o,c,f,_,w,T,N,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=f,this.component=_,this.routeConfig=w,this._urlSegment=T,this._lastPathIndex=N,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Aa extends dm{constructor(e,t){super(t),this.url=e,Ih(this,t)}toString(){return fs(this._root)}}function Ih(n,e){e.value._routerState=n,e.children.forEach(t=>Ih(n,t))}function fs(n){const e=n.children.length>0?` { ${n.children.map(fs).join(", ")} } `:"";return`${n.value}${e}`}function wu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qi(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function El(n,e){return Qi(n.params,e.params)&&function(n,e){return Sa(n,e)&&n.every((t,r)=>Qi(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||El(n.parent,e.parent))}function Dl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Dl(n,r,o);return Dl(n,r)})}(n,e,t);return new $o(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const f=c.route;return mm(e,f),f}}const r=function(n){return new wl(new yn(n.url),new yn(n.params),new yn(n.queryParams),new yn(n.fragment),new yn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>Dl(n,c));return new $o(r,o)}}function mm(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)mm(n.children[t],e.children[t])}function Bc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xi(n){return"object"==typeof n&&null!=n&&n.outlets}function _m(n,e,t,r,o){let c={};return r&&Qn(r,(f,_)=>{c[_]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),new vu(t.root===n?e:fv(t.root,n,e),c,o)}function fv(n,e,t){const r={};return Qn(n.children,(o,c)=>{r[c]=o===e?t:fv(o,e,t)}),new St(n.segments,r)}class Uc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bc(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Xi);if(o&&o!==Ta(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $c(n,e,t){if(n||(n=new St([],{})),0===n.segments.length&&n.hasChildren())return Hc(n,e,t);const r=function(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const f=n.segments[o],_=t[r];if(Xi(_))break;const w=`${_}`,T=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&T&&"object"==typeof T&&void 0===T.outlets){if(!vm(w,T,f))return c;r+=2}else{if(!vm(w,{},f))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new St(n.segments.slice(0,r.pathIndex),{});return c.children[lt]=new St(n.segments.slice(r.pathIndex),n.children),Hc(c,0,o)}return r.match&&0===o.length?new St(n.segments,{}):r.match&&!n.hasChildren()?op(n,e,t):r.match?Hc(n,0,o):op(n,e,t)}function Hc(n,e,t){if(0===t.length)return new St(n.segments,{});{const r=function(n){return Xi(n[0])?n[0].outlets:{[lt]:n}}(t),o={};return Qn(r,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[f]=$c(n.children[f],e,c))}),Qn(n.children,(c,f)=>{void 0===r[f]&&(o[f]=c)}),new St(n.segments,o)}}function op(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(Xi(c)){const w=Ln(c.outlets);return new St(r,w)}if(0===o&&Bc(t[0])){r.push(new kc(n.segments[e].path,ym(t[0]))),o++;continue}const f=Xi(c)?c.outlets[lt]:`${c}`,_=o<t.length-1?t[o+1]:null;f&&_&&Bc(_)?(r.push(new kc(f,ym(_))),o+=2):(r.push(new kc(f,{})),o++)}return new St(r,{})}function Ln(n){const e={};return Qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=op(new St([],{}),0,t))}),e}function ym(n){const e={};return Qn(n,(t,r)=>e[r]=`${t}`),e}function vm(n,e,t){return n==t.path&&Qi(e,t.parameters)}class up{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Vc(t);e.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,o[f],r),delete o[f]}),Qn(o,(c,f)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const f=r.getContext(o.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Vc(e);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Vc(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new Ki(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Lo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(wu(o),o===c)if(o.component){const f=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const f=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const _=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(_.contexts),f.attachRef=_.componentRef,f.route=_.route.value,f.outlet&&f.outlet.attach(_.componentRef,_.route.value),Ah(_.route)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=_?_.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=w,f.outlet&&f.outlet.activateWith(o,w),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,r)}}function Ah(n){wu(n.value),n.children.forEach(Ah)}class lp{constructor(e,t){this.routes=e,this.module=t}}function ao(n){return"function"==typeof n}function Cl(n){return n instanceof vu}const Tl=Symbol("INITIAL_VALUE");function Eu(){return Tn(n=>function(...n){let e,t;return(0,xs.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,ko.k)(n[0])&&(n=n[0]),(0,Ea.n)(n,t).lift(new ul(e))}(n.map(e=>e.pipe(qr(1),Da(Tl)))).pipe(gu((e,t)=>{let r=!1;return t.reduce((o,c,f)=>o!==Tl?o:(c===Tl&&(r=!0),r||!1!==c&&f!==t.length-1&&!Cl(c)?o:c),e)},Tl),vn(e=>e!==Tl),(0,tt.U)(e=>Cl(e)?e:!0===e),qr(1)))}let Mr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:function(){return[vp]},encapsulation:2}),n})();function Il(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];hp(r,yv(e,r))}}function hp(n,e){n.children&&Il(n.children,e)}function yv(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Sl(n){const e=n.children&&n.children.map(Sl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==lt&&(t.component=Mr),t}function es(n){return n.outlet||lt}function fp(n,e){const t=n.filter(r=>es(r)===e);return t.push(...n.filter(r=>es(r)!==e)),t}const pp={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Nh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},pp):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||yu)(t,n,e);if(!c)return Object.assign({},pp);const f={};Qn(c.posParams,(w,T)=>{f[T]=w.path});const _=c.consumed.length>0?Object.assign(Object.assign({},f),c.consumed[c.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:_,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function qc(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Du(n,e,r)&&es(r)!==lt)}(n,t,r)){const f=new St(e,function(n,e,t,r){const o={};o[lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&es(c)!==lt){const f=new St([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,o[es(c)]=f}return o}(n,e,r,new St(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Du(n,e,r))}(n,t,r)){const f=new St(n.segments,function(n,e,t,r,o,c){const f={};for(const _ of r)if(Du(n,t,_)&&!o[es(_)]){const w=new St([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,f[es(_)]=w}return Object.assign(Object.assign({},o),f)}(n,e,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const c=new St(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Du(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mp(n,e,t,r){return!!(es(n)===r||r!==lt&&Du(e,t,n))&&("**"===n.path||Nh(e,n,t).matched)}function Rh(n,e,t){return 0===e.length&&!n.children[t]}class zr{constructor(e){this.segmentGroup=e||null}}class Cu{constructor(e){this.urlTree=e}}function Ma(n){return new Dn.y(e=>e.error(new zr(n)))}function wm(n){return new Dn.y(e=>e.error(new Cu(n)))}function _p(n){return new Dn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Em{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=qc(this.urlTree.root,[],[],this.config).segmentGroup,t=new St(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,lt).pipe((0,tt.U)(c=>this.createUrlTree(uo(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oo(c=>{if(c instanceof Cu)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof zr?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,lt).pipe((0,tt.U)(o=>this.createUrlTree(uo(o),e.queryParams,e.fragment))).pipe(oo(o=>{throw o instanceof zr?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new St([],{[lt]:e}):e;return new vu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,tt.U)(c=>new St([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,Zt.D)(o).pipe(Nc(c=>{const f=r.children[c],_=fp(t,c);return this.expandSegmentGroup(e,_,f,c).pipe((0,tt.U)(w=>({segment:w,outlet:c})))}),gu((c,f)=>(c[f.outlet]=f.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vn((o,c)=>n(o,c,r)):Fo.y,yh(1),t?Mc(e):mu(()=>new Ai))}())}expandSegment(e,t,r,o,c,f){return(0,Zt.D)(r).pipe(Nc(_=>this.expandSegmentAgainstRoute(e,t,r,_,o,c,f).pipe(oo(T=>{if(T instanceof zr)return(0,Be.of)(null);throw T}))),Kn(_=>!!_),oo((_,w)=>{if(_ instanceof Ai||"EmptyError"===_.name){if(Rh(t,o,c))return(0,Be.of)(new St([],{}));throw new zr(t)}throw _}))}expandSegmentAgainstRoute(e,t,r,o,c,f,_){return mp(o,t,c,f)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,f):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f):Ma(t):Ma(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wm(c):this.lineralizeSegments(r,c).pipe((0,In.zg)(f=>{const _=new St(f,{});return this.expandSegment(e,_,t,f,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f){const{matched:_,consumedSegments:w,lastChild:T,positionalParamSegments:N}=Nh(t,o,c);if(!_)return Ma(t);const R=this.applyRedirectCommands(w,o.redirectTo,N);return o.redirectTo.startsWith("/")?wm(R):this.lineralizeSegments(o,R).pipe((0,In.zg)(V=>this.expandSegment(e,t,r,V.concat(c.slice(T)),f,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Be.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,tt.U)(V=>(r._loadedConfig=V,new St(o,{})))):(0,Be.of)(new St(o,{}));const{matched:f,consumedSegments:_,lastChild:w}=Nh(t,r,o);if(!f)return Ma(t);const T=o.slice(w);return this.getChildConfig(e,r,o).pipe((0,In.zg)(R=>{const V=R.module,$=R.routes,{segmentGroup:ee,slicedSegments:me}=qc(t,_,T,$),Ce=new St(ee.segments,ee.children);if(0===me.length&&Ce.hasChildren())return this.expandChildren(V,$,Ce).pipe((0,tt.U)(nt=>new St(_,nt)));if(0===$.length&&0===me.length)return(0,Be.of)(new St(_,{}));const Xe=es(r)===c;return this.expandSegment(V,Ce,$,me,Xe?lt:c,!0).pipe((0,tt.U)(Ct=>new St(_.concat(Ct.segments),Ct.children)))}))}getChildConfig(e,t,r){return t.children?(0,Be.of)(new lp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Be.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,In.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,tt.U)(c=>(t._loadedConfig=c,c))):(n=t,new Dn.y(e=>e.error(sm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Be.of)(new lp([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,Be.of)(!0);const c=o.map(f=>{const _=e.get(f);let w;if((n=_)&&ao(n.canLoad))w=_.canLoad(t,r);else{if(!ao(_))throw new Error("Invalid CanLoad guard");w=_(t,r)}var n;return or(w)});return(0,Be.of)(c).pipe(Eu(),(0,bn.b)(f=>{if(!Cl(f))return;const _=sm(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw _.url=f,_}),(0,tt.U)(f=>!0===f))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,Be.of)(r);if(o.numberOfChildren>1||!o.children[lt])return _p(e.redirectTo);o=o.children[lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new vu(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qn(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const _=o.substring(1);r[c]=t[_]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let f={};return Qn(t.children,(_,w)=>{f[w]=this.createSegmentGroup(e,_,r,o)}),new St(c,f)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function uo(n){const e={};for(const r of Object.keys(n.children)){const c=uo(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[lt]){const e=n.children[lt];return new St(n.segments.concat(e.segments),e.children)}return n}(new St(n.segments,e))}class Wc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gi{constructor(e,t){this.component=e,this.route=t}}function Cm(n,e,t){const r=n._root;return Al(r,e?e._root:null,t,[r.value])}function Rr(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Al(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=Vc(e);return n.children.forEach(f=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,f=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Sa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sa(n.url,e.url)||!Qi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!El(n,e)||!Qi(n.queryParams,e.queryParams);case"paramsChange":default:return!El(n,e)}}(f,c,c.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Wc(r)):(c.data=f.data,c._resolvedData=f._resolvedData),Al(n,e,c.component?_?_.children:null:t,r,o),w&&_&&_.outlet&&_.outlet.isActivated&&o.canDeactivateChecks.push(new gi(_.outlet.component,f))}else f&&Go(e,_,o),o.canActivateChecks.push(new Wc(r)),Al(n,null,c.component?_?_.children:null:t,r,o)})(f,c[f.value.outlet],t,r.concat([f.value]),o),delete c[f.value.outlet]}),Qn(c,(f,_)=>Go(f,t.getContext(_),o)),o}function Go(n,e,t){const r=Vc(n),o=n.value;Qn(r,(c,f)=>{Go(c,o.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new gi(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class p{}function g(n){return new Dn.y(e=>e.error(n))}class I{constructor(e,t,r,o,c,f){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const e=qc(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,lt);if(null===t)return null;const r=new Th([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new $o(r,t),c=new Aa(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=fm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const f=t.children[c],_=fp(e,c),w=this.processSegmentGroup(_,f,c);if(null===w)return null;r.push(...w)}const o=xe(r);return o.sort((e,t)=>e.value.outlet===lt?-1:t.value.outlet===lt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const c of e){const f=this.processSegmentAgainstRoute(c,t,r,o);if(null!==f)return f}return Rh(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!mp(e,t,r,o))return null;let c,f=[],_=[];if("**"===e.path){const $=r.length>0?Ta(r).parameters:{};c=new Th(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dt(e),es(e),e.component,e,$e(t),qe(t)+r.length,Wn(e))}else{const $=Nh(t,e,r);if(!$.matched)return null;f=$.consumedSegments,_=r.slice($.lastChild),c=new Th(f,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dt(e),es(e),e.component,e,$e(t),qe(t)+f.length,Wn(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:T,slicedSegments:N}=qc(t,f,_,w.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===N.length&&T.hasChildren()){const $=this.processChildren(w,T);return null===$?null:[new $o(c,$)]}if(0===w.length&&0===N.length)return[new $o(c,[])];const R=es(e)===o,V=this.processSegment(w,T,N,R?lt:o);return null===V?null:[new $o(c,V)]}}function ae(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xe(n){const e=[],t=new Set;for(const r of n){if(!ae(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=xe(r.children);e.push(new $o(r.value,o))}return e.filter(r=>!t.has(r))}function $e(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qe(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Dt(n){return n.data||{}}function Wn(n){return n.resolve||{}}function Zc(n){return Tn(e=>{const t=n(e);return t?(0,Zt.D)(t).pipe((0,tt.U)(()=>e)):(0,Be.of)(e)})}class yp extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yc=new u.OlP("ROUTES");class Oh{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,tt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=c.create(e);return new lp(om(f.injector.get(Yc,void 0,u.XFs.Self|u.XFs.Optional)).map(Sl),f)}),oo(c=>{throw t._loader$=void 0,c}));return t._loader$=new gh.c(o,()=>new Yt.xQ).pipe((0,Ca.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Zt.D)(this.loader.load(e)):or(e()).pipe((0,In.zg)(t=>t instanceof u.YKP?(0,Be.of)(t):(0,Zt.D)(this.compiler.compileModuleAsync(t))))}}class Ph{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xa,this.attachRef=null}}class xa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ph,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class vI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function I1(n){throw n}function S1(n,e,t){return e.parse("/")}function Nl(n,e){return(0,Be.of)(null)}const A1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,o,c,f,_,w,T){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yt.xQ,this.errorHandler=I1,this.malformedUriErrorHandler=S1,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Nl,afterPreactivation:Nl},this.urlHandlingStrategy=new vI,this.routeReuseStrategy=new yp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(u.h0i),this.console=f.get(u.c2e);const V=f.get(u.R0b);this.isNgZoneEnabled=V instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new vu(new St([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Oh(_,w,$=>this.triggerEvent(new Wr($)),$=>this.triggerEvent(new Jn($))),this.routerState=hm(this.currentUrlTree,this.rootComponentType),this.transitions=new yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(vn(o=>0!==o.id),(0,tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Tn(o=>{let c=!1,f=!1;return(0,Be.of)(o).pipe((0,bn.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tn(_=>{const w=this.browserUrlTree.toString(),T=!this.navigated||_.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return Om(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,Be.of)(_).pipe(Tn(R=>{const V=this.transitions.getValue();return r.next(new B(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),V!==this.transitions.getValue()?Nr.E:Promise.resolve(R)}),function(n,e,t,r){return Tn(o=>function(n,e,t,r,o){return new Em(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,tt.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,bn.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function(n,e,t,r,o){return(0,In.zg)(c=>function(n,e,t,r,o="emptyOnly",c="legacy"){try{const f=new I(n,e,t,r,o,c).recognize();return null===f?g(new p):(0,Be.of)(f)}catch(f){return g(f)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,tt.U)(f=>Object.assign(Object.assign({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,bn.b)(R=>{"eager"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(R.urlAfterRedirects,R),this.browserUrlTree=R.urlAfterRedirects);const V=new Le(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(V)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:$,source:ee,restoredState:me,extras:Ce}=_,Xe=new B(V,this.serializeUrl($),ee,me);r.next(Xe);const ze=hm($,this.rootComponentType).snapshot;return(0,Be.of)(Object.assign(Object.assign({},_),{targetSnapshot:ze,urlAfterRedirects:$,extras:Object.assign(Object.assign({},Ce),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),Nr.E}),Zc(_=>{const{targetSnapshot:w,id:T,extractedUrl:N,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:$}}=_;return this.hooks.beforePreactivation(w,{navigationId:T,appliedUrlTree:N,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!$})}),(0,bn.b)(_=>{const w=new je(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,tt.U)(_=>Object.assign(Object.assign({},_),{guards:Cm(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,In.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:f}}=t;return 0===f.length&&0===c.length?(0,Be.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Zt.D)(n).pipe((0,In.zg)(o=>function(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,Be.of)(!0);const f=c.map(_=>{const w=Rr(_,e,o);let T;if(function(n){return n&&ao(n.canDeactivate)}(w))T=or(w.canDeactivate(n,e,t,r));else{if(!ao(w))throw new Error("Invalid CanDeactivate guard");T=or(w(n,e,t,r))}return T.pipe(Kn())});return(0,Be.of)(f).pipe(Eu())}(o.component,o.route,t,e,r)),Kn(o=>!0!==o,!0))}(f,r,o,n).pipe((0,In.zg)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,r){return(0,Zt.D)(e).pipe(Nc(o=>so(function(n,e){return null!==n&&e&&e(new hl(n)),(0,Be.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new fl(n)),(0,Be.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>Yi(()=>{const _=f.guards.map(w=>{const T=Rr(w,f.node,t);let N;if(function(n){return n&&ao(n.canActivateChild)}(T))N=or(T.canActivateChild(r,n));else{if(!ao(T))throw new Error("Invalid CanActivateChild guard");N=or(T(r,n))}return N.pipe(Kn())});return(0,Be.of)(_).pipe(Eu())}));return(0,Be.of)(c).pipe(Eu())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Be.of)(!0);const o=r.map(c=>Yi(()=>{const f=Rr(c,e,t);let _;if(function(n){return n&&ao(n.canActivate)}(f))_=or(f.canActivate(e,n));else{if(!ao(f))throw new Error("Invalid CanActivate guard");_=or(f(e,n))}return _.pipe(Kn())}));return(0,Be.of)(o).pipe(Eu())}(n,o.route,t))),Kn(o=>!0!==o,!0))}(r,c,n,e):(0,Be.of)(_)),(0,tt.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,bn.b)(_=>{if(Cl(_.guardsResult)){const T=sm(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw T.url=_.guardsResult,T}const w=new Rt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),vn(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),Zc(_=>{if(_.guards.canActivateChecks.length)return(0,Be.of)(_).pipe((0,bn.b)(w=>{const T=new en(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}),Tn(w=>{let T=!1;return(0,Be.of)(w).pipe(function(n,e){return(0,In.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,Be.of)(t);let c=0;return(0,Zt.D)(o).pipe(Nc(f=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,Be.of)({});const c={};return(0,Zt.D)(o).pipe((0,In.zg)(f=>function(n,e,t,r){const o=Rr(n,e,r);return or(o.resolve?o.resolve(e,t):o(e,t))}(n[f],e,t,r).pipe((0,bn.b)(_=>{c[f]=_}))),yh(1),(0,In.zg)(()=>Object.keys(c).length===o.length?(0,Be.of)(c):Nr.E))}(n._resolve,n,e,r).pipe((0,tt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),fm(n,t).resolve),null)))}(f.route,r,n,e)),(0,bn.b)(()=>c++),yh(1),(0,In.zg)(f=>c===o.length?(0,Be.of)(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,bn.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,bn.b)(w=>{const T=new Fn(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}))}),Zc(_=>{const{targetSnapshot:w,id:T,extractedUrl:N,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:$}}=_;return this.hooks.afterPreactivation(w,{navigationId:T,appliedUrlTree:N,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!$})}),(0,tt.U)(_=>{const w=function(n,e,t){const r=Dl(n,e._root,t?t._root:void 0);return new Ch(r,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),(0,bn.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,tt.U)(r=>(new up(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,bn.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new C(n))}(()=>{var _;if(!c&&!f){const w=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,w)):this.cancelNavigationTransition(o,w)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===o.id&&(this.currentNavigation=null)}),oo(_=>{if(f=!0,function(n){return n&&n[pl]}(_)){const w=Cl(_.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const T=new ue(o.id,this.serializeUrl(o.extractedUrl),_.message);r.next(T),w?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Om(o.source)};this.scheduleNavigation(N,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Ee(o.id,this.serializeUrl(o.extractedUrl),_);r.next(w);try{o.resolve(this.errorHandler(_))}catch(T){o.reject(T)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:c,urlTree:f}=r,_={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(_.state=w)}this.scheduleNavigation(f,o,c,_)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Il(t),this.config=t.map(Sl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:f,queryParamsHandling:_,preserveFragment:w}=r,T=o||this.routerState.root,N=w?this.currentUrlTree.fragment:f;let R=null;switch(_){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=c||null}return null!==R&&(R=this.removeEmptyProps(R)),function(n,e,t,r,o){if(0===t.length)return _m(e.root,e.root,e,r,o);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uc(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return Qn(c.outlets,(w,T)=>{_[T]="string"==typeof w?w.split("/"):w}),[...o,{outlets:_}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===f?(c.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?t=!0:".."===_?e++:""!=_&&o.push(_))}),o):[...o,c]},[]);return new Uc(t,e,r)}(t);if(c.toRoot())return _m(e.root,new St([],{}),e,r,o);const f=function(n,e,t){if(n.isAbsolute)return new jc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new jc(c,c===e.root,0)}const r=Bc(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new jc(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),_=f.processChildren?Hc(f.segmentGroup,f.index,c.commands):$c(f.segmentGroup,f.index,c.commands);return _m(f.segmentGroup,_,e,r,o)}(T,this.currentUrlTree,t,R,null!=N?N:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Cl(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},A1):!1===r?Object.assign({},N1):r,Cl(t))return xc(this.currentUrlTree,t,o);const c=this.parseUrl(t);return xc(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Q(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,f){var _,w;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),N=Om(r)&&T&&!Om(T.source),$=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===t.toString();if(N&&$)return Promise.resolve(!0);let ee,me,Ce;f?(ee=f.resolve,me=f.reject,Ce=f.promise):Ce=new Promise((Ct,nt)=>{ee=Ct,me=nt});const Xe=++this.navigationId;let ze;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ze=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):ze=0,this.setTransition({id:Xe,targetPageId:ze,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:ee,reject:me,promise:Ce,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ce.catch(Ct=>Promise.reject(Ct))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===f?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ue(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.DyG),u.LFG(tp),u.LFG(xa),u.LFG(Tt),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Om(n){return"imperative"!==n}let vp=(()=>{class n{constructor(t,r,o,c,f){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=c||lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new Lm(t,_,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xa),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Lm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wl?this.route:e===xa?this.childContexts:this.parent.get(e,t)}}class Dv{}class Tv{preload(e,t){return(0,Be.of)(null)}}let Vm=(()=>{class n{constructor(t,r,o,c,f){this.router=t,this.injector=c,this.preloadingStrategy=f,this.loader=new Oh(r,o,T=>t.triggerEvent(new Wr(T)),T=>t.triggerEvent(new Jn(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(vn(t=>t instanceof Q),Nc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;o.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,Zt.D)(o).pipe((0,ks.J)(),(0,tt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Be.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,In.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gs),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Dv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Jc=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof B?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Q&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ji&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ji(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gs),u.LFG(Xa),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ml=new u.OlP("ROUTER_CONFIGURATION"),R1=new u.OlP("ROUTER_FORROOT_GUARD"),x1=[Tt,{provide:tp,useClass:_l},{provide:gs,useFactory:function(n,e,t,r,o,c,f,_={},w,T){const N=new gs(null,n,e,t,r,o,c,om(f));return w&&(N.urlHandlingStrategy=w),T&&(N.routeReuseStrategy=T),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(_,N),_.enableTracing&&N.events.subscribe(R=>{var V,$;null===(V=console.group)||void 0===V||V.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===($=console.groupEnd)||void 0===$||$.call(console)}),N},deps:[tp,xa,Tt,u.zs3,u.v3s,u.Sil,Yc,Ml,[class{},new u.FiY],[class{},new u.FiY]]},xa,{provide:wl,useFactory:function(n){return n.routerState.root},deps:[gs]},{provide:u.v3s,useClass:u.EAV},Vm,Tv,class{preload(e,t){return t().pipe(oo(()=>(0,Be.of)(null)))}},{provide:Ml,useValue:{enableTracing:!1}}];function Iv(){return new u.PXZ("Router",gs)}let Sv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[x1,Av(t),{provide:R1,useFactory:wI,deps:[[gs,new u.FiY,new u.tp0]]},{provide:Ml,useValue:r||{}},{provide:he,useFactory:k1,deps:[K,[new u.tBr(re),new u.FiY],Ml]},{provide:Jc,useFactory:Cx,deps:[gs,Xa,Ml]},{provide:Dv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Tv},{provide:u.PXZ,multi:!0,useFactory:Iv},[Nv,{provide:u.ip1,multi:!0,useFactory:O1,deps:[Nv]},{provide:P1,useFactory:CI,deps:[Nv]},{provide:u.tb,multi:!0,useExisting:P1}]]}}static forChild(t){return{ngModule:n,providers:[Av(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(R1,8),u.LFG(gs,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Cx(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Jc(n,e,t)}function k1(n,e,t={}){return t.useHash?new Ae(n,e):new we(n,e)}function wI(n){return"guarded"}function Av(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Yc,multi:!0,useValue:n}]}let Nv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yt.xQ}appInitializer(){return this.injector.get(P,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(_=>r=_),c=this.injector.get(gs),f=this.injector.get(Ml);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,Be.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Ml),o=this.injector.get(Vm),c=this.injector.get(Jc),f=this.injector.get(gs),_=this.injector.get(u.z2F);t===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&f.initialNavigation(),o.setUpPreloading(),c.init(),f.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function O1(n){return n.appInitializer.bind(n)}function CI(n){return n.bootstrapListener.bind(n)}const P1=new u.OlP("Router Initializer"),F1=[];let II=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Sv.forRoot(F1)],Sv]}),n})();var SI=F(9105);function Ze(n,e,t,r){return(0,SI.m)(t)&&(r=t,t=void 0),r?Ze(n,e,t).pipe((0,tt.U)(o=>(0,ko.k)(o)?r(...o):r(o))):new Dn.y(o=>{Mv(n,e,function(f){o.next(arguments.length>1?Array.prototype.slice.call(arguments):f)},o,t)})}function Mv(n,e,t,r,o){let c;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const f=n;n.addEventListener(e,t,o),c=()=>f.removeEventListener(e,t,o)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const f=n;n.on(e,t),c=()=>f.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const f=n;n.addListener(e,t),c=()=>f.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let f=0,_=n.length;f<_;f++)Mv(n[f],e,t,r,o)}r.add(c)}var bp=F(3637),V1=F(6561);function Iu(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}class B1{call(e,t){return t.subscribe(new Rv(e))}}class Rv extends hu{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let r=0;r<t&&!this.hasFirst;r++){const c=Cn(this,e[r],void 0,r);this.subscriptions&&this.subscriptions.push(c),this.add(c)}this.observables=null}}notifyNext(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(let o=0;o<this.subscriptions.length;o++)if(o!==r){let c=this.subscriptions[o];c.unsubscribe(),this.remove(c)}this.subscriptions=null}this.destination.next(t)}}var Sx=F(8640);new Dn.y(Sx.Z);var lo=F(377);function Qc(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),(0,Ea.n)(n,void 0).lift(new $m(e))}class $m{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new kv(e,this.resultSelector))}}class kv extends sn.L{constructor(e,t,r=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,ko.k)(e)?t.push(new AI(e)):t.push("function"==typeof e[lo.hZ]?new Ax(e[lo.hZ]()):new U1(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let r=0;r<t;r++){let o=e[r];o.stillUnsubscribed?this.destination.add(o.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,r=this.destination;for(let f=0;f<t;f++){let _=e[f];if("function"==typeof _.hasValue&&!_.hasValue())return}let o=!1;const c=[];for(let f=0;f<t;f++){let _=e[f],w=_.next();if(_.hasCompleted()&&(o=!0),w.done)return void r.complete();c.push(w.value)}this.resultSelector?this._tryresultSelector(c):r.next(c),o&&r.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class Ax{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class AI{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[lo.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class U1 extends Ni.Ds{constructor(e,t,r){super(e),this.parent=t,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[lo.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,Ni.ft)(this.observable,new Ni.IY(this))}}var j1=F(6682);function ar(n){return e=>e.lift(new $1(n))}class $1{constructor(e){this.notifier=e}call(e,t){const r=new H1(e),o=(0,Ni.ft)(this.notifier,new Ni.IY(r));return o&&!r.seenValue?(r.add(o),t.subscribe(r)):r}}class H1 extends Ni.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class Ov{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Nx(e,this.compare,this.keySelector))}}class Nx extends sn.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function G1(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new Mx(n,t))}}class Mx{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Rx(e,this.observables,this.project))}}class Rx extends hu{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let c=0;c<o;c++)this.toRespond.push(c);for(let c=0;c<o;c++)this.add(Cn(this,t[c],void 0,c))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const c=o.indexOf(r);-1!==c&&o.splice(c,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}F(1593),F(8819),F(1555);let ka=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),OE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ka]]}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[OE]}),n})();const lr=["*"],fS=["dialog"];function Fl(n){return null!=n}function sd(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const x0={animation:!0,transitionTimerDelayMs:5};let xr=(()=>{class n{constructor(){this.animation=x0.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const dD=()=>{},{transitionTimerDelayMs:FS}=x0,Up=new Map,_r=(n,e,t,r)=>{let o=r.context||{};const c=Up.get(e);if(c)switch(r.runningTransition){case"continue":return Nr.E;case"stop":n.run(()=>c.transition$.complete()),o=Object.assign(c.context,o),Up.delete(e)}const f=t(e,r.animation,o)||dD;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>f()),(0,Be.of)(void 0).pipe(function(n){return e=>new Dn.y(t=>e.subscribe(f=>n.run(()=>t.next(f)),f=>n.run(()=>t.error(f)),()=>n.run(()=>t.complete())))}(n));const _=new Yt.xQ,w=new Yt.xQ,T=_.pipe(function(...n){return e=>so(e,(0,Be.of)(...n))}(!0));Up.set(e,{transition$:_,complete:()=>{w.next(),w.complete()},context:o});const N=function(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const R=Ze(e,"transitionend").pipe(ar(T),vn(({target:$})=>$===e));(function(...n){if(1===n.length){if(!(0,ko.k)(n[0]))return n[0];n=n[0]}return(0,Ea.n)(n,void 0).lift(new B1)})(function(n=0,e,t){let r=-1;return(0,V1.k)(e)?r=Number(e)<1?1:Number(e):(0,xs.K)(e)&&(t=e),(0,xs.K)(t)||(t=bp.P),new Dn.y(o=>{const c=(0,V1.k)(n)?n:+n-t.now();return t.schedule(Iu,c,{index:0,period:r,subscriber:o})})}(N+FS).pipe(ar(T)),R,w).pipe(ar(T)).subscribe(()=>{Up.delete(e),n.run(()=>{f(),_.next(),_.complete()})})}),_.asObservable()};let fD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),jS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),ho=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),wD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),d_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var xt=(()=>{return(n=xt||(xt={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",xt;var n})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const g_=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function iA(n){const e=Array.from(n.querySelectorAll(g_)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let r,o={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))r=e.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const c=this.offsetParent(e);r=this.offset(e,!1),c!==document.documentElement&&(o=this.offset(c,!1)),o.top+=c.clientTop,o.left+=c.clientLeft}return r.top-=o.top,r.bottom-=o.top,r.left-=o.left,r.right-=o.left,t&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(e,t=!0){const r=e.getBoundingClientRect(),o_top=window.pageYOffset-document.documentElement.clientTop,o_left=window.pageXOffset-document.documentElement.clientLeft;let c={height:r.height||e.offsetHeight,width:r.width||e.offsetWidth,top:r.top+o_top,bottom:r.bottom+o_top,left:r.left+o_left,right:r.right+o_left};return t&&(c.height=Math.round(c.height),c.width=Math.round(c.width),c.top=Math.round(c.top),c.bottom=Math.round(c.bottom),c.left=Math.round(c.left),c.right=Math.round(c.right)),c}positionElements(e,t,r,o){const[c="top",f="center"]=r.split("-"),_=o?this.offset(e,!1):this.position(e,!1),w=this.getAllStyles(t),T=parseFloat(w.marginTop),N=parseFloat(w.marginBottom),R=parseFloat(w.marginLeft),V=parseFloat(w.marginRight);let $=0,ee=0;switch(c){case"top":$=_.top-(t.offsetHeight+T+N);break;case"bottom":$=_.top+_.height;break;case"left":ee=_.left-(t.offsetWidth+R+V);break;case"right":ee=_.left+_.width}switch(f){case"top":$=_.top;break;case"bottom":$=_.top+_.height-t.offsetHeight;break;case"left":ee=_.left;break;case"right":ee=_.left+_.width-t.offsetWidth;break;case"center":"top"===c||"bottom"===c?ee=_.left+_.width/2-t.offsetWidth/2:$=_.top+_.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(ee)}px, ${Math.round($)}px)`;const me=t.getBoundingClientRect(),Ce=document.documentElement,Xe=window.innerHeight||Ce.clientHeight,ze=window.innerWidth||Ce.clientWidth;return me.left>=0&&me.top>=0&&me.right<=ze&&me.bottom<=Xe}},new Date(1882,10,12),new Date(2174,10,25);let Q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn,sS]]}),n})(),X0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),HD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),GD=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(xr))},token:n,providedIn:"root"}),n})();class dd{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}const DA=()=>{};let tb=(()=>{class n{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):DA}_adjustBody(t){const r=this._document.body,o=r.style.paddingRight,c=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${c+t}px`,()=>r.style["padding-right"]=o}_isPresent(t){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(t);const o=t.getBoundingClientRect().width-t.clientWidth;return r.removeChild(t),o}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(oe))},token:n,providedIn:"root"}),n})(),qD=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(qr(1)).subscribe(()=>{_r(this._zone,this._el.nativeElement,(t,r)=>{r&&sd(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return _r(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,r){2&t&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class nb{close(e){}dismiss(e){}}class CA{constructor(e,t,r,o){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=o,this._closed=new Yt.xQ,this._dismissed=new Yt.xQ,this._hidden=new Yt.xQ,e.instance.dismissEvent.subscribe(c=>{this.dismiss(c)}),this.result=new Promise((c,f)=>{this._resolve=c,this._reject=f}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ar(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ar(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(r=>{!1!==r&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Be.of)(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Qc(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var hd=(()=>{return(n=hd||(hd={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",hd;var n})();let WD=(()=>{class n{constructor(t,r,o){this._document=t,this._elRef=r,this._zone=o,this._closed$=new Yt.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new Yt.xQ,this.hidden=new Yt.xQ}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(qr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},f=Qc(_r(this._zone,t,()=>t.classList.remove("show"),r),_r(this._zone,this._dialogEl.nativeElement,()=>{},r));return f.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),f}_show(){const t={animation:this.animation,runningTransition:"continue"};Qc(_r(this._zone,this._elRef.nativeElement,(c,f)=>{f&&sd(c),c.classList.add("show")},t),_r(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ze(t,"keydown").pipe(ar(this._closed$),vn(o=>o.which===xt.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(hd.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ze(this._dialogEl.nativeElement,"mousedown").pipe(ar(this._closed$),(0,bn.b)(()=>r=!1),Tn(()=>Ze(t,"mouseup").pipe(ar(this._closed$),qr(1))),vn(({target:o})=>t===o)).subscribe(()=>{r=!0}),Ze(t,"click").pipe(ar(this._closed$)).subscribe(({target:o})=>{t===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(hd.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),o=iA(t)[0];(r||o||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let o;o=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&_r(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(oe),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&u.Gf(fS,7),2&t){let o;u.iGM(o=u.CRH())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:lr,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.TgZ(2,"div",2),u.Hsn(3),u.qZA(),u.qZA()),2&t&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),zD=(()=>{class n{constructor(t,r,o,c,f,_){this._applicationRef=t,this._injector=r,this._document=o,this._scrollBar=c,this._rendererFactory=f,this._ngZone=_,this._activeWindowCmptHasChanged=new Yt.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const w=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const o=Ze(e,"focusin").pipe(ar(t),(0,tt.U)(c=>c.target));Ze(e,"keydown").pipe(ar(t),vn(c=>c.which===xt.Tab),G1(o)).subscribe(([c,f])=>{const[_,w]=iA(e);(f===_||f===e)&&c.shiftKey&&(w.focus(),c.preventDefault()),f===w&&!c.shiftKey&&(_.focus(),c.preventDefault())}),r&&Ze(e,"click").pipe(ar(t),G1(o),(0,tt.U)(c=>c[1])).subscribe(c=>c.focus())})})(this._ngZone,w.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(w.location.nativeElement)}})}open(t,r,o,c){const f=c.container instanceof HTMLElement?c.container:Fl(c.container)?this._document.querySelector(c.container):this._document.body,_=this._rendererFactory.createRenderer(null,null),w=this._scrollBar.compensate(),T=()=>{this._modalRefs.length||(_.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!f)throw new Error(`The specified modal container "${c.container||"body"}" was not found in the DOM.`);const N=new nb,R=this._getContentRef(t,c.injector||r,o,N,c);let V=!1!==c.backdrop?this._attachBackdrop(t,f):void 0,$=this._attachWindowComponent(t,f,R),ee=new CA($,R,V,c.beforeDismiss);return this._registerModalRef(ee),this._registerWindowCmpt($),ee.result.then(w,w),ee.result.then(T,T),N.close=me=>{ee.close(me)},N.dismiss=me=>{ee.dismiss(me)},this._applyWindowOptions($.instance,c),1===this._modalRefs.length&&_.addClass(this._document.body,"modal-open"),V&&V.instance&&(this._applyBackdropOptions(V.instance,c),V.changeDetectorRef.detectChanges()),$.changeDetectorRef.detectChanges(),ee}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let c=t.resolveComponentFactory(qD).create(this._injector);return this._applicationRef.attachView(c.hostView),r.appendChild(c.location.nativeElement),c}_attachWindowComponent(t,r,o){let f=t.resolveComponentFactory(WD).create(this._injector,o.nodes);return this._applicationRef.attachView(f.hostView),r.appendChild(f.location.nativeElement),f}_applyWindowOptions(t,r){this._windowAttributes.forEach(o=>{Fl(r[o])&&(t[o]=r[o])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(o=>{Fl(r[o])&&(t[o]=r[o])})}_getContentRef(t,r,o,c,f){return o?o instanceof u.Rgc?this._createFromTemplateRef(o,c):function(n){return"string"==typeof n}(o)?this._createFromString(o):this._createFromComponent(t,r,o,c,f):new dd([])}_createFromTemplateRef(t,r){const c=t.createEmbeddedView({$implicit:r,close(f){r.close(f)},dismiss(f){r.dismiss(f)}});return this._applicationRef.attachView(c),new dd([c.rootNodes],c)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new dd([[r]])}_createFromComponent(t,r,o,c,f){const _=t.resolveComponentFactory(o),w=u.zs3.create({providers:[{provide:nb,useValue:c}],parent:r}),T=_.create(w),N=T.location.nativeElement;return f.scrollable&&N.classList.add("component-host-scrollable"),this._applicationRef.attachView(T.hostView),new dd([[N]],T.hostView,T)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==t&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const o=this._modalRefs.indexOf(t);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(oe),u.LFG(tb),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(u.z2F),u.LFG(u.gxx),u.LFG(oe),u.LFG(tb),u.LFG(u.FYo),u.LFG(u.R0b))},token:n,providedIn:"root"}),n})(),TA=(()=>{class n{constructor(t,r,o,c){this._moduleCFR=t,this._injector=r,this._modalStack=o,this._config=c}open(t,r={}){const o=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(zD),u.LFG(GD))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(u._Vd),u.LFG(u.gxx),u.LFG(zD),u.LFG(GD))},token:n,providedIn:"root"}),n})(),S_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TA]}),n})(),QD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),rC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),iC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),cb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),sC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),oC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})(),aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let lC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hn]]}),n})();const Gk=[fD,jS,ho,wD,d_,Q0,HD,S_,QD,ab,rC,iC,cb,sC,oC,aC,lC];let JA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Gk,fD,jS,ho,wD,d_,Q0,HD,S_,QD,ab,rC,iC,cb,sC,oC,aC,lC]}),n})(),F_=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-navbar"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"],["href","#","tabindex","-1","aria-disabled","true",1,"nav-link","disabled"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"]],template:function(t,r){1&t&&(u.TgZ(0,"nav",0),u.TgZ(1,"div",1),u.TgZ(2,"a",2),u._uU(3,"Navbar"),u.qZA(),u.TgZ(4,"button",3),u._UZ(5,"span",4),u.qZA(),u.TgZ(6,"div",5),u.TgZ(7,"ul",6),u.TgZ(8,"li",7),u.TgZ(9,"a",8),u._uU(10,"Home"),u.qZA(),u.qZA(),u.TgZ(11,"li",7),u.TgZ(12,"a",9),u._uU(13,"Link"),u.qZA(),u.qZA(),u.TgZ(14,"li",10),u.TgZ(15,"a",11),u._uU(16," Dropdown "),u.qZA(),u.TgZ(17,"ul",12),u.TgZ(18,"li"),u.TgZ(19,"a",13),u._uU(20,"Action"),u.qZA(),u.qZA(),u.TgZ(21,"li"),u.TgZ(22,"a",13),u._uU(23,"Another action"),u.qZA(),u.qZA(),u.TgZ(24,"li"),u._UZ(25,"hr",14),u.qZA(),u.TgZ(26,"li"),u.TgZ(27,"a",13),u._uU(28,"Something else here"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"li",7),u.TgZ(30,"a",15),u._uU(31,"Disabled"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"form",16),u._UZ(33,"input",17),u.TgZ(34,"button",18),u._uU(35,"Search"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[X0],styles:[""]}),n})(),QA=(()=>{class n{constructor(){this.title="Cargonaut"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"app-navbar")},directives:[F_],styles:[""]}),n})();var ns=F(8939),An=F(9396);function L_(){return n=>n.lift(new pb)}class pb{call(e,t){return t.subscribe(new cC(e))}}class cC extends sn.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}F(941);var Ue,dC=F(3394),pe=F(8239),fo=F(8026),af=F(3910),Ru=F(5422),ct=F(3854),V_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bl={},tn=tn||{},at=V_||self;function xu(){}function gd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function B_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ms="closure_uid_"+(1e9*Math.random()>>>0),gb=0;function md(n,e,t){return n.call.apply(n.bind,arguments)}function qk(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?md:qk).apply(null,arguments)}function Xp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var f=Array(arguments.length-2),_=2;_<arguments.length;_++)f[_-2]=arguments[_];return e.prototype[o].apply(r,f)}}function Ul(){this.s=this.s,this.o=this.o}var po={};Ul.prototype.s=!1,Ul.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,ms)&&n[ms]||(n[ms]=++gb)}(this);delete po[n]}},Ul.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $n=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},go=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function fC(n){return Array.prototype.concat.apply([],arguments)}function U_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uf(n){return/^[\s\xa0]*$/.test(n)}var cr,_d=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return-1!=n.indexOf(e)}function mb(n,e){return n<e?-1:n>e?1:0}e:{var pC=at.navigator;if(pC){var _b=pC.userAgent;if(_b){cr=_b;break e}}cr=""}function eg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lf(n){const e={};for(const t in n)e[t]=n[t];return e}var j_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yb(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<j_.length;c++)t=j_[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jl(n){return jl[" "](n),n}jl[" "]=xu;var cf,n,$_=Or(cr,"Opera"),yd=Or(cr,"Trident")||Or(cr,"MSIE"),vb=Or(cr,"Edge"),H_=vb||yd,tg=Or(cr,"Gecko")&&!(Or(cr.toLowerCase(),"webkit")&&!Or(cr,"Edge"))&&!(Or(cr,"Trident")||Or(cr,"MSIE"))&&!Or(cr,"Edge"),nN=Or(cr.toLowerCase(),"webkit")&&!Or(cr,"Edge");function G_(){var n=at.document;return n?n.documentMode:void 0}e:{var gC="",mC=(n=cr,tg?/rv:([^\);]+)(\)|;)/.exec(n):vb?/Edge\/([\d\.]+)/.exec(n):yd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nN?/WebKit\/(\S+)/.exec(n):$_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(mC&&(gC=mC?mC[1]:""),yd){var mt=G_();if(null!=mt&&mt>parseFloat(gC)){cf=String(mt);break e}}cf=gC}var Wk={};function ng(){return e=Wk,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=_d(String(cf)).split("."),t=_d("9").split("."),r=Math.max(e.length,t.length);for(let f=0;0==n&&f<r;f++){var o=e[f]||"",c=t[f]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=mb(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||mb(0==o[2].length,0==c[2].length)||mb(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n}();var e}var rN=at.document&&yd&&(G_()||parseInt(cf,10))||void 0,zk=function(){if(!at.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{at.addEventListener("test",xu,e),at.removeEventListener("test",xu,e)}catch(t){}return n}();function rs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function rg(n,e){if(rs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tg){e:{try{jl(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ki[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rg.Z.h.call(this)}}rs.prototype.h=function(){this.defaultPrevented=!0},xi(rg,rs);var ki={2:"touch",3:"pen",4:"mouse"};rg.prototype.h=function(){rg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ig="closure_listenable_"+(1e6*Math.random()|0),iN=0;function wb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++iN,this.ca=this.fa=!1}function q_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function W_(n){this.src=n,this.g={},this.h=0}function Eb(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=$n(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(q_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Db(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}W_.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var f=Db(n,e,r,o);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new wb(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var Cb="closure_lm_"+(1e6*Math.random()|0),Tb={};function z_(n,e,t,r,o){if(r&&r.once)return Ib(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)z_(n,e[c],t,r,o);return null}return t=Mb(t),n&&n[ig]?n.N(e,t,B_(r)?!!r.capture:!!r,o):yC(n,e,t,!1,r,o)}function yC(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var f=B_(o)?!!o.capture:!!o,_=Ab(n);if(_||(n[Cb]=_=new W_(n)),(t=_.add(e,t,r,f,c)).proxy)return t;if(r=function(){var e=aN;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zk||(o=f),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(oN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ib(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ib(n,e[c],t,r,o);return null}return t=Mb(t),n&&n[ig]?n.O(e,t,B_(r)?!!r.capture:!!r,o):yC(n,e,t,!0,r,o)}function Z_(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)Z_(n,e[c],t,r,o);else r=B_(r)?!!r.capture:!!r,t=Mb(t),n&&n[ig]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Db(c=n.g[e],t,r,o))&&(q_(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Ab(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Db(e,t,r,o)),(t=-1<n?e[n]:null)&&Sb(t))}function Sb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ig])Eb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ab(e))?(Eb(t,n),0==t.h&&(t.src=null,e[Cb]=null)):q_(n)}}}function oN(n){return n in Tb?Tb[n]:Tb[n]="on"+n}function aN(n,e){if(n.ca)n=!0;else{e=new rg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Sb(n),n=t.call(r,e)}return n}function Ab(n){return(n=n[Cb])instanceof W_?n:null}var Nb="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mb(n){return"function"==typeof n?n:(n[Nb]||(n[Nb]=function(e){return n.handleEvent(e)}),n[Nb])}function Kr(){Ul.call(this),this.i=new W_(this),this.P=this,this.I=null}function mi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new rs(e,n);else if(e instanceof rs)e.target=e.target||n;else{var o=e;yb(e=new rs(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];o=$l(f,r,!0,e)&&o}if(o=$l(f=e.g=n,r,!0,e)&&o,o=$l(f,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=$l(f=e.g=t[c],r,!1,e)&&o}function $l(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.ca&&f.capture==t){var _=f.listener,w=f.ia||f.src;f.fa&&Eb(n.i,f),o=!1!==_.call(w,r)&&o}}return o&&!r.defaultPrevented}xi(Kr,Ul),Kr.prototype[ig]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){Z_(this,n,e,t,r)},Kr.prototype.M=function(){if(Kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)q_(t[r]);delete n.g[e],n.h--}}this.I=null},Kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rb=at.JSON.stringify;function uN(){var n=wC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kb,df=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Zk,n=>n.reset());class Zk{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bC(n){at.setTimeout(()=>{throw n},0)}function xb(n,e){kb||function(){var n=at.Promise.resolve(void 0);kb=function(){n.then(EC)}}(),Ob||(kb(),Ob=!0),wC.add(n,e)}var Ob=!1,wC=new class{constructor(){this.h=this.g=null}add(e,t){const r=df.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function EC(){for(var n;n=uN();){try{n.h.call(n.g)}catch(t){bC(t)}var e=df;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ob=!1}function Y_(n,e){Kr.call(this),this.h=n||1,this.g=e||at,this.j=Yr(this.kb,this),this.l=Date.now()}function Pb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function DC(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:at.setTimeout(n,e||0)}function cN(n){n.g=DC(()=>{n.g=null,n.i&&(n.i=!1,cN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xi(Y_,Kr),(Ue=Y_.prototype).da=!1,Ue.S=null,Ue.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mi(this,"tick"),this.da&&(Pb(this),this.start()))}},Ue.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ue.M=function(){Y_.Z.M.call(this),Pb(this),delete this.g};class Yk extends Ul{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cN(this)}M(){super.M(),this.g&&(at.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vd(n){Ul.call(this),this.h=n,this.g={}}xi(vd,Ul);var CC=[];function TC(n,e,t,r){Array.isArray(t)||(t&&(CC[0]=t.toString()),t=CC);for(var o=0;o<t.length;o++){var c=z_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function IC(n){eg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Sb(e)},n),n.g={}}function K_(){this.g=!0}function bd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<o.length;f++)o[f]=""}}}return Rb(t)}catch(_){return e}}(n,t)+(r?" "+r:"")})}vd.prototype.M=function(){vd.Z.M.call(this),IC(this)},vd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},K_.prototype.Aa=function(){this.g=!1},K_.prototype.info=function(){};var mo={},_i=null;function sg(){return _i=_i||new Kr}function _o(n){rs.call(this,mo.Ma,n)}function wd(n){const e=sg();mi(e,new _o(e,n))}function SC(n,e){rs.call(this,mo.STAT_EVENT,n),this.stat=e}function Oi(n){const e=sg();mi(e,new SC(e,n))}function Lb(n,e){rs.call(this,mo.Na,n),this.size=e}function hf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return at.setTimeout(function(){n()},e)}mo.Ma="serverreachability",xi(_o,rs),mo.STAT_EVENT="statevent",xi(SC,rs),mo.Na="timingevent",xi(Lb,rs);var J_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},AC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Vb(){}function NC(){}Vb.prototype.h=null;var Hl,Q_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ub(){rs.call(this,"d")}function jb(){rs.call(this,"c")}function $b(){}function ff(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new vd(this),this.P=Kk,this.W=new Y_(n=H_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new MC}function MC(){this.i=null,this.g="",this.h=!1}xi(Ub,rs),xi(jb,rs),xi($b,Vb),$b.prototype.g=function(){return new XMLHttpRequest},$b.prototype.i=function(){return{}},Hl=new $b;var Kk=45e3,X_={},ey={};function og(n,e,t){n.K=1,n.v=ql(Fa(e)),n.s=t,n.U=!0,RC(n,null)}function RC(n,e){n.F=Date.now(),ag(n),n.A=Fa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),VC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new MC,n.g=JC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Yk(Yr(n.Ia,n,n.g),n.O)),TC(n.V,n.g,"readystatechange",n.gb),e=n.H?lf(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),wd(1),function(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var f="",_=c.split("&"),w=0;w<_.length;w++){var T=_[w].split("=");if(1<T.length){var N=T[0];T=T[1];var R=N.split("_");f=2<=R.length&&"type"==R[1]?f+(N+"=")+T+"&":f+(N+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Hb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Gb(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=xC(n,t),o==ey){4==e&&(n.o=4,Oi(14),r=!1),bd(n.j,n.m,null,"[Incomplete Response]");break}if(o==X_){n.o=4,Oi(15),bd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bd(n.j,n.m,o,null),qb(n,o)}Hb(n)&&o!=ey&&o!=X_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yy(e),e.L=!0,Oi(11))):(bd(n.j,n.m,t,"[Invalid Chunked Response]"),Ed(n),ug(n))}function xC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ey:(t=Number(e.substring(t,r)),isNaN(t)?X_:(r+=1)+t>e.length?ey:(e=e.substr(r,t),n.C=r+t,e))}function ag(n){n.Y=Date.now()+n.P,kC(n,n.P)}function kC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hf(Yr(n.eb,n),e)}function ty(n){n.B&&(at.clearTimeout(n.B),n.B=null)}function ug(n){0==n.l.G||n.I||hw(n.l,n)}function Ed(n){ty(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Pb(n.W),IC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function qb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||cy(t.i,n)))if(t.I=n.N,!n.J&&cy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(T){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=hf(Yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;mg(t),my(t)}dw(t),Oi(18)}if(1>=Jb(t.i)&&t.ka){try{t.ka()}catch(T){}t.ka=void 0}}else Wl(t,11)}else if((n.J||t.g==n)&&mg(t),!uf(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let T=o[e];if(t.U=T[0],T=T[1],2==t.G)if("c"==T[0]){t.J=T[1],t.la=T[2];const N=T[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const R=T[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const V=T[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const ee=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var c=r.i;!c.g&&(Or(ee,"spdy")||Or(ee,"quic")||Or(ee,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Qb(c,c.h),c.h=null))}if(r.D){const me=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;me&&(r.sa=me,dn(r.F,r.D,me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((r=t).oa=KC(r,r.H?r.la:null,r.W),f.J){Xb(r.i,f);var _=f,w=r.K;w&&_.setTimeout(w),_.B&&(ty(_),ag(_)),r.g=f}else zC(r);0<t.l.length&&gg(t)}else"stop"!=T[0]&&"close"!=T[0]||Wl(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?Wl(t,7):pg(t):"noop"!=T[0]&&t.j&&t.j.wa(T),t.A=0)}wd(4)}catch(T){}}function ny(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gd(n)||"string"==typeof n)go(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(gd(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(gd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function Dd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Dd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ry(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Gl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Gl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Gl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ue=ff.prototype).setTimeout=function(n){this.P=n},Ue.gb=function(n){n=n.target;const e=this.L;e&&3==Ou(n)?e.l():this.Ia(n)},Ue.Ia=function(n){try{if(n==this.g)e:{const N=Ou(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>N)&&(3!=N||H_||this.g&&(this.h.h||this.g.ga()||lw(this.g)))){this.I||4!=N||7==e||wd(8==e||0>=R?3:2),ty(this);var t=this.g.ba();this.N=t;t:if(Hb(this)){var r=lw(this.g);n="";var o=r.length,c=4==Ou(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ed(this),ug(this);var f="";break t}this.h.i=new at.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,c,f){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,w=this.g;if((_=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uf(_)){var T=_;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Oi(12),Ed(this),ug(this);break e}bd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qb(this,t)}this.U?(Gb(this,N,f),H_&&this.i&&3==N&&(TC(this.V,this.W,"tick",this.fb),this.W.start())):(bd(this.j,this.m,f,null),qb(this,f)),4==N&&Ed(this),this.i&&!this.I&&(4==N?hw(this.l,this):(this.i=!1,ag(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),Ed(this),ug(this)}}}catch(N){}},Ue.fb=function(){if(this.g){var n=Ou(this.g),e=this.g.ga();this.C<e.length&&(ty(this),Gb(this,n,e),this.i&&4!=n&&ag(this))}},Ue.cancel=function(){this.I=!0,Ed(this)},Ue.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wd(3),Oi(17)),Ed(this),this.o=2,ug(this)):kC(this,this.Y-n)},(Ue=Dd.prototype).R=function(){ry(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ue.T=function(){return ry(this),this.g.concat()},Ue.get=function(n,e){return Gl(this.h,n)?this.h[n]:e},Ue.set=function(n,e){Gl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ue.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var Wb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Cd){this.g=void 0!==e?e:n.g,iy(this,n.j),this.s=n.s,sy(this,n.i),oy(this,n.m),this.l=n.l,e=n.h;var t=new pf;t.i=e.i,e.g&&(t.g=new Dd(e.g),t.h=e.h),PC(this,t),this.o=n.o}else n&&(t=String(n).match(Wb))?(this.g=!!e,iy(this,t[1]||"",!0),this.s=_s(t[2]||""),sy(this,t[3]||"",!0),oy(this,t[4]),this.l=_s(t[5]||"",!0),PC(this,t[6]||"",!0),this.o=_s(t[7]||"")):(this.g=!!e,this.h=new pf(null,this.g))}function Fa(n){return new Cd(n)}function iy(n,e,t){n.j=t?_s(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function sy(n,e,t){n.i=t?_s(e,!0):e}function oy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function PC(n,e,t){e instanceof pf?(n.h=e,function(n,e){e&&!n.j&&(La(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(uy(this,r),VC(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=cg(e,Zb)),n.h=new pf(e,n.g))}function dn(n,e,t){n.h.set(e,t)}function ql(n){return dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _s(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function cg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ay),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ay(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(cg(e,FC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(cg(e,FC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(cg(t,"/"==t.charAt(0)?Jk:gN,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",cg(t,Yb)),n.join("")};var FC=/[#\/\?@]/g,gN=/[#\?:]/g,Jk=/[#\?]/g,Zb=/[#\?@]/g,Yb=/#/g;function pf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function La(n){n.g||(n.g=new Dd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function uy(n,e){La(n),e=gf(n,e),Gl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Gl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ry(n)))}function LC(n,e){return La(n),e=gf(n,e),Gl(n.g.h,e)}function VC(n,e,t){uy(n,e),0<t.length&&(n.i=null,n.g.set(gf(n,e),U_(t)),n.h+=t.length)}function gf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ly(n){this.l=n||UC,n=at.PerformanceNavigationTiming?0<(n=at.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(at.g&&at.g.Ea&&at.g.Ea()&&at.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ue=pf.prototype).add=function(n,e){La(this),this.i=null,n=gf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ue.forEach=function(n,e){La(this),this.g.forEach(function(t,r){go(t,function(o){n.call(e,o,r,this)},this)},this)},Ue.T=function(){La(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},Ue.R=function(n){La(this);var e=[];if("string"==typeof n)LC(this,n)&&(e=fC(e,this.g.get(gf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fC(e,n[t])}return e},Ue.set=function(n,e){return La(this),this.i=null,LC(this,n=gf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ue.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var f=o;""!==r[c]&&(f+="="+encodeURIComponent(String(r[c]))),n.push(f)}}return this.i=n.join("&")};var UC=10;function Kb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Jb(n){return n.h?1:n.g?n.g.size:0}function cy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Qb(n,e){n.g?n.g.add(e):n.h=e}function Xb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ew(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return U_(n.i)}function tw(){}function jC(){this.g=new tw}function $C(n,e,t){const r=t||"";try{ny(n,function(o,c){let f=o;B_(o)&&(f=Rb(o)),e.push(r+c+"="+encodeURIComponent(f))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Jr(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function Va(n){this.l=n.$b||null,this.j=n.ib||!1}function dy(n,e){Kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=nw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ly.prototype.cancel=function(){if(this.i=ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tw.prototype.stringify=function(n){return at.JSON.stringify(n,void 0)},tw.prototype.parse=function(n){return at.JSON.parse(n,void 0)},xi(Va,Vb),Va.prototype.g=function(){return new dy(this.l,this.j)},Va.prototype.i=function(n){return function(){return n}}({}),xi(dy,Kr);var nw=0;function _N(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ku(n){n.readyState=4,n.l=null,n.j=null,n.A=null,dg(n)}function dg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ue=dy.prototype).open=function(n,e){if(this.readyState!=nw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,dg(this)},Ue.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||at).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ku(this)),this.readyState=nw},Ue.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dg(this)),this.g&&(this.readyState=3,dg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==at.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_N(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ue.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ku(this):dg(this),3==this.readyState&&_N(this)}},Ue.Ua=function(n){this.g&&(this.response=this.responseText=n,ku(this))},Ue.Ta=function(n){this.g&&(this.response=n,ku(this))},Ue.ha=function(){this.g&&ku(this)},Ue.setRequestHeader=function(n,e){this.v.append(n,e)},Ue.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ue.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rw=at.JSON.parse;function yr(n){Kr.call(this),this.headers=new Dd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iw,this.K=this.L=!1}xi(yr,Kr);var iw="",yN=/^https?$/i,vN=["POST","PUT"];function HC(n){return"content-type"==n.toLowerCase()}function ow(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hg(n),aw(n)}function hg(n){n.D||(n.D=!0,mi(n,"complete"),mi(n,"error"))}function hy(n){if(n.h&&void 0!==tn&&(!n.C[1]||4!=Ou(n)||2!=n.ba()))if(n.v&&4==Ou(n))DC(n.Fa,0,n);else if(mi(n,"readystatechange"),4==Ou(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var o=String(n.H).match(Wb)[1]||null;if(!o&&at.self&&at.self.location){var c=at.self.location.protocol;o=c.substr(0,c.length-1)}r=!yN.test(o?o.toLowerCase():"")}t=r}if(t)mi(n,"complete"),mi(n,"success");else{n.m=6;try{var f=2<Ou(n)?n.g.statusText:""}catch(w){f=""}n.j=f+" ["+n.ba()+"]",hg(n)}}finally{aw(n)}}}function aw(n,e){if(n.g){uw(n);const t=n.g,r=n.C[0]?xu:null;n.g=null,n.C=null,e||mi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function uw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(at.clearTimeout(n.A),n.A=null)}function Ou(n){return n.g?n.g.readyState:0}function lw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case iw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function py(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return eg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dn(n,e,t))}function fg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function gy(n){this.za=0,this.l=[],this.h=new K_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fg("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fg("baseRetryDelayMs",5e3,n),this.$a=fg("retryDelaySeedMs",1e4,n),this.Ya=fg("forwardChannelMaxRetries",2,n),this.ra=fg("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ly(n&&n.concurrentRequestLimit),this.Ca=new jC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function pg(n){if(GC(n),3==n.G){var e=n.V++,t=Fa(n.F);dn(t,"SID",n.J),dn(t,"RID",e),dn(t,"TYPE","terminate"),mf(n,t),(e=new ff(n,n.h,e,void 0)).K=2,e.v=ql(Fa(t)),t=!1,at.navigator&&at.navigator.sendBeacon&&(t=at.navigator.sendBeacon(e.v.toString(),"")),!t&&at.Image&&((new Image).src=e.v,t=!0),t||(e.g=JC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ag(e)}YC(n)}function my(n){n.g&&(yy(n),n.g.cancel(),n.g=null)}function GC(n){my(n),n.u&&(at.clearTimeout(n.u),n.u=null),mg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&at.clearTimeout(n.m),n.m=null)}function _y(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&gg(n)}function gg(n){Kb(n.i)||n.m||(n.m=!0,xb(n.Ha,n),n.C=0)}function WC(n,e){var t;t=e?e.m:n.V++;const r=Fa(n.F);dn(r,"SID",n.J),dn(r,"RID",t),dn(r,"AID",n.U),mf(n,r),n.o&&n.s&&py(r,n.o,n.s),t=new ff(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=cw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Qb(n.i,t),og(t,r,e)}function mf(n,e){n.j&&ny({},function(t,r){dn(e,r,t)})}function cw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Yr(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=o[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let _=!0;for(let w=0;w<t;w++){let T=o[w].h;const N=o[w].g;if(T-=c,0>T)c=Math.max(0,o[w].h-100),_=!1;else try{$C(N,f,"req"+T+"_")}catch(R){r&&r(N)}}if(_){r=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function zC(n){n.g||n.u||(n.Y=1,xb(n.Ga,n),n.A=0)}function dw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hf(Yr(n.Ga,n),fw(n,n.A)),n.A++,0))}function yy(n){null!=n.B&&(at.clearTimeout(n.B),n.B=null)}function ZC(n){n.g=new ff(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Fa(n.oa);dn(e,"RID","rpc"),dn(e,"SID",n.J),dn(e,"CI",n.N?"0":"1"),dn(e,"AID",n.U),mf(n,e),dn(e,"TYPE","xmlhttp"),n.o&&n.s&&py(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ql(Fa(e)),t.s=null,t.U=!0,RC(t,n)}function mg(n){null!=n.v&&(at.clearTimeout(n.v),n.v=null)}function hw(n,e){var t=null;if(n.g==e){mg(n),yy(n),n.g=null;var r=2}else{if(!cy(n.i,e))return;t=e.D,Xb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;mi(r=sg(),new Lb(r,t,e,o)),gg(n)}else zC(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(Jb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hf(Yr(n.Ha,n,e),fw(n,n.C)),n.C++,0)))}(n,e)||2==r&&dw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Wl(n,5);break;case 4:Wl(n,10);break;case 3:Wl(n,6);break;default:Wl(n,2)}}function fw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Yr(n.jb,n);t||(t=new Cd("//www.google.com/images/cleardot.gif"),at.location&&"http"==at.location.protocol||iy(t,"https"),ql(t)),function(n,e){const t=new K_;if(at.Image){const r=new Image;r.onload=Xp(Jr,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xp(Jr,t,r,"TestLoadImage: error",!1,e),r.onabort=Xp(Jr,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xp(Jr,t,r,"TestLoadImage: timeout",!1,e),at.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.j&&n.j.va(e),YC(n),GC(n)}function YC(n){n.G=0,n.I=-1,n.j&&((0!=ew(n.i).length||0!=n.l.length)&&(n.i.i.length=0,U_(n.l),n.l.length=0),n.j.ua())}function KC(n,e,t){let r=function(n){return n instanceof Cd?Fa(n):new Cd(n,void 0)}(t);if(""!=r.i)e&&sy(r,e+"."+r.i),oy(r,r.m);else{const o=at.location;r=function(n,e,t,r){var o=new Cd(null,void 0);return n&&iy(o,n),e&&sy(o,e),t&&oy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&eg(n.aa,function(o,c){dn(r,c,o)}),t=n.sa,(e=n.D)&&t&&dn(r,e,t),dn(r,"VER",n.ma),mf(n,r),r}function JC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ba&&!n.qa?new Va({ib:!0}):n.qa)).L=n.H,e}function pw(){}function gw(){if(yd&&!(10<=Number(rN)))throw Error("Environmental error: no available transport.")}function yo(n,e){Kr.call(this),this.g=new gy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!uf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!uf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _g(this)}function bN(n){Ub.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wN(){jb.call(this),this.status=1}function _g(n){this.g=n}(Ue=yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hl.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Hl),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void ow(this,c)}n=t||"";const o=new Dd(this.headers);r&&ny(r,function(c,f){o.set(f,c)}),r=function(n){e:{var e=HC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=at.FormData&&n instanceof at.FormData,!(0<=$n(vN,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,f){this.g.setRequestHeader(f,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uw(this),0<this.B&&((this.K=function(n){return yd&&ng()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=DC(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){ow(this,c)}},Ue.pa=function(){void 0!==tn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mi(this,"timeout"),this.abort(8))},Ue.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mi(this,"complete"),mi(this,"abort"),aw(this))},Ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),aw(this,!0)),yr.Z.M.call(this)},Ue.Fa=function(){this.s||(this.F||this.v||this.l?hy(this):this.cb())},Ue.cb=function(){hy(this)},Ue.ba=function(){try{return 2<Ou(this)?this.g.status:-1}catch(n){return-1}},Ue.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ue.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rw(e)}},Ue.Da=function(){return this.m},Ue.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ue=gy.prototype).ma=8,Ue.G=1,Ue.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ue.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new ff(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=lf(c),yb(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cw(this,o,e),dn(t=Fa(this.F),"RID",n),dn(t,"CVER",22),this.D&&dn(t,"X-HTTP-Session-Id",this.D),mf(this,t),this.o&&c&&py(t,this.o,c),Qb(this.i,o),this.Ra&&dn(t,"TYPE","init"),this.ja?(dn(t,"$req",e),dn(t,"SID","null"),o.$=!0,og(o,t,null)):og(o,t,e),this.G=2}}else 3==this.G&&(n?WC(this,n):0==this.l.length||Kb(this.i)||WC(this))},Ue.Ga=function(){if(this.u=null,ZC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hf(Yr(this.bb,this),n)}},Ue.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oi(10),my(this),ZC(this))},Ue.ab=function(){null!=this.v&&(this.v=null,my(this),dw(this),Oi(19))},Ue.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Oi(2)):(this.h.info("Failed to ping google.com"),Oi(1))},(Ue=pw.prototype).xa=function(){},Ue.wa=function(){},Ue.va=function(){},Ue.ua=function(){},Ue.Oa=function(){},gw.prototype.g=function(n,e){return new yo(n,e)},xi(yo,Kr),yo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xb(Yr(n.hb,n,e))),Oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=KC(n,null,n.W),gg(n)},yo.prototype.close=function(){pg(this.g)},yo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_y(this.g,e)}else this.v?((e={}).__data__=Rb(n),_y(this.g,e)):_y(this.g,n)},yo.prototype.M=function(){this.g.j=null,delete this.j,pg(this.g),delete this.g,yo.Z.M.call(this)},xi(bN,Ub),xi(wN,jb),xi(_g,pw),_g.prototype.xa=function(){mi(this.g,"a")},_g.prototype.wa=function(n){mi(this.g,new bN(n))},_g.prototype.va=function(n){mi(this.g,new wN(n))},_g.prototype.ua=function(){mi(this.g,"b")},gw.prototype.createWebChannel=gw.prototype.g,yo.prototype.send=yo.prototype.u,yo.prototype.open=yo.prototype.m,yo.prototype.close=yo.prototype.close,J_.NO_ERROR=0,J_.TIMEOUT=8,J_.HTTP_ERROR=6,AC.COMPLETE="complete",NC.EventType=Q_,Q_.OPEN="a",Q_.CLOSE="b",Q_.ERROR="c",Q_.MESSAGE="d",Kr.prototype.listen=Kr.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.La,yr.prototype.getLastErrorCode=yr.prototype.Da,yr.prototype.getStatus=yr.prototype.ba,yr.prototype.getResponseJson=yr.prototype.Qa,yr.prototype.getResponseText=yr.prototype.ga,yr.prototype.send=yr.prototype.ea;var Xk=Bl.createWebChannelTransport=function(){return new gw},eO=Bl.getStatEventTarget=function(){return sg()},QC=Bl.ErrorCode=J_,tO=Bl.EventType=AC,nO=Bl.Event=mo,EN=Bl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rO=Bl.FetchXmlHttpFactory=Va,mw=Bl.WebChannel=NC,iO=Bl.XhrIo=yr;const DN="@firebase/firestore";class Pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let yg="9.6.0";const zl=new Ru.Yd("@firebase/firestore");function _w(){return zl.logLevel}function ke(n,...e){if(zl.logLevel<=Ru.in.DEBUG){const t=e.map(yw);zl.debug(`Firestore (${yg}): ${n}`,...t)}}function Pr(n,...e){if(zl.logLevel<=Ru.in.ERROR){const t=e.map(yw);zl.error(`Firestore (${yg}): ${n}`,...t)}}function vy(n,...e){if(zl.logLevel<=Ru.in.WARN){const t=e.map(yw);zl.warn(`Firestore (${yg}): ${n}`,...t)}}function yw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${yg}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function dt(n,e){n||Qe()}function Fe(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class vw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _f{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,t(T)):Promise.resolve();let f=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Qr,e.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const T=f;e.enqueueRetryable((0,pe.Z)(function*(){yield T.promise,yield c(r.currentUser)}))},w=T=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(T=>w(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?w(T):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Qr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new TN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new Pi(e)}}class XC{constructor(e,t,r){this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class SN{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new XC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(c=o).error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`),t(c.token);var c})};const r=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),new eT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function tT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ys.I=-1;class NN{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=tT(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Pu(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ww(n){return n+"\0"}class yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yi.fromMillis(Date.now())}static fromDate(e){return yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new yi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function MN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Td(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Zl{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),f=t.get(o);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends Zl{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new on(t)}static emptyPath(){return new on([])}}const oO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fi extends Zl{construct(e,t,r){return new Fi(e,t,r)}static isValidIdentifier(e){return oO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new Se(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;o<e.length;){const _=e[o];if("\\"===_){if(o+1===e.length)throw new Se(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Se(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===_?(f=!f,o++):"."!==_||f?(r+=_,o++):(c(),o++)}if(c(),f)throw new Se(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fi(t)}static emptyPath(){return new Fi([])}}class Yl{constructor(e){this.fields=e,e.sort(Fi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new vi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const aO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kl(n){if(dt(!!n),"string"==typeof n){let e=0;const t=aO.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Id(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function Ew(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kN(n){const e=n.mapValue.fields.__previous_value__;return Ew(e)?kN(e):e}function by(n){const e=Kl(n.mapValue.fields.__local_write_time__.timestampValue);return new yi(e.seconds,e.nanos)}function Sd(n){return null==n}function Jl(n){return 0===n&&1/n==-1/0}function nT(n){return"number"==typeof n&&Number.isInteger(n)&&!Jl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(on.fromString(e))}static fromName(e){return new Ye(on.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new on(e.slice()))}}function Ad(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ew(n)?4:10:Qe()}function vo(n,e){const t=Ad(n);if(t!==Ad(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return by(n).isEqual(by(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Kl(r.timestampValue),f=Kl(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Id(n.bytesValue).isEqual(Id(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Fr(r.geoPointValue.latitude)===Fr(o.geoPointValue.latitude)&&Fr(r.geoPointValue.longitude)===Fr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Fr(r.integerValue)===Fr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Fr(r.doubleValue),f=Fr(o.doubleValue);return c===f?Jl(c)===Jl(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return Pu(n.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:return function(r,o){const c=r.mapValue.fields||{},f=o.mapValue.fields||{};if(MN(c)!==MN(f))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===f[_]||!vo(c[_],f[_])))return!1;return!0}(n,e);default:return Qe()}var o}function vg(n,e){return void 0!==(n.values||[]).find(t=>vo(t,e))}function Xr(n,e){const t=Ad(n),r=Ad(e);if(t!==r)return Bt(t,r);switch(t){case 0:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const f=Fr(o.integerValue||o.doubleValue),_=Fr(c.integerValue||c.doubleValue);return f<_?-1:f>_?1:f===_?0:isNaN(f)?isNaN(_)?0:-1:1}(n,e);case 3:return rT(n.timestampValue,e.timestampValue);case 4:return rT(by(n),by(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(o,c){const f=Id(o),_=Id(c);return f.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const f=o.split("/"),_=c.split("/");for(let w=0;w<f.length&&w<_.length;w++){const T=Bt(f[w],_[w]);if(0!==T)return T}return Bt(f.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const f=Bt(Fr(o.latitude),Fr(c.latitude));return 0!==f?f:Bt(Fr(o.longitude),Fr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const f=o.values||[],_=c.values||[];for(let w=0;w<f.length&&w<_.length;++w){const T=Xr(f[w],_[w]);if(T)return T}return Bt(f.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const f=o.fields||{},_=Object.keys(f),w=c.fields||{},T=Object.keys(w);_.sort(),T.sort();for(let N=0;N<_.length&&N<T.length;++N){const R=Bt(_[N],T[N]);if(0!==R)return R;const V=Xr(f[_[N]],w[T[N]]);if(0!==V)return V}return Bt(_.length,T.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function rT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Kl(n),r=Kl(e),o=Bt(t.seconds,r.seconds);return 0!==o?o:Bt(t.nanos,r.nanos)}function bg(n){return Dw(n)}function Dw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Kl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Id(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const f of r.values||[])c?c=!1:o+=",",o+=Dw(f);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",f=!0;for(const _ of o)f?f=!1:c+=",",c+=`${_}:${Dw(r.fields[_])}`;return c+"}"}(n.mapValue):Qe();var e}function wy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wg(n){return!!n&&"integerValue"in n}function Ey(n){return!!n&&"arrayValue"in n}function Cw(n){return!!n&&"nullValue"in n}function iT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Eg(n){return!!n&&"mapValue"in n}function yf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Td(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yf(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Eg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(t)}setAll(e){let t=Fi.emptyPath(),r={},o=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=_.popLast()}f?r[_.lastSegment()]=yf(f):o.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Eg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Td(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Li(yf(this.value))}}function sT(n){const e=[];return Td(n.fields,(t,r)=>{const o=new Fi([t]);if(Eg(r)){const c=sT(r.mapValue).fields;if(0===c.length)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new Yl(e)}class wn{constructor(e,t,r,o,c){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,At.min(),Li.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,r,0)}static newNoDocument(e,t){return new wn(e,2,t,Li.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new wn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oT{constructor(e,t=null,r=[],o=[],c=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=_,this.R=null}}function Tw(n,e=null,t=[],r=[],o=null,c=null,f=null){return new oT(n,e,t,r,o,c,f)}function Nd(n){const e=Fe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+bg(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Cg(e.startAt)),e.endAt&&(t+="|ub:",t+=Cg(e.endAt)),e.R=t}return e.R}function vs(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!cO(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sw(n.startAt,e.startAt)&&Sw(n.endAt,e.endAt)}function Dy(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class bs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new uO(e,t,r):"array-contains"===t?new lO(e,r):"in"===t?new VN(e,r):"not-in"===t?new uT(e,r):"array-contains-any"===t?new BN(e,r):new bs(e,t,r)}static P(e,t,r){return"in"===t?new FN(e,r):new LN(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xr(t,this.value)):null!==t&&Ad(this.value)===Ad(t)&&this.v(Xr(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uO extends bs{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.v(t)}}class FN extends bs{constructor(e,t){super(e,"in",t),this.keys=aT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LN extends bs{constructor(e,t){super(e,"not-in",t),this.keys=aT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class lO extends bs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ey(t)&&vg(t.arrayValue,this.value)}}class VN extends bs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vg(this.value.arrayValue,t)}}class uT extends bs{constructor(e,t){super(e,"not-in",t)}matches(e){if(vg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vg(this.value.arrayValue,t)}}class BN extends bs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ey(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vg(this.value.arrayValue,r))}}class Dg{constructor(e,t){this.position=e,this.before=t}}function Cg(n){return`${n.before?"b":"a"}:${n.position.map(e=>bg(e)).join(",")}`}class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function cO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Iw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],f=n.position[o];if(r=c.field.isKeyField()?Ye.comparator(Ye.fromName(f.referenceValue),t.key):Xr(f,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function Sw(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vo(n.position[t],e.position[t]))return!1;return!0}class Fu{constructor(e,t=null,r=[],o=[],c=null,f="F",_=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=_,this.endAt=w,this.S=null,this.D=null}}function lT(n,e,t,r,o,c,f,_){return new Fu(n,e,t,r,o,c,f,_)}function Md(n){return new Fu(n)}function Ql(n){return!Sd(n.limit)&&"F"===n.limitType}function bf(n){return!Sd(n.limit)&&"L"===n.limitType}function Cy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Aw(n){for(const e of n.filters)if(e.V())return e.field;return null}function Nw(n){return null!==n.collectionGroup}function Tg(n){const e=Fe(n);if(null===e.S){e.S=[];const t=Aw(e),r=Cy(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new vf(t)),e.S.push(new vf(Fi.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.S.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new vf(Fi.keyField(),c))}}}return e.S}function Xo(n){const e=Fe(n);if(!e.D)if("F"===e.limitType)e.D=Tw(e.path,e.collectionGroup,Tg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Tg(e))t.push(new vf(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Dg(e.endAt.position,!e.endAt.before):null,o=e.startAt?new Dg(e.startAt.position,!e.startAt.before):null;e.D=Tw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function UN(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wf(n,e){return vs(Xo(n),Xo(e))&&n.limitType===e.limitType}function Mw(n){return`${Nd(Xo(n))}|lt:${n.limitType}`}function Rw(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${bg(r.value)}`;var r}).join(", ")}]`),Sd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Cg(n.startAt)),n.endAt&&(e+=", endAt: "+Cg(n.endAt)),`Target(${e})`}(Xo(n))}; limitType=${n.limitType})`}function Ig(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ye.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Iw(t.startAt,Tg(t),r)||t.endAt&&Iw(t.endAt,Tg(t),r)));var t,r}function cT(n){return(e,t)=>{let r=!1;for(const o of Tg(n)){const c=jN(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function jN(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(o,c,f){const _=c.data.field(o),w=f.data.field(o);return null!==_&&null!==w?Xr(_,w):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function xw(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function $N(n){return{integerValue:""+n}}function HN(n,e){return nT(e)?$N(e):xw(n,e)}class Ty{constructor(){this._=void 0}}function kw(n,e,t){return n instanceof Rd?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Xl?dT(n,e):n instanceof Ba?hT(n,e):function(r,o){const c=GN(r,o),f=Ow(c)+Ow(r.N);return wg(c)&&wg(r.N)?$N(f):xw(r.k,f)}(n,e)}function ei(n,e,t){return n instanceof Xl?dT(n,e):n instanceof Ba?hT(n,e):t}function GN(n,e){return n instanceof Ef?wg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Rd extends Ty{}class Xl extends Ty{constructor(e){super(),this.elements=e}}function dT(n,e){const t=ec(e);for(const r of n.elements)t.some(o=>vo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ba extends Ty{constructor(e){super(),this.elements=e}}function hT(n,e){let t=ec(e);for(const r of n.elements)t=t.filter(o=>!vo(o,r));return{arrayValue:{values:t}}}class Ef extends Ty{constructor(e,t){super(),this.k=e,this.N=t}}function Ow(n){return Fr(n.integerValue||n.doubleValue)}function ec(n){return Ey(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Df{constructor(e,t){this.field=e,this.transform=t}}class Fw{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Iy{}function Lw(n,e,t){n instanceof Sg?function(r,o,c){const f=r.value.clone(),_=pT(r.fieldTransforms,o,c.transformResults);f.setAll(_),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof kd?function(r,o,c){if(!xd(r.precondition,o))return void o.convertToUnknownDocument(c.version);const f=pT(r.fieldTransforms,o,c.transformResults),_=o.data;_.setAll(Ag(r)),_.setAll(f),o.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sy(n,e,t){var o;n instanceof Sg?function(r,o,c){if(!xd(r.precondition,o))return;const f=r.value.clone(),_=WN(r.fieldTransforms,c,o);f.setAll(_),o.convertToFoundDocument(fT(o),f).setHasLocalMutations()}(n,e,t):n instanceof kd?function(r,o,c){if(!xd(r.precondition,o))return;const f=WN(r.fieldTransforms,c,o),_=o.data;_.setAll(Ag(r)),_.setAll(f),o.convertToFoundDocument(fT(o),_).setHasLocalMutations()}(n,e,t):xd(n.precondition,o=e)&&o.convertToNoDocument(At.min())}function ti(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=GN(r.transform,o||null);null!=c&&(null==t&&(t=Li.empty()),t.set(r.field,c))}return t||null}function qN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pu(t,r,(o,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xl&&r instanceof Xl||t instanceof Ba&&r instanceof Ba?Pu(t.elements,r.elements,vo):t instanceof Ef&&r instanceof Ef?vo(t.N,r.N):t instanceof Rd&&r instanceof Rd);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function fT(n){return n.isFoundDocument()?n.version:At.min()}class Sg extends Iy{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class kd extends Iy{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function Ag(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pT(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],f=c.transform,_=e.data.field(c.field);r.set(c.field,ei(f,_,t[o]))}return r}function WN(n,e,t){const r=new Map;for(const o of n){const c=o.transform,f=t.data.field(o.field);r.set(o.field,kw(c,f,e))}return r}class Ay extends Iy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class gT extends Iy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class zN{constructor(e){this.count=e}}var br,Wt;function mT(n){switch(n){default:return Qe();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function _T(n){if(void 0===n)return Pr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case br.OK:return fe.OK;case br.CANCELLED:return fe.CANCELLED;case br.UNKNOWN:return fe.UNKNOWN;case br.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case br.INTERNAL:return fe.INTERNAL;case br.UNAVAILABLE:return fe.UNAVAILABLE;case br.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case br.NOT_FOUND:return fe.NOT_FOUND;case br.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case br.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case br.ABORTED:return fe.ABORTED;case br.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case br.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case br.DATA_LOSS:return fe.DATA_LOSS;default:return Qe()}}(Wt=br||(br={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class ni{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new ni(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new ni(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ny(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ny(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ny(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ny(this.root,e,this.comparator,!0)}}class Ny{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:bi.RED,this.left=null!=o?o:bi.EMPTY,this.right=null!=c?c:bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new bi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return bi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(e){this.comparator=e,this.data=new ni(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZN(this.data.getIterator())}getIteratorFrom(e){return new ZN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tr(this.comparator);return t.data=e,t}}class ZN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const dO=new ni(Ye.comparator);function bo(){return dO}const YN=new ni(Ye.comparator);function Vw(){return YN}const KN=new ni(Ye.comparator);function yT(){return KN}const ea=new tr(Ye.comparator);function ln(...n){let e=ea;for(const t of n)e=e.add(t);return e}const JN=new tr(Bt);function My(){return JN}class Ng{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ry.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ng(At.min(),r,My(),bo(),ln())}}class Ry{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ry(vi.EMPTY_BYTE_STRING,t,ln(),ln(),ln())}}class xy{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.F=o}}class vT{constructor(e,t){this.targetId=e,this.O=t}}class bT{constructor(e,t,r=vi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Cf{constructor(){this.M=0,this.L=ET(),this.B=vi.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=ln(),t=ln(),r=ln();return this.L.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Qe()}}),new Ry(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=ET()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class wT{constructor(e){this.et=e,this.nt=new Map,this.st=bo(),this.it=QN(),this.rt=new tr(Bt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.O.count,o=this.wt(t);if(o){const c=o.target;if(Dy(c))if(0===r){const f=new Ye(c.path);this.ct(t,f,wn.newNoDocument(f,At.min()))}else dt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((c,f)=>{const _=this.wt(f);if(_){if(c.current&&Dy(_.target)){const w=new Ye(_.target.path);null!==this.st.get(w)||this.yt(f,w)||this.ct(f,w,wn.newNoDocument(w,e))}c.j&&(t.set(f,c.G()),c.H())}});let r=ln();this.it.forEach((c,f)=>{let _=!0;f.forEachWhile(w=>{const T=this.wt(w);return!T||2===T.purpose||(_=!1,!1)}),_&&(r=r.add(c))});const o=new Ng(e,t,this.rt,this.st,r);return this.st=bo(),this.it=QN(),this.rt=new tr(Bt),o}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Cf,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new tr(Bt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Cf),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function QN(){return new ni(Ye.comparator)}function ET(){return new ni(Ye.comparator)}const hO={asc:"ASCENDING",desc:"DESCENDING"},fO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pO{constructor(e,t){this.databaseId=e,this.C=t}}function Od(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DT(n,e){return n.C?e.toBase64():e.toUint8Array()}function XN(n,e){return Od(n,e.toTimestamp())}function ri(n){return dt(!!n),At.fromTimestamp(function(e){const t=Kl(e);return new yi(t.seconds,t.nanos)}(n))}function CT(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function TT(n){const e=on.fromString(n);return dt(qw(e)),e}function Mg(n,e){return CT(n.databaseId,e.path)}function Ua(n,e){const t=TT(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(IT(t))}function Vs(n,e){return CT(n.databaseId,e)}function eM(n){const e=TT(n);return 4===e.length?on.emptyPath():IT(e)}function Tf(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IT(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Bw(n,e,t){return{name:Mg(n,e),fields:t.value.mapValue.fields}}function Uw(n,e,t){const r=Ua(n,e.name),o=ri(e.updateTime),c=new Li({mapValue:{fields:e.fields}}),f=wn.newFoundDocument(r,o,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function If(n,e){let t;if(e instanceof Sg)t={update:Bw(n,e.key,e.value)};else if(e instanceof Ay)t={delete:Mg(n,e.key)};else if(e instanceof kd)t={update:Bw(n,e.key,e.data),updateMask:Py(e.fieldMask)};else{if(!(e instanceof gT))return Qe();t={verify:Mg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const f=c.transform;if(f instanceof Rd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Xl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ef)return{fieldPath:c.field.canonicalString(),increment:f.N};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:XN(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Qe()),t;var o}function ky(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?vr.updateTime(ri(o.updateTime)):void 0!==o.exists?vr.exists(o.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,f){let _=null;"setToServerValue"in f?(dt("REQUEST_TIME"===f.setToServerValue),_=new Rd):"appendMissingElements"in f?_=new Xl(f.appendMissingElements.values||[]):"removeAllFromArray"in f?_=new Ba(f.removeAllFromArray.values||[]):"increment"in f?_=new Ef(c,f.increment):Qe();const w=Fi.fromServerFormat(f.fieldPath);return new Df(w,_)}(n,o)):[];var o;if(e.update){const o=Ua(n,e.update.name),c=new Li({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Yl((e.updateMask.fieldPaths||[]).map(T=>Fi.fromServerFormat(T)));return new kd(o,c,f,t,r)}return new Sg(o,c,t,r)}if(e.delete){const o=Ua(n,e.delete);return new Ay(o,t)}if(e.verify){const o=Ua(n,e.verify);return new gT(o,t)}return Qe()}function Rg(n,e){return{documents:[Vs(n,e.path)]}}function $w(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Vs(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Vs(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const w=_.map(T=>function(N){if("=="===N.op){if(iT(N.value))return{unaryFilter:{field:tc(N.field),op:"IS_NAN"}};if(Cw(N.value))return{unaryFilter:{field:tc(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(iT(N.value))return{unaryFilter:{field:tc(N.field),op:"IS_NOT_NAN"}};if(Cw(N.value))return{unaryFilter:{field:tc(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(N.field),op:rM(N.op),value:N.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(_){if(0!==_.length)return _.map(w=>{return{field:tc((T=w).field),direction:nM(T.dir)};var T})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=(w=e.limit,n.C||Sd(w)?w:{value:w});var w;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=Gw(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Gw(e.endAt)),t}function Hw(n){let e=eM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const N=t.from[0];N.allDescendants?o=N.collectionId:e=e.child(N.collectionId)}let c=[];t.where&&(c=AT(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(N=>{return new vf(Sf((R=N).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let _=null;t.limit&&(_=function(N){let R;return R="object"==typeof N?N.value:N,Sd(R)?null:R}(t.limit));let w=null;t.startAt&&(w=NT(t.startAt));let T=null;return t.endAt&&(T=NT(t.endAt)),lT(e,o,f,c,_,"F",w,T)}function AT(n){return n?void 0!==n.unaryFilter?[xg(n)]:void 0!==n.fieldFilter?[is(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>AT(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function Gw(n){return{before:n.before,values:n.position}}function NT(n){return new Dg(n.values||[],!!n.before)}function nM(n){return hO[n]}function rM(n){return fO[n]}function tc(n){return{fieldPath:n.canonicalString()}}function Sf(n){return Fi.fromServerFormat(n.fieldPath)}function is(n){return bs.create(Sf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function xg(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Sf(n.unaryFilter.field);return bs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Sf(n.unaryFilter.field);return bs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sf(n.unaryFilter.field);return bs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sf(n.unaryFilter.field);return bs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function Py(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zw(e)),e=Ww(n.get(t),e);return zw(e)}function Ww(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function zw(n){return n+"\x01\x01"}function wo(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const f=n.indexOf("\x01",c);switch((f<0||f>t)&&Qe(),n.charAt(f+1)){case"\x01":const _=n.substring(c,f);let w;0===o.length?w=_:(o+=_,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(c,f),o+="\0";break;case"\x11":o+=n.substring(c,f+1);break;default:Qe()}c=f+2}return new on(r)}class iM{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Bs{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Bs.store="owner",Bs.key="owner";class nc{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}nc.store="mutationQueues",nc.keyPath="userId";class Nn{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}Nn.store="mutations",Nn.keyPath="batchId",Nn.userMutationsIndex="userMutationsIndex",Nn.userMutationsKeyPath=["userId","batchId"];class wi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ws(t)]}static key(e,t,r){return[e,ws(t),r]}}wi.store="documentMutations",wi.PLACEHOLDER=new wi;class sM{constructor(e,t){this.path=e,this.readTime=t}}class oM{constructor(e,t){this.path=e,this.version=t}}class nr{constructor(e,t,r,o,c,f){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=f}}nr.store="remoteDocuments",nr.readTimeIndex="readTimeIndex",nr.readTimeIndexPath="readTime",nr.collectionReadTimeIndex="collectionReadTimeIndex",nr.collectionReadTimeIndexPath=["parentPath","readTime"];class Ei{constructor(e){this.byteSize=e}}Ei.store="remoteDocumentGlobal",Ei.key="remoteDocumentGlobalKey";class ii{constructor(e,t,r,o,c,f,_){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=f,this.query=_}}ii.store="targets",ii.keyPath="targetId",ii.queryTargetsIndexName="queryTargetsIndex",ii.queryTargetsKeyPath=["canonicalId","targetId"];class Lr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Lr.store="targetDocuments",Lr.keyPath=["targetId","path"],Lr.documentTargetsIndex="documentTargetsIndex",Lr.documentTargetsKeyPath=["path","targetId"];class Us{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Us.key="targetGlobalKey",Us.store="targetGlobal";class Pd{constructor(e,t){this.collectionId=e,this.parent=t}}Pd.store="collectionParents",Pd.keyPath=["collectionId","parent"];class Lu{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Lu.store="clientMetadata",Lu.keyPath="clientId";class rc{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}rc.store="bundles",rc.keyPath="bundleId";class Af{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Af.store="namedQueries",Af.keyPath="name";const MT=[nc.store,Nn.store,wi.store,nr.store,ii.store,Bs.store,Us.store,Lr.store,Lu.store,Ei.store,Pd.store,rc.store,Af.store],Zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let o=0,c=0,f=!1;e.forEach(_=>{++o,_.next(()=>{++c,f&&c===o&&t()},w=>r(w))}),f=!0,c===o&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(o=>o?Te.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class Fy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Qr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new ja(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=Yw(r.target.error);this.It.reject(new ja(e,o))}}static open(e,t,r,o){try{return new Fy(t,e.transaction(o,r))}catch(c){throw new ja(t,c)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Nf(t)}}class Vr{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Vr.Pt((0,ct.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Fd(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ct.hl)())return!1;if(Vr.vt())return!0;const e=(0,ct.z$)(),t=Vr.Pt(e),r=0<t&&t<10,o=Vr.Vt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,pe.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{r(f.target.result)},c.onblocked=()=>{o(new ja(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const _=f.target.error;o("VersionError"===_.name?new Se(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Se(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new ja(e,_))},c.onupgradeneeded=f=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.Rt.Nt(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,pe.Z)(function*(){const f="readonly"===t;let _=0;for(;;){++_;try{c.db=yield c.Ct(e);const w=Fy.open(c.db,e,f?"readonly":"readwrite",r),T=o(w).catch(N=>(w.abort(N),Te.reject(N))).toPromise();return T.catch(()=>{}),yield w.At,T}catch(w){const T="FirebaseError"!==w.name&&_<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),c.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kg{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Fd(this.$t.delete())}}class ja extends Se{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $a(n){return"IndexedDbTransactionError"===n.name}class Nf{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fd(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Fd(this.store.add(e))}get(e){return Fd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Fd(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Fd(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(c,f)=>{o.push(f)}).next(()=>o)}qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(c,f,_)=>_.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Te((r,o)=>{t.onerror=c=>{const f=Yw(c.target.error);o(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(_=>{_?f.continue():r()}):r()}})}Ut(e,t){const r=[];return new Te((o,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const _=f.target.result;if(!_)return void o();const w=new kg(_),T=t(_.primaryKey,_.value,w);if(T instanceof Te){const N=T.catch(R=>(w.done(),Te.reject(R)));r.push(N)}w.isDone?o():null===w.Mt?_.continue():_.continue(w.Mt)}}).next(()=>Te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fd(n){return new Te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Yw(r.target.error);t(o)}})}let xT=!1;function Yw(n){const e=Vr.Pt((0,ct.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xT||(xT=!0,setTimeout(()=>{throw r},0)),r}}return n}class Kw extends RT{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function ss(n,e){const t=Fe(n);return Vr.Dt(t.Wt,e)}class Ly{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&Lw(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Sy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Sy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ln())}isEqual(e){return this.batchId===e.batchId&&Pu(this.mutations,e.mutations,(t,r)=>qN(t,r))&&Pu(this.baseMutations,e.baseMutations,(t,r)=>qN(t,r))}}class Vy{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=yT();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new Vy(e,t,r,o)}}class Ha{constructor(e,t,r,o,c=At.min(),f=At.min(),_=vi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_}withSequenceNumber(e){return new Ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kT{constructor(e){this.Gt=e}}function Jw(n,e){if(e.document)return Uw(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ye.fromSegments(e.noDocument.path),r=Rf(e.noDocument.readTime),o=wn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=Ye.fromSegments(e.unknownDocument.path),r=Rf(e.unknownDocument.version);return wn.newUnknownDocument(t,r)}return Qe()}function Qw(n,e,t){const r=Vu(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const c={name:Mg(_=n.Gt,(w=e).key),fields:w.data.value.mapValue.fields,updateTime:Od(_,w.version.toTimestamp())};return new nr(null,null,c,e.hasCommittedMutations,r,o)}var _,w;if(e.isNoDocument()){const c=e.key.path.toArray(),f=Mf(e.version),_=e.hasCommittedMutations;return new nr(null,new sM(c,f),null,_,r,o)}if(e.isUnknownDocument()){const c=e.key.path.toArray(),f=Mf(e.version);return new nr(new oM(c,f),null,null,!0,r,o)}return Qe()}function Vu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function By(n){const e=new yi(n[0],n[1]);return At.fromTimestamp(e)}function Mf(n){const e=n.toTimestamp();return new iM(e.seconds,e.nanoseconds)}function Rf(n){const e=new yi(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Og(n,e){const t=(e.baseMutations||[]).map(c=>ky(n.Gt,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>ky(n.Gt,c)),o=yi.fromMillis(e.localWriteTimeMs);return new Ly(e.batchId,o,t,r)}function Uy(n){const e=Rf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rf(n.lastLimboFreeSnapshotVersion):At.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Xo(Md(eM(o.documents[0])))):r=Xo(Hw(n.query)),new Ha(r,n.targetId,0,n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function aM(n,e){const t=Mf(e.snapshotVersion),r=Mf(e.lastLimboFreeSnapshotVersion);let o;o=Dy(e.target)?Rg(n.Gt,e.target):$w(n.Gt,e.target);const c=e.resumeToken.toBase64();return new ii(e.targetId,Nd(e.target),t,c,e.sequenceNumber,r,o)}function OT(n){const e=Hw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?UN(e,e.limit,"L"):e}class uM{getBundleMetadata(e,t){return PT(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Rf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return PT(e).put({bundleId:(r=t).id,createTime:Mf(ri(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:OT(o.bundledQuery),readTime:Rf(o.readTime)};var o})}saveNamedQuery(e,t){return lM(e).put({name:(r=t).name,readTime:Mf(ri(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PT(n){return ss(n,rc.store)}function lM(n){return ss(n,Af.store)}class gO{constructor(){this.zt=new FT}addToCollectionParentIndex(e,t){return this.zt.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.zt.getEntries(t))}}class FT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new tr(on.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new tr(on.comparator)).toArray()}}class mO{constructor(){this.Ht=new FT}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const c={collectionId:r,parent:ws(o)};return LT(e).put(c)}return Te.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ww(t),""],!1,!0);return LT(e).Bt(o).next(c=>{for(const f of c){if(f.collectionId!==t)break;r.push(wo(f.parent))}return r})}}function LT(n){return ss(n,Pd.store)}const cM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dM(n,e,t){const r=n.store(Nn.store),o=n.store(wi.store),c=[],f=IDBKeyRange.only(t.batchId);let _=0;const w=r.jt({range:f},(N,R,V)=>(_++,V.delete()));c.push(w.next(()=>{dt(1===_)}));const T=[];for(const N of t.mutations){const R=wi.key(e,N.key.path,t.batchId);c.push(o.delete(R)),T.push(N.key)}return Te.waitFor(c).next(()=>T)}function Xw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class i{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){dt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new i(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return a(e).jt({index:Nn.userMutationsIndex,range:r},(o,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=l(e),f=a(e);return f.add({}).next(_=>{dt("number"==typeof _);const w=new Ly(_,t,r,o),T=function(V,$,ee){const me=ee.baseMutations.map(Xe=>If(V.Gt,Xe)),Ce=ee.mutations.map(Xe=>If(V.Gt,Xe));return new Nn($,ee.batchId,ee.localWriteTime.toMillis(),me,Ce)}(this.k,this.userId,w),N=[];let R=new tr((V,$)=>Bt(V.canonicalString(),$.canonicalString()));for(const V of o){const $=wi.key(this.userId,V.key.path,_);R=R.add(V.key.path.popLast()),N.push(f.put(T)),N.push(c.put($,wi.PLACEHOLDER))}return R.forEach(V=>{N.push(this.Jt.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.Yt[_]=w.keys()}),Te.waitFor(N).next(()=>w)})}lookupMutationBatch(e,t){return a(e).get(t).next(r=>r?(dt(r.userId===this.userId),Og(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Te.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return a(e).jt({index:Nn.userMutationsIndex,range:o},(f,_,w)=>{_.userId===this.userId&&(dt(_.batchId>=r),c=Og(this.k,_)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return a(e).jt({index:Nn.userMutationsIndex,range:t,reverse:!0},(o,c,f)=>{r=c.batchId,f.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return a(e).Bt(Nn.userMutationsIndex,t).next(r=>r.map(o=>Og(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return l(e).jt({range:o},(f,_,w)=>{const[T,N,R]=f,V=wo(N);if(T===this.userId&&t.path.isEqual(V))return a(e).get(R).next($=>{if(!$)throw Qe();dt($.userId===this.userId),c.push(Og(this.k,$))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Bt);const o=[];return t.forEach(c=>{const f=wi.prefixForPath(this.userId,c.path),_=IDBKeyRange.lowerBound(f),w=l(e).jt({range:_},(T,N,R)=>{const[V,$,ee]=T,me=wo($);V===this.userId&&c.path.isEqual(me)?r=r.add(ee):R.done()});o.push(w)}),Te.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=wi.prefixForPath(this.userId,r),f=IDBKeyRange.lowerBound(c);let _=new tr(Bt);return l(e).jt({range:f},(w,T,N)=>{const[R,V,$]=w,ee=wo(V);R===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(_=_.add($)):N.done()}).next(()=>this.te(e,_))}te(e,t){const r=[],o=[];return t.forEach(c=>{o.push(a(e).get(c).next(f=>{if(null===f)throw Qe();dt(f.userId===this.userId),r.push(Og(this.k,f))}))}),Te.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return dM(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Te.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const r=IDBKeyRange.lowerBound(wi.prefixForUser(this.userId)),o=[];return l(e).jt({range:r},(c,f,_)=>{if(c[0]===this.userId){const w=wo(c[1]);o.push(w)}else _.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return s(e,this.userId,t)}ne(e){return d(e).get(this.userId).next(t=>t||new nc(this.userId,-1,""))}}function s(n,e,t){const r=wi.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let f=!1;return l(n).jt({range:c,Kt:!0},(_,w,T)=>{const[N,R,V]=_;N===e&&R===o&&(f=!0),T.done()}).next(()=>f)}function a(n){return ss(n,Nn.store)}function l(n){return ss(n,wi.store)}function d(n){return ss(n,nc.store)}class h{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new h(0)}static re(){return new h(-1)}}class m{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new h(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>At.fromTimestamp(new yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ae(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>v(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return v(e).jt((f,_)=>{const w=Uy(_);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,c.push(this.removeTargetData(e,w)))}).next(()=>Te.waitFor(c)).next(()=>o)}forEachTarget(e,t){return v(e).jt((r,o)=>{const c=Uy(o);t(c)})}oe(e){return E(e).get(Us.key).next(t=>(dt(null!==t),t))}ae(e,t){return E(e).put(Us.key,t)}ce(e,t){return v(e).put(aM(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return v(e).jt({range:o,index:ii.queryTargetsIndexName},(f,_,w)=>{const T=Uy(_);vs(t,T.target)&&(c=T,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=D(e);return t.forEach(f=>{const _=ws(f.path);o.push(c.put(new Lr(r,_))),o.push(this.referenceDelegate.addReference(e,r,f))}),Te.waitFor(o)}removeMatchingKeys(e,t,r){const o=D(e);return Te.forEach(t,c=>{const f=ws(c.path);return Te.waitFor([o.delete([r,f]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=D(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=D(e);let c=ln();return o.jt({range:r,Kt:!0},(f,_,w)=>{const T=wo(f[1]),N=new Ye(T);c=c.add(N)}).next(()=>c)}containsKey(e,t){const r=ws(t.path),o=IDBKeyRange.bound([r],[ww(r)],!1,!0);let c=0;return D(e).jt({index:Lr.documentTargetsIndex,Kt:!0,range:o},([f,_],w,T)=>{0!==f&&(c++,T.done())}).next(()=>c>0)}Et(e,t){return v(e).get(t).next(r=>r?Uy(r):null)}}function v(n){return ss(n,ii.store)}function E(n){return ss(n,Us.store)}function D(n){return ss(n,Lr.store)}function A(n){return k.apply(this,arguments)}function k(){return(k=(0,pe.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Zw)throw n;ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function O([n,e],[t,r]){const o=Bt(n,t);return 0===o?Bt(e,r):o}class H{constructor(e){this.he=e,this.buffer=new tr(O),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();O(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){$a(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield A(o)}yield t.me(e)}))}}class le{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(ys.I);const r=new H(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(cM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cM):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,c,f,_,w,T;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,_=Date.now(),this.removeTargets(e,r,t))).next(R=>(c=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(T=Date.now(),_w()<=Ru.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-N}ms\n\tDetermined least recently used ${o} in `+(_-f)+`ms\n\tRemoved ${c} targets in `+(w-_)+`ms\n\tRemoved ${R} documents in `+(T-w)+`ms\nTotal Duration: ${T-N}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:R})))}}class ne{constructor(e,t){this.db=e,this.garbageCollector=new le(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return Ne(e,r)}removeReference(e,t,r){return Ne(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ne(e,t)}Ae(e,t){return function(r,o){let c=!1;return d(r).Qt(f=>s(r,f,o).next(_=>(_&&(c=!0),Te.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Ie(e,(f,_)=>{if(_<=t){const w=this.Ae(e,f).next(T=>{if(!T)return c++,r.getEntry(e,f).next(()=>(r.removeEntry(f),D(e).delete([0,ws(f.path)])))});o.push(w)}}).next(()=>Te.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ne(e,t)}Ie(e,t){const r=D(e);let o,c=ys.I;return r.jt({index:Lr.documentTargetsIndex},([f,_],{path:w,sequenceNumber:T})=>{0===f?(c!==ys.I&&t(new Ye(wo(o)),c),c=T,o=w):c=ys.I}).next(()=>{c!==ys.I&&t(new Ye(wo(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ne(n,e){return D(n).put((r=n.currentSequenceNumber,new Lr(0,ws(e.path),r)));var r}class ge{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Td(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return RN(this.inner)}}class Ke{constructor(){this.changes=new ge(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:At.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:wn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Te.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ht{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Br(e).put(ic(t),r)}removeEntry(e,t){const r=Br(e),o=ic(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Br(e).get(ic(t)).next(r=>this.Pe(t,r))}be(e,t){return Br(e).get(ic(t)).next(r=>({document:this.Pe(t,r),size:Xw(r)}))}getEntries(e,t){let r=bo();return this.ve(e,t,(o,c)=>{const f=this.Pe(o,c);r=r.insert(o,f)}).next(()=>r)}Ve(e,t){let r=bo(),o=new ni(Ye.comparator);return this.ve(e,t,(c,f)=>{const _=this.Pe(c,f);r=r.insert(c,_),o=o.insert(c,Xw(f))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Te.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let f=c.getNext();return Br(e).jt({range:o},(_,w,T)=>{const N=Ye.fromSegments(_);for(;f&&Ye.comparator(f,N)<0;)r(f,null),f=c.getNext();f&&f.isEqual(N)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?T.Lt(f.path.toArray()):T.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=bo();const c=t.path.length+1,f={};if(r.isEqual(At.min())){const _=t.path.toArray();f.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),w=Vu(r);f.range=IDBKeyRange.lowerBound([_,w],!0),f.index=nr.collectionReadTimeIndex}return Br(e).jt(f,(_,w,T)=>{if(_.length!==c)return;const N=Jw(this.k,w);t.path.isPrefixOf(N.key.path)?Ig(t,N)&&(o=o.insert(N.key,N)):T.done()}).next(()=>o)}newChangeBuffer(e){return new Ut(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wr(e).get(Ei.key).next(t=>(dt(!!t),t))}Re(e,t){return wr(e).put(Ei.key,t)}Pe(e,t){if(t){const r=Jw(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return wn.newInvalidDocument(e)}}class Ut extends Ke{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new ge(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new tr((c,f)=>Bt(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const _=this.Ce.get(c);if(f.document.isValidDocument()){const w=Qw(this.De.k,f.document,this.getReadTime(c));o=o.add(c.path.popLast()),r+=Xw(w)-_,t.push(this.De.addEntry(e,c,w))}else if(r-=_,this.trackRemovals){const w=Qw(this.De.k,wn.newNoDocument(c,At.min()),this.getReadTime(c));t.push(this.De.addEntry(e,c,w))}else t.push(this.De.removeEntry(e,c))}),o.forEach(c=>{t.push(this.De.Jt.addToCollectionParentIndex(e,c))}),t.push(this.De.updateMetadata(e,r)),Te.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((c,f)=>{this.Ce.set(c,f)}),r))}}function wr(n){return ss(n,Ei.store)}function Br(n){return ss(n,nr.store)}function ic(n){return n.path.toArray()}class xf{constructor(e){this.k=e}Nt(e,t,r,o){dt(r<o&&r>=0&&o<=11);const c=new Fy("createOrUpgrade",t);var _;r<1&&o>=1&&(e.createObjectStore(Bs.store),(_=e).createObjectStore(nc.store,{keyPath:nc.keyPath}),_.createObjectStore(Nn.store,{keyPath:Nn.keyPath,autoIncrement:!0}).createIndex(Nn.userMutationsIndex,Nn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(wi.store),Ld(e),function(_){_.createObjectStore(nr.store)}(e));let f=Te.resolve();return r<3&&o>=3&&(0!==r&&(function(_){_.deleteObjectStore(Lr.store),_.deleteObjectStore(ii.store),_.deleteObjectStore(Us.store)}(e),Ld(e)),f=f.next(()=>function(_){const w=_.store(Us.store),T=new Us(0,0,At.min().toTimestamp(),0);return w.put(Us.key,T)}(c))),r<4&&o>=4&&(0!==r&&(f=f.next(()=>function(_,w){return w.store(Nn.store).Bt().next(T=>{_.deleteObjectStore(Nn.store),_.createObjectStore(Nn.store,{keyPath:Nn.keyPath,autoIncrement:!0}).createIndex(Nn.userMutationsIndex,Nn.userMutationsKeyPath,{unique:!0});const N=w.store(Nn.store),R=T.map(V=>N.put(V));return Te.waitFor(R)})}(e,c))),f=f.next(()=>{!function(_){_.createObjectStore(Lu.store,{keyPath:Lu.keyPath})}(e)})),r<5&&o>=5&&(f=f.next(()=>this.Ne(c))),r<6&&o>=6&&(f=f.next(()=>(function(_){_.createObjectStore(Ei.store)}(e),this.ke(c)))),r<7&&o>=7&&(f=f.next(()=>this.xe(c))),r<8&&o>=8&&(f=f.next(()=>this.$e(e,c))),r<9&&o>=9&&(f=f.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const w=_.objectStore(nr.store);w.createIndex(nr.readTimeIndex,nr.readTimeIndexPath,{unique:!1}),w.createIndex(nr.collectionReadTimeIndex,nr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(f=f.next(()=>this.Fe(c))),r<11&&o>=11&&(f=f.next(()=>{(function(_){_.createObjectStore(rc.store,{keyPath:rc.keyPath})})(e),function(_){_.createObjectStore(Af.store,{keyPath:Af.keyPath})}(e)})),f}ke(e){let t=0;return e.store(nr.store).jt((r,o)=>{t+=Xw(o)}).next(()=>{const r=new Ei(t);return e.store(Ei.store).put(Ei.key,r)})}Ne(e){const t=e.store(nc.store),r=e.store(Nn.store);return t.Bt().next(o=>Te.forEach(o,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.Bt(Nn.userMutationsIndex,f).next(_=>Te.forEach(_,w=>{dt(w.userId===c.userId);const T=Og(this.k,w);return dM(e,c.userId,T).next(()=>{})}))}))}xe(e){const t=e.store(Lr.store),r=e.store(nr.store);return e.store(Us.store).get(Us.key).next(o=>{const c=[];return r.jt((f,_)=>{const w=new on(f),T=[0,ws(w)];c.push(t.get(T).next(N=>N?Te.resolve():t.put(new Lr(0,ws(w),o.highestListenSequenceNumber))))}).next(()=>Te.waitFor(c))})}$e(e,t){e.createObjectStore(Pd.store,{keyPath:Pd.keyPath});const r=t.store(Pd.store),o=new FT,c=f=>{if(o.add(f)){const _=f.lastSegment(),w=f.popLast();return r.put({collectionId:_,parent:ws(w)})}};return t.store(nr.store).jt({Kt:!0},(f,_)=>{const w=new on(f);return c(w.popLast())}).next(()=>t.store(wi.store).jt({Kt:!0},([f,_,w],T)=>{const N=wo(_);return c(N.popLast())}))}Fe(e){const t=e.store(ii.store);return t.jt((r,o)=>{const c=Uy(o),f=aM(this.k,c);return t.put(f)})}}function Ld(n){n.createObjectStore(Lr.store,{keyPath:Lr.keyPath}).createIndex(Lr.documentTargetsIndex,Lr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ii.store,{keyPath:ii.keyPath}).createIndex(ii.queryTargetsIndexName,ii.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Us.store)}const sc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pg{constructor(e,t,r,o,c,f,_,w,T,N){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=c,this.window=f,this.document=_,this.Me=T,this.Le=N,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=R=>Promise.resolve(),!Pg.bt())throw new Se(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ne(this,o),this.Ge=t+"main",this.k=new kT(w),this.ze=new Vr(this.Ge,11,new xf(this.k)),this.He=new m(this.referenceDelegate,this.k),this.Jt=new mO,this.Je=new ht(this.k,this.Jt),this.Ye=new uM,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===N&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(fe.FAILED_PRECONDITION,sc);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ys(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kf(e).put(new Lu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if($a(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Vd(e).get(Bs.key).next(t=>Te.resolve(this.un(t)))}hn(e){return kf(e).delete(this.clientId)}ln(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ss(r,Lu.store);return o.Bt().next(c=>{const f=e.dn(c,18e5),_=c.filter(w=>-1===f.indexOf(w));return Te.forEach(_,w=>o.delete(w.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Te.resolve(!0):Vd(e).get(Bs.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Se(fe.FAILED_PRECONDITION,sc);return!1}}return!(!this.networkEnabled||!this.inForeground)||kf(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const f=!this.inForeground&&o.inForeground,_=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||f&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Bs.store,Lu.store],t=>{const r=new Kw(t,ys.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>kf(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return i.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let c;return ke("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",MT,f=>(c=new Kw(f,this.Be?this.Be.next():ys.I),"readwrite-primary"===t?this.rn(c).next(_=>!!_||this.on(c)).next(_=>{if(!_)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Se(fe.FAILED_PRECONDITION,Zw);return r(c)}).next(_=>this.cn(c).next(()=>_)):this.En(c).next(()=>r(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}En(e){return Vd(e).get(Bs.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(fe.FAILED_PRECONDITION,sc)})}cn(e){const t=new Bs(this.clientId,this.allowTabSynchronization,Date.now());return Vd(e).put(Bs.key,t)}static bt(){return Vr.bt()}an(e){const t=Vd(e);return t.get(Bs.key).next(r=>this.un(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete(Bs.key)):Te.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,ct.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vd(n){return ss(n,Bs.store)}function kf(n){return ss(n,Lu.store)}function Fg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class e1{constructor(e,t){this.progress=e,this.In=t}}class _O{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):Nw(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new Ye(t)).next(r=>{let o=Vw();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let c=Vw();return this.Jt.getCollectionParents(e,o).next(f=>Te.forEach(f,_=>{const w=(T=t,N=_.child(o),new Fu(N,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,N;return this.Cn(e,w,r).next(T=>{T.forEach((N,R)=>{c=c.insert(N,R)})})}).next(()=>c))}Cn(e,t,r){let o,c;return this.Je.getDocumentsMatchingQuery(e,t,r).next(f=>(o=f,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(f=>(c=f,this.Nn(e,c,o).next(_=>{o=_;for(const w of c)for(const T of w.mutations){const N=T.key;let R=o.get(N);null==R&&(R=wn.newInvalidDocument(N),o=o.insert(N,R)),Sy(T,R,w.localWriteTime),R.isFoundDocument()||(o=o.remove(N))}}))).next(()=>(o.forEach((f,_)=>{Ig(t,_)||(o=o.remove(f))}),o))}Nn(e,t,r){let o=ln();for(const f of t)for(const _ of f.mutations)_ instanceof kd&&null===r.get(_.key)&&(o=o.add(_.key));let c=r;return this.Je.getEntries(e,o).next(f=>(f.forEach((_,w)=>{w.isFoundDocument()&&(c=c.insert(_,w))}),c))}}class hM{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=ln(),o=ln();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new hM(e,t.fromCache,r,o)}}class yO{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Mn(e,t):this.On.vn(e,o).next(c=>{const f=this.Ln(t,c);return(Ql(t)||bf(t))&&this.Bn(t.limitType,f,o,r)?this.Mn(e,t):(_w()<=Ru.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rw(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(_=>(f.forEach(w=>{_=_.insert(w.key,w)}),_)))});var c}Ln(e,t){let r=new tr(cT(e));return t.forEach((o,c)=>{Ig(e,c)&&(r=r.add(c))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Mn(e,t){return _w()<=Ru.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Rw(t)),this.On.getDocumentsMatchingQuery(e,t,At.min())}}class _L{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new ni(Bt),this.Kn=new ge(c=>Nd(c),vs),this.jn=At.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new _O(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function vO(n,e,t,r){return new _L(n,e,t,r)}function bO(n,e){return fM.apply(this,arguments)}function fM(){return(fM=(0,pe.Z)(function*(n,e){const t=Fe(n);let r=t.An,o=t.Wn;const c=yield t.persistence.runTransaction("Handle user change","readonly",f=>{let _;return t.An.getAllMutationBatches(f).next(w=>(_=w,r=t.persistence.getMutationQueue(e),o=new _O(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(f))).next(w=>{const T=[],N=[];let R=ln();for(const V of _){T.push(V.batchId);for(const $ of V.mutations)R=R.add($.key)}for(const V of w){N.push(V.batchId);for(const $ of V.mutations)R=R.add($.key)}return o.vn(f,R).next(V=>({Gn:V,removedBatchIds:T,addedBatchIds:N}))})});return t.An=r,t.Wn=o,t.Un.Fn(t.Wn),c})).apply(this,arguments)}function yL(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Qn.newChangeBuffer({trackRemovals:!0});return function(f,_,w,T){const N=w.batch,R=N.keys();let V=Te.resolve();return R.forEach($=>{V=V.next(()=>T.getEntry(_,$)).next(ee=>{const me=w.docVersions.get($);dt(null!==me),ee.version.compareTo(me)<0&&(N.applyToRemoteDocument(ee,w),ee.isValidDocument()&&T.addEntry(ee,w.commitVersion))})}),V.next(()=>f.An.removeMutationBatch(_,N))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function wO(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function vL(n,e){const t=Fe(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const _=[];e.targetChanges.forEach((T,N)=>{const R=o.get(N);if(!R)return;_.push(t.He.removeMatchingKeys(c,T.removedDocuments,N).next(()=>t.He.addMatchingKeys(c,T.addedDocuments,N)));const V=T.resumeToken;if(V.approximateByteSize()>0){const $=R.withResumeToken(V,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(N,$),ee=R,Ce=T,dt((me=$).resumeToken.approximateByteSize()>0),(0===ee.resumeToken.approximateByteSize()||me.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&_.push(t.He.updateTargetData(c,$))}var ee,me,Ce});let w=bo();if(e.documentUpdates.forEach((T,N)=>{e.resolvedLimboDocuments.has(T)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),_.push(EO(c,f,e.documentUpdates,r,void 0).next(T=>{w=T})),!r.isEqual(At.min())){const T=t.He.getLastRemoteSnapshotVersion(c).next(N=>t.He.setTargetsMetadata(c,c.currentSequenceNumber,r));_.push(T)}return Te.waitFor(_).next(()=>f.apply(c)).next(()=>t.Wn.Vn(c,w)).next(()=>w)}).then(c=>(t.qn=o,c))}function EO(n,e,t,r,o){let c=ln();return t.forEach(f=>c=c.add(f)),e.getEntries(n,c).next(f=>{let _=bo();return t.forEach((w,T)=>{const N=f.get(w),R=(null==o?void 0:o.get(w))||r;T.isNoDocument()&&T.version.isEqual(At.min())?(e.removeEntry(w,R),_=_.insert(w,T)):!N.isValidDocument()||T.version.compareTo(N.version)>0||0===T.version.compareTo(N.version)&&N.hasPendingWrites?(e.addEntry(T,R),_=_.insert(w,T)):ke("LocalStore","Ignoring outdated watch update for ",w,". Current version:",N.version," Watch version:",T.version)}),_})}function bL(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function jy(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(c=>c?(o=c,Te.resolve(o)):t.He.allocateTargetId(r).next(f=>(o=new Ha(e,f,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function $y(n,e,t){return pM.apply(this,arguments)}function pM(){return(pM=(0,pe.Z)(function*(n,e,t){const r=Fe(n),o=r.qn.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!$a(f))throw f;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)})).apply(this,arguments)}function VT(n,e,t){const r=Fe(n);let o=At.min(),c=ln();return r.persistence.runTransaction("Execute query","readonly",f=>function(_,w,T){const N=Fe(_),R=N.Kn.get(T);return void 0!==R?Te.resolve(N.qn.get(R)):N.He.getTargetData(w,T)}(r,f,Xo(e)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(f,_.targetId).next(w=>{c=w})}).next(()=>r.Un.getDocumentsMatchingQuery(f,e,t?o:At.min(),t?c:ln())).next(_=>({documents:_,zn:c})))}function DO(n,e){const t=Fe(n),r=Fe(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Et(c,e).next(f=>f?f.target:null))}function CO(n){const e=Fe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const f=Fe(r);let _=bo(),w=Vu(c);const T=Br(o),N=IDBKeyRange.lowerBound(w,!0);return T.jt({index:nr.readTimeIndex,range:N},(R,V)=>{const $=Jw(f.k,V);_=_.insert($.key,$),w=V.readTime}).next(()=>({In:_,readTime:By(w)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function gM(){return(gM=(0,pe.Z)(function*(n){const e=Fe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Br(r);let c=At.min();return o.jt({index:nr.readTimeIndex,reverse:!0},(f,_,w)=>{_.readTime&&(c=By(_.readTime)),w.done()}).next(()=>c)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function mM(){return(mM=(0,pe.Z)(function*(n,e,t,r){const o=Fe(n);let c=ln(),f=bo(),_=yT();for(const N of t){const R=e.Hn(N.metadata.name);N.document&&(c=c.add(R)),f=f.insert(R,e.Jn(N)),_=_.insert(R,e.Yn(N.metadata.readTime))}const w=o.Qn.newChangeBuffer({trackRemovals:!0}),T=yield jy(o,(N=r,Xo(Md(on.fromString(`__bundle__/docs/${N}`)))));var N;return o.persistence.runTransaction("Apply bundle documents","readwrite",N=>EO(N,w,f,At.min(),_).next(R=>(w.apply(N),R)).next(R=>o.He.removeMatchingKeysForTargetId(N,T.targetId).next(()=>o.He.addMatchingKeys(N,c,T.targetId)).next(()=>o.Wn.Vn(N,R)).next(()=>R)))})).apply(this,arguments)}function DL(n,e){return _M.apply(this,arguments)}function _M(){return(_M=(0,pe.Z)(function*(n,e,t=ln()){const r=yield jy(n,Xo(OT(e.bundledQuery))),o=Fe(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const f=ri(e.readTime);if(r.snapshotVersion.compareTo(f)>=0)return o.Ye.saveNamedQuery(c,e);const _=r.withResumeToken(vi.EMPTY_BYTE_STRING,f);return o.qn=o.qn.insert(_.targetId,_),o.He.updateTargetData(c,_).next(()=>o.He.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.He.addMatchingKeys(c,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(c,e))})})).apply(this,arguments)}class CL{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Te.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:ri(r.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:OT(r.bundledQuery),readTime:ri(r.readTime)}),Te.resolve();var r}}class yM{constructor(){this.ts=new tr(Vi.es),this.ns=new tr(Vi.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Vi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ye(new on([])),r=new Vi(t,e),o=new Vi(t,e+1),c=[];return this.ns.forEachInRange([r,o],f=>{this.os(f),c.push(f.key)}),c}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Ye(new on([])),r=new Vi(t,e),o=new Vi(t,e+1);let c=ln();return this.ns.forEachInRange([r,o],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new Vi(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Ye.comparator(e.key,t.key)||Bt(e.fs,t.fs)}static ss(e,t){return Bt(e.fs,t.fs)||Ye.comparator(e.key,t.key)}}class TL{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new tr(Vi.es)}checkEmpty(e){return Te.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const c=this.ds;this.ds++;const f=new Ly(c,t,r,o);this.An.push(f);for(const _ of o)this.ws=this.ws.add(new Vi(_.key,c)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return Te.resolve(f)}lookupMutationBatch(e,t){return Te.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),c=o<0?0:o;return Te.resolve(this.An.length>c?this.An[c]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Te.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),o=new Vi(t,Number.POSITIVE_INFINITY),c=[];return this.ws.forEachInRange([r,o],f=>{const _=this._s(f.fs);c.push(_)}),Te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Bt);return t.forEach(o=>{const c=new Vi(o,0),f=new Vi(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([c,f],_=>{r=r.add(_.fs)})}),Te.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Ye.isDocumentKey(c)||(c=c.child(""));const f=new Vi(new Ye(c),0);let _=new tr(Bt);return this.ws.forEachWhile(w=>{const T=w.key.path;return!!r.isPrefixOf(T)&&(T.length===o&&(_=_.add(w.fs)),!0)},f),Te.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Te.forEach(t.mutations,o=>{const c=new Vi(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Vi(t,0),o=this.ws.firstAfterOrEqual(r);return Te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Te.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class IL{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new ni(Ye.comparator),this.size=0}addEntry(e,t,r){const o=t.key,c=this.docs.get(o),f=c?c.size:0,_=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:_,readTime:r}),this.size+=_-f,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.clone():wn.newInvalidDocument(t))}getEntries(e,t){let r=bo();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.clone():wn.newInvalidDocument(o))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=bo();const c=new Ye(t.path.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:_,value:{document:w,readTime:T}}=f.getNext();if(!t.path.isPrefixOf(_.path))break;T.compareTo(r)<=0||Ig(t,w)&&(o=o.insert(w.key,w.clone()))}return Te.resolve(o)}Es(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SL(this)}getSize(e){return Te.resolve(this.size)}}class SL extends Ke{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class AL{constructor(e){this.persistence=e,this.Is=new ge(t=>Nd(t),vs),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.As=0,this.Rs=new yM,this.targetCount=0,this.Ps=h.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Te.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new h(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.ce(t),Te.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.Is.forEach((f,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Is.delete(f),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),o++)}),Te.waitFor(c).next(()=>o)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),Te.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.Rs.containsKey(t))}}class NL{constructor(e,t){this.bs={},this.Be=new ys(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new AL(this),this.Jt=new gO,this.Je=new IL(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new kT(t),this.Ye=new CL(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new TL(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new ML(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(c=>this.referenceDelegate.Ss(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ds(e,t){return Te.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class ML extends RT{constructor(e){super(),this.currentSequenceNumber=e}}class vM{constructor(e){this.persistence=e,this.Cs=new yM,this.Ns=null}static ks(e){return new vM(e)}get xs(){if(this.Ns)return this.Ns;throw Qe()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.xs,r=>{const o=Ye.fromPath(r);return this.$s(e,o).next(c=>{c||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Te.or([()=>Te.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function TO(n,e){return`firestore_clients_${n}_${e}`}function IO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bM(n,e){return`firestore_targets_${n}_${e}`}class BT{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Fs(e,t,r){const o=JSON.parse(r);let c,f="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(c=new Se(o.error.code,o.error.message))),f?new BT(e,t,o.state,c):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class t1{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Se(r.error.code,r.error.message))),c?new t1(e,r.state,o):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class UT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=My();for(let f=0;o&&f<r.activeTargetIds.length;++f)o=nT(r.activeTargetIds[f]),c=c.add(r.activeTargetIds[f]);return o?new UT(e,c):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wM{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wM(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class EM{constructor(){this.activeTargetIds=My()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DM{constructor(e,t,r,o,c){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new ni(Bt),this.started=!1,this.js=[];const f=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Qs=TO(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new EM),this.Gs=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const c=e.getItem(TO(e.persistenceKey,o));if(c){const f=UT.Fs(o,c);f&&(e.Ks=e.Ks.insert(f.clientId,f))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bM(this.persistenceKey,e));if(r){const o=t1.Fs(e,r);o&&(t=o.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bM(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(c){let f=ys.I;if(null!=c)try{const _=JSON.parse(c);dt("number"==typeof _),f=_}catch(_){Pr("SharedClientState","Failed to read sequence number from WebStorage",_)}return f}(r.newValue);o!==ys.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const o=new BT(this.currentUser,e,t,r),c=IO(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Os())}si(e){const t=IO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=bM(this.persistenceKey,e),c=new t1(e,t,r);this.setItem(o,c.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return UT.Fs(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return BT.Fs(new Pi(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return t1.Fs(o,t)}Zs(e){return wM.Fs(e)}fi(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),c=this.ei(r),f=[],_=[];return c.forEach(w=>{o.has(w)||f.push(w)}),o.forEach(w=>{c.has(w)||_.push(w)}),this.syncEngine.yi(f,_).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=My();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class SO{constructor(){this.pi=new EM,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new EM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class RL{Ei(e){}shutdown(){}}class AO{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class kL{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class OL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,c){const f=this.Ui(e,t);ke("RestConnection","Sending: ",f,r);const _={};return this.qi(_,o,c),this.Ki(e,f,_,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw vy("RestConnection",`${e} failed with error: `,w,"url: ",f,"request:",r),w})}ji(e,t,r,o,c){return this.Bi(e,t,r,o,c)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+yg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Ui(e,t){return`${this.Mi}/v1/${t}:${xL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((c,f)=>{const _=new iO;_.listenOnce(tO.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case QC.NO_ERROR:const T=_.getResponseJson();ke("Connection","XHR received:",JSON.stringify(T)),c(T);break;case QC.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),f(new Se(fe.DEADLINE_EXCEEDED,"Request time out"));break;case QC.HTTP_ERROR:const N=_.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',N,"response text:",_.getResponseText()),N>0){const R=_.getResponseJson().error;if(R&&R.status&&R.message){const V=function($){const ee=$.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ee)>=0?ee:fe.UNKNOWN}(R.status);f(new Se(V,R.message))}else f(new Se(fe.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Se(fe.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);_.send(t,"POST",w,r,15)})}Qi(e,t,r){const o=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Xk(),f=eO(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new rO({})),this.qi(_.initMessageHeaders,t,r),(0,ct.uI)()||(0,ct.b$)()||(0,ct.d)()||(0,ct.w1)()||(0,ct.Mn)()||(0,ct.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,_);const T=c.createWebChannel(w,_);let N=!1,R=!1;const V=new kL({Vi:ee=>{R?ke("Connection","Not sending because WebChannel is closed:",ee):(N||(ke("Connection","Opening WebChannel transport."),T.open(),N=!0),ke("Connection","WebChannel sending:",ee),T.send(ee))},Si:()=>T.close()}),$=(ee,me,Ce)=>{ee.listen(me,Xe=>{try{Ce(Xe)}catch(ze){setTimeout(()=>{throw ze},0)}})};return $(T,mw.EventType.OPEN,()=>{R||ke("Connection","WebChannel transport opened.")}),$(T,mw.EventType.CLOSE,()=>{R||(R=!0,ke("Connection","WebChannel transport closed"),V.Fi())}),$(T,mw.EventType.ERROR,ee=>{R||(R=!0,vy("Connection","WebChannel transport errored:",ee),V.Fi(new Se(fe.UNAVAILABLE,"The operation could not be completed")))}),$(T,mw.EventType.MESSAGE,ee=>{var me;if(!R){const Ce=ee.data[0];dt(!!Ce);const Xe=Ce,ze=Xe.error||(null===(me=Xe[0])||void 0===me?void 0:me.error);if(ze){ke("Connection","WebChannel received error:",ze);const Ct=ze.status;let nt=function(Ur){const ju=br[Ur];if(void 0!==ju)return _T(ju)}(Ct),Kt=ze.message;void 0===nt&&(nt=fe.INTERNAL,Kt="Unknown error status: "+Ct+" with message "+ze.message),R=!0,V.Fi(new Se(nt,Kt)),T.close()}else ke("Connection","WebChannel received:",Ce),V.Oi(Ce)}}),$(f,nO.STAT_EVENT,ee=>{ee.stat===EN.PROXY?ke("Connection","Detected buffering proxy"):ee.stat===EN.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.$i()},0),V}}function NO(){return"undefined"!=typeof window?window:null}function jT(){return"undefined"!=typeof document?document:null}function n1(n){return new pO(n,!0)}class CM{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=c,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class MO{constructor(e,t,r,o,c,f,_,w){this.Oe=e,this.nr=r,this.sr=o,this.ir=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=w,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new CM(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,pe.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,pe.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Se(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,pe.Z)(function*(){e.state=0,e.start()}))}Ar(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PL extends MO{constructor(e,t,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,f),this.k=c}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Qe(),o=e.targetChange.targetIds||[],c=function(w,T){return w.C?(dt(void 0===T||"string"==typeof T),vi.fromBase64String(T||"")):(dt(void 0===T||T instanceof Uint8Array),vi.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(w){const T=void 0===w.code?fe.UNKNOWN:_T(w.code);return new Se(T,w.message||"")}(f);t=new bT(r,o,c,_||null)}else if("documentChange"in e){const r=e.documentChange,o=Ua(n,r.document.name),c=ri(r.document.updateTime),f=new Li({mapValue:{fields:r.document.fields}}),_=wn.newFoundDocument(o,c,f);t=new xy(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=Ua(n,r.document),c=r.readTime?ri(r.readTime):At.min(),f=wn.newNoDocument(o,c);t=new xy([],r.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const r=e.documentRemove,o=Ua(n,r.document);t=new xy([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,c=new zN(r.count||0);t=new vT(r.targetId,c)}}var w;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return At.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?ri(c.readTime):At.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=Tf(this.k),t.addTarget=function(o,c){let f;const _=c.target;return f=Dy(_)?{documents:Rg(o,_)}:{query:$w(o,_)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?f.resumeToken=DT(o,c.resumeToken):c.snapshotVersion.compareTo(At.min())>0&&(f.readTime=Od(o,c.snapshotVersion.toTimestamp())),f}(this.k,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Tf(this.k),t.removeTarget=e,this.gr(t)}}class FL extends MO{constructor(e,t,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,f),this.k=c,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let c=ri(r.updateTime?r.updateTime:o);return c.isEqual(At.min())&&(c=ri(o)),new Fw(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.Cr(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Tf(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>If(this.k,r))};this.gr(t)}}class LL extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Fr(){if(this.$r)throw new Se(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.ir.Bi(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(fe.UNKNOWN,o.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.ir.ji(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(fe.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class VL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Pr(t),this.Lr=!1):ke("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class BL{constructor(e,t,r,o,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=c,this.Hr.Ei(_=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;Of(f)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(T){const N=Fe(T);N.Gr.add(4),yield Hy(N),N.Jr.set("Unknown"),N.Gr.delete(4),yield r1(N)}),function(T){return w.apply(this,arguments)})(f))}))}),this.Jr=new VL(r,o)}}function r1(n){return TM.apply(this,arguments)}function TM(){return(TM=(0,pe.Z)(function*(n){if(Of(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function Hy(n){return IM.apply(this,arguments)}function IM(){return(IM=(0,pe.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function $T(n,e){const t=Fe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),NM(t)?AM(t):qy(t).lr()&&SM(t,e))}function i1(n,e){const t=Fe(n),r=qy(t);t.Wr.delete(e),r.lr()&&RO(t,e),0===t.Wr.size&&(r.lr()?r._r():Of(t)&&t.Jr.set("Unknown"))}function SM(n,e){n.Yr.X(e.targetId),qy(n).br(e)}function RO(n,e){n.Yr.X(e),qy(n).vr(e)}function AM(n){n.Yr=new wT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),qy(n).start(),n.Jr.Br()}function NM(n){return Of(n)&&!qy(n).hr()&&n.Wr.size>0}function Of(n){return 0===Fe(n).Gr.size}function xO(n){n.Yr=void 0}function UL(n){return MM.apply(this,arguments)}function MM(){return(MM=(0,pe.Z)(function*(n){n.Wr.forEach((e,t)=>{SM(n,e)})})).apply(this,arguments)}function jL(n,e){return RM.apply(this,arguments)}function RM(){return(RM=(0,pe.Z)(function*(n,e){xO(n),NM(n)?(n.Jr.Kr(e),AM(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function $L(n,e,t){return xM.apply(this,arguments)}function xM(){return(xM=(0,pe.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof bT&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,c){const f=c.cause;for(const _ of c.targetIds)o.Wr.has(_)&&(yield o.remoteSyncer.rejectListen(_,f),o.Wr.delete(_),o.Yr.removeTarget(_))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HT(n,r)}else if(e instanceof xy?n.Yr.ot(e):e instanceof vT?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(At.min()))try{const r=yield wO(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const f=o.Yr.gt(c);return f.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const T=o.Wr.get(w);T&&o.Wr.set(w,T.withResumeToken(_.resumeToken,c))}}),f.targetMismatches.forEach(_=>{const w=o.Wr.get(_);if(!w)return;o.Wr.set(_,w.withResumeToken(vi.EMPTY_BYTE_STRING,w.snapshotVersion)),RO(o,_);const T=new Ha(w.target,_,1,w.sequenceNumber);SM(o,T)}),o.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield HT(n,r)}var r})).apply(this,arguments)}function HT(n,e,t){return kM.apply(this,arguments)}function kM(){return(kM=(0,pe.Z)(function*(n,e,t){if(!$a(e))throw e;n.Gr.add(1),yield Hy(n),n.Jr.set("Offline"),t||(t=()=>wO(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield r1(n)}))})).apply(this,arguments)}function kO(n,e){return e().catch(t=>HT(n,t,e))}function Gy(n){return OM.apply(this,arguments)}function OM(){return(OM=(0,pe.Z)(function*(n){const e=Fe(n),t=Pf(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;HL(e);)try{const o=yield bL(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,GL(e,o)}catch(o){yield HT(e,o)}OO(e)&&PO(e)})).apply(this,arguments)}function HL(n){return Of(n)&&n.Qr.length<10}function GL(n,e){n.Qr.push(e);const t=Pf(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function OO(n){return Of(n)&&!Pf(n).hr()&&n.Qr.length>0}function PO(n){Pf(n).start()}function qL(n){return PM.apply(this,arguments)}function PM(){return(PM=(0,pe.Z)(function*(n){Pf(n).kr()})).apply(this,arguments)}function WL(n){return FM.apply(this,arguments)}function FM(){return(FM=(0,pe.Z)(function*(n){const e=Pf(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function zL(n,e,t){return LM.apply(this,arguments)}function LM(){return(LM=(0,pe.Z)(function*(n,e,t){const r=n.Qr.shift(),o=Vy.from(r,e,t);yield kO(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Gy(n)})).apply(this,arguments)}function ZL(n,e){return VM.apply(this,arguments)}function VM(){return(VM=(0,pe.Z)(function*(n,e){var t;e&&Pf(n).Sr&&(yield(t=(0,pe.Z)(function*(r,o){if(mT(c=o.code)&&c!==fe.ABORTED){const f=r.Qr.shift();Pf(r).wr(),yield kO(r,()=>r.remoteSyncer.rejectFailedWrite(f.batchId,o)),yield Gy(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),OO(n)&&PO(n)})).apply(this,arguments)}function BM(n,e){return UM.apply(this,arguments)}function UM(){return(UM=(0,pe.Z)(function*(n,e){const t=Fe(n);e?(t.Gr.delete(2),yield r1(t)):e||(t.Gr.add(2),yield Hy(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function qy(n){return n.Xr||(n.Xr=function(e,t,r){const o=Fe(e);return o.Fr(),new PL(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:UL.bind(null,n),Ni:jL.bind(null,n),Pr:$L.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Xr.wr(),NM(n)?AM(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),xO(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Pf(n){return n.Zr||(n.Zr=function(e,t,r){const o=Fe(e);return o.Fr(),new FL(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:qL.bind(null,n),Ni:ZL.bind(null,n),Nr:WL.bind(null,n),Cr:zL.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Zr.wr(),yield Gy(n)):(yield n.Zr.stop(),n.Qr.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class jM{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,r,o,c){const f=Date.now()+r,_=new jM(e,t,f,o,c);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wy(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),$a(n))return new Se(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class zy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Vw(),this.sortedSet=new ni(this.comparator)}static emptySet(e){return new zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FO{constructor(){this.eo=new ni(Ye.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Qe():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zy{constructor(e,t,r,o,c,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Zy(e,t,zy.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class YL{constructor(){this.so=void 0,this.listeners=[]}}class KL{constructor(){this.queries=new ge(e=>Mw(e),wf),this.onlineState="Unknown",this.io=new Set}}function $M(n,e){return HM.apply(this,arguments)}function HM(){return(HM=(0,pe.Z)(function*(n,e){const t=Fe(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new YL),o)try{c.so=yield t.onListen(r)}catch(f){const _=Wy(f,`Initialization of query '${Rw(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,c),c.listeners.push(e),e.ro(t.onlineState),c.so&&e.oo(c.so)&&WM(t)})).apply(this,arguments)}function GM(n,e){return qM.apply(this,arguments)}function qM(){return(qM=(0,pe.Z)(function*(n,e){const t=Fe(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function JL(n,e){const t=Fe(n);let r=!1;for(const o of e){const f=t.queries.get(o.query);if(f){for(const _ of f.listeners)_.oo(o)&&(r=!0);f.so=o}}r&&WM(t)}function QL(n,e,t){const r=Fe(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function WM(n){n.io.forEach(e=>{e.next()})}class zM{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Zy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Zy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class XL{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class LO{constructor(e){this.k=e}Hn(e){return Ua(this.k,e)}Jn(e){return e.metadata.exists?Uw(this.k,e.document,!1):wn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return ri(e)}}class e2{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=VO(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new LO(this.k);for(const o of e)if(o.metadata.queries){const c=r.Hn(o.metadata.name);for(const f of o.metadata.queries){const _=(t.get(f)||ln()).add(c);t.set(f,_)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function(n,e,t,r){return mM.apply(this,arguments)}(e.localStore,new LO(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield DL(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new e1(Object.assign({},e.progress),t)})()}}function VO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class BO{constructor(e){this.key=e}}class UO{constructor(e){this.key=e}}class jO{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=ln(),this.mutatedKeys=ln(),this.Ao=cT(e),this.Ro=new zy(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new FO,o=t?t.Ro:this.Ro;let c=t?t.mutatedKeys:this.mutatedKeys,f=o,_=!1;const w=Ql(this.query)&&o.size===this.query.limit?o.last():null,T=bf(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((N,R)=>{const V=o.get(N),$=Ig(this.query,R)?R:null,ee=!!V&&this.mutatedKeys.has(V.key),me=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Ce=!1;V&&$?V.data.isEqual($.data)?ee!==me&&(r.track({type:3,doc:$}),Ce=!0):this.Vo(V,$)||(r.track({type:2,doc:$}),Ce=!0,(w&&this.Ao($,w)>0||T&&this.Ao($,T)<0)&&(_=!0)):!V&&$?(r.track({type:0,doc:$}),Ce=!0):V&&!$&&(r.track({type:1,doc:V}),Ce=!0,(w||T)&&(_=!0)),Ce&&($?(f=f.add($),c=me?c.add(N):c.delete(N)):(f=f.delete(N),c=c.delete(N)))}),Ql(this.query)||bf(this.query))for(;f.size>this.query.limit;){const N=Ql(this.query)?f.last():f.first();f=f.delete(N.key),c=c.delete(N.key),r.track({type:1,doc:N})}return{Ro:f,vo:r,Bn:_,mutatedKeys:c}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const c=e.vo.no();c.sort((T,N)=>function(R,V){const $=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return $(R)-$(V)}(T.type,N.type)||this.Ao(T.doc,N.doc)),this.So(r);const f=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,w=_!==this.Eo;return this.Eo=_,0!==c.length||w?{snapshot:new Zy(this.query,e.Ro,o,c,e.mutatedKeys,0===_,w,!1),Co:f}:{Co:f}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new FO,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=ln(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new UO(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new BO(r))}),t}ko(e){this.To=e.zn,this.Io=ln();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Zy.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class t2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class n2{constructor(e){this.key=e,this.$o=!1}}class r2{constructor(e,t,r,o,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Fo={},this.Oo=new ge(_=>Mw(_),wf),this.Mo=new Map,this.Lo=new Set,this.Bo=new ni(Ye.comparator),this.Uo=new Map,this.qo=new yM,this.Ko={},this.jo=new Map,this.Qo=h.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function i2(n,e){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,pe.Z)(function*(n,e){const t=_R(n);let r,o;const c=t.Oo.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.xo();else{const f=yield jy(t.localStore,Xo(e)),_=t.sharedClientState.addLocalQueryTarget(f.targetId);r=f.targetId,o=yield YM(t,e,r,"current"===_),t.isPrimaryClient&&$T(t.remoteStore,f)}return o})).apply(this,arguments)}function YM(n,e,t,r){return KM.apply(this,arguments)}function KM(){return(KM=(0,pe.Z)(function*(n,e,t,r){n.Go=(N,R,V)=>{return($=(0,pe.Z)(function*(ee,me,Ce,Xe){let ze=me.view.bo(Ce);ze.Bn&&(ze=yield VT(ee.localStore,me.query,!1).then(({documents:Kt})=>me.view.bo(Kt,ze)));const Ct=Xe&&Xe.targetChanges.get(me.targetId),nt=me.view.applyChanges(ze,ee.isPrimaryClient,Ct);return oR(ee,me.targetId,nt.Co),nt.snapshot}),function(ee,me,Ce,Xe){return $.apply(this,arguments)})(n,N,R,V);var $};const o=yield VT(n.localStore,e,!0),c=new jO(e,o.zn),f=c.bo(o.documents),_=Ry.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=c.applyChanges(f,n.isPrimaryClient,_);oR(n,t,w.Co);const T=new t2(e,t,c);return n.Oo.set(e,T),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),w.snapshot})).apply(this,arguments)}function s2(n,e){return JM.apply(this,arguments)}function JM(){return(JM=(0,pe.Z)(function*(n,e){const t=Fe(n),r=t.Oo.get(e),o=t.Mo.get(r.targetId);if(o.length>1)return t.Mo.set(r.targetId,o.filter(c=>!wf(c,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $y(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),i1(t.remoteStore,r.targetId),Yy(t,r.targetId)}).catch(A))):(Yy(t,r.targetId),yield $y(t.localStore,r.targetId,!0))})).apply(this,arguments)}function QM(){return(QM=(0,pe.Z)(function*(n,e,t){const r=yR(n);try{const o=yield function(c,f){const _=Fe(c),w=yi.now(),T=f.reduce((R,V)=>R.add(V.key),ln());let N;return _.persistence.runTransaction("Locally write mutations","readwrite",R=>_.Wn.vn(R,T).next(V=>{N=V;const $=[];for(const ee of f){const me=ti(ee,N.get(ee.key));null!=me&&$.push(new kd(ee.key,me,sT(me.value.mapValue),vr.exists(!0)))}return _.An.addMutationBatch(R,w,$,f)})).then(R=>(R.applyToLocalDocumentSet(N),{batchId:R.batchId,changes:N}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,f,_){let w=c.Ko[c.currentUser.toKey()];w||(w=new ni(Bt)),w=w.insert(f,_),c.Ko[c.currentUser.toKey()]=w}(r,o.batchId,t),yield Bd(r,o.changes),yield Gy(r.remoteStore)}catch(o){const c=Wy(o,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function $O(n,e){return XM.apply(this,arguments)}function XM(){return(XM=(0,pe.Z)(function*(n,e){const t=Fe(n);try{const r=yield vL(t.localStore,e);e.targetChanges.forEach((o,c)=>{const f=t.Uo.get(c);f&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.$o=!0:o.modifiedDocuments.size>0?dt(f.$o):o.removedDocuments.size>0&&(dt(f.$o),f.$o=!1))}),yield Bd(t,r,e)}catch(r){yield A(r)}})).apply(this,arguments)}function HO(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((c,f)=>{const _=f.view.ro(e);_.snapshot&&o.push(_.snapshot)}),function(c,f){const _=Fe(c);_.onlineState=f;let w=!1;_.queries.forEach((T,N)=>{for(const R of N.listeners)R.ro(f)&&(w=!0)}),w&&WM(_)}(r.eventManager,e),o.length&&r.Fo.Pr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a2(n,e,t){return eR.apply(this,arguments)}function eR(){return(eR=(0,pe.Z)(function*(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),c=o&&o.key;if(c){let f=new ni(Ye.comparator);f=f.insert(c,wn.newNoDocument(c,At.min()));const _=ln().add(c),w=new Ng(At.min(),new Map,new tr(Bt),f,_);yield $O(r,w),r.Bo=r.Bo.remove(c),r.Uo.delete(e),aR(r)}else yield $y(r.localStore,e,!1).then(()=>Yy(r,e,t)).catch(A)})).apply(this,arguments)}function u2(n,e){return tR.apply(this,arguments)}function tR(){return(tR=(0,pe.Z)(function*(n,e){const t=Fe(n),r=e.batch.batchId;try{const o=yield yL(t.localStore,e);sR(t,r,null),iR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bd(t,o)}catch(o){yield A(o)}})).apply(this,arguments)}function l2(n,e,t){return nR.apply(this,arguments)}function nR(){return(nR=(0,pe.Z)(function*(n,e,t){const r=Fe(n);try{const o=yield function(c,f){const _=Fe(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return _.An.lookupMutationBatch(w,f).next(N=>(dt(null!==N),T=N.keys(),_.An.removeMutationBatch(w,N))).next(()=>_.An.performConsistencyCheck(w)).next(()=>_.Wn.vn(w,T))})}(r.localStore,e);sR(r,e,t),iR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bd(r,o)}catch(o){yield A(o)}})).apply(this,arguments)}function rR(){return(rR=(0,pe.Z)(function*(n,e){const t=Fe(n);Of(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const f=Fe(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>f.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=Wy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function iR(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function sR(n,e,t){const r=Fe(n);let o=r.Ko[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function Yy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||GO(n,r)})}function GO(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(i1(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),aR(n))}function oR(n,e,t){for(const r of t)r instanceof BO?(n.qo.addReference(r.key,e),d2(n,r)):r instanceof UO?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||GO(n,r.key)):Qe()}function d2(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.Lo.add(r),aR(n))}function aR(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Ye(on.fromString(e)),r=n.Qo.next();n.Uo.set(r,new n2(t)),n.Bo=n.Bo.insert(t,r),$T(n.remoteStore,new Ha(Xo(Md(t.path)),r,2,ys.I))}}function Bd(n,e,t){return uR.apply(this,arguments)}function uR(){return(uR=(0,pe.Z)(function*(n,e,t){const r=Fe(n),o=[],c=[],f=[];var _;r.Oo.isEmpty()||(r.Oo.forEach((_,w)=>{f.push(r.Go(w,e,t).then(T=>{if(T){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,T.fromCache?"not-current":"current"),o.push(T);const N=hM.$n(w.targetId,T);c.push(N)}}))}),yield Promise.all(f),r.Fo.Pr(o),yield(_=(0,pe.Z)(function*(w,T){const N=Fe(w);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Te.forEach(T,V=>Te.forEach(V.kn,$=>N.persistence.referenceDelegate.addReference(R,V.targetId,$)).next(()=>Te.forEach(V.xn,$=>N.persistence.referenceDelegate.removeReference(R,V.targetId,$)))))}catch(R){if(!$a(R))throw R;ke("LocalStore","Failed to update sequence numbers: "+R)}for(const R of T){const V=R.targetId;if(!R.fromCache){const $=N.qn.get(V),me=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);N.qn=N.qn.insert(V,me)}}}),function(w,T){return _.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function h2(n,e){return lR.apply(this,arguments)}function lR(){return(lR=(0,pe.Z)(function*(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield bO(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(f=>{f.forEach(_=>{_.reject(new Se(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bd(t,r.Gn)}var o})).apply(this,arguments)}function f2(n,e){const t=Fe(n),r=t.Uo.get(e);if(r&&r.$o)return ln().add(r.key);{let o=ln();const c=t.Mo.get(e);if(!c)return o;for(const f of c){const _=t.Oo.get(f);o=o.unionWith(_.view.Po)}return o}}function p2(n,e){return cR.apply(this,arguments)}function cR(){return(cR=(0,pe.Z)(function*(n,e){const t=Fe(n),r=yield VT(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&oR(t,e.targetId,o.Co),o})).apply(this,arguments)}function g2(n){return dR.apply(this,arguments)}function dR(){return(dR=(0,pe.Z)(function*(n){const e=Fe(n);return CO(e.localStore).then(t=>Bd(e,t))})).apply(this,arguments)}function m2(n,e,t,r){return hR.apply(this,arguments)}function hR(){return(hR=(0,pe.Z)(function*(n,e,t,r){const o=Fe(n),c=yield function(f,_){const w=Fe(f),T=Fe(w.An);return w.persistence.runTransaction("Lookup mutation documents","readonly",N=>T.Zt(N,_).next(R=>R?w.Wn.vn(N,R):Te.resolve(null)))}(o.localStore,e);var _;null!==c?("pending"===t?yield Gy(o.remoteStore):"acknowledged"===t||"rejected"===t?(sR(o,e,r||null),iR(o,e),_=e,Fe(Fe(o.localStore).An).ee(_)):Qe(),yield Bd(o,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function fR(){return(fR=(0,pe.Z)(function*(n,e){const t=Fe(n);if(_R(t),yR(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield qO(t,r.toArray());t.Wo=!0,yield BM(t.remoteStore,!0);for(const c of o)$T(t.remoteStore,c)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Mo.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?r.push(f):o=o.then(()=>(Yy(t,f),$y(t.localStore,f,!0))),i1(t.remoteStore,f)}),yield o,yield qO(t,r),function(c){const f=Fe(c);f.Uo.forEach((_,w)=>{i1(f.remoteStore,w)}),f.qo.hs(),f.Uo=new Map,f.Bo=new ni(Ye.comparator)}(t),t.Wo=!1,yield BM(t.remoteStore,!1)}})).apply(this,arguments)}function qO(n,e,t){return pR.apply(this,arguments)}function pR(){return(pR=(0,pe.Z)(function*(n,e,t){const r=Fe(n),o=[],c=[];for(const f of e){let _;const w=r.Mo.get(f);if(w&&0!==w.length){_=yield jy(r.localStore,Xo(w[0]));for(const T of w){const N=r.Oo.get(T),R=yield p2(r,N);R.snapshot&&c.push(R.snapshot)}}else{const T=yield DO(r.localStore,f);_=yield jy(r.localStore,T),yield YM(r,WO(T),f,!1)}o.push(_)}return r.Fo.Pr(c),o})).apply(this,arguments)}function WO(n){return lT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function y2(n){const e=Fe(n);return Fe(Fe(e.localStore).persistence).Tn()}function v2(n,e,t,r){return gR.apply(this,arguments)}function gR(){return(gR=(0,pe.Z)(function*(n,e,t,r){const o=Fe(n);if(o.Wo)ke("SyncEngine","Ignoring unexpected query state notification.");else if(o.Mo.has(e))switch(t){case"current":case"not-current":{const c=yield CO(o.localStore),f=Ng.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Bd(o,c,f);break}case"rejected":yield $y(o.localStore,e,!0),Yy(o,e,r);break;default:Qe()}})).apply(this,arguments)}function b2(n,e,t){return mR.apply(this,arguments)}function mR(){return(mR=(0,pe.Z)(function*(n,e,t){const r=_R(n);if(r.Wo){for(const o of e){if(r.Mo.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const c=yield DO(r.localStore,o),f=yield jy(r.localStore,c);yield YM(r,WO(c),f.targetId,!1),$T(r.remoteStore,f)}for(const o of t)r.Mo.has(o)&&(yield $y(r.localStore,o,!1).then(()=>{i1(r.remoteStore,o),Yy(r,o)}).catch(A))}})).apply(this,arguments)}function _R(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$O.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a2.bind(null,e),e.Fo.Pr=JL.bind(null,e.eventManager),e.Fo.zo=QL.bind(null,e.eventManager),e}function yR(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l2.bind(null,e),e}class zO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.k=n1(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return vO(this.persistence,new yO,e.initialUser,this.k)}Yo(e){return new NL(vM.ks,this.k)}Jo(e){return new SO}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ZO extends zO{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield function(n){return gM.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield yR(r.ta.syncEngine),yield Gy(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return vO(this.persistence,new yO,e.initialUser,this.k)}Xo(e){return new Y(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new Pg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NO(),jT(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new SO}}class E2 extends ZO{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.ta.syncEngine;r.sharedClientState instanceof DM&&(r.sharedClientState.syncEngine={mi:m2.bind(null,o),gi:v2.bind(null,o),yi:b2.bind(null,o),Tn:y2.bind(null,o),_i:g2.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var c=(0,pe.Z)(function*(f){yield function(n,e){return fR.apply(this,arguments)}(r.ta.syncEngine,f),r.gcScheduler&&(f&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):f||r.gcScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}Jo(e){const t=NO();if(!DM.bt(t))throw new Se(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class vR{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>HO(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=h2.bind(null,r.syncEngine),yield BM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KL}createDatastore(e){const t=n1(e.databaseInfo.databaseId),r=new OL(e.databaseInfo);return new LL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=_=>HO(this.syncEngine,_,0),f=AO.bt()?new AO:new RL,new BL(t,r,o,c,f);var t,r,o,c,f}createSyncEngine(e,t){return function(r,o,c,f,_,w,T){const N=new r2(r,o,c,f,_,w);return T&&(N.Wo=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Fe(t);ke("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield Hy(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YO(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class D2{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,pe.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),o=Number(r);isNaN(o)&&e.aa(`length string (${r}) is not valid number`);const c=yield e.ca(o);return new XL(JSON.parse(c),t.length+o)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,pe.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,pe.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class C2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(c,f){const _=Fe(c),w=Tf(_.k)+"/documents",T={documents:f.map($=>Mg(_.k,$))},N=yield _.ji("BatchGetDocuments",w,T),R=new Map;N.forEach($=>{const ee=function(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=Ua(t,r.found.name),c=ri(r.found.updateTime),f=new Li({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(o,c,f)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=Ua(t,r.missing),c=ri(r.readTime);return wn.newNoDocument(o,c)}(n,e):Qe()}(_.k,$);R.set(ee.key.toString(),ee)});const V=[];return f.forEach($=>{const ee=R.get($.toString());dt(!!ee),V.push(ee)}),V}),function(c,f){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ay(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=Ye.fromPath(o);e.mutations.push(new gT(c,e.precondition(c)))}),yield(r=(0,pe.Z)(function*(o,c){const f=Fe(o),_=Tf(f.k)+"/documents",w={writes:c.map(T=>If(f.k,T))};yield f.Bi("Commit",_,w)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Se(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class T2{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.la=5,this.ur=new CM(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,pe.Z)(function*(){const t=new C2(e.datastore),r=e.da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.wa(c)}))}).catch(o=>{e.wa(o)})}))}da(e){try{const t=this.updateFunction(e);return!Sd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mT(t)}return!1}}class I2{constructor(e,t,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Pi.UNAUTHENTICATED,this.clientId=NN.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var f=(0,pe.Z)(function*(_){ke("FirestoreClient","Received user=",_.uid),yield c.authCredentialListener(_),c.user=_});return function(_){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Wy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function KO(n,e){return bR.apply(this,arguments)}function bR(){return(bR=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(c){r.isEqual(c)||(yield bO(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function JO(n,e){return wR.apply(this,arguments)}function wR(){return(wR=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ER(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(c=(0,pe.Z)(function*(f,_){const w=Fe(f);w.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const T=Of(w);w.Gr.add(3),yield Hy(w),T&&w.Jr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(_),w.Gr.delete(3),yield r1(w)}),function(f,_){return c.apply(this,arguments)})(e.remoteStore,o);var c}),n.onlineComponents=e})).apply(this,arguments)}function ER(n){return DR.apply(this,arguments)}function DR(){return(DR=(0,pe.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield KO(n,new zO)),n.offlineComponents})).apply(this,arguments)}function qT(n){return CR.apply(this,arguments)}function CR(){return(CR=(0,pe.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield JO(n,new vR)),n.onlineComponents})).apply(this,arguments)}function QO(n){return ER(n).then(e=>e.persistence)}function TR(n){return ER(n).then(e=>e.localStore)}function XO(n){return qT(n).then(e=>e.remoteStore)}function IR(n){return qT(n).then(e=>e.syncEngine)}function Ky(n){return SR.apply(this,arguments)}function SR(){return(SR=(0,pe.Z)(function*(n){const e=yield qT(n),t=e.eventManager;return t.onListen=i2.bind(null,e.syncEngine),t.onUnlisten=s2.bind(null,e.syncEngine),t})).apply(this,arguments)}function eP(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,c,f,_,w){const T=new GT({next:R=>{c.enqueueAndForget(()=>GM(o,N));const V=R.docs.has(f);!V&&R.fromCache?w.reject(new Se(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&R.fromCache&&_&&"server"===_.source?w.reject(new Se(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),N=new zM(Md(f.path),T,{includeMetadataChanges:!0,wo:!0});return $M(o,N)}(yield Ky(n),n.asyncQueue,e,t,r)})),r.promise}function tP(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,c,f,_,w){const T=new GT({next:R=>{c.enqueueAndForget(()=>GM(o,N)),R.fromCache&&"server"===_.source?w.reject(new Se(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),N=new zM(f,T,{includeMetadataChanges:!0,wo:!0});return $M(o,N)}(yield Ky(n),n.asyncQueue,e,t,r)})),r.promise}class P2{constructor(e,t,r,o,c,f,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.useFetchStreams=w}}class Jy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jy&&e.projectId===this.projectId&&e.database===this.database}}const nP=new Map;function AR(n,e,t){if(!t)throw new Se(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rP(n,e,t,r){if(!0===e&&!0===r)throw new Se(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iP(n){if(!Ye.isDocumentKey(n))throw new Se(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sP(n){if(Ye.isDocumentKey(n))throw new Se(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WT(n);throw new Se(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oP(n,e){if(e<=0)throw new Se(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s1{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aP({}),this._settingsFrozen=!1,e instanceof Jy?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Se(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jy(o.options.projectId)}(e))}get app(){if(!this._app)throw new Se(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new IN;switch(t.type){case"gapi":const r=t.client;return dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new SN(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nP.get(e);t&&(ke("ComponentProvider","Removing Datastore"),nP.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class oc extends Es{constructor(e,t,r){super(e,t,Md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Ye(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function uP(n,e,...t){if(n=(0,ct.m9)(n),AR("collection","path",e),n instanceof s1){const r=on.fromString(e,...t);return sP(r),new oc(n,null,r)}{if(!(n instanceof zn||n instanceof oc))throw new Se(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return sP(r),new oc(n.firestore,null,r)}}function zT(n,e,...t){if(n=(0,ct.m9)(n),1===arguments.length&&(e=NN.A()),AR("doc","path",e),n instanceof s1){const r=on.fromString(e,...t);return iP(r),new zn(n,null,new Ye(r))}{if(!(n instanceof zn||n instanceof oc))throw new Se(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return iP(r),new zn(n.firestore,n instanceof oc?n.converter:null,new Ye(r))}}function lP(n,e){return n=(0,ct.m9)(n),e=(0,ct.m9)(e),(n instanceof zn||n instanceof oc)&&(e instanceof zn||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cP(n,e){return n=(0,ct.m9)(n),e=(0,ct.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&wf(n._query,e._query)&&n.converter===e.converter}class V2{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new CM(this,"async_queue_retry"),this.Ra=()=>{const t=jT();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=jT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=jT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Qr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,pe.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!$a(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const o=jM.createAndSchedule(this,e,t,r,c=>this.Va(c));return this.pa.push(o),o}Pa(){this.Ta&&Qe()}verifyOperationInProgress(){}Sa(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function NR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class B2{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends s1{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new V2,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dP(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||dP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dP(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new P2(n._databaseId,c,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;n._firestoreClient=new I2(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hP(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield KO(n,t),yield JO(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function fP(n){if(n._initialized||n._terminated)throw new Se(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(vi.fromBase64String(e))}catch(t){throw new Se(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lg{constructor(e){this._methodName=e}}class ZT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const Y2=/^__.*__$/;class K2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sg(e,this.data,t,this.fieldTransforms)}}class pP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class YT{constructor(e,t,r,o,c,f){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===c&&this.ka(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new YT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.Ma(e),o}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.ka(),o}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return JT(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(gP(this.xa)&&Y2.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class J2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||n1(e)}ja(e,t,r,o=!1){return new YT({xa:e,methodName:t,Ka:r,path:Fi.emptyPath(),Oa:!1,qa:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Vg(n){const e=n._freezeSettings(),t=n1(n._databaseId);return new J2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KT(n,e,t,r,o,c={}){const f=n.ja(c.merge||c.mergeFields?2:0,e,t,o);kR("Data must be an object, but it was:",f,r);const _=yP(r,f);let w,T;if(c.merge)w=new Yl(f.fieldMask),T=f.fieldTransforms;else if(c.mergeFields){const N=[];for(const R of c.mergeFields){const V=OR(e,R,t);if(!f.contains(V))throw new Se(fe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);bP(N,V)||N.push(V)}w=new Yl(N),T=f.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,T=f.fieldTransforms;return new K2(new Li(_),w,T)}class o1 extends Lg{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o1}}function mP(n,e,t){return new YT({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class MR extends Lg{_toFieldTransform(e){return new Df(e.path,new Rd)}isEqual(e){return e instanceof MR}}class Q2 extends Lg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.Qa.map(c=>Bg(c,t)),o=new Xl(r);return new Df(e.path,o)}isEqual(e){return this===e}}class X2 extends Lg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.Qa.map(c=>Bg(c,t)),o=new Ba(r);return new Df(e.path,o)}isEqual(e){return this===e}}class eV extends Lg{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Ef(e.k,HN(e.k,this.Wa));return new Df(e.path,t)}isEqual(e){return this===e}}function RR(n,e,t,r){const o=n.ja(1,e,t);kR("Data must be an object, but it was:",o,r);const c=[],f=Li.empty();Td(r,(w,T)=>{const N=PR(e,w,t);T=(0,ct.m9)(T);const R=o.La(N);if(T instanceof o1)c.push(N);else{const V=Bg(T,R);null!=V&&(c.push(N),f.set(N,V))}});const _=new Yl(c);return new pP(f,_,o.fieldTransforms)}function xR(n,e,t,r,o,c){const f=n.ja(1,e,t),_=[OR(e,r,t)],w=[o];if(c.length%2!=0)throw new Se(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<c.length;V+=2)_.push(OR(e,c[V])),w.push(c[V+1]);const T=[],N=Li.empty();for(let V=_.length-1;V>=0;--V)if(!bP(T,_[V])){const $=_[V];let ee=w[V];ee=(0,ct.m9)(ee);const me=f.La($);if(ee instanceof o1)T.push($);else{const Ce=Bg(ee,me);null!=Ce&&(T.push($),N.set($,Ce))}}const R=new Yl(T);return new pP(N,R,f.fieldTransforms)}function _P(n,e,t,r=!1){return Bg(t,n.ja(r?4:3,e))}function Bg(n,e){if(vP(n=(0,ct.m9)(n)))return kR("Unsupported field value:",e,n),yP(n,e);if(n instanceof Lg)return function(t,r){if(!gP(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const f of t){let _=Bg(f,r.Ba(c));null==_&&(_={nullValue:"NULL_VALUE"}),o.push(_),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,ct.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HN(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=yi.fromDate(t);return{timestampValue:Od(r.k,o)}}if(t instanceof yi){const o=new yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Od(r.k,o)}}if(t instanceof ZT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:DT(r.k,t._byteString)};if(t instanceof zn){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Ua(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${WT(t)}`)}(n,e)}function yP(n,e){const t={};return RN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Td(n,(r,o)=>{const c=Bg(o,e.Fa(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function vP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yi||n instanceof ZT||n instanceof ac||n instanceof zn||n instanceof Lg)}function kR(n,e,t){if(!vP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=WT(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function OR(n,e,t){if((e=(0,ct.m9)(e))instanceof Ud)return e._internalPath;if("string"==typeof e)return PR(n,e);throw JT("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const tV=new RegExp("[~\\*/\\[\\]]");function PR(n,e,t){if(e.search(tV)>=0)throw JT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ud(...e.split("."))._internalPath}catch(r){throw JT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JT(n,e,t,r,o){const c=r&&!r.isEmpty(),f=void 0!==o;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let w="";return(c||f)&&(w+=" (found",c&&(w+=` in field ${r}`),f&&(w+=` in document ${o}`),w+=")"),new Se(fe.INVALID_ARGUMENT,_+n+w)}function bP(n,e){return n.some(t=>t.isEqual(e))}class a1{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nV extends a1{data(){return super.data()}}function QT(n,e){return"string"==typeof e?PR(n,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}class Ug{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends a1{constructor(e,t,r,o,c,f){super(e,t,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new u1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class u1 extends jd{data(e={}){return super.data(e)}}class Ff{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ug(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new u1(this._firestore,this._userDataWriter,r.key,r,new Ug(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(f=>({type:"added",doc:new u1(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Ug(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>o||3!==f.type).map(f=>{const _=new u1(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Ug(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,T=-1;return 0!==f.type&&(w=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),T=c.indexOf(f.doc.key)),{type:rV(f.type),doc:_,oldIndex:w,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function wP(n,e){return n instanceof jd&&e instanceof jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ff&&e instanceof Ff&&n._firestore===e._firestore&&cP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EP(n){if(bf(n)&&0===n.explicitOrderBy.length)throw new Se(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l1{}function Lf(n,...e){for(const t of e)n=t._apply(n);return n}class iV extends l1{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=Vg(e.firestore),r=function(o,c,f,_,w,T,N){let R;if(w.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Se(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){AP(N,T);const $=[];for(const ee of N)$.push(SP(_,o,ee));R={arrayValue:{values:$}}}else R=SP(_,o,N)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||AP(N,T),R=_P(f,"where",N,"in"===T||"not-in"===T);const V=bs.create(w,T,R);return function($,ee){if(ee.V()){const Ce=Aw($);if(null!==Ce&&!Ce.isEqual(ee.field))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${ee.field.toString()}'`);const Xe=Cy($);null!==Xe&&NP(0,ee.field,Xe)}const me=function(Ce,Xe){for(const ze of Ce.filters)if(Xe.indexOf(ze.op)>=0)return ze.op;return null}($,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==me)throw new Se(fe.INVALID_ARGUMENT,me===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${me.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Es(e.firestore,e.converter,function(o,c){const f=o.filters.concat([c]);return new Fu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),f,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class oV extends l1{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new Se(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new vf(o,c);return function(_,w){if(null===Cy(_)){const T=Aw(_);null!==T&&NP(0,T,w.field)}}(r,f),f}(e._query,this.Ga,this.Ja);return new Es(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Fu(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DP extends l1{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new Es(e.firestore,e.converter,UN(e._query,this.Ya,this.Xa))}}class CP extends l1{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=IP(e,this.type,this.Za,this.tc);return new Es(e.firestore,e.converter,(o=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class TP extends l1{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=IP(e,this.type,this.Za,this.tc);return new Es(e.firestore,e.converter,(o=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function IP(n,e,t,r){if(t[0]=(0,ct.m9)(t[0]),t[0]instanceof a1)return function(o,c,f,_,w){if(!_)throw new Se(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const T=[];for(const N of Tg(o))if(N.field.isKeyField())T.push(wy(c,_.key));else{const R=_.data.field(N.field);if(Ew(R))throw new Se(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const V=N.field.canonicalString();throw new Se(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}T.push(R)}return new Dg(T,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Vg(n.firestore);return function(c,f,_,w,T,N){const R=c.explicitOrderBy;if(T.length>R.length)throw new Se(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let $=0;$<T.length;$++){const ee=T[$];if(R[$].field.isKeyField()){if("string"!=typeof ee)throw new Se(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!Nw(c)&&-1!==ee.indexOf("/"))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const me=c.path.child(on.fromString(ee));if(!Ye.isDocumentKey(me))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${w}() must result in a valid document path, but '${me}' is not because it contains an odd number of segments.`);const Ce=new Ye(me);V.push(wy(f,Ce))}else{const me=_P(_,w,ee);V.push(me)}}return new Dg(V,N)}(n._query,n.firestore._databaseId,o,e,t,r)}}function SP(n,e,t){if("string"==typeof(t=(0,ct.m9)(t))){if(""===t)throw new Se(fe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&-1!==t.indexOf("/"))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!Ye.isDocumentKey(r))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wy(n,new Ye(r))}if(t instanceof zn)return wy(n,t._key);throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${WT(t)}.`)}function AP(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NP(n,e,t){if(!t.isEqual(e))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class FR{convertValue(e,t="none"){switch(Ad(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Id(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return Td(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new ZT(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(by(e));default:return null}}convertTimestamp(e){const t=Kl(e);return new yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);dt(qw(r));const o=new Jy(r.get(1),r.get(3)),c=new Ye(r.popFirst(5));return o.isEqual(t)||Pr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function XT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pV extends FR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class MP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vg(e)}set(e,t,r){this._verifyNotCommitted();const o=Vf(e,this._firestore),c=XT(o.converter,t,r),f=KT(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(f.toMutation(o._key,vr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Vf(e,this._firestore);let f;return f="string"==typeof(t=(0,ct.m9)(t))||t instanceof Ud?xR(this._dataReader,"WriteBatch.update",c._key,t,r,o):RR(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vf(e,this._firestore);return this._mutations=this._mutations.concat(new Ay(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vf(n,e){if((n=(0,ct.m9)(n)).firestore!==e)throw new Se(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class jg extends FR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function RP(n,e,t){n=nn(n,zn);const r=nn(n.firestore,dr),o=XT(n.converter,e,t);return Qy(r,[KT(Vg(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,vr.none())])}function xP(n,e,t,...r){n=nn(n,zn);const o=nn(n.firestore,dr),c=Vg(o);let f;return f="string"==typeof(e=(0,ct.m9)(e))||e instanceof Ud?xR(c,"updateDoc",n._key,e,t,r):RR(c,"updateDoc",n._key,e),Qy(o,[f.toMutation(n._key,vr.exists(!0))])}function kP(n,...e){var t,r,o;n=(0,ct.m9)(n);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||NR(e[f])||(c=e[f],f++);const _={includeMetadataChanges:c.includeMetadataChanges};if(NR(e[f])){const R=e[f];e[f]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[f+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[f+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,T,N;if(n instanceof zn)T=nn(n.firestore,dr),N=Md(n._key.path),w={next:R=>{e[f]&&e[f](LR(T,n,R))},error:e[f+1],complete:e[f+2]};else{const R=nn(n,Es);T=nn(R.firestore,dr),N=R._query;const V=new jg(T);w={next:$=>{e[f]&&e[f](new Ff(T,V,R,$))},error:e[f+1],complete:e[f+2]},EP(n._query)}return function(R,V,$,ee){const me=new GT(ee),Ce=new zM(V,me,$);return R.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return $M(yield Ky(R),Ce)})),()=>{me.na(),R.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return GM(yield Ky(R),Ce)}))}}(Di(T),N,_,w)}function Qy(n,e){return function(t,r){const o=new Qr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e,t){return QM.apply(this,arguments)}(yield IR(t),r,o)})),o.promise}(Di(n),e)}function LR(n,e,t){const r=t.docs.get(e._key),o=new jg(n);return new jd(n,o,e._key,r,new Ug(t.hasPendingWrites,t.fromCache),e.converter)}class CV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vg(e)}get(e){const t=Vf(e,this._firestore),r=new pV(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Qe();const c=o[0];if(c.isFoundDocument())return new a1(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new a1(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const o=Vf(e,this._firestore),c=XT(o.converter,t,r),f=KT(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,f),this}update(e,t,r,...o){const c=Vf(e,this._firestore);let f;return f="string"==typeof(t=(0,ct.m9)(t))||t instanceof Ud?xR(this._dataReader,"Transaction.update",c._key,t,r,o):RR(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=Vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vf(e,this._firestore),r=new jg(this._firestore);return super.get(e).then(o=>new jd(this._firestore,r,t._key,o._document,new Ug(!1,!1),t.converter))}}function VR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function OP(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function PP(){if("undefined"==typeof atob)throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){yg=fo.SDK_VERSION,(0,fo._registerComponent)(new af.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new dr(o,new _f(t.getProvider("auth-internal")),new bw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,fo.registerVersion)(DN,"3.4.0",n),(0,fo.registerVersion)(DN,"3.4.0","esm2017")}();class c1{constructor(e){this._delegate=e}static fromBase64String(e){return PP(),new c1(ac.fromBase64String(e))}static fromUint8Array(e){return OP(),new c1(ac.fromUint8Array(e))}toBase64(){return PP(),this._delegate.toBase64()}toUint8Array(){return OP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BR(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class OV{enableIndexedDbPersistence(e,t){return function(n,e){fP(n=nn(n,dr));const t=Di(n),r=n._freezeSettings(),o=new vR;return hP(t,o,new ZO(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){fP(n=nn(n,dr));const e=Di(n),t=n._freezeSettings(),r=new vR;return hP(e,r,new E2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Se(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Vr.bt())return Promise.resolve();const o=r+"main";yield Vr.delete(o)}),function(r){return t.apply(this,arguments)})(Fg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const c=(n=nn(n,s1))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&vy("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let f,_;if("string"==typeof r.mockUserToken)f=r.mockUserToken,_=Pi.MOCK_USER;else{f=(0,ct.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Pi(w)}n._authCredentials=new vw(new TN(f,_))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield QO(n),t=yield XO(n);return e.setNetworkEnabled(!0),function(r){const o=Fe(r);return o.Gr.delete(0),r1(o)}(t)}))}(Di(n=nn(n,dr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield QO(n),t=yield XO(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const c=Fe(o);c.Gr.add(0),yield Hy(c),c.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Di(n=nn(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e){return rR.apply(this,arguments)}(yield IR(e),t)})),t.promise}(Di(n=nn(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new GT(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ky(n),o=t,Fe(r).io.add(o),void o.next();var r,o})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ky(n),o=t,void Fe(r).io.delete(o);var r,o}))}}(Di(n=nn(n,dr)),NR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xy(this,uP(this._delegate,e))}catch(t){throw $s(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,zT(this._delegate,e))}catch(t){throw $s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function(n,e){if(n=nn(n,s1),AR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new Fu(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const r=yield(o=n,qT(o).then(c=>c.datastore));var o;new T2(n.asyncQueue,r,e,t).run()})),t.promise}(Di(n=nn(n,dr)),t=>e(new CV(n,t)))}(this._delegate,t=>e(new LP(this,t)))}batch(){return Di(this._delegate),new VP(new MP(this._delegate,e=>Qy(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Di(n=nn(n,dr)),r=new B2;return function(n,e,t,r){const o=function(c,f){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,T){if(w instanceof Uint8Array)return YO(w,T);if(w instanceof ArrayBuffer)return YO(new Uint8Array(w),T);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new D2(w,f);var w}(t,n1(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function(n,e,t){const r=Fe(n);var o;(o=(0,pe.Z)(function*(c,f,_){try{const w=yield f.getMetadata();if(yield function(V,$){const ee=Fe(V),me=ri($.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Ce=>ee.Ye.getBundleMetadata(Ce,$.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(me)>=0)}(c.localStore,w))return yield f.close(),void _._completeWith((V=w,{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}));_._updateProgress(VO(w));const T=new e2(w,c.localStore,f.k);let N=yield f.Ho();for(;N;){const V=yield T.yo(N);V&&_._updateProgress(V),N=yield f.Ho()}const R=yield T.complete();yield Bd(c,R.In,void 0),yield function(V,$){const ee=Fe(V);return ee.persistence.runTransaction("Save bundle","readwrite",me=>ee.Ye.saveBundleMetadata(me,$))}(c.localStore,w),_._completeWith(R.progress)}catch(w){vy("SyncEngine",`Loading bundle failed with ${w}`),_._failWith(w)}var V}),function(c,f,_){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield IR(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=Fe(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Ye.getNamedQuery(c,r))}(yield TR(n),e)}))}(Di(n=nn(n,dr)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class eI extends FR{constructor(e){super(),this.firestore=e}convertBytes(e){return new c1(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class LP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new eI(e)}get(e){const t=Hg(e);return this._delegate.get(t).then(r=>new d1(this._firestore,new jd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Hg(e);return r?(VR("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=Hg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=Hg(e);return this._delegate.delete(t),this}}class VP{constructor(e){this._delegate=e}set(e,t,r){const o=Hg(e);return r?(VR("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=Hg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=Hg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $g{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new u1(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h1(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$g.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new $g(e,new eI(e),t),o.set(t,c)),c}}$g.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new zn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Ga(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xy(this.firestore,uP(this._delegate,e))}catch(t){throw $s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ct.m9)(e))instanceof zn&&lP(this._delegate,e)}set(e,t){t=VR("DocumentReference.set",t);try{return t?RP(this._delegate,e,t):RP(this._delegate,e)}catch(r){throw $s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?xP(this._delegate,e):xP(this._delegate,e,t,...r)}catch(o){throw $s(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Qy(nn(n.firestore,dr),[new Ay(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=BP(e),r=UP(e,o=>new d1(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return kP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=nn(n,zn);const e=nn(n.firestore,dr),t=Di(e),r=new jg(e);return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,c,f){try{const _=yield function(w,T){const N=Fe(w);return N.persistence.runTransaction("read document","readonly",R=>N.Wn.Rn(R,T))}(o,c);_.isFoundDocument()?f.resolve(_):_.isNoDocument()?f.resolve(null):f.reject(new Se(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const w=Wy(_,`Failed to get document '${c} from cache`);f.reject(w)}}),function(o,c,f){return r.apply(this,arguments)})(yield TR(n),e,t);var r})),t.promise}(t,n._key).then(o=>new jd(e,r,n._key,o,new Ug(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=nn(n,zn);const e=nn(n.firestore,dr);return eP(Di(e),n._key,{source:"server"}).then(t=>LR(e,n,t))}(this._delegate):function(n){n=nn(n,zn);const e=nn(n.firestore,dr);return eP(Di(e),n._key).then(t=>LR(e,n,t))}(this._delegate),t.then(r=>new d1(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function $s(n,e,t){return n.message=n.message.replace(e,t),n}function BP(n){for(const e of n)if("object"==typeof e&&!BR(e))return e;return{}}function UP(n,e){var t,r;let o;return o=BR(n[0])?n[0]:BR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class d1{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wP(this._delegate,e._delegate)}}class h1 extends d1{data(e){const t=this._delegate.data(e);return function(n,e){n||Qe()}(void 0!==t),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eI(e)}where(e,t,r){try{return new Hs(this.firestore,Lf(this._delegate,function(n,e,t){const r=e,o=QT("where",n);return new iV(o,r,t)}(e,t,r)))}catch(o){throw $s(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,Lf(this._delegate,function(n,e="asc"){const t=e,r=QT("orderBy",n);return new oV(r,t)}(e,t)))}catch(r){throw $s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,Lf(this._delegate,function(n){return oP("limit",n),new DP("limit",n,"F")}(e)))}catch(t){throw $s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,Lf(this._delegate,function(n){return oP("limitToLast",n),new DP("limitToLast",n,"L")}(e)))}catch(t){throw $s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,Lf(this._delegate,function(...n){return new CP("startAt",n,!0)}(...e)))}catch(t){throw $s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,Lf(this._delegate,function(...n){return new CP("startAfter",n,!1)}(...e)))}catch(t){throw $s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,Lf(this._delegate,function(...n){return new TP("endBefore",n,!0)}(...e)))}catch(t){throw $s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,Lf(this._delegate,function(...n){return new TP("endAt",n,!1)}(...e)))}catch(t){throw $s(t,"endAt()","Query.endAt()")}}isEqual(e){return cP(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=nn(n,Es);const e=nn(n.firestore,dr),t=Di(e),r=new jg(e);return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,c,f){try{const _=yield VT(o,c,!0),w=new jO(c,_.zn),T=w.bo(_.documents),N=w.applyChanges(T,!1);f.resolve(N.snapshot)}catch(_){const w=Wy(_,`Failed to execute query '${c} against cache`);f.reject(w)}}),function(o,c,f){return r.apply(this,arguments)})(yield TR(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ff(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=nn(n,Es);const e=nn(n.firestore,dr),t=Di(e),r=new jg(e);return tP(t,n._query,{source:"server"}).then(o=>new Ff(e,r,n,o))}(this._delegate):function(n){n=nn(n,Es);const e=nn(n.firestore,dr),t=Di(e),r=new jg(e);return EP(n._query),tP(t,n._query).then(o=>new Ff(e,r,n,o))}(this._delegate),t.then(r=>new UR(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BP(e),r=UP(e,o=>new UR(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return kP(this._delegate,t,r)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}class FV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h1(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h1(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h1(this._firestore,r))})}isEqual(e){return wP(this._delegate,e._delegate)}}class Xy extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?zT(this._delegate):zT(this._delegate,e))}catch(t){throw $s(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=nn(n.firestore,dr),r=zT(n),o=XT(n.converter,e);return Qy(t,[KT(Vg(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return lP(this._delegate,e._delegate)}withConverter(e){return new Xy(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function Hg(n){return nn(n,zn)}class jR{constructor(...e){this._delegate=new Ud(...e)}static documentId(){return new jR(Fi.keyField().canonicalString())}isEqual(e){return(e=(0,ct.m9)(e))instanceof Ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new MR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Gg(e)}static delete(){const e=new o1("deleteField");return e._methodName="FieldValue.delete",new Gg(e)}static arrayUnion(...e){const t=function(...n){return new Q2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gg(t)}static arrayRemove(...e){const t=function(...n){return new X2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gg(t)}static increment(e){const t=function(n){return new eV("increment",n)}(e);return t._methodName="FieldValue.increment",new Gg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LV={Firestore:FP,GeoPoint:ZT,Timestamp:yi,Blob:c1,Transaction:LP,WriteBatch:VP,DocumentReference:Ga,DocumentSnapshot:d1,Query:Hs,QueryDocumentSnapshot:h1,QuerySnapshot:UR,CollectionReference:Xy,FieldPath:jR,FieldValue:Gg,setLogLevel:function(n){!function(n){zl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new af.wA("firestore-compat",t=>((e,t)=>new FP(e,t,new OV))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},LV)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(dC.Z);var f1=F(9746),UV=F(7771),jV=F(8858);class $V extends Yt.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new HV(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,c=r.length;let f;if(this.closed)throw new Sc.N;if(this.isStopped||this.hasError?f=Rc.w.EMPTY:(this.observers.push(e),f=new jV.W(this,e)),o&&e.add(e=new f1.ht(e,o)),t)for(let _=0;_<c&&!e.closed;_++)e.next(r[_]);else for(let _=0;_<c&&!e.closed;_++)e.next(r[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),f}_getNow(){return(this.scheduler||UV.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,c=o.length;let f=0;for(;f<c&&!(e-o[f].time<r);)f++;return c>t&&(f=Math.max(f,c-t)),f>0&&o.splice(0,f),o}}class HV{constructor(e,t){this.time=e,this.value=t}}function jP(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,f,c=0,_=!1,w=!1;return function(N){let R;c++,!o||_?(_=!1,o=new $V(n,e,r),R=o.subscribe(this),f=N.subscribe({next(V){o.next(V)},error(V){_=!0,o.error(V)},complete(){w=!0,f=void 0,o.complete()}}),w&&(f=void 0)):R=o.subscribe(this),this.add(()=>{c--,R.unsubscribe(),R=void 0,f&&!w&&t&&0===c&&(f.unsubscribe(),f=void 0,o=void 0)})}}(r))}function $P(n,e){return e?Tn(()=>n,e):Tn(()=>n)}var $R=F(2639);F(2329);const GP=new Map,YV={activated:!1,tokenObservers:[]},KV={initialized:!1,enabled:!1};function Bi(n){return GP.get(n)||YV}function Bu(n,e){GP.set(n,e)}function nI(){return KV}class tB{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new ct.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ct.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gs=new ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function WP(n){if(!Bi(n).activated)throw Gs.create("use-before-activation",{appName:n.name})}function WR(n,e){return zR.apply(this,arguments)}function zR(){return(zR=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let f,_;try{f=yield fetch(n,c)}catch(R){throw Gs.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==f.status)throw Gs.create("fetch-status-error",{httpStatus:f.status});try{_=yield f.json()}catch(R){throw Gs.create("fetch-parse-error",{originalErrorMessage:R.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const T=1e3*Number(w[1]),N=Date.now();return{token:_.attestationToken,expireTimeMillis:N+T,issuedAtTimeMillis:N}})).apply(this,arguments)}function aB(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const p1="firebase-app-check-store";let sI=null;function ZP(){return sI||(sI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Gs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(p1,{keyPath:"compositeKey"})}}}catch(t){e(Gs.create("storage-open",{originalErrorMessage:t.message}))}}),sI)}function ZR(){return(ZR=(0,pe.Z)(function*(n,e){const r=(yield ZP()).transaction(p1,"readwrite"),c=r.objectStore(p1).put({compositeKey:n,value:e});return new Promise((f,_)=>{c.onsuccess=w=>{f()},r.onerror=w=>{var T;_(Gs.create("storage-set",{originalErrorMessage:null===(T=w.target.error)||void 0===T?void 0:T.message}))}})})).apply(this,arguments)}const g1=new Ru.Yd("@firebase/app-check");function QP(n,e){return(0,ct.hl)()?function(n,e){return function(n,e){return ZR.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{g1.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XP(){return nI().enabled}function eF(){return QR.apply(this,arguments)}function QR(){return(QR=(0,pe.Z)(function*(){const n=nI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _B={error:"UNKNOWN_ERROR"};function yB(n){return ct.US.encodeString(JSON.stringify(n),!1)}function oI(n){return XR.apply(this,arguments)}function XR(){return(XR=(0,pe.Z)(function*(n,e=!1){const t=n.app;WP(t);const r=Bi(t);let c,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&aI(w)&&(o=w)}if(!e&&o&&aI(o))return{token:o.token};let _,f=!1;if(XP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WR(aB(t,yield eF()),n.platformLoggerProvider).then(T=>(r.exchangeTokenPromise=void 0,T)),f=!0);const w=yield r.exchangeTokenPromise;return yield QP(t,w),Bu(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),f=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?g1.warn(w.message):g1.error(w),c=w}return o?(_={token:o.token},Bu(t,Object.assign(Object.assign({},r),{token:o})),yield QP(t,o)):_=bB(c),f&&nF(t,_),_})).apply(this,arguments)}function tx(n,e){const t=Bi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Bu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function tF(n){const{app:e}=n,t=Bi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new tB((0,pe.Z)(function*(){let r;if(r=Bi(e).token?yield oI(n,!0):yield oI(n),r.error)throw r.error}),()=>!0,()=>{const t=Bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Bu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nF(n,e){const t=Bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function aI(n){return n.expireTimeMillis-Date.now()>0}function bB(n){return{token:yB(_B),error:n}}class wB{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Bi(this.app);for(const t of e)tx(this.app,t.next);return Promise.resolve()}}const cF="app-check-internal";(0,fo._registerComponent)(new af.wA("app-check",n=>function(n,e){return new wB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cF).initialize()})),(0,fo._registerComponent)(new af.wA(cF,n=>function(n){return{getToken:e=>oI(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,c=Bi(o),f={next:t,error:r,type:e};if(Bu(o,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]})),c.token&&aI(c.token)){const _=c.token;Promise.resolve().then(()=>{t({token:_.token}),tF(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>tF(n))}(n,"INTERNAL",e),removeTokenListener:e=>tx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fo.registerVersion)("@firebase/app-check","0.5.2");class lI{constructor(){return(0,An.vb)("app-check")}}"undefined"!=typeof window&&window;var ox=F(7841);const hF=new u.OlP("angularfire2.auth.use-emulator"),fF=new u.OlP("angularfire2.auth.settings"),pF=new u.OlP("angularfire2.auth.tenant-id"),gF=new u.OlP("angularfire2.auth.langugage-code"),mF=new u.OlP("angularfire2.auth.use-device-language"),_F=new u.OlP("angularfire.auth.persistence"),yF=(n,e,t,r,o,c,f,_)=>(0,ns.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,c&&w.useDeviceLanguage(),f)for(const[T,N]of Object.entries(f))w.settings[T]=N;return _&&w.setPersistence(_),w},[t,r,o,c,f,_]);let ax=(()=>{class n{constructor(t,r,o,c,f,_,w,T,N,R,V,$){const ee=new Yt.xQ,me=(0,Be.of)(void 0).pipe((0,f1.QV)(f.outsideAngular),Tn(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,941)))),(0,tt.U)(()=>(0,ns.on)(t,c,r)),(0,tt.U)(Ce=>yF(Ce,c,_,T,N,R,w,V)),jP({bufferSize:1,refCount:!1}));if(Zu(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Be.of)(null);else{me.pipe(Kn()).subscribe();const Xe=me.pipe(Tn(nt=>nt.getRedirectResult().then(Kt=>Kt,()=>null)),An.iC,jP({bufferSize:1,refCount:!1})),ze=me.pipe(Tn(nt=>new Dn.y(Kt=>({unsubscribe:c.runOutsideAngular(()=>nt.onAuthStateChanged(Ur=>Kt.next(Ur),Ur=>Kt.error(Ur),()=>Kt.complete()))})))),Ct=me.pipe(Tn(nt=>new Dn.y(Kt=>({unsubscribe:c.runOutsideAngular(()=>nt.onIdTokenChanged(Ur=>Kt.next(Ur),Ur=>Kt.error(Ur),()=>Kt.complete()))}))));this.authState=Xe.pipe($P(ze),(0,$R.R)(f.outsideAngular),(0,f1.QV)(f.insideAngular)),this.user=Xe.pipe($P(Ct),(0,$R.R)(f.outsideAngular),(0,f1.QV)(f.insideAngular)),this.idToken=this.user.pipe(Tn(nt=>nt?(0,Zt.D)(nt.getIdToken()):(0,Be.of)(null))),this.idTokenResult=this.user.pipe(Tn(nt=>nt?(0,Zt.D)(nt.getIdTokenResult()):(0,Be.of)(null))),this.credential=(0,j1.T)(Xe,ee,this.authState.pipe(vn(nt=>!nt))).pipe((0,tt.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,$R.R)(f.outsideAngular),(0,f1.QV)(f.insideAngular))}return(0,ns.pX)(this,me,c,{spy:{apply:(Ce,Xe,ze)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&ze.then(Ct=>ee.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ns.Dh),u.LFG(ns.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(hF,8),u.LFG(fF,8),u.LFG(pF,8),u.LFG(gF,8),u.LFG(mF,8),u.LFG(_F,8),u.LFG(lI,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jB=(()=>{class n{constructor(){ox.Z.registerVersion("angularfire",An.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ax]}),n})();function vF(n,e){return function(n,e=bp.z){return new Dn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ux(n,e){return vF(n,e).pipe((0,tt.U)(t=>({payload:t,type:"query"})))}function cI(n,e){return ux(n,e).pipe(Da(void 0),L_(),(0,tt.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((f,_)=>{const w=o.find(N=>N.doc.ref.isEqual(f.ref)),T=null==t?void 0:t.payload.docs.find(N=>N.ref.isEqual(f.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(f.metadata)||!w&&T&&JSON.stringify(T.metadata)===JSON.stringify(f.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:f}})}),c}))}function bF(n,e,t){return cI(n,t).pipe(gu((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),function(n,e){return t=>t.lift(new Ov(n,e))}(),(0,tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function lx(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function wF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class EF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Da(void 0),L_(),vn(([r,o])=>o.length>0||!r),(0,tt.U)(([r,o])=>o),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(gu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wF(e);return bF(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),An.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new DF(this.ref.doc(e),this.afs)}}class DF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=IF(r,t);return new EF(o,c,this.afs)}snapshotChanges(){return function(n,e){return vF(n,e).pipe(Da(void 0),L_(),(0,tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zt.D)(this.ref.get(e)).pipe(An.iC)}}class WB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cI(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vn(t=>t.length>0),An.iC):cI(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(gu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wF(e);return bF(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),An.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(An.iC)}}const CF=new u.OlP("angularfire2.enableFirestorePersistence"),TF=new u.OlP("angularfire2.firestore.persistenceSettings"),zB=new u.OlP("angularfire2.firestore.settings"),ZB=new u.OlP("angularfire2.firestore.use-emulator");function IF(n,e=(t=>t)){return{query:e(n),ref:n}}let YB=(()=>{class n{constructor(t,r,o,c,f,_,w,T,N,R,V,$,ee,me,Ce,Xe,ze){this.schedulers=w;const Ct=(0,ns.on)(t,_,r),nt=N;R&&yF(Ct,_,V,ee,me,Ce,$,Xe),[this.firestore,this.persistenceEnabled$]=(0,ns.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const Kt=_.runOutsideAngular(()=>Ct.firestore());if(c&&Kt.settings(c),nt&&Kt.useEmulator(...nt),o&&!Zu(f)){const Ur=()=>{try{return(0,Zt.D)(Kt.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(ju){return"undefined"!=typeof console&&console.warn(ju),(0,Be.of)(!1)}};return[Kt,_.runOutsideAngular(Ur)]}return[Kt,(0,Be.of)(!1)]},[c,nt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:f}=IF(o,r),_=this.schedulers.ngZone.run(()=>c);return new EF(_,f,this)}collectionGroup(t,r){const o=r||(f=>f),c=this.firestore.collectionGroup(t);return new WB(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new DF(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ns.Dh),u.LFG(ns.xv,8),u.LFG(CF,8),u.LFG(zB,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(TF,8),u.LFG(ZB,8),u.LFG(ax,8),u.LFG(hF,8),u.LFG(fF,8),u.LFG(pF,8),u.LFG(gF,8),u.LFG(mF,8),u.LFG(_F,8),u.LFG(lI,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KB=(()=>{class n{constructor(){ox.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:CF,useValue:!0},{provide:TF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[YB]}),n})();class QB{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new XB(e,this.dueTime,this.scheduler))}}class XB extends sn.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(eU,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function eU(n){n.debouncedNext()}const SF="firebasestorage.googleapis.com",AF="storageBucket";class Er extends ct.ZR{constructor(e,t){super(cx(e),`Firebase Storage: ${t} (${cx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Er.prototype)}_codeEquals(e){return cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cx(n){return"storage/"+n}function dx(){return new Er("unknown","An unknown error occurred, please check the error payload for server response.")}function NF(){return new Er("canceled","User canceled the upload/download.")}function MF(){return new Er("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ev(n){return new Er("invalid-argument",n)}function RF(){return new Er("app-deleted","The Firebase app was deleted.")}function xF(n){return new Er("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m1(n,e){return new Er("invalid-format","String does not match format '"+n+"': "+e)}function _1(n){throw new Er("internal-error","Internal error: "+n)}class Ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ds.makeFromUrl(e,t)}catch(o){return new Ds(e,"")}if(""===r.path)return r;throw function(n){return new Er("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+o+"(/(.*))?$","i");function T(nt){nt.path_=decodeURIComponent(nt.path)}const R=t.replace(/[.]/g,"\\."),Ct=[{regex:_,indices:{bucket:1,path:3},postModify:function(nt){"/"===nt.path.charAt(nt.path.length-1)&&(nt.path_=nt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:T},{regex:new RegExp(`^https?://${t===SF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:T}];for(let nt=0;nt<Ct.length;nt++){const Kt=Ct[nt],Ur=Kt.regex.exec(e);if(Ur){let Eo=Ur[Kt.indices.path];Eo||(Eo=""),r=new Ds(Ur[Kt.indices.bucket],Eo),Kt.postModify(r);break}}if(null==r)throw function(n){return new Er("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class pU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dI(n){return"string"==typeof n||n instanceof String}function kF(n){return hx()&&n instanceof Blob}function hx(){return"undefined"!=typeof Blob}function fx(n,e,t,r){if(r<e)throw ev(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ev(`Invalid value for '${n}'. Expected ${t} or less.`)}function $d(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function OF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Bf||(Bf={})),Bf))();class bU{constructor(e,t,r,o,c,f,_,w,T,N,R){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=_,this.errorCallback_=w,this.timeout_=T,this.progressCallback_=N,this.connectionFactory_=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,$)=>{this.resolve_=V,this.reject_=$,this.start_()})}start_(){const t=(r,o)=>{const c=this.resolve_,f=this.reject_,_=o.connection;if(o.wasSuccessCode)try{const w=this.callback_(_,_.getResponse());!function(n){return void 0!==n}(w)?c():c(w)}catch(w){f(w)}else if(null!==_){const w=dx();w.serverResponse=_.getErrorText(),f(this.errorCallback_?this.errorCallback_(_,w):w)}else f(o.canceled?this.appDelete_?RF():NF():new Er("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new hI(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,c=null,f=!1,_=0;function w(){return 2===_}let T=!1;function N(...Ce){T||(T=!0,e.apply(null,Ce))}function R(Ce){o=setTimeout(()=>{o=null,n($,w())},Ce)}function V(){c&&clearTimeout(c)}function $(Ce,...Xe){if(T)return void V();if(Ce)return V(),void N.call(null,Ce,...Xe);if(w()||f)return V(),void N.call(null,Ce,...Xe);let Ct;r<64&&(r*=2),1===_?(_=2,Ct=0):Ct=1e3*(r+Math.random()),R(Ct)}let ee=!1;function me(Ce){ee||(ee=!0,V(),!T&&(null!==o?(Ce||(_=2),clearTimeout(o),R(0)):Ce||(_=1)))}return R(0),c=setTimeout(()=>{f=!0,me(!0)},t),me}((r,o)=>{if(o)return void r(!1,new hI(!1,null,!0));const c=this.connectionFactory_();this.pendingConnection_=c;const f=_=>{null!==this.progressCallback_&&this.progressCallback_(_.loaded,_.lengthComputable?_.total:-1)};null!==this.progressCallback_&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const _=c.getErrorCode()===Bf.NO_ERROR,w=c.getStatus();if(!_||this.isRetryStatusCode_(w)){const N=c.getErrorCode()===Bf.ABORT;return void r(!1,new hI(!1,null,N))}const T=-1!==this.successCodes_.indexOf(w);r(!0,new hI(T,c))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),c=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||c}}class hI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SU(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(hx())return new Blob(n);throw new Er("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class px{constructor(e,t){this.data=e,this.contentType=t||null}}function gx(n,e){switch(n){case ta.RAW:return new px(PF(e));case ta.BASE64:case ta.BASE64URL:return new px(FF(n,e));case ta.DATA_URL:return new px(function(n){const e=new LF(n);return e.base64?FF(ta.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw m1(ta.DATA_URL,"Malformed data URL.")}return PF(e)}(e.rest)}(e),function(n){return new LF(n).contentType}(e))}throw dx()}function PF(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function FF(n,e){switch(n){case ta.BASE64:{const o=-1!==e.indexOf("-"),c=-1!==e.indexOf("_");if(o||c)throw m1(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ta.BASE64URL:{const o=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(o||c)throw m1(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw m1(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class LF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw m1(ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class uc{constructor(e,t){let r=0,o="";kF(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(kF(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new uc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new uc(r,!0)}}static getBlob(...e){if(hx()){const t=e.map(r=>r instanceof uc?r.data_:r);return new uc(SU.apply(null,t))}{const t=e.map(f=>dI(f)?gx(ta.RAW,f).data:f.data_);let r=0;t.forEach(f=>{r+=f.byteLength});const o=new Uint8Array(r);let c=0;return t.forEach(f=>{for(let _=0;_<f.length;_++)o[c++]=f[_]}),new uc(o,!0)}}uploadData(){return this.data_}}function mx(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function VF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function FU(n,e){return e}class qs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||FU}}let fI=null;function y1(){if(fI)return fI;const n=[];n.push(new qs("bucket")),n.push(new qs("generation")),n.push(new qs("metageneration")),n.push(new qs("name","fullPath",!0));const t=new qs("name");t.xform=function(c,f){return function(n){return!dI(n)||n.length<2?n:VF(n)}(f)},n.push(t);const o=new qs("size");return o.xform=function(c,f){return void 0!==f?Number(f):f},n.push(o),n.push(new qs("timeCreated")),n.push(new qs("updated")),n.push(new qs("md5Hash",null,!0)),n.push(new qs("cacheControl",null,!0)),n.push(new qs("contentDisposition",null,!0)),n.push(new qs("contentEncoding",null,!0)),n.push(new qs("contentLanguage",null,!0)),n.push(new qs("contentType",null,!0)),n.push(new qs("metadata","customMetadata",!0)),fI=n,fI}function BF(n,e,t){const r=mx(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let c=0;c<o;c++){const f=t[c];r[f.local]=f.xform(r,e[f.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const c=new Ds(n.bucket,n.fullPath);return e._makeStorageReference(c)}})}(r,n),r}(n,r,t)}function _x(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const c=e[o];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}const UF="prefixes";class lc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function cc(n){if(!n)throw dx()}function pI(n,e){return function(r,o){const c=BF(n,o,e);return cc(null!==c),c}}function tv(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Er("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Er("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Er("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Er("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function v1(n){const e=tv(n);return function(r,o){let c=e(r,o);return 404===r.getStatus()&&(c=function(n){return new Er("object-not-found","Object '"+n+"' does not exist.")}(n.path)),c.serverResponse=o.serverResponse,c}}function $F(n,e,t){const o=$d(e.fullServerUrl(),n.host,n._protocol),f=n.maxOperationRetryTime,_=new lc(o,"GET",pI(n,t),f);return _.errorHandler=v1(e),_}function qU(n,e,t,r,o){const c={};c.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(c.delimiter=t),r&&(c.pageToken=r),o&&(c.maxResults=o);const _=$d(e.bucketOnlyServerUrl(),n.host,n._protocol),T=n.maxOperationRetryTime,N=new lc(_,"GET",function(n,e){return function(r,o){const c=function(n,e,t){const r=mx(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[UF])for(const o of t[UF]){const c=o.replace(/\/$/,""),f=n._makeStorageReference(new Ds(e,c));r.prefixes.push(f)}if(t.items)for(const o of t.items){const c=n._makeStorageReference(new Ds(e,o.name));r.items.push(c)}return r}(n,e,r)}(n,e,o);return cc(null!==c),c}}(n,e.bucket),T);return N.urlParams=c,N.errorHandler=tv(e),N}function GF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class gI{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function yx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){cc(!1)}return cc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const XU={STATE_CHANGED:"state_changed"},Ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vx(n){switch(n){case"running":case"pausing":case"canceling":return Ws.RUNNING;case"paused":return Ws.PAUSED;case"success":return Ws.SUCCESS;case"canceled":return Ws.CANCELED;case"error":default:return Ws.ERROR}}class e3{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function nv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class n3 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw _1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _1("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw _1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Uu(){return new n3}class ZF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=y1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const c=e.bucketOnlyServerUrl(),f=GF(e,r,o),_={name:f.fullPath},w=$d(c,n.host,n._protocol),N={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":f.contentType,"Content-Type":"application/json; charset=utf-8"},R=_x(f,t),ee=new lc(w,"POST",function(me){let Ce;yx(me);try{Ce=me.getResponseHeader("X-Goog-Upload-URL")}catch(Xe){cc(!1)}return cc(dI(Ce)),Ce},n.maxUploadRetryTime);return ee.urlParams=_,ee.headers=N,ee.body=R,ee.errorHandler=tv(e),ee}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Uu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const w=new lc(t,"POST",function(T){const N=yx(T,["active","final"]);let R=null;try{R=T.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){cc(!1)}R||cc(!1);const V=Number(R);return cc(!isNaN(V)),new gI(V,r.size(),"final"===N)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=tv(e),w}(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(o,Uu,t,r);this._request=c,c.getPromise().then(f=>{f=f,this._request=void 0,this._updateProgress(f.current),this._needToFetchStatus=!1,f.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new gI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,c)=>{let f;try{f=function(n,e,t,r,o,c,f,_){const w=new gI(0,0);if(f?(w.current=f.current,w.total=f.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw new Er("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const T=w.total-w.current;let N=T;o>0&&(N=Math.min(N,o));const R=w.current,ee={"X-Goog-Upload-Command":N===T?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},me=r.slice(R,R+N);if(null===me)throw MF();const Ct=new lc(t,"POST",function(nt,Kt){const Ur=yx(nt,["active","final"]),ju=w.current+N,Eo=r.size();let Ex;return Ex="final"===Ur?pI(e,c)(nt,Kt):null,new gI(ju,Eo,"final"===Ur,Ex)},e.maxUploadRetryTime);return Ct.headers=ee,Ct.body=me.uploadData(),Ct.progressCallback=_||null,Ct.errorHandler=tv(n),Ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const _=this._ref.storage._makeRequest(f,Uu,o,c);this._request=_,_.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$F(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Uu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const c=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"},w=function(){let Ct="";for(let nt=0;nt<2;nt++)Ct+=Math.random().toString().slice(2);return Ct}();f["Content-Type"]="multipart/related; boundary="+w;const T=GF(e,r,o),N=_x(T,t),$=uc.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+N+"\r\n--"+w+"\r\nContent-Type: "+T.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===$)throw MF();const ee={name:T.fullPath},me=$d(c,n.host,n._protocol),Xe=n.maxUploadRetryTime,ze=new lc(me,"POST",pI(n,t),Xe);return ze.urlParams=ee,ze.headers=f,ze.body=$.uploadData(),ze.errorHandler=tv(e),ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Uu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=NF(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const c=new e3(t||void 0,r||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vx(this._state)){case Ws.SUCCESS:nv(this._resolve.bind(null,this.snapshot))();break;case Ws.CANCELED:case Ws.ERROR:nv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vx(this._state)){case Ws.RUNNING:case Ws.PAUSED:e.next&&nv(e.next.bind(e,this.snapshot))();break;case Ws.SUCCESS:e.complete&&nv(e.complete.bind(e))();break;case Ws.CANCELED:case Ws.ERROR:e.error&&nv(e.error.bind(e,this._error))();break;default:e.error&&nv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qg{constructor(e,t){this._service=e,this._location=t instanceof Ds?t:Ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qg(e,t)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VF(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ds(this._location.bucket,e);return new qg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xF(e)}}function KF(n,e,t){return bx.apply(this,arguments)}function bx(){return(bx=(0,pe.Z)(function*(n,e,t){const o=yield JF(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield KF(n,e,o.nextPageToken))})).apply(this,arguments)}function JF(n,e){null!=e&&"number"==typeof e.maxResults&&fx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Uu)}function p3(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=$d(e.fullServerUrl(),n.host,n._protocol),f=n.maxOperationRetryTime,_=new lc(o,"GET",function(n,e){return function(r,o){const c=BF(n,o,e);return cc(null!==c),function(n,e,t,r){const o=mx(e);if(null===o||!dI(o.downloadTokens))return null;const c=o.downloadTokens;if(0===c.length)return null;const f=encodeURIComponent;return c.split(",").map(T=>{const R=n.fullPath;return $d("/b/"+f(n.bucket)+"/o/"+f(R),t,r)+OF({alt:"media",token:T})})[0]}(c,o,n.host,n._protocol)}}(n,t),f);return _.errorHandler=v1(e),_}(n.storage,n._location,y1());return n.storage.makeRequestWithTokens(e,Uu).then(t=>{if(null===t)throw new Er("no-download-url","The given file does not have any download URLs.");return t})}function QF(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ds(n._location.bucket,t);return new qg(n.storage,r)}function XF(n,e){if(n instanceof wx){const t=n;if(null==t._bucket)throw new Er("no-default-bucket","No default bucket found. Did you set the '"+AF+"' property when initializing the app?");const r=new qg(t,t._bucket);return null!=e?XF(r,e):r}return void 0!==e?QF(n,e):n}function y3(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof wx)return function(n,e){return new qg(n,e)}(n,e);throw ev("To use ref(service, url), the first argument must be a Storage instance.")}return XF(n,e)}function eL(n,e){const t=null==e?void 0:e[AF];return null==t?null:Ds.makeFromBucketSpec(t,n)}class wx{constructor(e,t,r,o,c){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=SF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Ds.makeFromBucketSpec(o,this._host):eL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ds.makeFromBucketSpec(this._url,e):eL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qg(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new pU(RF());{const c=function(n,e,t,r,o,c){const f=OF(n.urlParams),_=n.url+f,w=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,c),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new bU(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[o,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,c).getPromise()})()}}const tL="@firebase/storage";function iL(n,e){return y3(n=(0,ct.m9)(n),e)}(0,fo._registerComponent)(new af.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new wx(t,r,o,e,fo.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,fo.registerVersion)(tL,"0.9.0",""),(0,fo.registerVersion)(tL,"0.9.0","esm2017");class mI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new mI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new mI(r,this,this._ref))},t)}on(e,t,r,o){let c;return t&&(c="function"==typeof t?f=>t(new mI(f,this,this._ref)):{next:t.next?f=>t.next(new mI(f,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,c,r||void 0,o||void 0)}}class oL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Hd(e,this._service))}get items(){return this._delegate.items.map(e=>new Hd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return QF(n,e)}(this._delegate,e);return new Hd(t,this.storage)}get root(){return new Hd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Hd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sL(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new ZF(n,new uc(e),t)}(n=(0,ct.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ta.RAW,r){this._throwIfRoot("putString");const o=gx(t,e),c=Object.assign({},r);return null==c.contentType&&null!=o.contentType&&(c.contentType=o.contentType),new sL(new ZF(this._delegate,new uc(o.data,!0),c),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return KF(n,e).then(()=>e)}(n=(0,ct.m9)(n))}(this._delegate).then(e=>new oL(e,this.storage))}list(e){return function(n,e){return JF(n=(0,ct.m9)(n),e)}(this._delegate,e||void 0).then(t=>new oL(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=$F(n.storage,n._location,y1());return n.storage.makeRequestWithTokens(e,Uu)}(n=(0,ct.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const c=$d(e.fullServerUrl(),n.host,n._protocol),_=_x(t,r),T=n.maxOperationRetryTime,N=new lc(c,"PATCH",pI(n,r),T);return N.headers={"Content-Type":"application/json; charset=utf-8"},N.body=_,N.errorHandler=v1(e),N}(n.storage,n._location,e,y1());return n.storage.makeRequestWithTokens(t,Uu)}(n=(0,ct.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return p3(n=(0,ct.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=$d(e.fullServerUrl(),n.host,n._protocol),_=new lc(r,"DELETE",function(w,T){},n.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=v1(e),_}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Uu)}(n=(0,ct.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xF(e)}}class aL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(uL(e))throw ev("ref() expected a child path but got a URL, use refFromURL instead.");return new Hd(iL(this._delegate,e),this)}refFromURL(e){if(!uL(e))throw ev("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ds.makeFromUrl(e,this._delegate.host)}catch(t){throw ev("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hd(iL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,ct.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function uL(n){return/^[A-Za-z]+:\/\//.test(n)}function O3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new aL(t,r)}function lL(n){const e=function(n){return new Dn.y(e=>{const t=f=>e.next(f);t(n.snapshot);const c=n.on("state_changed",t);return n.then(f=>{t(f),e.complete()},f=>{t(n.snapshot),(f=>{e.error(f)})(f)}),function(){c()}}).pipe(function(n,e=bp.P){return t=>t.lift(new QB(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function _I(n){return{getDownloadURL:()=>(0,Be.of)(void 0).pipe(An.fc,Tn(()=>n.getDownloadURL()),An.iC),getMetadata:()=>(0,Be.of)(void 0).pipe(An.fc,Tn(()=>n.getMetadata()),An.iC),delete:()=>(0,Zt.D)(n.delete()),child:e=>_I(n.child(e)),updateMetadata:e=>(0,Zt.D)(n.updateMetadata(e)),put:(e,t)=>lL(n.put(e,t)),putString:(e,t,r)=>lL(n.putString(e,t,r)),list:e=>(0,Zt.D)(n.list(e)),listAll:()=>(0,Zt.D)(n.listAll())}}!function(n){const e={TaskState:Ws,TaskEvent:XU,StringFormat:ta,Storage:aL,Reference:Hd};n.INTERNAL.registerComponent(new af.wA("storage-compat",O3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.8")}(dC.Z);const L3=new u.OlP("angularfire2.storageBucket"),V3=new u.OlP("angularfire2.storage.maxUploadRetryTime"),B3=new u.OlP("angularfire2.storage.maxOperationRetryTime"),U3=new u.OlP("angularfire2.storage.use-emulator");let j3=(()=>{class n{constructor(t,r,o,c,f,_,w,T,N,R){const V=(0,ns.on)(t,f,r);this.storage=(0,ns.cc)(`${V.name}.storage.${o}`,"AngularFireStorage",V.name,()=>{const $=f.runOutsideAngular(()=>V.storage(o||void 0)),ee=N;return ee&&$.useEmulator(...ee),w&&$.setMaxUploadRetryTime(w),T&&$.setMaxOperationRetryTime(T),$},[w,T])}ref(t){return _I(this.storage.ref(t))}refFromURL(t){return _I(this.storage.refFromURL(t))}upload(t,r,o){return _I(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ns.Dh),u.LFG(ns.xv,8),u.LFG(L3,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(V3,8),u.LFG(B3,8),u.LFG(U3,8),u.LFG(lI,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),H3=(()=>{class n{constructor(){ox.Z.registerVersion("angularfire",An.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[j3],imports:[$3]}),n})();const cL_firebaseConfig={apiKey:"AIzaSyAzFvzwYxlMK_XDHfw1FZj2KdVqf0CXleA",authDomain:"kmsws21-cargonaut.firebaseapp.com",projectId:"kmsws21-cargonaut",storageBucket:"kmsws21-cargonaut.appspot.com",messagingSenderId:"1019573337686",appId:"1:1019573337686:web:6c95b8ee68daf7613cc5f7",measurementId:"${config.measurementId}"};let G3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[QA]}),n.\u0275inj=u.cJS({providers:[],imports:[[zf,II,JA,ns.hO.initializeApp(cL_firebaseConfig),KB,jB,H3]]}),n})();(0,u.G48)(),no().bootstrapModule(G3).catch(n=>console.error(n))},3394:(He,_e,F)=>{"use strict";F.d(_e,{Z:()=>Me});var u=F(3854),te=F(3910),L=F(8026),ce=F(5422);class ie{constructor(he,X){this._delegate=he,this.firebase=X,(0,L._addComponent)(he,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(he,X=L._DEFAULT_ENTRY_NAME){var re;this._delegate.checkDestroyed();const we=this._delegate.container.getProvider(he);return!we.isInitialized()&&"EXPLICIT"===(null===(re=we.getComponent())||void 0===re?void 0:re.instantiationMode)&&we.initialize(),we.getImmediate({identifier:X})}_removeServiceInstance(he,X=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(X)}_addComponent(he){(0,L._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,L._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function z(){const be=function(be){const he={},X={__esModule:!0,initializeApp:function(yt,pn={}){const vt=L.initializeApp(yt,pn);if((0,u.r3)(he,vt.name))return he[vt.name];const ft=new be(vt,X);return he[vt.name]=ft,ft},app:we,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(yt){const pn=yt.name,vt=pn.replace("-compat","");if(L._registerComponent(yt)&&"PUBLIC"===yt.type){const ft=(kt=we())=>{if("function"!=typeof kt[vt])throw oe.create("invalid-app-argument",{appName:pn});return kt[vt]()};void 0!==yt.serviceProps&&(0,u.ZB)(ft,yt.serviceProps),X[vt]=ft,be.prototype[vt]=function(...kt){return this._getService.bind(this,pn).apply(this,yt.multipleInstances?kt:[])}}return"PUBLIC"===yt.type?X[vt]:null},removeApp:function(yt){delete he[yt]},useAsService:function(yt,pn){return"serverAuth"===pn?null:pn},modularAPIs:L}};function we(yt){if(!(0,u.r3)(he,yt=yt||L._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:yt});return he[yt]}return X.default=X,Object.defineProperty(X,"apps",{get:function(){return Object.keys(he).map(yt=>he[yt])}}),we.App=be,X}(ie);return be.INTERNAL=Object.assign(Object.assign({},be.INTERNAL),{createFirebaseNamespace:z,extendNamespace:function(X){(0,u.ZB)(be,X)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),be}(),U=new ce.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=P;(0,L.registerVersion)("@firebase/app-compat","0.1.11",undefined)},8026:(He,_e,F)=>{"use strict";F.r(_e),F.d(_e,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>na,_DEFAULT_ENTRY_NAME:()=>Cs,_addComponent:()=>Ts,_addOrOverwriteComponent:()=>Do,_apps:()=>Ot,_clearComponents:()=>gn,_components:()=>jt,_getProvider:()=>an,_registerComponent:()=>Is,_removeServiceInstance:()=>Wa,deleteApp:()=>ir,getApp:()=>os,getApps:()=>De,initializeApp:()=>Ui,onLog:()=>$t,registerVersion:()=>Ge,setLogLevel:()=>ji});var u=F(8239),te=F(3910),L=F(5422),ce=F(3854);class ie{constructor(it){this.container=it}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function(et){const it=et.getComponent();return"VERSION"===(null==it?void 0:it.type)}(Nt)){const Mt=Nt.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(Nt=>Nt).join(" ")}}const oe="@firebase/app",K="0.7.10",z=new L.Yd("@firebase/app"),Cs="[DEFAULT]",qa={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ot=new Map,jt=new Map;function Ts(et,it){try{et.container.addComponent(it)}catch(Nt){z.debug(`Component ${it.name} failed to register with FirebaseApp ${et.name}`,Nt)}}function Do(et,it){et.container.addOrOverwriteComponent(it)}function Is(et){const it=et.name;if(jt.has(it))return z.debug(`There were multiple attempts to register component ${it}.`),!1;jt.set(it,et);for(const Nt of Ot.values())Ts(Nt,et);return!0}function an(et,it){return et.container.getProvider(it)}function Wa(et,it,Nt=Cs){an(et,it).clearInstance(Nt)}function gn(){jt.clear()}const Lt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class mn{constructor(it,Nt,Mt){this._isDeleted=!1,this._options=Object.assign({},it),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this.checkDestroyed(),this._automaticDataCollectionEnabled=it}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(it){this._isDeleted=it}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}const na="9.6.0";function Ui(et,it={}){"object"!=typeof it&&(it={name:it});const Nt=Object.assign({name:Cs,automaticDataCollectionEnabled:!1},it),Mt=Nt.name;if("string"!=typeof Mt||!Mt)throw Lt.create("bad-app-name",{appName:String(Mt)});const oi=Ot.get(Mt);if(oi){if((0,ce.vZ)(et,oi.options)&&(0,ce.vZ)(Nt,oi.config))return oi;throw Lt.create("duplicate-app",{appName:Mt})}const Gt=new te.H0(Mt);for(const Je of jt.values())Gt.addComponent(Je);const Oe=new mn(et,Nt,Gt);return Ot.set(Mt,Oe),Oe}function os(et=Cs){const it=Ot.get(et);if(!it)throw Lt.create("no-app",{appName:et});return it}function De(){return Array.from(Ot.values())}function ir(et){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(et){const it=et.name;Ot.has(it)&&(Ot.delete(it),yield Promise.all(et.container.getProviders().map(Nt=>Nt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Ge(et,it,Nt){var Mt;let oi=null!==(Mt=qa[et])&&void 0!==Mt?Mt:et;Nt&&(oi+=`-${Nt}`);const Gt=oi.match(/\s|\//),Oe=it.match(/\s|\//);if(Gt||Oe){const Je=[`Unable to register library "${oi}" with version "${it}":`];return Gt&&Je.push(`library name "${oi}" contains illegal characters (whitespace or "/")`),Gt&&Oe&&Je.push("and"),Oe&&Je.push(`version name "${it}" contains illegal characters (whitespace or "/")`),void z.warn(Je.join(" "))}Is(new te.wA(`${oi}-version`,()=>({library:oi,version:it}),"VERSION"))}function $t(et,it){if(null!==et&&"function"!=typeof et)throw Lt.create("invalid-log-argument");(0,L.Am)(et,it)}function ji(et){(0,L.Ub)(et)}Is(new te.wA("platform-logger",it=>new ie(it),"PRIVATE")),Ge(oe,K,""),Ge(oe,K,"esm2017"),Ge("fire-js","")},3910:(He,_e,F)=>{"use strict";F.d(_e,{wA:()=>L,H0:()=>K});var u=F(8239),te=F(3854);class L{constructor(P,U,G){this.name=P,this.instanceFactory=U,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(P){return this.instantiationMode=P,this}setMultipleInstances(P){return this.multipleInstances=P,this}setServiceProps(P){return this.serviceProps=P,this}setInstanceCreatedCallback(P){return this.onInstanceCreated=P,this}}const ce="[DEFAULT]";class ie{constructor(P,U){this.name=P,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(P){const U=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(U)){const G=new te.BH;if(this.instancesDeferred.set(U,G),this.isInitialized(U)||this.shouldAutoInitialize())try{const de=this.getOrInitializeService({instanceIdentifier:U});de&&G.resolve(de)}catch(de){}}return this.instancesDeferred.get(U).promise}getImmediate(P){var U;const G=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),de=null!==(U=null==P?void 0:P.optional)&&void 0!==U&&U;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(de)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(Re){if(de)return null;throw Re}}getComponent(){return this.component}setComponent(P){if(P.name!==this.name)throw Error(`Mismatching Component ${P.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=P,this.shouldAutoInitialize()){if("EAGER"===P.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(U){}for(const[U,G]of this.instancesDeferred.entries()){const de=this.normalizeInstanceIdentifier(U);try{const Re=this.getOrInitializeService({instanceIdentifier:de});G.resolve(Re)}catch(Re){}}}}clearInstance(P=ce){this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)}delete(){var P=this;return(0,u.Z)(function*(){const U=Array.from(P.instances.values());yield Promise.all([...U.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...U.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(P=ce){return this.instances.has(P)}getOptions(P=ce){return this.instancesOptions.get(P)||{}}initialize(P={}){const{options:U={}}=P,G=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const de=this.getOrInitializeService({instanceIdentifier:G,options:U});for(const[Re,Me]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(Re)&&Me.resolve(de);return de}onInit(P,U){var G;const de=this.normalizeInstanceIdentifier(U),Re=null!==(G=this.onInitCallbacks.get(de))&&void 0!==G?G:new Set;Re.add(P),this.onInitCallbacks.set(de,Re);const Me=this.instances.get(de);return Me&&P(Me,de),()=>{Re.delete(P)}}invokeOnInitCallbacks(P,U){const G=this.onInitCallbacks.get(U);if(G)for(const de of G)try{de(P,U)}catch(Re){}}getOrInitializeService({instanceIdentifier:P,options:U={}}){let G=this.instances.get(P);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(z=P,z===ce?void 0:z),options:U}),this.instances.set(P,G),this.instancesOptions.set(P,U),this.invokeOnInitCallbacks(G,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,G)}catch(de){}var z;return G||null}normalizeInstanceIdentifier(P=ce){return this.component?this.component.multipleInstances?P:ce:P}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(P){this.name=P,this.providers=new Map}addComponent(P){const U=this.getProvider(P.name);if(U.isComponentSet())throw new Error(`Component ${P.name} has already been registered with ${this.name}`);U.setComponent(P)}addOrOverwriteComponent(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)}getProvider(P){if(this.providers.has(P))return this.providers.get(P);const U=new ie(P,this);return this.providers.set(P,U),U}getProviders(){return Array.from(this.providers.values())}}},5422:(He,_e,F)=>{"use strict";F.d(_e,{in:()=>te,Yd:()=>oe,Ub:()=>K,Am:()=>z});const u=[];var te=(()=>{return(P=te||(te={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",te;var P})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ce=te.INFO,ie={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},J=(P,U,...G)=>{if(U<P.logLevel)return;const de=(new Date).toISOString(),Re=ie[U];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Re](`[${de}]  ${P.name}:`,...G)};class oe{constructor(U){this.name=U,this._logLevel=ce,this._logHandler=J,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in te))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?L[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...U),this._logHandler(this,te.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...U),this._logHandler(this,te.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,te.INFO,...U),this._logHandler(this,te.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,te.WARN,...U),this._logHandler(this,te.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...U),this._logHandler(this,te.ERROR,...U)}}function K(P){u.forEach(U=>{U.setLogLevel(P)})}function z(P,U){for(const G of u){let de=null;U&&U.level&&(de=L[U.level]),G.userLogHandler=null===P?null:(Re,Me,...be)=>{const he=be.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch(re){return null}}).filter(X=>X).join(" ");Me>=(null!=de?de:Re.logLevel)&&P({level:te[Me].toLowerCase(),message:he,args:be,type:Re.name})}}}},8239:(He,_e,F)=>{"use strict";function u(L,ce,ie,J,oe,K,z){try{var P=L[K](z),U=P.value}catch(G){return void ie(G)}P.done?ce(U):Promise.resolve(U).then(J,oe)}function te(L){return function(){var ce=this,ie=arguments;return new Promise(function(J,oe){var K=L.apply(ce,ie);function z(U){u(K,J,oe,z,P,"next",U)}function P(U){u(K,J,oe,z,P,"throw",U)}z(void 0)})}}F.d(_e,{Z:()=>te})}},He=>{He(He.s=6977)}]);