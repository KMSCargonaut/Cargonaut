(self.webpackChunkcargonaut=self.webpackChunkcargonaut||[]).push([[179],{8255:We=>{function be(F){return Promise.resolve().then(()=>{var o=new Error("Cannot find module '"+F+"'");throw o.code="MODULE_NOT_FOUND",o})}be.keys=()=>[],be.resolve=be,be.id=8255,We.exports=be},7716:(We,be,F)=>{"use strict";F.d(be,{deG:()=>gp,tb:()=>nD,AFp:()=>XE,ip1:()=>k1,CZH:()=>kd,hGG:()=>PN,z2F:()=>Pd,sBO:()=>kb,Sil:()=>Hu,_Vd:()=>md,EJc:()=>dN,SBq:()=>Wa,qLn:()=>Oh,vpe:()=>oa,gxx:()=>Gc,tBr:()=>Tu,XFs:()=>Ze,OlP:()=>On,zs3:()=>En,ZZ4:()=>Lu,aQg:()=>Lg,soG:()=>Ny,YKP:()=>Bg,v3s:()=>gD,h0i:()=>sa,PXZ:()=>_k,R0b:()=>us,FiY:()=>xa,Lbi:()=>tD,g9A:()=>eD,Qsj:()=>dS,FYo:()=>yd,JOm:()=>La,Tiy:()=>Pg,q3G:()=>bn,tp0:()=>Br,EAV:()=>B1,Rgc:()=>bd,dDg:()=>uD,DyG:()=>Sa,q4F:()=>q_,GfV:()=>HT,s_b:()=>Zg,ifc:()=>Pe,eFA:()=>IN,G48:()=>wN,Gpc:()=>B,X6Q:()=>qf,_c5:()=>Fy,VLi:()=>bN,c2e:()=>rD,zSh:()=>zc,wAp:()=>dt,vHH:()=>Me,EiD:()=>qt,mCW:()=>Cl,qzn:()=>Pa,JVY:()=>Mm,pB0:()=>vl,eBb:()=>Dp,L6k:()=>Ep,LAX:()=>Qo,cg1:()=>k_,Tjo:()=>j1,kL8:()=>rb,yhl:()=>Nm,dqk:()=>Yt,sIi:()=>Qs,CqO:()=>y_,QGY:()=>sd,F4k:()=>od,RDi:()=>ap,AaK:()=>Q,z3N:()=>Jo,qOj:()=>Jc,TTD:()=>_r,_Bn:()=>Zl,xp6:()=>Jw,uIk:()=>Jh,Tol:()=>zv,Gre:()=>Qv,DjV:()=>xu,ekj:()=>_g,Suo:()=>Mr,Xpm:()=>nr,lG2:()=>It,Yz7:()=>sn,cJS:()=>_n,oAB:()=>Ve,Yjl:()=>kn,Y36:()=>lr,_UZ:()=>uf,BQk:()=>Ke,ynx:()=>__,qZA:()=>g_,TgZ:()=>lg,EpF:()=>ra,n5z:()=>dh,Ikx:()=>nb,SDv:()=>Cb,QtT:()=>LT,pQV:()=>xg,LFG:()=>Tn,$8M:()=>Dc,NdJ:()=>cg,CRH:()=>D1,kcU:()=>gc,O4$:()=>pu,oxw:()=>$v,ALo:()=>NE,lcZ:()=>ME,Hsn:()=>_i,F$t:()=>cf,Q6J:()=>Ha,s9C:()=>D_,MGl:()=>Ln,VKq:()=>fy,WLB:()=>y1,kEZ:()=>py,iGM:()=>GS,MAs:()=>$C,CHM:()=>au,LSH:()=>Ah,kYT:()=>ct,Jzz:()=>gT,Udp:()=>mg,YNc:()=>Ov,W1O:()=>UE,_uU:()=>Jv,Oqu:()=>A_,hij:()=>Ll,HOy:()=>dr,Gf:()=>zS});var o=F(9765),Z=F(5319),O=F(7574),ce=F(6682),ue=F(8819);function ee(i){for(let s in i)if(i[s]===ee)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const u in s)s.hasOwnProperty(u)&&!i.hasOwnProperty(u)&&(i[u]=s[u])}function Q(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Q).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const u=s.indexOf("\n");return-1===u?s:s.substring(0,u)}function z(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const L=ee({__forward_ref__:ee});function B(i){return i.__forward_ref__=B,i.toString=function(){return Q(this())},i}function H(i){return he(i)?i():i}function he(i){return"function"==typeof i&&i.hasOwnProperty(L)&&i.__forward_ref__===B}class Me extends Error{constructor(s,u){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,u)),this.code=s}}function re(i){return"string"==typeof i?i:null==i?"":String(i)}function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():re(i)}function Nt(i,s){const u=s?` in ${s}`:"";throw new Me("201",`No provider for ${ae(i)} found${u}`)}function Bt(i,s,u,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${u} ${c} ${s} <=Actual]`))}function sn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function _n(i){return{providers:i.providers||[],imports:i.imports||[]}}function Xt(i){return Qt(i,Re)||Qt(i,qn)}function Qt(i,s){return i.hasOwnProperty(s)?i[s]:null}function $i(i){return i&&(i.hasOwnProperty(wn)||i.hasOwnProperty(Ei))?i[wn]:null}const Re=ee({\u0275prov:ee}),wn=ee({\u0275inj:ee}),qn=ee({ngInjectableDef:ee}),Ei=ee({ngInjectorDef:ee});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let jt;function Gn(i){const s=jt;return jt=i,s}function it(i,s,u){const c=Xt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ze.Optional?null:void 0!==s?s:void Nt(Q(i),"Injector")}function Mt(i){return{toString:i}.toString()}var Ot=(()=>((Ot=Ot||{})[Ot.OnPush=0]="OnPush",Ot[Ot.Default=1]="Default",Ot))(),Pe=(()=>((Pe=Pe||{})[Pe.Emulated=0]="Emulated",Pe[Pe.None=2]="None",Pe[Pe.ShadowDom=3]="ShadowDom",Pe))();const Xe="undefined"!=typeof globalThis&&globalThis,da="undefined"!=typeof window&&window,cn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt=Xe||"undefined"!=typeof global&&global||da||cn,G={},q=[],W=ee({\u0275cmp:ee}),ve=ee({\u0275dir:ee}),le=ee({\u0275pipe:ee}),qe=ee({\u0275mod:ee}),ut=ee({\u0275loc:ee}),Ht=ee({\u0275fac:ee}),An=ee({__NG_ELEMENT_ID__:ee});let Wn=0;function nr(i){return Mt(()=>{const u={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||q,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Pe.Emulated,id:"c",styles:i.styles||q,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,g=i.pipes;return c.id+=Wn++,c.inputs=Lt(i.inputs,u),c.outputs=Lt(i.outputs),f&&f.forEach(y=>y(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(J):null,c.pipeDefs=g?()=>("function"==typeof g?g():g).map(K):null,c})}function J(i){return hn(i)||function(i){return i[ve]||null}(i)}function K(i){return function(i){return i[le]||null}(i)}const Ce={};function Ve(i){return Mt(()=>{const s={type:i.type,bootstrap:i.bootstrap||q,declarations:i.declarations||q,imports:i.imports||q,exports:i.exports||q,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Ce[i.id]=i.type),s})}function ct(i,s){return Mt(()=>{const u=Nn(i,!0);u.declarations=s.declarations||q,u.imports=s.imports||q,u.exports=s.exports||q})}function Lt(i,s){if(null==i)return G;const u={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,s&&(s[d]=f)}return u}const It=nr;function kn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function hn(i){return i[W]||null}function Nn(i,s){const u=i[qe]||null;if(!u&&!0===s)throw new Error(`Type ${Q(i)} does not have '\u0275mod' property.`);return u}function Ls(i){return Array.isArray(i)&&"object"==typeof i[1]}function Vr(i){return Array.isArray(i)&&!0===i[1]}function tc(i){return 0!=(8&i.flags)}function Yu(i){return 2==(2&i.flags)}function Ur(i){return 1==(1&i.flags)}function hs(i){return null!==i.template}function Er(i){return 0!=(512&i[2])}function Ii(i,s){return i.hasOwnProperty(Ht)?i[Ht]:null}class Vs{constructor(s,u,c){this.previousValue=s,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function _r(){return oc}function oc(i){return i.type.prototype.ngOnChanges&&(i.setInput=ga),Us}function Us(){const i=Xd(this),s=null==i?void 0:i.current;if(s){const u=i.previous;if(u===G)i.previous=s;else for(let c in s)u[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ga(i,s,u,c){const d=Xd(i)||function(i,s){return i[Ai]=s}(i,{previous:G,current:null}),f=d.current||(d.current={}),g=d.previous,y=this.declaredInputs[u],w=g[y];f[y]=new Vs(w&&w.currentValue,s,g===G),i[c]=s}_r.ngInherit=!0;const Ai="__ngSimpleChanges__";function Xd(i){return i[Ai]||null}const ru="http://www.w3.org/2000/svg";let fs;function ap(i){fs=i}function yo(){return void 0!==fs?fs:"undefined"!=typeof document?document:void 0}function Rn(i){return!!i.listen}const Dr={createRenderer:(i,s)=>yo()};function on(i){for(;Array.isArray(i);)i=i[0];return i}function ya(i,s){return on(s[i])}function Si(i,s){return on(s[i.index])}function lc(i,s){return i.data[s]}function qi(i,s){return i[s]}function ui(i,s){const u=s[i];return Ls(u)?u:u[0]}function el(i){return 4==(4&i[2])}function su(i){return 128==(128&i[2])}function ps(i,s){return null==s?null:i[s]}function tl(i){i[18]=0}function Bo(i,s){i[5]+=s;let u=i,c=i[3];for(;null!==c&&(1===s&&1===u[5]||-1===s&&0===u[5]);)c[5]+=s,u=c,c=c[3]}const lt={lFrame:cp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ou(){return lt.bindingsEnabled}function De(){return lt.lFrame.lView}function xt(){return lt.lFrame.tView}function au(i){return lt.lFrame.contextLView=i,i[8]}function Cn(){let i=uu();for(;null!==i&&64===i.type;)i=i.parent;return i}function uu(){return lt.lFrame.currentTNode}function Gi(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}function Wr(i,s){const u=lt.lFrame;u.currentTNode=i,u.isParent=s}function lu(){return lt.lFrame.isParent}function va(){lt.lFrame.isParent=!1}function il(){return lt.isInCheckNoChangesMode}function bo(i){lt.isInCheckNoChangesMode=i}function or(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Yr(){return lt.lFrame.bindingIndex}function ms(){return lt.lFrame.bindingIndex++}function Ir(i){const s=lt.lFrame,u=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,u}function wa(i){lt.lFrame.inI18n=i}function hc(i,s){const u=lt.lFrame;u.bindingIndex=u.bindingRootIndex=i,fc(s)}function fc(i){lt.lFrame.currentDirectiveIndex=i}function pc(){return lt.lFrame.currentQueryIndex}function jo(i){lt.lFrame.currentQueryIndex=i}function sl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,u){if(u&Ze.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||u&Ze.Host||(d=sl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=lt.lFrame=ol();return c.currentTNode=s,c.lView=i,!0}function hu(i){const s=ol(),u=i[1];lt.lFrame=s,s.currentTNode=u.firstChild,s.lView=i,s.tView=u,s.contextLView=i,s.bindingIndex=u.bindingStartIndex,s.inI18n=!1}function ol(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?cp(i):s}function cp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function rh(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const al=rh;function $o(){const i=rh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ar(){return lt.lFrame.selectedIndex}function wo(i){lt.lFrame.selectedIndex=i}function Yn(){const i=lt.lFrame;return lc(i.tView,i.selectedIndex)}function pu(){lt.lFrame.currentNamespace=ru}function gc(){lt.lFrame.currentNamespace=null}function Ca(i,s){for(let u=s.directiveStart,c=s.directiveEnd;u<c;u++){const f=i.data[u].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:E,ngOnDestroy:A}=f;g&&(i.contentHooks||(i.contentHooks=[])).push(-u,g),y&&((i.contentHooks||(i.contentHooks=[])).push(u,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(u,y)),w&&(i.viewHooks||(i.viewHooks=[])).push(-u,w),E&&((i.viewHooks||(i.viewHooks=[])).push(u,E),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(u,E)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(u,A)}}function Ta(i,s,u){yc(i,s,3,u)}function Ho(i,s,u,c){(3&i[2])===u&&yc(i,s,u,c)}function rr(i,s){let u=i[2];(3&u)===s&&(u&=2047,u+=1,i[2]=u)}function yc(i,s,u,c){const f=null!=c?c:-1,g=s.length-1;let y=0;for(let w=void 0!==c?65535&i[18]:0;w<g;w++)if("number"==typeof s[w+1]){if(y=s[w],null!=c&&y>=c)break}else s[w]<0&&(i[18]+=65536),(y<f||-1==f)&&(ih(i,u,s,w),i[18]=(4294901760&i[18])+w+2),w++}function ih(i,s,u,c){const d=u[c]<0,f=u[c+1],y=i[d?-u[c]:u[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(y)}finally{}}}else try{f.call(y)}finally{}}class ll{constructor(s,u,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function oh(i,s,u){const c=Rn(i);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const g=u[d++],y=u[d++],w=u[d++];c?i.setAttribute(s,y,w,g):s.setAttributeNS(g,y,w)}else{const g=f,y=u[++d];Bs(g)?c&&i.setProperty(s,g,y):c?i.setAttribute(s,g,y):s.setAttribute(g,y),d++}}return d}function fp(i){return 3===i||4===i||6===i}function Bs(i){return 64===i.charCodeAt(0)}function cl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let u=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?u=d:0===u||pp(i,u,d,null,-1===u||2===u?s[++c]:null)}}return i}function pp(i,s,u,c,d){let f=0,g=i.length;if(-1===s)g=-1;else for(;f<i.length;){const y=i[f++];if("number"==typeof y){if(y===s){g=-1;break}if(y>s){g=f-1;break}}}for(;f<i.length;){const y=i[f];if("number"==typeof y)break;if(y===u){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==g&&(i.splice(g,0,s),f=g+1),i.splice(f++,0,u),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function bc(i){return-1!==i}function zi(i){return 32767&i}function Zs(i,s){let u=function(i){return i>>16}(i),c=s;for(;u>0;)c=c[15],u--;return c}let wc=!0;function Da(i){const s=wc;return wc=i,s}let uh=0;function Co(i,s){const u=gn(i,s);if(-1!==u)return u;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,gu(c.data,i),gu(s,null),gu(c.blueprint,null));const d=Ge(i,s),f=i.injectorIndex;if(bc(d)){const g=zi(d),y=Zs(d,s),w=y[1].data;for(let E=0;E<8;E++)s[f+E]=y[g+E]|w[g+E]}return s[f+8]=d,f}function gu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function gn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ge(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let u=0,c=null,d=s;for(;null!==d;){const f=d[1],g=f.type;if(c=2===g?f.declTNode:1===g?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function an(i,s,u){!function(i,s,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(An)&&(c=u[An]),null==c&&(c=u[An]=uh++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,u)}function xn(i,s,u){if(u&Ze.Optional)return i;Nt(s,"NodeInjector")}function mu(i,s,u,c){if(u&Ze.Optional&&void 0===c&&(c=null),0==(u&(Ze.Self|Ze.Host))){const d=i[9],f=Gn(void 0);try{return d?d.get(s,c,u&Ze.Optional):it(s,c,u&Ze.Optional)}finally{Gn(f)}}return xn(c,s,u)}function vs(i,s,u,c=Ze.Default,d){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(An)?i[An]:void 0;return"number"==typeof s?s>=0?255&s:_u:s}(u);if("function"==typeof f){if(!du(s,i,c))return c&Ze.Host?xn(d,u,c):mu(s,u,c,d);try{const g=f(c);if(null!=g||c&Ze.Optional)return g;Nt(u)}finally{al()}}else if("number"==typeof f){let g=null,y=gn(i,s),w=-1,E=c&Ze.Host?s[16][6]:null;for((-1===y||c&Ze.SkipSelf)&&(w=-1===y?Ge(i,s):s[y+8],-1!==w&&Ec(c,!1)?(g=s[1],y=zi(w),s=Zs(w,s)):y=-1);-1!==y;){const A=s[1];if(To(f,y,A.data)){const R=dl(y,s,u,g,c,E);if(R!==Kn)return R}w=s[y+8],-1!==w&&Ec(c,s[1].data[y+8]===E)&&To(f,y,s)?(g=A,y=zi(w),s=Zs(w,s)):y=-1}}}return mu(s,u,c,d)}const Kn={};function _u(){return new Ni(Cn(),De())}function dl(i,s,u,c,d,f){const g=s[1],y=g.data[i+8],A=hl(y,g,u,null==c?Yu(y)&&wc:c!=g&&0!=(3&y.type),d&Ze.Host&&f===y);return null!==A?kt(s,g,A,y):Kn}function hl(i,s,u,c,d){const f=i.providerIndexes,g=s.data,y=1048575&f,w=i.directiveStart,A=f>>20,P=d?y+A:i.directiveEnd;for(let j=c?y:y+A;j<P;j++){const Y=g[j];if(j<w&&u===Y||j>=w&&Y.type===u)return j}if(d){const j=g[w];if(j&&hs(j)&&j.type===u)return w}return null}function kt(i,s,u,c){let d=i[u];const f=s.data;if(function(i){return i instanceof ll}(d)){const g=d;g.resolving&&function(i,s){throw new Me("200",`Circular dependency in DI detected for ${i}`)}(ae(f[u]));const y=Da(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?Gn(g.injectImpl):null;du(i,c,Ze.Default);try{d=i[u]=g.factory(void 0,f,i,c),s.firstCreatePass&&u>=c.directiveStart&&function(i,s,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const g=oc(s);(u.preOrderHooks||(u.preOrderHooks=[])).push(i,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(i,g)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-i,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(i,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(i,f))}(u,f[u],s)}finally{null!==w&&Gn(w),Da(y),g.resolving=!1,al()}}return d}function To(i,s,u){return!!(u[s+(i>>5)]&1<<i)}function Ec(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class Ni{constructor(s,u){this._tNode=s,this._lView=u}get(s,u,c){return vs(this._tNode,this._lView,s,c,u)}}function dh(i){return Mt(()=>{const s=i.prototype.constructor,u=s[Ht]||yu(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Ht]||yu(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function yu(i){return he(i)?()=>{const s=yu(H(i));return s&&s()}:Ii(i)}function Dc(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const u=i.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(fp(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===s)return u[d+1];d+=2}}}return null}(Cn(),i)}const Mi="__parameters__";function Eo(i,s,u){return Mt(()=>{const c=function(i){return function(...u){if(i){const c=i(...u);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const g=new d(...f);return y.annotation=g,y;function y(w,E,A){const R=w.hasOwnProperty(Mi)?w[Mi]:Object.defineProperty(w,Mi,{value:[]})[Mi];for(;R.length<=A;)R.push(null);return(R[A]=R[A]||[]).push(g),w}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class On{constructor(s,u){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gp=new On("AnalyzeForEntryComponents"),Sa=Function;function Ki(i,s){void 0===s&&(s=i);for(let u=0;u<i.length;u++){let c=i[u];Array.isArray(c)?(s===i&&(s=i.slice(0,u)),Ki(c,s)):s!==i&&s.push(c)}return s}function bs(i,s){i.forEach(u=>Array.isArray(u)?bs(u,s):s(u))}function bu(i,s,u){s>=i.length?i.push(u):i.splice(s,0,u)}function xi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $s(i,s){const u=[];for(let c=0;c<i;c++)u.push(s);return u}function Jn(i,s,u){let c=Io(i,s);return c>=0?i[1|c]=u:(c=~c,function(i,s,u,c){let d=i.length;if(d==s)i.push(u,c);else if(1===d)i.push(c,i[0]),i[0]=u;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=u,i[s+1]=c}}(i,c,s,u)),c}function Qn(i,s){const u=Io(i,s);if(u>=0)return i[1|u]}function Io(i,s){return function(i,s,u){let c=0,d=i.length>>u;for(;d!==c;){const f=c+(d-c>>1),g=i[f<<u];if(s===g)return f<<u;g>s?d=f:c=f+1}return~(d<<u)}(i,s,1)}const Vt={},nn="__NG_DI_FLAG__",sr="ngTempTokenPath",ar=/\n/gm,wu="__source",qs=ee({provide:String,useValue:ee});let hi;function gt(i){const s=hi;return hi=i,s}function y0(i,s=Ze.Default){if(void 0===hi)throw new Error("inject() must be called from an injection context");return null===hi?it(i,void 0,s):hi.get(i,s&Ze.Optional?null:void 0,s)}function Tn(i,s=Ze.Default){return(jt||y0)(H(i),s)}function Wo(i){const s=[];for(let u=0;u<i.length;u++){const c=H(i[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,f=Ze.Default;for(let g=0;g<c.length;g++){const y=c[g],w=vp(y);"number"==typeof w?-1===w?d=y.token:f|=w:d=y}s.push(Tn(d,f))}else s.push(Tn(c))}return s}function Cu(i,s){return i[nn]=s,i.prototype[nn]=s,i}function vp(i){return i[nn]}function Gs(i,s,u,c){const d=i[sr];throw s[wu]&&d.unshift(s[wu]),i.message=function(i,s,u,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=Q(s);if(Array.isArray(s))d=s.map(Q).join(" -> ");else if("object"==typeof s){let f=[];for(let g in s)if(s.hasOwnProperty(g)){let y=s[g];f.push(g+":"+("string"==typeof y?JSON.stringify(y):Q(y)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${i.replace(ar,"\n  ")}`}("\n"+i.message,d,u,c),i.ngTokenPath=d,i[sr]=null,i}const Tu=Cu(Eo("Inject",i=>({token:i})),-1),xa=Cu(Eo("Optional"),8),Br=Cu(Eo("SkipSelf"),4);let Eu;function Ko(i){var s;return(null===(s=function(){if(void 0===Eu&&(Eu=null,Yt.trustedTypes))try{Eu=Yt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Eu}())||void 0===s?void 0:s.createHTML(i))||i}class Du{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class C0 extends Du{getTypeName(){return"HTML"}}class T0 extends Du{getTypeName(){return"Style"}}class Th extends Du{getTypeName(){return"Script"}}class E0 extends Du{getTypeName(){return"URL"}}class D0 extends Du{getTypeName(){return"ResourceURL"}}function Jo(i){return i instanceof Du?i.changingThisBreaksApplicationSecurity:i}function Pa(i,s){const u=Nm(i);if(null!=u&&u!==s){if("ResourceURL"===u&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===s}function Nm(i){return i instanceof Du&&i.getTypeName()||null}function Mm(i){return new C0(i)}function Ep(i){return new T0(i)}function Dp(i){return new Th(i)}function Qo(i){return new E0(i)}function vl(i){return new D0(i)}function Ip(i){const s=new I0(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ko(""),"text/html")}catch(i){return!1}}()?new xm(s):s}class xm{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const u=(new window.DOMParser).parseFromString(Ko(s),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(s):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class I0{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(s){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ko(s),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Ko(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(s){const u=s.attributes;for(let d=u.length-1;0<d;d--){const g=u.item(d).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let c=s.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Eh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Cl(i){return(i=String(i)).match(Eh)||i.match(wl)?i:"unsafe:"+i}function Oc(i){return(i=String(i)).split(",").map(s=>Cl(s.trim())).join(", ")}function zs(i){const s={};for(const u of i.split(","))s[u]=!0;return s}function Xo(...i){const s={};for(const u of i)for(const c in u)u.hasOwnProperty(c)&&(s[c]=!0);return s}const Dh=zs("area,br,col,hr,img,wbr"),Ap=zs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tl=zs("rp,rt"),Sp=Xo(Dh,Xo(Ap,zs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xo(Tl,zs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xo(Tl,Ap)),v=zs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),p=zs("srcset"),S=Xo(v,p,zs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),k=zs("script,style,template");class X{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let u=s.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(s){const u=s.nodeName.toLowerCase();if(!Sp.hasOwnProperty(u))return this.sanitizedSomething=!0,!k.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=s.attributes;for(let d=0;d<c.length;d++){const f=c.item(d),g=f.name,y=g.toLowerCase();if(!S.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=f.value;v[y]&&(w=Cl(w)),p[y]&&(w=Oc(w)),this.buf.push(" ",g,'="',Fe(w),'"')}return this.buf.push(">"),!0}endElement(s){const u=s.nodeName.toLowerCase();Sp.hasOwnProperty(u)&&!Dh.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(s){this.buf.push(Fe(s))}checkClobberedElement(s,u){if(u&&(s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return u}}const _e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,je=/([^\#-~ |!])/g;function Fe(i){return i.replace(/&/g,"&amp;").replace(_e,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(je,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let st;function qt(i,s){let u=null;try{st=st||Ip(i);let c=s?String(s):"";u=st.getInertBodyElement(c);let d=5,f=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=f,f=u.innerHTML,u=st.getInertBodyElement(c)}while(c!==f);return Ko((new X).sanitizeChildren(vn(u)||u))}finally{if(u){const c=vn(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function vn(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var bn=(()=>((bn=bn||{})[bn.NONE=0]="NONE",bn[bn.HTML=1]="HTML",bn[bn.STYLE=2]="STYLE",bn[bn.SCRIPT=3]="SCRIPT",bn[bn.URL=4]="URL",bn[bn.RESOURCE_URL=5]="RESOURCE_URL",bn))();function Ah(i){const s=function(){const i=De();return i&&i[12]}();return s?s.sanitize(bn.URL,i)||"":Pa(i,"URL")?Jo(i):Cl(re(i))}const xh="__ngContext__";function fi(i,s){i[xh]=s}function N0(i){const s=function(i){return i[xh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Lc(i){return i.ngOriginalError}function VI(i,...s){i.error(...s)}class Oh{constructor(){this._console=console}handleError(s){const u=this._findOriginalError(s),c=this._findContext(s),d=(i=s)&&i.ngErrorLogger||VI;var i;d(this._console,"ERROR",s),u&&d(this._console,"ORIGINAL ERROR",u),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(s){return s?s.ngDebugContext||this._findContext(Lc(s)):null}_findOriginalError(s){let u=s&&Lc(s);for(;u&&Lc(u);)u=Lc(u);return u||null}}const ZI=/^>|^->|<!--|-->|--!>|<!-$/g,O0=/(<|>)/;const Rw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yt))();function Fa(i){return i instanceof Function?i():i}var La=(()=>((La=La||{})[La.Important=1]="Important",La[La.DashCase=2]="DashCase",La))();let P0;function Um(i,s){return P0(i,s)}function Rp(i){const s=i[3];return Vr(s)?s[3]:s}function Bm(i){return F0(i[13])}function Vw(i){return F0(i[4])}function F0(i){for(;null!==i&&!Vr(i);)i=i[4];return i}function Vc(i,s,u,c,d){if(null!=c){let f,g=!1;Vr(c)?f=c:Ls(c)&&(g=!0,c=c[0]);const y=on(c);0===i&&null!==u?null==d?$w(s,u,y):Il(s,u,y,d||null,!0):1===i&&null!==u?Il(s,u,y,d||null,!0):2===i?j0(s,y,g):3===i&&s.destroyNode(y),null!=f&&function(i,s,u,c,d){const f=u[7];f!==on(u)&&Vc(s,i,c,f,d);for(let y=10;y<u.length;y++){const w=u[y];Bc(w[1],w,i,s,c,f)}}(s,i,f,u,d)}}function Zm(i,s){return Rn(i)?i.createText(s):i.createTextNode(s)}function Uw(i,s,u){Rn(i)?i.setValue(s,u):s.textContent=u}function WI(i,s){return i.createComment(function(i){return i.replace(ZI,s=>s.replace(O0,"\u200b$1\u200b"))}(s))}function L0(i,s,u){return Rn(i)?i.createElement(s,u):null===u?i.createElement(s):i.createElementNS(u,s)}function jm(i,s){const u=i[9],c=u.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Bo(d,-1)),u.splice(c,1)}function $m(i,s){if(i.length<=10)return;const u=10+s,c=i[u];if(c){const d=c[17];null!==d&&d!==i&&jm(d,c),s>0&&(i[u-1][4]=c[4]);const f=xi(i,10+s);!function(i,s){Bc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const g=f[19];null!==g&&g.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Bw(i,s){if(!(256&s[2])){const u=s[11];Rn(u)&&u.destroyNode&&Bc(i,s,u,3,null,null),function(i){let s=i[13];if(!s)return Dl(i[1],i);for(;s;){let u=null;if(Ls(s))u=s[13];else{const c=s[10];c&&(u=c)}if(!u){for(;s&&!s[4]&&s!==i;)Ls(s)&&Dl(s[1],s),s=s[3];null===s&&(s=i),Ls(s)&&Dl(s[1],s),u=s&&s[4]}s=u}}(s)}}function Dl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let u;if(null!=i&&null!=(u=i.destroyHooks))for(let c=0;c<u.length;c+=2){const d=s[u[c]];if(!(d instanceof ll)){const f=u[c+1];if(Array.isArray(f))for(let g=0;g<f.length;g+=2){const y=d[f[g]],w=f[g+1];try{w.call(y)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function(i,s){const u=i.cleanup,c=s[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const g=u[f+1],y="function"==typeof g?g(s):on(s[g]),w=c[d=u[f+2]],E=u[f+3];"boolean"==typeof E?y.removeEventListener(u[f],w,E):E>=0?c[d=E]():c[d=-E].unsubscribe(),f+=2}else{const g=c[d=u[f+1]];u[f].call(g)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();s[7]=null}}(i,s),1===s[1].type&&Rn(s[11])&&s[11].destroy();const u=s[17];if(null!==u&&Vr(s[3])){u!==s[3]&&jm(u,s);const c=s[19];null!==c&&c.detachView(i)}}}function Zw(i,s,u){return jw(i,s.parent,u)}function jw(i,s,u){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return u[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===Pe.None||d===Pe.Emulated)return null}return Si(c,u)}function Il(i,s,u,c,d){Rn(i)?i.insertBefore(s,u,c,d):s.insertBefore(u,c,d)}function $w(i,s,u){Rn(i)?i.appendChild(s,u):s.appendChild(u)}function Hw(i,s,u,c,d){null!==c?Il(i,s,u,c,d):$w(i,s,u)}function Hm(i,s){return Rn(i)?i.parentNode(s):s.parentNode}function Gm(i,s,u){return Uc(i,s,u)}function zm(i,s,u){return 40&i.type?Si(i,u):null}let U0,Uc=zm;function qw(i,s){Uc=i,U0=s}function Fh(i,s,u,c){const d=Zw(i,c,s),f=s[11],y=Gm(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(u))for(let w=0;w<u.length;w++)Hw(f,d,u[w],y,!1);else Hw(f,d,u,y,!1);void 0!==U0&&U0(f,c,s,u,d)}function Wm(i,s){if(null!==s){const u=s.type;if(3&u)return Si(s,i);if(4&u)return Z0(-1,i[s.index]);if(8&u){const c=s.child;if(null!==c)return Wm(i,c);{const d=i[s.index];return Vr(d)?Z0(-1,d):on(d)}}if(32&u)return Um(s,i)()||on(i[s.index]);{const c=B0(i,s);return null!==c?Array.isArray(c)?c[0]:Wm(Rp(i[16]),c):Wm(i,s.next)}}return null}function B0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Z0(i,s){const u=10+i+1;if(u<s.length){const c=s[u],d=c[1].firstChild;if(null!==d)return Wm(c,d)}return s[7]}function j0(i,s,u){const c=Hm(i,s);c&&function(i,s,u,c){Rn(i)?i.removeChild(s,u,c):s.removeChild(u)}(i,c,s,u)}function Ym(i,s,u,c,d,f,g){for(;null!=u;){const y=c[u.index],w=u.type;if(g&&0===s&&(y&&fi(on(y),c),u.flags|=4),64!=(64&u.flags))if(8&w)Ym(i,s,u.child,c,d,f,!1),Vc(s,i,d,y,f);else if(32&w){const E=Um(u,c);let A;for(;A=E();)Vc(s,i,d,A,f);Vc(s,i,d,y,f)}else 16&w?Al(i,s,c,u,d,f):Vc(s,i,d,y,f);u=g?u.projectionNext:u.next}}function Bc(i,s,u,c,d,f){Ym(u,c,i.firstChild,s,d,f,!1)}function Al(i,s,u,c,d,f){const g=u[16],w=g[6].projection[c.projection];if(Array.isArray(w))for(let E=0;E<w.length;E++)Vc(s,i,d,w[E],f);else Ym(i,s,w,g[3],d,f,!0)}function zw(i,s,u){Rn(i)?i.setAttribute(s,"style",u):s.style.cssText=u}function $0(i,s,u){Rn(i)?""===u?i.removeAttribute(s,"class"):i.setAttribute(s,"class",u):s.className=u}function H0(i,s,u){let c=i.length;for(;;){const d=i.indexOf(s,u);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}u=d+1}}const Ww="ng-template";function rA(i,s,u){let c=0;for(;c<i.length;){let d=i[c++];if(u&&"class"===d){if(d=i[c],-1!==H0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function q0(i){return 4===i.type&&i.value!==Ww}function iA(i,s,u){return s===(4!==i.type||u?i.value:Ww)}function sA(i,s,u){let c=4;const d=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(fp(i[s]))return s;return i.length}(d);let g=!1;for(let y=0;y<s.length;y++){const w=s[y];if("number"!=typeof w){if(!g)if(4&c){if(c=2|1&c,""!==w&&!iA(i,w,u)||""===w&&1===s.length){if(ea(c))return!1;g=!0}}else{const E=8&c?w:s[++y];if(8&c&&null!==i.attrs){if(!rA(i.attrs,E,u)){if(ea(c))return!1;g=!0}continue}const R=G0(8&c?"class":w,d,q0(i),u);if(-1===R){if(ea(c))return!1;g=!0;continue}if(""!==E){let P;P=R>f?"":d[R+1].toLowerCase();const j=8&c?P:null;if(j&&-1!==H0(j,E,0)||2&c&&E!==P){if(ea(c))return!1;g=!0}}}}else{if(!g&&!ea(c)&&!ea(w))return!1;if(g&&ea(w))continue;g=!1,c=w|1&c}}return ea(c)||g}function ea(i){return 0==(1&i)}function G0(i,s,u,c){if(null===s)return-1;let d=0;if(c||!u){let f=!1;for(;d<s.length;){const g=s[d];if(g===i)return d;if(3===g||6===g)f=!0;else{if(1===g||2===g){let y=s[++d];for(;"string"==typeof y;)y=s[++d];continue}if(4===g)break;if(0===g){d+=4;continue}}d+=f?1:2}return-1}return function(i,s){let u=i.indexOf(4);if(u>-1)for(u++;u<i.length;){const c=i[u];if("number"==typeof c)return-1;if(c===s)return u;u++}return-1}(s,i)}function Yw(i,s,u=!1){for(let c=0;c<s.length;c++)if(sA(i,s[c],u))return!0;return!1}function mx(i,s){e:for(let u=0;u<s.length;u++){const c=s[u];if(i.length===c.length){for(let d=0;d<i.length;d++)if(i[d]!==c[d])continue e;return!0}}return!1}function oe(i,s){return i?":not("+s.trim()+")":s}function Km(i){let s=i[0],u=1,c=2,d="",f=!1;for(;u<i.length;){let g=i[u];if("string"==typeof g)if(2&c){const y=i[++u];d+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&c?d+="."+g:4&c&&(d+=" "+g);else""!==d&&!ea(g)&&(s+=oe(f,d),d=""),c=g,f=f||!ea(c);u++}return""!==d&&(s+=oe(f,d)),s}const wt={};function Jw(i){Qw(xt(),De(),Ar()+i,il())}function Qw(i,s,u,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ta(s,f,u)}else{const f=i.preOrderHooks;null!==f&&Ho(s,f,0,u)}wo(u)}function Zc(i,s){return i<<17|s<<2}function ta(i){return i>>17&32767}function eC(i){return 2|i}function Va(i){return(131068&i)>>2}function Ys(i,s){return-131069&i|s<<2}function Ua(i){return 1|i}function J0(i,s){const u=i.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const g=i.data[f];jo(d),g.contentQueries(2,s[f],f)}}}function Nl(i,s,u,c,d,f,g,y,w,E){const A=s.blueprint.slice();return A[0]=d,A[2]=140|c,tl(A),A[3]=A[15]=i,A[8]=u,A[10]=g||i&&i[10],A[11]=y||i&&i[11],A[12]=w||i&&i[12]||null,A[9]=E||i&&i[9]||null,A[6]=f,A[16]=2==s.type?i[16]:A,A}function Ml(i,s,u,c,d){let f=i.data[s];if(null===f)f=Lp(i,s,u,c,d),lt.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const g=Gi();f.injectorIndex=null===g?-1:g.injectorIndex}return Wr(f,!0),f}function Lp(i,s,u,c,d){const f=uu(),g=lu(),w=i.data[s]=function(i,s,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?f:f&&f.parent,u,s,c,d);return null===i.firstChild&&(i.firstChild=w),null!==f&&(g?null==f.child&&null!==w.parent&&(f.child=w):null===f.next&&(f.next=w)),w}function xl(i,s,u,c){if(0===u)return-1;const d=s.length;for(let f=0;f<u;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Vp(i,s,u){hu(s);try{const c=i.viewQuery;null!==c&&Iu(1,c,u);const d=i.template;null!==d&&X0(i,s,d,1,u),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&J0(i,s),i.staticViewQueries&&Iu(2,i.viewQuery,u);const f=i.components;null!==f&&function(i,s){for(let u=0;u<s.length;u++)qp(i,s[u])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,$o()}}function Uh(i,s,u,c){const d=s[2];if(256==(256&d))return;hu(s);const f=il();try{tl(s),function(i){lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==u&&X0(i,s,u,2,c);const g=3==(3&d);if(!f)if(g){const E=i.preOrderCheckHooks;null!==E&&Ta(s,E,null)}else{const E=i.preOrderHooks;null!==E&&Ho(s,E,0,null),rr(s,0)}if(function(i){for(let s=Bm(i);null!==s;s=Vw(s)){if(!s[2])continue;const u=s[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&Bo(f,1),d[2]|=1024}}}(s),function(i){for(let s=Bm(i);null!==s;s=Vw(s))for(let u=10;u<s.length;u++){const c=s[u],d=c[1];su(c)&&Uh(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&J0(i,s),!f)if(g){const E=i.contentCheckHooks;null!==E&&Ta(s,E)}else{const E=i.contentHooks;null!==E&&Ho(s,E,1),rr(s,1)}!function(i,s){const u=i.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)wo(~d);else{const f=d,g=u[++c],y=u[++c];hc(g,f),y(2,s[f])}}}finally{wo(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let u=0;u<s.length;u++)vC(i,s[u])}(s,y);const w=i.viewQuery;if(null!==w&&Iu(2,w,c),!f)if(g){const E=i.viewCheckHooks;null!==E&&Ta(s,E)}else{const E=i.viewHooks;null!==E&&Ho(s,E,2),rr(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Bo(s[3],-1))}finally{$o()}}function Q0(i,s,u,c){const d=s[10],f=!il(),g=el(s);try{f&&!g&&d.begin&&d.begin(),g&&Vp(i,s,c),Uh(i,s,u,c)}finally{f&&!g&&d.end&&d.end()}}function X0(i,s,u,c,d){const f=Ar(),g=2&c;try{wo(-1),g&&s.length>20&&Qw(i,s,20,il()),u(c,d)}finally{wo(f)}}function dC(i,s,u){if(tc(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const g=i.data[f];g.contentQueries&&g.contentQueries(1,u[f],f)}}}function ev(i,s,u){!ou()||(function(i,s,u,c){const d=u.directiveStart,f=u.directiveEnd;i.firstCreatePass||Co(u,s),fi(c,s);const g=u.initialInputs;for(let y=d;y<f;y++){const w=i.data[y],E=hs(w);E&&ov(s,u,w);const A=kt(s,i,y,u);fi(A,s),null!==g&&uv(0,y-d,A,w,0,g),E&&(ui(u.index,s)[8]=A)}}(i,s,u,Si(u,s)),128==(128&u.flags)&&function(i,s,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,y=lt.lFrame.currentDirectiveIndex;try{wo(g);for(let w=c;w<d;w++){const E=i.data[w],A=s[w];fc(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&$p(E,A)}}finally{wo(-1),fc(y)}}(i,s,u))}function Qr(i,s,u=Si){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const g=c[f+1],y=-1===g?u(s,i):i[g];i[d++]=y}}}function Bh(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=t_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function t_(i,s,u,c,d,f,g,y,w,E){const A=20+c,R=A+d,P=function(i,s){const u=[];for(let c=0;c<s;c++)u.push(c<i?null:wt);return u}(A,R),j="function"==typeof E?E():E;return P[1]={type:i,blueprint:P,template:u,queries:null,viewQuery:y,declTNode:s,data:P.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:j,incompleteFirstPass:!1}}function Zp(i,s,u,c){const d=pv(s);null===u?d.push(c):(d.push(u),i.firstCreatePass&&Zh(i).push(c,d.length-1))}function n_(i,s,u){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(s,d):u[c]=[s,d]}return u}function Cs(i,s,u,c,d,f,g,y){const w=Si(s,u);let A,E=s.inputs;!y&&null!=E&&(A=E[c])?(mv(i,u,A,c,d),Yu(s)&&function(i,s){const u=ui(s,i);16&u[2]||(u[2]|=64)}(u,s.index)):3&s.type&&(c=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=g?g(d,s.value||"",c):d,Rn(f)?f.setProperty(w,c,d):Bs(c)||(w.setProperty?w.setProperty(c,d):w[c]=d))}function jp(i,s,u,c){let d=!1;if(ou()){const f=function(i,s,u){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const g=c[f];Yw(u,g.selectors,!1)&&(d||(d=[]),an(Co(u,s),i,g.type),hs(g)?(pC(i,u),d.unshift(g)):d.push(g))}return d}(i,s,u),g=null===c?null:{"":-1};if(null!==f){d=!0,mC(u,i.data.length,f.length);for(let A=0;A<f.length;A++){const R=f[A];R.providersResolver&&R.providersResolver(R)}let y=!1,w=!1,E=xl(i,s,f.length,null);for(let A=0;A<f.length;A++){const R=f[A];u.mergedAttrs=cl(u.mergedAttrs,R.hostAttrs),_C(i,u,s,E,R),gC(E,R,g),null!==R.contentQueries&&(u.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=128);const P=R.type.prototype;!y&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(u.index),y=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(u.index),w=!0),E++}!function(i,s){const c=s.directiveEnd,d=i.data,f=s.attrs,g=[];let y=null,w=null;for(let E=s.directiveStart;E<c;E++){const A=d[E],R=A.inputs,P=null===f||q0(s)?null:yC(R,f);g.push(P),y=n_(R,E,y),w=n_(A.outputs,E,w)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=y,s.outputs=w}(i,u)}g&&function(i,s,u){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=u[s[d+1]];if(null==f)throw new Me("301",`Export of name '${s[d+1]}' not found!`);c.push(s[d],f)}}}(u,c,g)}return u.mergedAttrs=cl(u.mergedAttrs,u.attrs),d}function i_(i,s,u,c,d,f){const g=f.hostBindings;if(g){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const u=i[--s];if("number"==typeof u&&u<0)return u}return 0})(y)!=w&&y.push(w),y.push(c,d,g)}}function $p(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function pC(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function gC(i,s,u){if(u){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)u[s.exportAs[c]]=i;hs(s)&&(u[""]=i)}}function mC(i,s,u){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+u,i.providerIndexes=s}function _C(i,s,u,c,d){i.data[c]=d;const f=d.factory||(d.factory=Ii(d.type)),g=new ll(f,hs(d),null);i.blueprint[c]=g,u[c]=g,i_(i,s,0,c,xl(i,u,d.hostVars,wt),d)}function ov(i,s,u){const c=Si(s,i),d=Bh(u),f=i[10],g=Gp(i,Nl(i,d,null,u.onPush?64:16,c,s,f,f.createRenderer(c,u),null,null));i[s.index]=g}function av(i,s,u,c,d,f,g){if(null==f)Rn(i)?i.removeAttribute(s,d,u):s.removeAttribute(d);else{const y=null==g?re(f):g(f,c||"",d);Rn(i)?i.setAttribute(s,d,y,u):u?s.setAttributeNS(u,d,y):s.setAttribute(d,y)}}function uv(i,s,u,c,d,f){const g=f[s];if(null!==g){const y=c.setInput;for(let w=0;w<g.length;){const E=g[w++],A=g[w++],R=g[w++];null!==y?c.setInput(u,R,E,A):u[A]=R}}}function yC(i,s){let u=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return u}function Hp(i,s,u,c){return new Array(i,!0,!1,s,null,0,c,u,null,null)}function vC(i,s){const u=ui(s,i);if(su(u)){const c=u[1];80&u[2]?Uh(c,u,c.template,u[8]):u[5]>0&&dv(u)}}function dv(i){for(let c=Bm(i);null!==c;c=Vw(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const g=f[1];Uh(g,f,g.template,f[8])}else f[5]>0&&dv(f)}const u=i[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=ui(u[c],i);su(d)&&d[5]>0&&dv(d)}}function qp(i,s){const u=ui(s,i),c=u[1];(function(i,s){for(let u=s.length;u<i.blueprint.length;u++)s.push(i.blueprint[u])})(c,u),Vp(c,u,u[8])}function Gp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function s_(i){for(;i;){i[2]|=64;const s=Rp(i);if(Er(i)&&!s)return i;i=s}return null}function fv(i,s,u){const c=s[10];c.begin&&c.begin();try{Uh(i,s,i.template,u)}catch(d){throw ki(s,d),d}finally{c.end&&c.end()}}function Hc(i){!function(i){for(let s=0;s<i.components.length;s++){const u=i.components[s],c=N0(u),d=c[1];Q0(d,c,d.template,u)}}(i[8])}function Iu(i,s,u){jo(0),s(i,u)}const a_=(()=>Promise.resolve(null))();function pv(i){return i[7]||(i[7]=[])}function Zh(i){return i.cleanup||(i.cleanup=[])}function ki(i,s){const u=i[9],c=u?u.get(Oh,null):null;c&&c.handleError(s)}function mv(i,s,u,c,d){for(let f=0;f<u.length;){const g=u[f++],y=u[f++],w=s[g],E=i.data[g];null!==E.setInput?E.setInput(w,d,c,y):w[y]=d}}function Ks(i,s,u){const c=ya(s,i);Uw(i[11],c,u)}function qc(i,s,u){let c=u?i.styles:null,d=u?i.classes:null,f=0;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?f=y:1==f?d=z(d,y):2==f&&(c=z(c,y+": "+s[++g]+";"))}u?i.styles=c:i.stylesWithoutHost=c,u?i.classes=d:i.classesWithoutHost=d}const Gc=new On("INJECTOR",-1);class jh{get(s,u=Vt){if(u===Vt){const c=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw c.name="NullInjectorError",c}return u}}const zc=new On("Set Injector scope."),Wc={},yv={};let $h;function Hh(){return void 0===$h&&($h=new jh),$h}function TC(i,s=null,u=null,c){return new vv(i,u,s||Hh(),c)}class vv{constructor(s,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&bs(u,y=>this.processProvider(y,s,u)),bs([s],y=>this.processInjectorType(y,[],f)),this.records.set(Gc,Yc(void 0,this));const g=this.records.get(zc);this.scope=null!=g?g.value:null,this.source=d||("object"==typeof s?null:Q(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,u=Vt,c=Ze.Default){this.assertNotDestroyed();const d=gt(this),f=Gn(void 0);try{if(!(c&Ze.SkipSelf)){let y=this.records.get(s);if(void 0===y){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof On)&&Xt(s);y=w&&this.injectableDefInScope(w)?Yc(qh(s),Wc):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(c&Ze.Self?Hh():this.parent).get(s,u=c&Ze.Optional&&u===Vt?null:u)}catch(g){if("NullInjectorError"===g.name){if((g[sr]=g[sr]||[]).unshift(Q(s)),d)throw g;return Gs(g,s,"R3InjectorError",this.source)}throw g}finally{Gn(f),gt(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,d)=>s.push(Q(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,u,c){if(!(s=H(s)))return!1;let d=$i(s);const f=null==d&&s.ngModule||void 0,g=void 0===f?s:f,y=-1!==c.indexOf(g);if(void 0!==f&&(d=$i(f)),null==d)return!1;if(null!=d.imports&&!y){let A;c.push(g);try{bs(d.imports,R=>{this.processInjectorType(R,u,c)&&(void 0===A&&(A=[]),A.push(R))})}finally{}if(void 0!==A)for(let R=0;R<A.length;R++){const{ngModule:P,providers:j}=A[R];bs(j,Y=>this.processProvider(Y,P,j||q))}}this.injectorDefTypes.add(g);const w=Ii(g)||(()=>new g);this.records.set(g,Yc(w,Wc));const E=d.providers;if(null!=E&&!y){const A=s;bs(E,R=>this.processProvider(R,A,E))}return void 0!==f&&void 0!==s.providers}processProvider(s,u,c){let d=Au(s=H(s))?s:H(s&&s.provide);const f=DC(i=s)?Yc(void 0,i.useValue):Yc(wv(i),Wc);var i;if(Au(s)||!0!==s.multi)this.records.get(d);else{let g=this.records.get(d);g||(g=Yc(void 0,Wc,!0),g.factory=()=>Wo(g.multi),this.records.set(d,g)),d=s,g.multi.push(s)}this.records.set(d,f)}hydrate(s,u){return u.value===Wc&&(u.value=yv,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(i=u.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const u=H(s.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function qh(i){const s=Xt(i),u=null!==s?s.factory:Ii(i);if(null!==u)return u;if(i instanceof On)throw new Error(`Token ${Q(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const c=$s(s,"?");throw new Error(`Can't resolve all parameters for ${Q(i)}: (${c.join(", ")}).`)}const u=function(i){const s=i&&(i[Re]||i[qn]);if(s){const u=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),s}return null}(i);return null!==u?()=>u.factory(i):()=>new i}(i);throw new Error("unreachable")}function wv(i,s,u){let c;if(Au(i)){const d=H(i);return Ii(d)||qh(d)}if(DC(i))c=()=>H(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Wo(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))c=()=>Tn(H(i.useExisting));else{const d=H(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Ii(d)||qh(d);c=()=>new d(...Wo(i.deps))}return c}function Yc(i,s,u=!1){return{factory:i,value:s,multi:u?[]:void 0}}function DC(i){return null!==i&&"object"==typeof i&&qs in i}function Au(i){return"function"==typeof i}const u_=function(i,s,u){return function(i,s=null,u=null,c){const d=TC(i,s,u,c);return d._resolveInjectorDefTypes(),d}({name:u},s,i,u)};let En=(()=>{class i{static create(u,c){return Array.isArray(u)?u_(u,c,""):u_(u.providers,u.parent,u.name||"")}}return i.THROW_IF_NOT_FOUND=Vt,i.NULL=new jh,i.\u0275prov=sn({token:i,providedIn:"any",factory:()=>Tn(Gc)}),i.__NG_ELEMENT_ID__=-1,i})();function Av(i,s){Ca(N0(i)[1],Cn())}function Jc(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),u=!0;const c=[i];for(;s;){let d;if(hs(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(u){c.push(d);const g=i;g.inputs=ur(i.inputs),g.declaredInputs=ur(i.declaredInputs),g.outputs=ur(i.outputs);const y=d.hostBindings;y&&kA(i,y);const w=d.viewQuery,E=d.contentQueries;if(w&&UC(i,w),E&&xA(i,E),de(i.inputs,d.inputs),de(i.declaredInputs,d.declaredInputs),de(i.outputs,d.outputs),hs(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let g=0;g<f.length;g++){const y=f[g];y&&y.ngInherit&&y(i),y===Jc&&(u=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,u=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=cl(d.hostAttrs,u=cl(u,d.hostAttrs))}}(c)}function ur(i){return i===G?{}:i===q?[]:i}function UC(i,s){const u=i.viewQuery;i.viewQuery=u?(c,d)=>{s(c,d),u(c,d)}:s}function xA(i,s){const u=i.contentQueries;i.contentQueries=u?(c,d,f)=>{s(c,d,f),u(c,d,f)}:s}function kA(i,s){const u=i.hostBindings;i.hostBindings=u?(c,d)=>{s(c,d),u(c,d)}:s}let rg=null;function Qc(){if(!rg){const i=Yt.Symbol;if(i&&i.iterator)rg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<s.length;++u){const c=s[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(rg=c)}}}return rg}class No{constructor(s){this.wrapped=s}static wrap(s){return new No(s)}static unwrap(s){return No.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof No}}function Qs(i){return!!sg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Qc()in i)}function sg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ts(i,s,u){return i[s]=u}function ei(i,s,u){return!Object.is(i[s],u)&&(i[s]=u,!0)}function ja(i,s,u,c){const d=ei(i,s,u);return ei(i,s+1,c)||d}function Jh(i,s,u,c){const d=De();return ei(d,ms(),s)&&(xt(),function(i,s,u,c,d,f){const g=Si(i,s);av(s[11],g,f,i.value,u,c,d)}(Yn(),d,i,s,u,c)),Jh}function Xc(i,s,u,c){return ei(i,ms(),u)?s+re(u)+c:wt}function td(i,s,u,c,d,f,g,y,w,E){const R=function(i,s,u,c,d,f){const g=ja(i,s,u,c);return ja(i,s+2,d,f)||g}(i,Yr(),u,d,g,w);return Ir(4),R?s+re(u)+c+re(d)+f+re(g)+y+re(w)+E:wt}function Ov(i,s,u,c,d,f,g,y){const w=De(),E=xt(),A=i+20,R=E.firstCreatePass?function(i,s,u,c,d,f,g,y,w){const E=s.consts,A=Ml(s,i,4,g||null,ps(E,y));jp(s,u,A,ps(E,w)),Ca(s,A);const R=A.tViews=t_(2,A,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,E);return null!==s.queries&&(s.queries.template(s,A),R.queries=s.queries.embeddedTView(A)),A}(A,E,w,s,u,c,d,f,g):E.data[A];Wr(R,!1);const P=w[11].createComment("");Fh(E,w,P,R),fi(P,w),Gp(w,w[A]=Hp(P,w,P,R)),Ur(R)&&ev(E,w,R),null!=g&&Qr(w,R,y)}function $C(i){return qi(lt.lFrame.contextLView,20+i)}function lr(i,s=Ze.Default){const u=De();return null===u?Tn(i,s):vs(Cn(),u,H(i),s)}function Ha(i,s,u){const c=De();return ei(c,ms(),s)&&Cs(xt(),Yn(),c,i,s,c[11],u,!1),Ha}function cr(i,s,u,c,d){const g=d?"class":"style";mv(i,u,s.inputs[g],g,c)}function lg(i,s,u,c){const d=De(),f=xt(),g=20+i,y=d[11],w=d[g]=L0(y,s,lt.lFrame.currentNamespace),E=f.firstCreatePass?function(i,s,u,c,d,f,g){const y=s.consts,E=Ml(s,i,2,d,ps(y,f));return jp(s,u,E,ps(y,g)),null!==E.attrs&&qc(E,E.attrs,!1),null!==E.mergedAttrs&&qc(E,E.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,E),E}(g,f,d,0,s,u,c):f.data[g];Wr(E,!0);const A=E.mergedAttrs;null!==A&&oh(y,w,A);const R=E.classes;null!==R&&$0(y,w,R);const P=E.styles;null!==P&&zw(y,w,P),64!=(64&E.flags)&&Fh(f,d,w,E),0===lt.lFrame.elementDepthCount&&fi(w,d),lt.lFrame.elementDepthCount++,Ur(E)&&(ev(f,d,E),dC(f,E,d)),null!==c&&Qr(d,E)}function g_(){let i=Cn();lu()?va():(i=i.parent,Wr(i,!1));const s=i;lt.lFrame.elementDepthCount--;const u=xt();u.firstCreatePass&&(Ca(u,i),tc(i)&&u.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&cr(u,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&cr(u,s,De(),s.stylesWithoutHost,!1)}function uf(i,s,u,c){lg(i,s,u,c),g_()}function __(i,s,u){const c=De(),d=xt(),f=i+20,g=d.firstCreatePass?function(i,s,u,c,d){const f=s.consts,g=ps(f,c),y=Ml(s,i,8,"ng-container",g);return null!==g&&qc(y,g,!0),jp(s,u,y,ps(f,d)),null!==s.queries&&s.queries.elementStart(s,y),y}(f,d,c,s,u):d.data[f];Wr(g,!0);const y=c[f]=c[11].createComment("");Fh(d,c,y,g),fi(y,c),Ur(g)&&(ev(d,c,g),dC(d,g,c)),null!=u&&Qr(c,g)}function Ke(){let i=Cn();const s=xt();lu()?va():(i=i.parent,Wr(i,!1)),s.firstCreatePass&&(Ca(s,i),tc(i)&&s.queries.elementEnd(i))}function ra(){return De()}function sd(i){return!!i&&"function"==typeof i.then}function od(i){return!!i&&"function"==typeof i.subscribe}const y_=od;function cg(i,s,u,c){const d=De(),f=xt(),g=Cn();return function(i,s,u,c,d,f,g,y){const w=Ur(c),A=i.firstCreatePass&&Zh(i),R=s[8],P=pv(s);let j=!0;if(3&c.type||y){const te=Si(c,s),Ne=y?y(te):te,we=P.length,nt=y?mt=>y(on(mt[c.index])):c.index;if(Rn(u)){let mt=null;if(!y&&w&&(mt=function(i,s,u,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const g=d[f];if(g===u&&d[f+1]===c){const y=s[7],w=d[f+2];return y.length>w?y[w]:null}"string"==typeof g&&(f+=2)}return null}(i,s,d,c.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=f,mt.__ngLastListenerFn__=f,j=!1;else{f=T_(c,s,R,f,!1);const $t=u.listen(Ne,d,f);P.push(f,$t),A&&A.push(d,nt,we,we+1)}}else f=T_(c,s,R,f,!0),Ne.addEventListener(d,f,g),P.push(f),A&&A.push(d,nt,we,g)}else f=T_(c,s,R,f,!1);const Y=c.outputs;let pe;if(j&&null!==Y&&(pe=Y[d])){const te=pe.length;if(te)for(let Ne=0;Ne<te;Ne+=2){const kr=s[pe[Ne]][pe[Ne+1]].subscribe(f),ao=P.length;P.push(f,kr),A&&A.push(d,c.index,ao,-(ao+1))}}}(f,d,d[11],g,i,s,!!u,c),cg}function C_(i,s,u,c){try{return!1!==u(c)}catch(d){return ki(i,d),!1}}function T_(i,s,u,c,d){return function f(g){if(g===Function)return c;const y=2&i.flags?ui(i.index,s):s;0==(32&s[2])&&s_(y);let w=C_(s,0,c,g),E=f.__ngNextListenerFn__;for(;E;)w=C_(s,0,E,g)&&w,E=E.__ngNextListenerFn__;return d&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function $v(i=1){return function(i){return(lt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function E_(i,s){let u=null;const c=function(i){const s=i.attrs;if(null!=s){const u=s.indexOf(5);if(0==(1&u))return s[u+1]}return null}(i);for(let d=0;d<s.length;d++){const f=s[d];if("*"!==f){if(null===c?Yw(i,f,!0):mx(c,f))return d}else u=d}return u}function cf(i){const s=De()[16][6];if(!s.projection){const c=s.projection=$s(i?i.length:1,null),d=c.slice();let f=s.child;for(;null!==f;){const g=i?E_(f,i):0;null!==g&&(d[g]?d[g].projectionNext=f:c[g]=f,d[g]=f),f=f.next}}}function _i(i,s=0,u){const c=De(),d=xt(),f=Ml(d,20+i,16,null,u||null);null===f.projection&&(f.projection=s),va(),64!=(64&f.flags)&&function(i,s,u){Al(s[11],0,s,u,Zw(i,u,s),Gm(u.parent||s[6],u,s))}(d,c,f)}function D_(i,s,u){return Ln(i,"",s,"",u),D_}function Ln(i,s,u,c,d){const f=De(),g=Xc(f,s,u,c);return g!==wt&&Cs(xt(),Yn(),f,i,g,f[11],d,!1),Ln}function qv(i,s,u,c,d){const f=i[u+1],g=null===s;let y=c?ta(f):Va(f),w=!1;for(;0!==y&&(!1===w||g);){const A=i[y+1];zA(i[y],s)&&(w=!0,i[y+1]=c?Ua(A):eC(A)),y=c?ta(A):Va(A)}w&&(i[u+1]=c?eC(f):Ua(f))}function zA(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Io(i,s)>=0}const Hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XC(i){return i.substring(Hr.key,Hr.keyEnd)}function WA(i){return i.substring(Hr.value,Hr.valueEnd)}function pg(i,s){const u=Hr.textEnd;return u===s?-1:(s=Hr.keyEnd=function(i,s,u){for(;s<u&&i.charCodeAt(s)>32;)s++;return s}(i,Hr.key=s,u),ad(i,s,u))}function eT(i,s){const u=Hr.textEnd;let c=Hr.key=ad(i,s,u);return u===c?-1:(c=Hr.keyEnd=function(i,s,u){let c;for(;s<u&&(45===(c=i.charCodeAt(s))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)s++;return s}(i,c,u),c=ud(i,c,u),c=Hr.value=ad(i,c,u),c=Hr.valueEnd=function(i,s,u){let c=-1,d=-1,f=-1,g=s,y=g;for(;g<u;){const w=i.charCodeAt(g++);if(59===w)return y;34===w||39===w?y=g=gg(i,w,g,u):s===g-4&&85===f&&82===d&&76===c&&40===w?y=g=gg(i,41,g,u):w>32&&(y=g),f=d,d=c,c=-33&w}return y}(i,c,u),ud(i,c,u))}function Gv(i){Hr.key=0,Hr.keyEnd=0,Hr.value=0,Hr.valueEnd=0,Hr.textEnd=i.length}function ad(i,s,u){for(;s<u&&i.charCodeAt(s)<=32;)s++;return s}function ud(i,s,u,c){return(s=ad(i,s,u))<u&&s++,s}function gg(i,s,u,c){let d=-1,f=u;for(;f<c;){const g=i.charCodeAt(f++);if(g==s&&92!==d)return f;d=92==g&&92===d?0:g}throw new Error}function mg(i,s,u){return xo(i,s,u,!1),mg}function _g(i,s){return xo(i,s,null,!0),_g}function Mo(i,s){for(let u=function(i){return Gv(i),eT(i,ad(i,0,Hr.textEnd))}(s);u>=0;u=eT(s,u))Yv(i,XC(s),WA(s))}function zv(i){Xs(Jn,Is,i,!0)}function Is(i,s){for(let u=function(i){return Gv(i),pg(i,ad(i,0,Hr.textEnd))}(s);u>=0;u=pg(s,u))Jn(i,XC(s),!0)}function xo(i,s,u,c){const d=De(),f=xt(),g=Ir(2);f.firstUpdatePass&&Wv(f,i,g,c),s!==wt&&ei(d,g,s)&&Fl(f,f.data[Ar()],d,d[11],i,d[g+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Q(Jo(i)))),i}(s,u),c,g)}function Xs(i,s,u,c){const d=xt(),f=Ir(2);d.firstUpdatePass&&Wv(d,null,f,c);const g=De();if(u!==wt&&ei(g,f,u)){const y=d.data[Ar()];if(ld(y,c)&&!ff(d,f)){let w=c?y.classesWithoutHost:y.stylesWithoutHost;null!==w&&(u=z(w,u||"")),cr(d,y,g,u,c)}else!function(i,s,u,c,d,f,g,y){d===wt&&(d=q);let w=0,E=0,A=0<d.length?d[0]:null,R=0<f.length?f[0]:null;for(;null!==A||null!==R;){const P=w<d.length?d[w+1]:void 0,j=E<f.length?f[E+1]:void 0;let pe,Y=null;A===R?(w+=2,E+=2,P!==j&&(Y=R,pe=j)):null===R||null!==A&&A<R?(w+=2,Y=A):(E+=2,Y=R,pe=j),null!==Y&&Fl(i,s,u,c,Y,pe,g,y),A=w<d.length?d[w]:null,R=E<f.length?f[E]:null}}(d,y,g,g[11],g[f+1],g[f+1]=function(i,s,u){if(null==u||""===u)return q;const c=[],d=Jo(u);if(Array.isArray(d))for(let f=0;f<d.length;f++)i(c,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&i(c,f,d[f]);else"string"==typeof d&&s(c,d);return c}(i,s,u),c,f)}}function ff(i,s){return s>=i.expandoStartIndex}function Wv(i,s,u,c){const d=i.data;if(null===d[u+1]){const f=d[Ar()],g=ff(i,u);ld(f,c)&&null===s&&!g&&(s=!1),s=function(i,s,u,c){const d=function(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(u=yg(u=pf(null,i,s,u,c),s.attrs,c),f=null);else{const g=s.directiveStylingLast;if(-1===g||i[g]!==d)if(u=pf(d,i,s,u,c),null===f){let w=function(i,s,u){const c=u?s.classBindings:s.styleBindings;if(0!==Va(c))return i[ta(c)]}(i,s,c);void 0!==w&&Array.isArray(w)&&(w=pf(null,i,s,w[1],c),w=yg(w,s.attrs,c),function(i,s,u,c){i[ta(u?s.classBindings:s.styleBindings)]=c}(i,s,c,w))}else f=function(i,s,u){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=yg(c,i[f].hostAttrs,u);return yg(c,s.attrs,u)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),u}(d,f,s,c),function(i,s,u,c,d,f){let g=f?s.classBindings:s.styleBindings,y=ta(g),w=Va(g);i[c]=u;let A,E=!1;if(Array.isArray(u)){const R=u;A=R[1],(null===A||Io(R,A)>0)&&(E=!0)}else A=u;if(d)if(0!==w){const P=ta(i[y+1]);i[c+1]=Zc(P,y),0!==P&&(i[P+1]=Ys(i[P+1],c)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],c)}else i[c+1]=Zc(y,0),0!==y&&(i[y+1]=Ys(i[y+1],c)),y=c;else i[c+1]=Zc(w,0),0===y?y=c:i[w+1]=Ys(i[w+1],c),w=c;E&&(i[c+1]=eC(i[c+1])),qv(i,A,c,!0),qv(i,A,c,!1),function(i,s,u,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Io(f,s)>=0&&(u[c+1]=Ua(u[c+1]))}(s,A,i,c,f),g=Zc(y,w),f?s.classBindings=g:s.styleBindings=g}(d,f,s,u,g,c)}}function pf(i,s,u,c,d){let f=null;const g=u.directiveEnd;let y=u.directiveStylingLast;for(-1===y?y=u.directiveStart:y++;y<g&&(f=s[y],c=yg(c,f.hostAttrs,d),f!==i);)y++;return null!==i&&(u.directiveStylingLast=y),c}function yg(i,s,u){const c=u?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const g=s[f];"number"==typeof g?d=g:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Jn(i,g,!!u||s[++f]))}return void 0===i?null:i}function Yv(i,s,u){Jn(i,s,Jo(u))}function Fl(i,s,u,c,d,f,g,y){if(!(3&s.type))return;const w=i.data,E=w[y+1];qa(function(i){return 1==(1&i)}(E)?Kv(w,s,u,d,Va(E),g):void 0)||(qa(f)||function(i){return 2==(2&i)}(E)&&(f=Kv(w,null,u,d,y,g)),function(i,s,u,c,d){const f=Rn(i);if(s)d?f?i.addClass(u,c):u.classList.add(c):f?i.removeClass(u,c):u.classList.remove(c);else{let g=-1===c.indexOf("-")?void 0:La.DashCase;if(null==d)f?i.removeStyle(u,c,g):u.style.removeProperty(c);else{const y="string"==typeof d&&d.endsWith("!important");y&&(d=d.slice(0,-10),g|=La.Important),f?i.setStyle(u,c,d,g):u.style.setProperty(c,d,y?"important":"")}}}(c,g,ya(Ar(),u),d,f))}function Kv(i,s,u,c,d,f){const g=null===s;let y;for(;d>0;){const w=i[d],E=Array.isArray(w),A=E?w[1]:w,R=null===A;let P=u[d+1];P===wt&&(P=R?q:void 0);let j=R?Qn(P,c):A===c?P:void 0;if(E&&!qa(j)&&(j=Qn(w,c)),qa(j)&&(y=j,g))return y;const Y=i[d+1];d=g?ta(Y):Va(Y)}if(null!==s){let w=f?s.residualClasses:s.residualStyles;null!=w&&(y=Qn(w,c))}return y}function qa(i){return void 0!==i}function ld(i,s){return 0!=(i.flags&(s?16:32))}function Jv(i,s=""){const u=De(),c=xt(),d=i+20,f=c.firstCreatePass?Ml(c,d,1,s,null):c.data[d],g=u[d]=Zm(u[11],s);Fh(c,u,g,f),Wr(f,!1)}function A_(i){return Ll("",i,""),A_}function Ll(i,s,u){const c=De(),d=Xc(c,i,s,u);return d!==wt&&Ks(c,Ar(),d),Ll}function dr(i,s,u,c,d,f,g,y,w){const E=De(),A=td(E,i,s,u,c,d,f,g,y,w);return A!==wt&&Ks(E,Ar(),A),dr}function Qv(i,s,u){Xs(Jn,Is,Xc(De(),i,s,u),!0)}function xu(i,s,u,c,d,f,g,y,w){Xs(Jn,Is,td(De(),i,s,u,c,d,f,g,y,w),!0)}function gT(i,s,u){!function(i){Xs(Yv,Mo,i,!1)}(Xc(De(),i,s,u))}function nb(i,s,u){const c=De();return ei(c,ms(),s)&&Cs(xt(),Yn(),c,i,s,c[11],u,!0),nb}const ia=void 0;var x_=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let cd={};function k_(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let u=ib(s);if(u)return u;const c=s.split("-")[0];if(u=ib(c),u)return u;if("en"===c)return x_;throw new Error(`Missing locale data for the locale "${i}".`)}function rb(i){return k_(i)[dt.PluralCase]}function ib(i){return i in cd||(cd[i]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[i]),cd[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Dg=["zero","one","two","few","many"],R_="en-US",mf={marker:"element"},Ig={marker:"ICU"};var Un=(()=>((Un=Un||{})[Un.SHIFT=2]="SHIFT",Un[Un.APPEND_EAGERLY=1]="APPEND_EAGERLY",Un[Un.COMMENT=2]="COMMENT",Un))();let O_=R_;function P_(i){(function(i,s){null==i&&Bt(s,i,null,"!=")})(i,"Expected localeId to be defined"),"string"==typeof i&&(O_=i.toLowerCase().replace(/_/g,"-"))}function sb(i,s,u){const c=s.insertBeforeIndex,d=Array.isArray(c)?c[0]:c;return null===d?zm(i,0,u):on(u[d])}function ob(i,s,u,c,d){const f=s.insertBeforeIndex;if(Array.isArray(f)){let g=c,y=null;if(3&s.type||(y=g,g=d),null!==g&&0==(2&s.flags))for(let w=1;w<f.length;w++)Il(i,g,u[f[w]],y,!1)}}function ab(i,s){if(i.push(s),i.length>1)for(let u=i.length-2;u>=0;u--){const c=i[u];TT(c)||XA(c,s)&&null===F_(c)&&ET(c,s.index)}}function TT(i){return!(64&i.type)}function XA(i,s){return TT(s)||i.index>s.index}function F_(i){const s=i.insertBeforeIndex;return Array.isArray(s)?s[0]:s}function ET(i,s){const u=i.insertBeforeIndex;Array.isArray(u)?u[0]=s:(qw(sb,ob),i.insertBeforeIndex=s)}function Sg(i,s){const u=i.data[s];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function AT(i,s,u){const c=Lp(i,u,64,null,null);return ab(s,c),c}function L_(i,s){const u=s[i.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function ub(i){return i>>>17}function lb(i){return(131070&i)>>>1}let Ng=0,Ga=0;function ST(i,s,u,c){const d=u[11];let g,f=null;for(let y=0;y<s.length;y++){const w=s[y];if("string"==typeof w){const E=s[++y];null===u[E]&&(u[E]=Zm(d,w))}else if("number"==typeof w)switch(1&w){case 0:const E=ub(w);let A,R;if(null===f&&(f=E,g=Hm(d,c)),E===f?(A=c,R=g):(A=null,R=on(u[E])),null!==R){const pe=lb(w);Il(d,R,u[pe],A,!1);const Ne=Sg(i,pe);if(null!==Ne&&"object"==typeof Ne){const we=L_(Ne,u);null!==we&&ST(i,Ne.create[we],u,u[Ne.anchorIdx])}}break;case 1:const j=s[++y],Y=s[++y];av(d,ya(w>>>1,u),null,null,j,Y,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${w}"`)}else switch(w){case Ig:const E=s[++y],A=s[++y];null===u[A]&&fi(u[A]=WI(d,E),u);break;case mf:const R=s[++y],P=s[++y];null===u[P]&&fi(u[P]=L0(d,R,null),u)}}}function db(i,s,u,c,d){for(let f=0;f<u.length;f++){const g=u[f],y=u[++f];if(g&d){let w="";for(let E=f+1;E<=f+y;E++){const A=u[E];if("string"==typeof A)w+=A;else if("number"==typeof A)if(A<0)w+=re(s[c-A]);else{const R=A>>>2;switch(3&A){case 1:const P=u[++E],j=u[++E],Y=i.data[R];"string"==typeof Y?av(s[11],s[R],null,Y,P,w,j):Cs(i,Y,s,P,w,s[11],j,!1);break;case 0:const pe=s[R];null!==pe&&Uw(s[11],pe,w);break;case 2:rS(i,Sg(i,R),s,w);break;case 3:ko(i,Sg(i,R),c,s)}}}}else{const w=u[f+1];if(w>0&&3==(3&w)){const A=Sg(i,w>>>2);s[A.currentCaseLViewIndex]<0&&ko(i,A,c,s)}}f+=y}}function ko(i,s,u,c){let d=c[s.currentCaseLViewIndex];if(null!==d){let f=Ng;d<0&&(d=c[s.currentCaseLViewIndex]=~d,f=-1),db(i,c,s.update[d],u,f)}}function rS(i,s,u,c){const d=function(i,s){let u=i.cases.indexOf(s);if(-1===u)switch(i.type){case 1:{const c=function(i,s){const u=rb(s)(parseInt(i,10)),c=Dg[u];return void 0!==c?c:"other"}(s,O_);u=i.cases.indexOf(c),-1===u&&"other"!==c&&(u=i.cases.indexOf("other"));break}case 0:u=i.cases.indexOf("other")}return-1===u?null:u}(s,c);if(L_(s,u)!==d&&(hb(i,s,u),u[s.currentCaseLViewIndex]=null===d?null:~d,null!==d)){const g=u[s.anchorIdx];g&&ST(i,s.create[d],u,g)}}function hb(i,s,u){let c=L_(s,u);if(null!==c){const d=s.remove[c];for(let f=0;f<d.length;f++){const g=d[f];if(g>0){const y=ya(g,u);null!==y&&j0(u[11],y)}else hb(i,Sg(i,~g),u)}}}function iS(){const i=[];let u,c,s=-1;function f(y,w){s=0;const E=L_(y,w);c=null!==E?y.remove[E]:q}function g(){if(s<c.length){const y=c[s++];return y>0?u[y]:(i.push(s,c),f(u[1].data[~y],u),g())}return 0===i.length?null:(c=i.pop(),s=i.pop(),g())}return function(y,w){for(u=w;i.length;)i.pop();return f(y.value,w),g}}const V_=/\ufffd(\d+):?\d*\ufffd/gi,za=/\ufffd(\d+)\ufffd/,rs=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,to=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,hd=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Ou=/\uE500/g;function MT(i,s,u,c,d,f,g){const y=xl(i,c,1,null);let w=y<<Un.SHIFT,E=Gi();s===E&&(E=null),null===E&&(w|=Un.APPEND_EAGERLY),g&&(w|=Un.COMMENT,function(i){void 0===P0&&(P0=i())}(iS)),d.push(w,null===f?"":f);const A=Lp(i,y,g?32:1,null===f?"":f,null);ab(u,A);const R=A.index;return Wr(A,!1),null!==E&&s!==E&&function(i,s){let u=i.insertBeforeIndex;null===u?(qw(sb,ob),u=i.insertBeforeIndex=[null,s]):(function(i,s,u){i!=s&&Bt(u,i,s,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(s))}(E,R),A}function xT(i,s,u,c,d,f,g){const y=g.match(V_),w=MT(i,s,u,f,c,y?null:g,!1);y&&Ie(d,g,w.index,null,0,null)}function Ie(i,s,u,c,d,f){const g=i.length,y=g+1;i.push(null,null);const w=g+2,E=s.split(V_);let A=0;for(let R=0;R<E.length;R++){const P=E[R];if(1&R){const j=d+parseInt(P,10);i.push(-1-j),A|=Oo(j)}else""!==P&&i.push(P)}return i.push(u<<2|(c?1:0)),c&&i.push(c,f),i[g]=A,i[y]=i.length-w,A}function Oo(i){return 1<<Math.min(i,31)}function bf(i){let s,f,u="",c=0,d=!1;for(;null!==(s=to.exec(i));)d?s[0]===`\ufffd/*${f}\ufffd`&&(c=s.index,d=!1):(u+=i.substring(c,s.index+s[0].length),f=s[1],d=!0);return u+=i.substr(c),u}function RT(i,s,u,c,d,f){let g=0;const y={type:d.type,currentCaseLViewIndex:xl(i,s,1,null),anchorIdx:f,cases:[],create:[],remove:[],update:[]};(function(i,s,u){i.push(Oo(s.mainBinding),2,-1-s.mainBinding,u<<2|2)})(u,d,f),function(i,s,u){const c=i.data[s];null===c?i.data[s]=u:c.value=u}(i,f,y);const w=d.values;for(let E=0;E<w.length;E++){const A=w[E],R=[];for(let P=0;P<A.length;P++){const j=A[P];if("string"!=typeof j){const Y=R.push(j)-1;A[P]=`\x3c!--\ufffd${Y}\ufffd--\x3e`}}g=fb(i,y,s,u,c,d.cases[E],A.join(""),R)|g}g&&function(i,s,u){i.push(s,1,u<<2|3)}(u,g,f)}function pd(i){const s=[],u=[];let c=1,d=0;const f=B_(i=i.replace(rs,function(g,y,w){return c="select"===w?0:1,d=parseInt(y.substr(1),10),""}));for(let g=0;g<f.length;){let y=f[g++].trim();1===c&&(y=y.replace(/\s*(?:=)?(\w+)\s*/,"$1")),y.length&&s.push(y);const w=B_(f[g++]);s.length>u.length&&u.push(w)}return{type:c,mainBinding:d,cases:s,values:u}}function B_(i){if(!i)return[];let s=0;const u=[],c=[],d=/[{}]/g;let f;for(d.lastIndex=0;f=d.exec(i);){const y=f.index;if("}"==f[0]){if(u.pop(),0==u.length){const w=i.substring(s,y);rs.test(w)?c.push(pd(w)):c.push(w),s=y+1}}else{if(0==u.length){const w=i.substring(s,y);c.push(w),s=y+1}u.push("{")}}const g=i.substring(s);return c.push(g),c}function fb(i,s,u,c,d,f,g,y){const w=[],E=[],A=[];s.cases.push(f),s.create.push(w),s.remove.push(E),s.update.push(A);const P=Ip(yo()).getInertBodyElement(g),j=vn(P)||P;return j?pb(i,s,u,c,w,E,A,j,d,y,0):0}function pb(i,s,u,c,d,f,g,y,w,E,A){let R=0,P=y.firstChild;for(;P;){const j=xl(i,u,1,null);switch(P.nodeType){case Node.ELEMENT_NODE:const Y=P,pe=Y.tagName.toLowerCase();if(Sp.hasOwnProperty(pe)){Z_(d,mf,pe,w,j),i.data[j]=pe;const nt=Y.attributes;for(let mt=0;mt<nt.length;mt++){const $t=nt.item(mt),kr=$t.name.toLowerCase();$t.value.match(V_)?S.hasOwnProperty(kr)&&Ie(g,$t.value,j,$t.name,0,v[kr]?Cl:p[kr]?Oc:null):_b(d,j,$t)}R=pb(i,s,u,c,d,f,g,P,j,E,A+1)|R,is(f,j,A)}break;case Node.TEXT_NODE:const te=P.textContent||"",Ne=te.match(V_);Z_(d,null,Ne?"":te,w,j),is(f,j,A),Ne&&(R=Ie(g,te,j,null,0,null)|R);break;case Node.COMMENT_NODE:const we=za.exec(P.textContent||"");if(we){const mt=E[parseInt(we[1],10)];Z_(d,Ig,"",w,j),RT(i,u,c,w,mt,j),gb(f,j,A)}}P=P.nextSibling}return R}function is(i,s,u){0===u&&i.push(s)}function gb(i,s,u){0===u&&(i.push(~s),i.push(s))}function Z_(i,s,u,c,d){null!==s&&i.push(s),i.push(u,d,function(i,s,u){return 0|s<<17|u<<1}(0,c,d))}function _b(i,s,u){i.push(s<<1|1,u.name,u.value)}function FT(i,s,u=-1){const c=xt(),d=De(),f=20+i,g=ps(c.consts,s),y=Gi();c.firstCreatePass&&function(i,s,u,c,d,f){const g=Gi(),y=[],w=[],E=[[]],A=function(i){return i.replace(Ou," ")}(d=function(i,s){if(function(i){return-1===i}(s))return bf(i);{const u=i.indexOf(`:${s}\ufffd`)+2+s.toString().length,c=i.search(new RegExp(`\ufffd\\/\\*\\d+:${s}\ufffd`));return bf(i.substring(u,c))}}(d,f)).split(hd);for(let R=0;R<A.length;R++){let P=A[R];if(0==(1&R)){const j=B_(P);for(let Y=0;Y<j.length;Y++){let pe=j[Y];if(0==(1&Y)){const te=pe;""!==te&&xT(i,g,E[0],y,w,u,te)}else{const te=pe;if("object"!=typeof te)throw new Error(`Unable to parse ICU expression in "${d}" message.`);RT(i,u,w,s,te,MT(i,g,E[0],u,y,"",!0).index)}}}else{const j=47===P.charCodeAt(0),pe=(P.charCodeAt(j?1:0),20+Number.parseInt(P.substring(j?2:1)));if(j)E.shift(),Wr(Gi(),!1);else{const te=AT(i,E[0],pe);E.unshift([]),Wr(te,!0)}}}i.data[c]={create:y,update:w}}(c,null===y?0:y.index,d,f,g,u);const w=c.data[f],A=jw(c,y===d[6]?null:y,d);(function(i,s,u,c){const d=i[11];for(let f=0;f<s.length;f++){const g=s[f++],y=s[f],w=(g&Un.COMMENT)===Un.COMMENT,E=(g&Un.APPEND_EAGERLY)===Un.APPEND_EAGERLY,A=g>>>Un.SHIFT;let R=i[A];null===R&&(R=i[A]=w?d.createComment(y):Zm(d,y)),E&&null!==u&&Il(d,u,R,c,!1)}})(d,w.create,A,y&&8&y.type?d[y.index]:null),wa(!0)}function Cb(i,s,u){FT(i,s,u),wa(!1)}function xg(i){return function(i){i&&(Ng|=1<<Math.min(Ga,31)),Ga++}(ei(De(),ms(),i)),xg}function LT(i){!function(i,s,u){if(Ga>0){const c=i.data[u];db(i,s,Array.isArray(c)?c:c.update,Yr()-Ga-1,Ng)}Ng=0,Ga=0}(xt(),De(),i+20)}function Fi(i,s,u,c,d){if(i=H(i),Array.isArray(i))for(let f=0;f<i.length;f++)Fi(i[f],s,u,c,d);else{const f=xt(),g=De();let y=Au(i)?i:H(i.provide),w=wv(i);const E=Cn(),A=1048575&E.providerIndexes,R=E.directiveStart,P=E.providerIndexes>>20;if(Au(i)||!i.multi){const j=new ll(w,d,lr),Y=Rg(y,s,d?A:A+P,R);-1===Y?(an(Co(E,g),f,y),j_(f,i,s.length),s.push(y),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),u.push(j),g.push(j)):(u[Y]=j,g[Y]=j)}else{const j=Rg(y,s,A+P,R),Y=Rg(y,s,A,A+P),pe=j>=0&&u[j],te=Y>=0&&u[Y];if(d&&!te||!d&&!pe){an(Co(E,g),f,y);const Ne=function(i,s,u,c,d){const f=new ll(i,u,lr);return f.multi=[],f.index=s,f.componentProviders=0,kg(f,d,c&&!u),f}(d?Ul:BT,u.length,d,c,w);!d&&te&&(u[Y].providerFactory=Ne),j_(f,i,s.length,0),s.push(y),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),u.push(Ne),g.push(Ne)}else j_(f,i,j>-1?j:Y,kg(u[d?Y:j],w,!d&&c));!d&&c&&te&&u[Y].componentProviders++}}}function j_(i,s,u,c){const d=Au(s);if(d||function(i){return!!i.useClass}(s)){const g=(s.useClass||s).prototype.ngOnDestroy;if(g){const y=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const w=y.indexOf(u);-1===w?y.push(u,[c,g]):y[w+1].push(c,g)}else y.push(u,g)}}}function kg(i,s,u){return u&&i.componentProviders++,i.multi.push(s)-1}function Rg(i,s,u,c){for(let d=u;d<c;d++)if(s[d]===i)return d;return-1}function BT(i,s,u,c){return Bl(this.multi,[])}function Ul(i,s,u,c){const d=this.multi;let f;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=kt(u,u[1],this.providerFactory.index,c);f=y.slice(0,g),Bl(d,f);for(let w=g;w<y.length;w++)f.push(y[w])}else f=[],Bl(d,f);return f}function Bl(i,s){for(let u=0;u<i.length;u++)s.push((0,i[u])());return s}function Zl(i,s=[]){return u=>{u.providersResolver=(c,d)=>function(i,s,u){const c=xt();if(c.firstCreatePass){const d=hs(i);Fi(u,c.data,c.blueprint,d,!0),Fi(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class gd{}const Pu="ngComponent";class Eb{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${Q(i)}. Did you add it to @NgModule.entryComponents?`);return s[Pu]=i,s}(s)}}let md=(()=>{class i{}return i.NULL=new Eb,i})();function $_(...i){}function Fu(i,s){return new Wa(Si(i,s))}const cS=function(){return Fu(Cn(),De())};let Wa=(()=>{class i{constructor(u){this.nativeElement=u}}return i.__NG_ELEMENT_ID__=cS,i})();function Ib(i){return i instanceof Wa?i.nativeElement:i}class yd{}let dS=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Ab(),i})();const Ab=function(){const i=De(),u=ui(Cn().index,i);return function(i){return i[11]}(Ls(u)?u:i)};let Pg=(()=>{class i{}return i.\u0275prov=sn({token:i,providedIn:"root",factory:()=>null}),i})();class HT{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const q_=new HT("12.2.13");class G_{constructor(){}supports(s){return Qs(s)}create(s){return new GT(s)}}const qT=(i,s)=>s;class GT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||qT}forEachItem(s){let u;for(u=this._itHead;null!==u;u=u._next)s(u)}forEachOperation(s){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const g=!c||u&&u.currentIndex<Nb(c,d,f)?u:c,y=Nb(g,d,f),w=g.currentIndex;if(g===c)d--,c=c._nextRemoved;else if(u=u._next,null==g.previousIndex)d++;else{f||(f=[]);const E=y-d,A=w-d;if(E!=A){for(let P=0;P<E;P++){const j=P<f.length?f[P]:f[P]=0,Y=j+P;A<=Y&&Y<E&&(f[P]=j+1)}f[g.previousIndex]=A-E}}y!==w&&s(g,y,w)}}forEachPreviousItem(s){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachMovedItem(s){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}forEachIdentityChange(s){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)s(u)}diff(s){if(null==s&&(s=[]),!Qs(s))throw new Error(`Error trying to diff '${Q(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,g,u=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)f=s[y],g=this._trackByFn(y,f),null!==u&&Object.is(u.trackById,g)?(c&&(u=this._verifyReinsertion(u,f,g,y)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,g,y),c=!0),u=u._next}else d=0,function(i,s){if(Array.isArray(i))for(let u=0;u<i.length;u++)s(i[u]);else{const u=i[Qc()]();let c;for(;!(c=u.next()).done;)s(c.value)}}(s,y=>{g=this._trackByFn(d,y),null!==u&&Object.is(u.trackById,g)?(c&&(u=this._verifyReinsertion(u,y,g,d)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,g,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,u,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._moveAfter(s,f,d)):s=this._addAfter(new zT(u,c),f,d),s}_verifyReinsertion(s,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const u=s._next;this._addToRemovals(this._unlink(s)),s=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,u,c),this._addToMoves(s,c),s}_moveAfter(s,u,c){return this._unlink(s),this._insertAfter(s,u,c),this._addToMoves(s,c),s}_addAfter(s,u,c){return this._insertAfter(s,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,u,c){const d=null===u?this._itHead:u._next;return s._next=d,s._prev=u,null===d?this._itTail=s:d._prev=s,null===u?this._itHead=s:u._next=s,null===this._linkedRecords&&(this._linkedRecords=new WT),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const u=s._prev,c=s._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,s}_addToMoves(s,u){return s.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WT),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,u){return s.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class zT{constructor(s,u){this.item=s,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const u=s._prevDup,c=s._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class WT{constructor(){this.map=new Map}put(s){const u=s.trackById;let c=this.map.get(u);c||(c=new Sb,this.map.set(u,c)),c.add(s)}get(s,u){const d=this.map.get(s);return d?d.get(s,u):null}remove(s){const u=s.trackById;return this.map.get(u).remove(s)&&this.map.delete(u),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nb(i,s,u){const c=i.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+s+d}class YT{constructor(){}supports(s){return s instanceof Map||sg(s)}create(){return new KT}}class KT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let u;for(u=this._mapHead;null!==u;u=u._next)s(u)}forEachPreviousItem(s){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)s(u)}forEachChangedItem(s){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}diff(s){if(s){if(!(s instanceof Map||sg(s)))throw new Error(`Error trying to diff '${Q(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,u){if(s){const c=s._prev;return u._next=s,u._prev=c,s._prev=u,c&&(c._next=u),s===this._mapHead&&(this._mapHead=u),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(s,u){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,u);const f=d._prev,g=d._next;return f&&(f._next=g),g&&(g._prev=f),d._next=null,d._prev=null,d}const c=new hS(s);return this._records.set(s,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,u){Object.is(u,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=u,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,u){s instanceof Map?s.forEach(u):Object.keys(s).forEach(c=>u(s[c],c))}}class hS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vd(){return new Lu([new G_])}let Lu=(()=>{class i{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new i(u)}static extend(u){return{provide:i,useFactory:c=>i.create(u,c||vd()),deps:[[i,new Br,new xa]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(i){return i.name||typeof i}(u)}'`)}}return i.\u0275prov=sn({token:i,providedIn:"root",factory:vd}),i})();function Fg(){return new Lg([new YT])}let Lg=(()=>{class i{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new i(u)}static extend(u){return{provide:i,useFactory:c=>i.create(u,c||Fg()),deps:[[i,new Br,new xa]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return i.\u0275prov=sn({token:i,providedIn:"root",factory:Fg}),i})();function Vg(i,s,u,c,d=!1){for(;null!==u;){const f=s[u.index];if(null!==f&&c.push(on(f)),Vr(f))for(let y=10;y<f.length;y++){const w=f[y],E=w[1].firstChild;null!==E&&Vg(w[1],w,E,c)}const g=u.type;if(8&g)Vg(i,s,u.child,c);else if(32&g){const y=Um(u,s);let w;for(;w=y();)c.push(w)}else if(16&g){const y=B0(s,u);if(Array.isArray(y))c.push(...y);else{const w=Rp(s[16]);Vg(w[1],w,y,c,!0)}}u=d?u.projectionNext:u.next}return c}class Ug{constructor(s,u){this._lView=s,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,u=s[1];return Vg(u,s,u.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Vr(s)){const u=s[8],c=u?u.indexOf(this):-1;c>-1&&($m(s,c),xi(u,c))}this._attachedToViewContainer=!1}Bw(this._lView[1],this._lView)}onDestroy(s){Zp(this._lView[1],this._lView,null,s)}markForCheck(){s_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,u){bo(!0);try{fv(i,s,u)}finally{bo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Bc(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class xb extends Ug{constructor(s){super(s),this._view=s}detectChanges(){Hc(this._view)}checkNoChanges(){!function(i){bo(!0);try{Hc(i)}finally{bo(!1)}}(this._view)}get context(){return null}}const pS=function(i){return function(i,s,u){if(Yu(i)&&!u){const c=ui(i.index,s);return new Ug(c,c)}return 47&i.type?new Ug(s[16],s):null}(Cn(),De(),16==(16&i))};let kb=(()=>{class i{}return i.__NG_ELEMENT_ID__=pS,i})();const ri=[new YT],_S=new Lu([new G_]),yS=new Lg(ri),bS=function(){return wd(Cn(),De())};let bd=(()=>{class i{}return i.__NG_ELEMENT_ID__=bS,i})();const QT=bd,XT=class extends QT{constructor(s,u,c){super(),this._declarationLView=s,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(s){const u=this._declarationTContainer.tViews,c=Nl(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),Vp(u,c,s),new Ug(c)}};function wd(i,s){return 4&i.type?new XT(s,i,Fu(i,s)):null}class sa{}class Bg{}const Fb=function(){return Vb(Cn(),De())};let Zg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Fb,i})();const tE=Zg,nE=class extends tE{constructor(s,u,c){super(),this._lContainer=s,this._hostTNode=u,this._hostLView=c}get element(){return Fu(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ge(this._hostTNode,this._hostLView);if(bc(s)){const u=Zs(s,this._hostLView),c=zi(s);return new Ni(u[1].data[c+8],u)}return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const u=rE(this._lContainer);return null!==u&&u[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,u,c){const d=s.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(s,u,c,d,f){const g=c||this.parentInjector;if(!f&&null==s.ngModule&&g){const w=g.get(sa,null);w&&(f=w)}const y=s.create(g,d,void 0,f);return this.insert(y.hostView,u),y}insert(s,u){const c=s._lView,d=c[1];if(Vr(c[3])){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const R=c[3],P=new nE(R,R[6],R[3]);P.detach(P.indexOf(s))}}const f=this._adjustIndex(u),g=this._lContainer;!function(i,s,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=s),c<f-10?(s[4]=u[d],bu(u,10+c,s)):(u.push(s),s[4]=null),s[3]=u;const g=s[17];null!==g&&u!==g&&function(i,s){const u=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===u?i[9]=[s]:u.push(s)}(g,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(d,c,g,f);const y=Z0(f,g),w=c[11],E=Hm(w,g[7]);return null!==E&&function(i,s,u,c,d,f){c[0]=d,c[6]=s,Bc(i,c,u,1,d,f)}(d,g[6],w,c,E,y),s.attachToViewContainerRef(),bu(Lb(g),f,s),s}move(s,u){return this.insert(s,u)}indexOf(s){const u=rE(this._lContainer);return null!==u?u.indexOf(s):-1}remove(s){const u=this._adjustIndex(s,-1),c=$m(this._lContainer,u);c&&(xi(Lb(this._lContainer),u),Bw(c[1],c))}detach(s){const u=this._adjustIndex(s,-1),c=$m(this._lContainer,u);return c&&null!=xi(Lb(this._lContainer),u)?new Ug(c):null}_adjustIndex(s,u=0){return null==s?this.length+u:s}};function rE(i){return i[8]}function Lb(i){return i[8]||(i[8]=[])}function Vb(i,s){let u;const c=s[i.index];if(Vr(c))u=c;else{let d;if(8&i.type)d=on(c);else{const f=s[11];d=f.createComment("");const g=Si(i,s);Il(f,Hm(f,g),d,function(i,s){return Rn(i)?i.nextSibling(s):s.nextSibling}(f,g),!1)}s[i.index]=u=Hp(c,s,d,i),Gp(s,u)}return new nE(u,i,s)}const Ad={};class ly extends md{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const u=hn(s);return new cy(u,this.ngModule)}}function wE(i){const s=[];for(let u in i)i.hasOwnProperty(u)&&s.push({propName:i[u],templateName:u});return s}const TE=new On("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rw});class cy extends gd{constructor(s,u){super(),this.componentDef=s,this.ngModule=u,this.componentType=s.type,this.selector=s.selectors.map(Km).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return wE(this.componentDef.inputs)}get outputs(){return wE(this.componentDef.outputs)}create(s,u,c,d){const f=(d=d||this.ngModule)?function(i,s){return{get:(u,c,d)=>{const f=i.get(u,Ad,d);return f!==Ad||c===Ad?f:s.get(u,c,d)}}}(s,d.injector):s,g=f.get(yd,Dr),y=f.get(Pg,null),w=g.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=c?function(i,s,u){if(Rn(i))return i.selectRootElement(s,u===Pe.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(w,c,this.componentDef.encapsulation):L0(g.createRenderer(null,this.componentDef),E,function(i){const s=i.toLowerCase();return"svg"===s?ru:"math"===s?"http://www.w3.org/1998/MathML/":null}(E)),R=this.componentDef.onPush?576:528,P=function(i,s){return{components:[],scheduler:i||Rw,clean:a_,playerHandler:s||null,flags:0}}(),j=t_(0,null,null,1,0,null,null,null,null,null),Y=Nl(null,j,P,R,null,null,g,w,y,f);let pe,te;hu(Y);try{const Ne=function(i,s,u,c,d,f){const g=u[1];u[20]=i;const w=Ml(g,20,2,"#host",null),E=w.mergedAttrs=s.hostAttrs;null!==E&&(qc(w,E,!0),null!==i&&(oh(d,i,E),null!==w.classes&&$0(d,i,w.classes),null!==w.styles&&zw(d,i,w.styles)));const A=c.createRenderer(i,s),R=Nl(u,Bh(s),null,s.onPush?64:16,u[20],w,c,A,f||null,null);return g.firstCreatePass&&(an(Co(w,u),g,s.type),pC(g,w),mC(w,u.length,1)),Gp(u,R),u[20]=R}(A,this.componentDef,Y,g,w);if(A)if(c)oh(w,A,["ng-version",q_.full]);else{const{attrs:we,classes:nt}=function(i){const s=[],u=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&u.push(f);else{if(!ea(d))break;d=f}c++}return{attrs:s,classes:u}}(this.componentDef.selectors[0]);we&&oh(w,A,we),nt&&nt.length>0&&$0(w,A,nt.join(" "))}if(te=lc(j,20),void 0!==u){const we=te.projection=[];for(let nt=0;nt<this.ngContentSelectors.length;nt++){const mt=u[nt];we.push(null!=mt?Array.from(mt):null)}}pe=function(i,s,u,c,d){const f=u[1],g=function(i,s,u){const c=Cn();i.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),_C(i,c,s,xl(i,s,1,null),u));const d=kt(s,i,c.directiveStart,c);fi(d,s);const f=Si(c,s);return f&&fi(f,s),d}(f,u,s);if(c.components.push(g),i[8]=g,d&&d.forEach(w=>w(g,s)),s.contentQueries){const w=Cn();s.contentQueries(1,g,w.directiveStart)}const y=Cn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(wo(y.index),i_(u[1],y,0,y.directiveStart,y.directiveEnd,s),$p(s,g)),g}(Ne,this.componentDef,Y,P,[Av]),Vp(j,Y,null)}finally{$o()}return new LS(this.componentType,pe,Fu(te,Y),Y,te)}}class LS extends class{}{constructor(s,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new xb(d),this.componentType=s}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const kf=new Map;class _1 extends sa{constructor(s,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ly(this);const c=Nn(s),d=s[ut]||null;d&&P_(d),this._bootstrapComponents=Fa(c.bootstrap),this._r3Injector=TC(s,u,[{provide:sa,useValue:this},{provide:md,useValue:this.componentFactoryResolver}],Q(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,u=En.THROW_IF_NOT_FOUND,c=Ze.Default){return s===En||s===sa||s===Gc?this:this._r3Injector.get(s,u,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Kg extends Bg{constructor(s){super(),this.moduleType=s,null!==Nn(s)&&function(i){const s=new Set;!function u(c){const d=Nn(c,!0),f=d.id;null!==f&&(function(i,s,u){if(s&&s!==u)throw new Error(`Duplicate module registered for ${i} - ${Q(s)} vs ${Q(s.name)}`)}(f,kf.get(f),c),kf.set(f,c));const g=Fa(d.imports);for(const y of g)s.has(y)||(s.add(y),u(y))}(i)}(s)}create(s){return new _1(this.moduleType,s)}}function fy(i,s,u,c){return w1(De(),or(),i,s,u,c)}function y1(i,s,u,c,d){return function(i,s,u,c,d,f,g){const y=s+u;return ja(i,y,d,f)?Ts(i,y+2,g?c.call(g,d,f):c(d,f)):Jg(i,y+2)}(De(),or(),i,s,u,c,d)}function py(i,s,u,c,d,f){return function(i,s,u,c,d,f,g,y){const w=s+u;return function(i,s,u,c,d){const f=ja(i,s,u,c);return ei(i,s+2,d)||f}(i,w,d,f,g)?Ts(i,w+3,y?c.call(y,d,f,g):c(d,f,g)):Jg(i,w+3)}(De(),or(),i,s,u,c,d,f)}function Jg(i,s){const u=i[s];return u===wt?void 0:u}function w1(i,s,u,c,d,f){const g=s+u;return ei(i,g,d)?Ts(i,g+1,f?c.call(f,d):c(d)):Jg(i,g+1)}function NE(i,s){const u=xt();let c;const d=i+20;u.firstCreatePass?(c=function(i,s){if(s)for(let u=s.length-1;u>=0;u--){const c=s[u];if(i===c.name)return c}throw new Me("302",`The pipe '${i}' could not be found!`)}(s,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const f=c.factory||(c.factory=Ii(c.type)),g=Gn(lr);try{const y=Da(!1),w=f();return Da(y),function(i,s,u,c){u>=i.data.length&&(i.data[u]=null,i.blueprint[u]=null),s[u]=c}(u,De(),d,w),w}finally{Gn(g)}}function ME(i,s,u){const c=i+20,d=De(),f=qi(d,c);return function(i,s){No.isWrapped(s)&&(s=No.unwrap(s),i[Yr()]=wt);return s}(d,function(i,s){return i[1].data[s].pure}(d,c)?w1(d,or(),s,f.transform,u,f):f.transform(u))}function Jt(i){return s=>{setTimeout(i,void 0,s)}}const oa=class extends o.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,u,c){var d,f,g;let y=s,w=u||(()=>null),E=c;if(s&&"object"==typeof s){const R=s;y=null===(d=R.next)||void 0===d?void 0:d.bind(R),w=null===(f=R.error)||void 0===f?void 0:f.bind(R),E=null===(g=R.complete)||void 0===g?void 0:g.bind(R)}this.__isAsync&&(w=Jt(w),y&&(y=Jt(y)),E&&(E=Jt(E)));const A=super.subscribe({next:y,error:w,complete:E});return s instanceof Z.w&&s.add(A),A}};function RE(){return this._results[Qc()]()}class Gl{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Qc(),c=Gl.prototype;c[u]||(c[u]=RE)}get changes(){return this._changes||(this._changes=new oa)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,u){return this._results.reduce(s,u)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,u){const c=this;c.dirty=!1;const d=Ki(s);(this._changesDetected=!function(i,s,u){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Fo{constructor(s){this.queryList=s,this.matches=null}clone(){return new Fo(this.queryList)}setDirty(){this.queryList.setDirty()}}class my{constructor(s=[]){this.queries=s}createEmbeddedView(s){const u=s.queries;if(null!==u){const c=null!==s.contentQueries?s.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const g=u.getByIndex(f);d.push(this.queries[g.indexInDeclarationView].clone())}return new my(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let u=0;u<this.queries.length;u++)null!==VE(s,u).matches&&this.queries[u].setDirty()}}class OE{constructor(s,u,c=null){this.predicate=s,this.flags=u,this.read=c}}class Lf{constructor(s=[]){this.queries=s}elementStart(s,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,u)}elementEnd(s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(s)}embeddedTView(s){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Lf(u):null}template(s,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,u)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class _y{constructor(s,u=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(s,u){this.isApplyingToNode(u)&&this.matchTNode(s,u)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,u){this.elementStart(s,u)}embeddedTView(s,u){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,u),new _y(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,u,PE(u,f)),this.matchTNodeWithReadOption(s,u,hl(u,s,f,!1,!1))}else c===bd?4&u.type&&this.matchTNodeWithReadOption(s,u,-1):this.matchTNodeWithReadOption(s,u,hl(u,s,c,!1,!1))}matchTNodeWithReadOption(s,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Wa||d===Zg||d===bd&&4&u.type)this.addMatch(u.index,-2);else{const f=hl(u,s,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(s,u){null===this.matches?this.matches=[s,u]:this.matches.push(s,u)}}function PE(i,s){const u=i.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===s)return u[c+1];return null}function E1(i,s,u,c){return-1===u?function(i,s){return 11&i.type?Fu(i,s):4&i.type?wd(i,s):null}(s,i):-2===u?function(i,s,u){return u===Wa?Fu(s,i):u===bd?wd(s,i):u===Zg?Vb(s,i):void 0}(i,s,c):kt(i,i[1],u,s)}function FE(i,s,u,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,g=u.matches,y=[];for(let w=0;w<g.length;w+=2){const E=g[w];y.push(E<0?null:E1(s,f[E],g[w+1],u.metadata.read))}d.matches=y}return d.matches}function Hn(i,s,u,c){const d=i.queries.getByIndex(u),f=d.matches;if(null!==f){const g=FE(i,s,d,u);for(let y=0;y<f.length;y+=2){const w=f[y];if(w>0)c.push(g[y/2]);else{const E=f[y+1],A=s[-w];for(let R=10;R<A.length;R++){const P=A[R];P[17]===P[3]&&Hn(P[1],P,E,c)}if(null!==A[9]){const R=A[9];for(let P=0;P<R.length;P++){const j=R[P];Hn(j[1],j,E,c)}}}}}return c}function GS(i){const s=De(),u=xt(),c=pc();jo(c+1);const d=VE(u,c);if(i.dirty&&el(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Hn(u,s,c,[]):FE(u,s,d,c);i.reset(f,Ib),i.notifyOnChanges()}return!0}return!1}function zS(i,s,u){const c=xt();c.firstCreatePass&&(I1(c,new OE(i,s,u),-1),2==(2&s)&&(c.staticViewQueries=!0)),LE(c,De(),s)}function Mr(i,s,u,c){const d=xt();if(d.firstCreatePass){const f=Cn();I1(d,new OE(s,u,c),f.index),function(i,s){const u=i.contentQueries||(i.contentQueries=[]);s!==(u.length?u[u.length-1]:-1)&&u.push(i.queries.length-1,s)}(d,i),2==(2&u)&&(d.staticContentQueries=!0)}LE(d,De(),u)}function D1(){return i=De(),s=pc(),i[19].queries[s].queryList;var i,s}function LE(i,s,u){const c=new Gl(4==(4&u));Zp(i,s,c,c.destroy),null===s[19]&&(s[19]=new my),s[19].queries.push(new Fo(c))}function I1(i,s,u){null===i.queries&&(i.queries=new Lf),i.queries.track(new _y(s,u))}function VE(i,s){return i.queries.getByIndex(s)}function UE(i,s){return wd(i,s)}const k1=new On("Application Initializer");let kd=(()=>{class i{constructor(u){this.appInits=u,this.resolve=$_,this.reject=$_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(sd(f))u.push(f);else if(y_(f)){const g=new Promise((y,w)=>{f.subscribe({complete:y,error:w})});u.push(g)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return i.\u0275fac=function(u){return new(u||i)(Tn(k1,8))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();const XE=new On("AppId"),R1={provide:XE,useFactory:function(){return`${O1()}${O1()}${O1()}`},deps:[]};function O1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eD=new On("Platform Initializer"),tD=new On("Platform ID"),nD=new On("appBootstrapListener");let rD=(()=>{class i{log(u){console.log(u)}warn(u){console.warn(u)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();const Ny=new On("LocaleId"),dN=new On("DefaultCurrencyCode");class P1{constructor(s,u){this.ngModuleFactory=s,this.componentFactories=u}}const My=function(i){return new Kg(i)},xy=My,oD=function(i){return Promise.resolve(My(i))},so=function(i){const s=My(i),c=Fa(Nn(i).declarations).reduce((d,f)=>{const g=hn(f);return g&&d.push(new cy(g)),d},[]);return new P1(s,c)},os=so,nm=function(i){return Promise.resolve(so(i))};let Hu=(()=>{class i{constructor(){this.compileModuleSync=xy,this.compileModuleAsync=oD,this.compileModuleAndAllComponentsSync=os,this.compileModuleAndAllComponentsAsync=nm}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();const F1=(()=>Promise.resolve(0))();function Kl(i){"undefined"==typeof Zone?F1.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class us{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oa(!1),this.onMicrotaskEmpty=new oa(!1),this.onStable=new oa(!1),this.onError=new oa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=Yt.requestAnimationFrame,s=Yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Yt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,rm(i),i.isCheckStableRunning=!0,L1(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),rm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,g,y)=>{try{return Hf(i),u.invokeTask(d,f,g,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),aD(i)}},onInvoke:(u,c,d,f,g,y,w)=>{try{return Hf(i),u.invoke(d,f,g,y,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),aD(i)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,rm(i),L1(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!us.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(us.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,u,c){return this._inner.run(s,u,c)}runTask(s,u,c,d){const f=this._inner,g=f.scheduleEventTask("NgZoneEvent: "+d,s,Od,$_,$_);try{return f.runTask(g,u,c)}finally{f.cancelTask(g)}}runGuarded(s,u,c){return this._inner.runGuarded(s,u,c)}runOutsideAngular(s){return this._outer.run(s)}}const Od={};function L1(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Hf(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function aD(i){i._nesting--,L1(i)}class vN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oa,this.onMicrotaskEmpty=new oa,this.onStable=new oa,this.onError=new oa}run(s,u,c){return s.apply(u,c)}runGuarded(s,u,c){return s.apply(u,c)}runOutsideAngular(s){return s()}runTask(s,u,c,d){return s.apply(u,c)}}let uD=(()=>{class i{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{us.assertNotInAngularZone(),Kl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Kl(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return i.\u0275fac=function(u){return new(u||i)(Tn(us))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})(),lD=(()=>{class i{constructor(){this._applications=new Map,ky.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return ky.findTestabilityInTree(this,u,c)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();class cD{addToWindow(s){}findTestabilityInTree(s,u,c){return null}}function bN(i){ky=i}let ky=new cD,Ry=!0,V1=!1;function qf(){return V1=!0,Ry}function wN(){if(V1)throw new Error("Cannot enable prod mode after platform setup.");Ry=!1}let Qa;const DN=new On("AllowMultipleToken");class _k{constructor(s,u){this.name=s,this.token=u}}function IN(i,s,u=[]){const c=`Platform: ${s}`,d=new On(c);return(f=[])=>{let g=hD();if(!g||g.injector.get(DN,!1))if(i)i(u.concat(f).concat({provide:d,useValue:!0}));else{const y=u.concat(f).concat({provide:d,useValue:!0},{provide:zc,useValue:"platform"});!function(i){if(Qa&&!Qa.destroyed&&!Qa.injector.get(DN,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qa=i.get(fD);const s=i.get(eD,null);s&&s.forEach(u=>u())}(En.create({providers:y,name:c}))}return function(i){const s=hD();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function hD(){return Qa&&!Qa.destroyed?Qa:null}let fD=(()=>{class i{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const y=function(i,s){let u;return u="noop"===i?new vN:("zone.js"===i?void 0:i)||new us({enableLongStackTrace:qf(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),w=[{provide:us,useValue:y}];return y.run(()=>{const E=En.create({providers:w,parent:this.injector,name:u.moduleType.name}),A=u.create(E),R=A.injector.get(Oh,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const P=y.onError.subscribe({next:j=>{R.handleError(j)}});A.onDestroy(()=>{U1(this._modules,A),P.unsubscribe()})}),function(i,s,u){try{const c=u();return sd(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(R,y,()=>{const P=A.injector.get(kd);return P.runInitializers(),P.donePromise.then(()=>(P_(A.injector.get(Ny,R_)||R_),this._moduleDoBootstrap(A),A))})})}bootstrapModule(u,c=[]){const d=im({},c);return function(i,s,u){const c=new Kg(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(Pd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${Q(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(u){return new(u||i)(Tn(En))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();function im(i,s){return Array.isArray(s)?s.reduce(im,i):Object.assign(Object.assign({},i),s)}let Pd=(()=>{class i{constructor(u,c,d,f,g){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),w=new O.y(E=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{us.assertNotInAngularZone(),Kl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{us.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe((0,ue.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=u instanceof gd?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(sa),y=d.create(En.NULL,[],c||d.selector,f),w=y.location.nativeElement,E=y.injector.get(uD,null),A=E&&y.injector.get(lD);return E&&A&&A.registerApplication(w,E),y.onDestroy(()=>{this.detachView(y.hostView),U1(this.components,y),A&&A.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;U1(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(nD,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(u){return new(u||i)(Tn(us),Tn(En),Tn(Oh),Tn(md),Tn(kd))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();function U1(i,s){const u=i.indexOf(s);u>-1&&i.splice(u,1)}class gD{}class _D{}const NN={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let B1=(()=>{class i{constructor(u,c){this._compiler=u,this._config=c||NN}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,d]=u.split("#");return void 0===d&&(d="default"),F(8255)(c).then(f=>f[d]).then(f=>sm(f,c,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(u){let[c,d]=u.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),F(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(g=>g[d+f]).then(g=>sm(g,c,d))}}return i.\u0275fac=function(u){return new(u||i)(Tn(Hu),Tn(_D,8))},i.\u0275prov=sn({token:i,factory:i.\u0275fac}),i})();function sm(i,s,u){if(!i)throw new Error(`Cannot find '${u}' in '${s}'`);return i}const j1=function(i){return null},Fy=IN(null,"core",[{provide:tD,useValue:"unknown"},{provide:fD,deps:[En]},{provide:lD,deps:[]},{provide:rD,deps:[]}]),ND=[{provide:Pd,useClass:Pd,deps:[us,En,Oh,md,kd]},{provide:TE,deps:[us],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(u){s.push(u)}}},{provide:kd,useClass:kd,deps:[[new xa,k1]]},{provide:Hu,useClass:Hu,deps:[]},R1,{provide:Lu,useFactory:function(){return _S},deps:[]},{provide:Lg,useFactory:function(){return yS},deps:[]},{provide:Ny,useFactory:function(i){return P_(i=i||"undefined"!=typeof $localize&&$localize.locale||R_),i},deps:[[new Tu(Ny),new xa,new Br]]},{provide:dN,useValue:"USD"}];let PN=(()=>{class i{constructor(u){}}return i.\u0275fac=function(u){return new(u||i)(Tn(Pd))},i.\u0275mod=Ve({type:i}),i.\u0275inj=_n({providers:ND}),i})()},8939:(We,be,F)=>{"use strict";F.d(be,{hO:()=>he,xv:()=>z,Dh:()=>Q,GT:()=>ee,cc:()=>Oe,on:()=>L,pX:()=>ue});var o=F(7716),Z=F(7841),O=F(9396);We=F.hmd(We);const ce=["ngOnDestroy"],ue=(re,ae,Te,ke={})=>new Proxy(re,{get:(At,Nt)=>Te.runOutsideAngular(()=>{var zt;if(re[Nt])return(null===(zt=null==ke?void 0:ke.spy)||void 0===zt?void 0:zt.get)&&ke.spy.get(Nt,re[Nt]),re[Nt];if(ce.indexOf(Nt)>-1)return()=>{};const yt=ae.toPromise().then(In=>{const Tt=In&&In[Nt];return"function"==typeof Tt?Tt.bind(In):Tt&&Tt.then?Tt.then(pt=>Te.run(()=>pt)):Te.run(()=>Tt)});return new Proxy(()=>{},{get:(In,Tt)=>yt[Tt],apply:(In,Tt,pt)=>yt.then(Rt=>{var Qe;const Ut=Rt&&Rt(...pt);return(null===(Qe=null==ke?void 0:ke.spy)||void 0===Qe?void 0:Qe.apply)&&ke.spy.apply(Nt,pt,Ut),Ut})})})}),ee=(re,ae)=>{ae.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(ke=>{Object.defineProperty(re.prototype,ke,Object.getOwnPropertyDescriptor(Te.prototype||Te,ke))})})};class de{constructor(ae){return ae}}const Q=new o.OlP("angularfire2.app.options"),z=new o.OlP("angularfire2.app.name");function L(re,ae,Te){const At="object"==typeof Te&&Te||{};At.name=At.name||"string"==typeof Te&&Te||"[DEFAULT]";const zt=Z.Z.apps.filter(yt=>yt&&yt.name===At.name)[0]||ae.runOutsideAngular(()=>Z.Z.initializeApp(re,At));try{JSON.stringify(re)!==JSON.stringify(zt.options)&&B("error",`${zt.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(yt){}return new de(zt)}const B=(re,...ae)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[re](...ae)},H={provide:de,useFactory:L,deps:[Q,o.R0b,[new o.FiY,z]]};let he=(()=>{class re{constructor(Te){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",o.q4F.full,Te.toString())}static initializeApp(Te,ke){return{ngModule:re,providers:[{provide:Q,useValue:Te},{provide:z,useValue:ke}]}}}return re.\u0275fac=function(Te){return new(Te||re)(o.LFG(o.Lbi))},re.\u0275mod=o.oAB({type:re}),re.\u0275inj=o.cJS({providers:[H]}),re})();function Oe(re,ae,Te,ke,At){const[,Nt,zt]=globalThis.\u0275AngularfireInstanceCache.find(yt=>yt[0]===re)||[];if(Nt)return function(re,ae){try{return re.toString()===ae.toString()}catch(Te){return re===ae}}(At,zt)||(ge("error",`${ae} was already initialized on the ${Te} Firebase App with different settings.${Ee?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:At,was:zt})),Nt;{const yt=ke();return globalThis.\u0275AngularfireInstanceCache.push([re,yt,At]),yt}}const Ee=!!We.hot,ge=(re,...ae)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[re](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9396:(We,be,F)=>{"use strict";F.d(be,{q4:()=>Em,iC:()=>Qn,fc:()=>gh,HU:()=>ph,vb:()=>bu,JM:()=>bs});var o=F(7716),Z=F(2329),O=F(8239),ce=F(8026),ue=F(3854),ee=F(3910),de=F(5422),Q=F(6676);const z="@firebase/installations",L="0.5.4",H=`w:${L}`,he="FIS_v2",ae=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(T){return T instanceof ue.ZR&&T.code.includes("request-failed")}function ke({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function At(T){return{token:T.token,requestStatus:2,expiresIn:Rt(T.expiresIn),creationTime:Date.now()}}function Nt(T,I){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(T,I){const U=(yield I.json()).error;return ae.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function yt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function In(T,{refreshToken:I}){const x=yt(T);return x.append("Authorization",function(T){return`${he} ${T}`}(I)),x}function Tt(T){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*(T){const I=yield T();return I.status>=500&&I.status<600?T():I})).apply(this,arguments)}function Rt(T){return Number(T.replace("s","000"))}function Ut(T,I){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,O.Z)(function*(T,{fid:I}){const x=ke(T),fe={method:"POST",headers:yt(T),body:JSON.stringify({fid:I,authVersion:he,appId:T.appId,sdkVersion:H})},Ae=yield Tt(()=>fetch(x,fe));if(Ae.ok){const He=yield Ae.json();return{fid:He.fid||I,registrationStatus:2,refreshToken:He.refreshToken,authToken:At(He.authToken)}}throw yield Nt("Create Installation",Ae)})).apply(this,arguments)}function cs(T){return new Promise(I=>{setTimeout(I,T)})}const ji=/^[cdef][\w-]{21}$/;function Wt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const x=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return ji.test(x)?x:""}catch(T){return""}}function ds(T){return`${T.appName}!${T.appId}`}const Ms=new Map;function Ci(T,I){const x=ds(T);_n(x,I),function(T,I){const x=(!Qt&&"BroadcastChannel"in self&&(Qt=new BroadcastChannel("[Firebase] FID Change"),Qt.onmessage=T=>{_n(T.data.key,T.data.fid)}),Qt);x&&x.postMessage({key:T,fid:I}),0===Ms.size&&Qt&&(Qt.close(),Qt=null)}(x,I)}function _n(T,I){const x=Ms.get(T);if(x)for(const U of x)U(I)}let Qt=null;const wn="firebase-installations-store";let qn=null;function Ei(){return qn||(qn=(0,Q.openDb)("firebase-installations-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(wn)}})),qn}function Ze(T,I){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(T,I){const x=ds(T),ne=(yield Ei()).transaction(wn,"readwrite"),fe=ne.objectStore(wn),Ae=yield fe.get(x);return yield fe.put(I,x),yield ne.complete,(!Ae||Ae.fid!==I.fid)&&Ci(T,I.fid),I})).apply(this,arguments)}function gr(T){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(T){const I=ds(T),U=(yield Ei()).transaction(wn,"readwrite");yield U.objectStore(wn).delete(I),yield U.complete})).apply(this,arguments)}function it(T,I){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(T,I){const x=ds(T),ne=(yield Ei()).transaction(wn,"readwrite"),fe=ne.objectStore(wn),Ae=yield fe.get(x),He=I(Ae);return void 0===He?yield fe.delete(x):yield fe.put(He,x),yield ne.complete,He&&(!Ae||Ae.fid!==He.fid)&&Ci(T,He.fid),He})).apply(this,arguments)}function Mt(T){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(T){let I;const x=yield it(T,U=>{const ne=zn(U),fe=en(T,ne);return I=fe.registrationPromise,fe.installationEntry});return""===x.fid?{installationEntry:yield I}:{installationEntry:x,registrationPromise:I}})).apply(this,arguments)}function zn(T){return Yt(T||{fid:Wt(),registrationStatus:0})}function en(T,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(ae.create("app-offline"))};const x={fid:I.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(T,I){return Xe.apply(this,arguments)}(T,x)}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:da(T)}:{installationEntry:I}}function Xe(){return(Xe=(0,O.Z)(function*(T,I){try{return Ze(T,yield Ut(T,I))}catch(x){throw Te(x)&&409===x.customData.serverCode?yield gr(T):yield Ze(T,{fid:I.fid,registrationStatus:0}),x}})).apply(this,arguments)}function da(T){return cn.apply(this,arguments)}function cn(){return(cn=(0,O.Z)(function*(T){let I=yield tn(T);for(;1===I.registrationStatus;)yield cs(100),I=yield tn(T);if(0===I.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Mt(T);return U||x}return I})).apply(this,arguments)}function tn(T){return it(T,I=>{if(!I)throw ae.create("installation-not-found");return Yt(I)})}function Yt(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function fo(T,I){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*({appConfig:T,platformLoggerProvider:I},x){const U=q(T,x),ne=In(T,x),fe=I.getImmediate({optional:!0});fe&&ne.append("x-firebase-client",fe.getPlatformInfoString());const He={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:H}})},ze=yield Tt(()=>fetch(U,He));if(ze.ok)return At(yield ze.json());throw yield Nt("Generate Auth Token",ze)})).apply(this,arguments)}function q(T,{fid:I}){return`${ke(T)}/${I}/authTokens:generate`}function W(T){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(T,I=!1){let x;const U=yield it(T.appConfig,fe=>{if(!Wn(fe))throw ae.create("not-registered");const Ae=fe.authToken;if(!I&&nr(Ae))return fe;if(1===Ae.requestStatus)return x=le(T,I),fe;{if(!navigator.onLine)throw ae.create("app-offline");const He=J(fe);return x=Ht(T,He),He}});return x?yield x:U.authToken})).apply(this,arguments)}function le(T,I){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(T,I){let x=yield ut(T.appConfig);for(;1===x.authToken.requestStatus;)yield cs(100),x=yield ut(T.appConfig);const U=x.authToken;return 0===U.requestStatus?W(T,I):U})).apply(this,arguments)}function ut(T){return it(T,I=>{if(!Wn(I))throw ae.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function Ht(T,I){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(T,I){try{const x=yield fo(T,I),U=Object.assign(Object.assign({},I),{authToken:x});return yield Ze(T.appConfig,U),x}catch(x){if(!Te(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Ze(T.appConfig,U)}else yield gr(T.appConfig);throw x}})).apply(this,arguments)}function Wn(T){return void 0!==T&&2===T.registrationStatus}function nr(T){return 2===T.requestStatus&&!function(T){const I=Date.now();return I<T.creationTime||T.creationTime+T.expiresIn<I+36e5}(T)}function J(T){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:I})}function Ve(){return(Ve=(0,O.Z)(function*(T){const I=T,{installationEntry:x,registrationPromise:U}=yield Mt(I.appConfig);return U?U.catch(console.error):W(I).catch(console.error),x.fid})).apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(T,I=!1){const x=T;return yield It(x.appConfig),(yield W(x,I)).token})).apply(this,arguments)}function It(T){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(T){const{registrationPromise:I}=yield Mt(T);I&&(yield I)})).apply(this,arguments)}function fn(T){return ae.create("missing-app-config-values",{valueName:T})}const zr="installations";(0,ce._registerComponent)(new ee.wA(zr,T=>{const I=T.getProvider("app").getImmediate();return{app:I,appConfig:function(T){if(!T||!T.options)throw fn("App Configuration");if(!T.name)throw fn("App Name");const I=["projectId","apiKey","appId"];for(const x of I)if(!T.options[x])throw fn(x);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(I),platformLoggerProvider:(0,ce._getProvider)(I,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new ee.wA("installations-internal",T=>{const I=T.getProvider("app").getImmediate(),x=(0,ce._getProvider)(I,zr).getImmediate();return{getId:()=>function(T){return Ve.apply(this,arguments)}(x),getToken:ne=>function(T){return Lt.apply(this,arguments)}(x,ne)}},"PRIVATE")),(0,ce.registerVersion)(z,L),(0,ce.registerVersion)(z,L,"esm2017");const ha="@firebase/remote-config",mr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ur{constructor(I,x,U,ne){this.client=I,this.storage=x,this.storageCache=U,this.logger=ne}isCachedDataFresh(I,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,ne=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${ne}.`),ne}fetch(I){var x=this;return(0,O.Z)(function*(){const[U,ne]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(ne&&x.isCachedDataFresh(I.cacheMaxAgeMillis,U))return ne;I.eTag=ne&&ne.eTag;const fe=yield x.client.fetch(I),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Ae),fe})()}}function hs(T=navigator){return T.languages&&T.languages[0]||T.language}class Er{constructor(I,x,U,ne,fe,Ae){this.firebaseInstallations=I,this.sdkVersion=x,this.namespace=U,this.projectId=ne,this.apiKey=fe,this.appId=Ae}fetch(I){var x=this;return(0,O.Z)(function*(){const[U,ne]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},ze={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:ne,app_id:x.appId,language_code:hs()},Vt={method:"POST",headers:He,body:JSON.stringify(ze)},nn=fetch(Ae,Vt),sr=new Promise((qs,hi)=>{I.signal.addEventListener(()=>{const gt=new Error("The operation was aborted.");gt.name="AbortError",hi(gt)})});let di;try{yield Promise.race([nn,sr]),di=yield nn}catch(qs){let hi="fetch-client-network";throw"AbortError"===qs.name&&(hi="fetch-timeout"),mr.create(hi,{originalErrorMessage:qs.message})}let ar=di.status;const Na=di.headers.get("ETag")||void 0;let wu,Ma;if(200===di.status){let qs;try{qs=yield di.json()}catch(hi){throw mr.create("fetch-client-parse",{originalErrorMessage:hi.message})}wu=qs.entries,Ma=qs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ma?ar=500:"NO_CHANGE"===Ma?ar=304:("NO_TEMPLATE"===Ma||"EMPTY_CONFIG"===Ma)&&(wu={}),304!==ar&&200!==ar)throw mr.create("fetch-status",{httpStatus:ar});return{status:ar,eTag:Na,config:wu}})()}}class Gd{constructor(I,x){this.client=I,this.storage=x}fetch(I){var x=this;return(0,O.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:x,backoffCount:U}){var ne=this;return(0,O.Z)(function*(){yield function(T,I){return new Promise((x,U)=>{const ne=Math.max(I-Date.now(),0),fe=setTimeout(x,ne);T.addEventListener(()=>{clearTimeout(fe),U(mr.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,x);try{const fe=yield ne.client.fetch(I);return yield ne.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}(fe))throw fe;const Ae={throttleEndTimeMillis:Date.now()+(0,ue.$s)(U),backoffCount:U+1};return yield ne.storage.setThrottleMetadata(Ae),ne.attemptFetch(I,Ae)}})()}}class Wd{constructor(I,x,U,ne,fe){this.app=I,this._client=x,this._storageCache=U,this._storage=ne,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rc(T,I){const x=T.target.error||void 0;return mr.create(I,{originalErrorMessage:x&&x.message})}const _o="app_namespace_store";class Kd{constructor(I,x,U,ne=function(){return new Promise((T,I)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{I(rc(U,"storage-open"))},x.onsuccess=U=>{T(U.target.result)},x.onupgradeneeded=U=>{const ne=U.target.result;switch(U.oldVersion){case 0:ne.createObjectStore(_o,{keyPath:"compositeKey"})}}}catch(x){I(mr.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=I,this.appName=x,this.namespace=U,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((ne,fe)=>{const He=U.transaction([_o],"readonly").objectStore(_o),ze=x.createCompositeKey(I);try{const Vt=He.get(ze);Vt.onerror=nn=>{fe(rc(nn,"storage-get"))},Vt.onsuccess=nn=>{const sr=nn.target.result;ne(sr?sr.value:void 0)}}catch(Vt){fe(mr.create("storage-get",{originalErrorMessage:Vt&&Vt.message}))}})})()}set(I,x){var U=this;return(0,O.Z)(function*(){const ne=yield U.openDbPromise;return new Promise((fe,Ae)=>{const ze=ne.transaction([_o],"readwrite").objectStore(_o),Vt=U.createCompositeKey(I);try{const nn=ze.put({compositeKey:Vt,value:x});nn.onerror=sr=>{Ae(rc(sr,"storage-set"))},nn.onsuccess=()=>{fe()}}catch(nn){Ae(mr.create("storage-set",{originalErrorMessage:nn&&nn.message}))}})})()}delete(I){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((ne,fe)=>{const He=U.transaction([_o],"readwrite").objectStore(_o),ze=x.createCompositeKey(I);try{const Vt=He.delete(ze);Vt.onerror=nn=>{fe(rc(nn,"storage-delete"))},Vt.onsuccess=()=>{ne()}}catch(Vt){fe(mr.create("storage-delete",{originalErrorMessage:Vt&&Vt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class vm{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,O.Z)(function*(){const x=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),ne=I.storage.getActiveConfig(),fe=yield x;fe&&(I.lastFetchStatus=fe);const Ae=yield U;Ae&&(I.lastSuccessfulFetchTimestampMillis=Ae);const He=yield ne;He&&(I.activeConfig=He)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function op(){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new ee.wA("remote-config",function(I,{instanceIdentifier:x}){const U=I.getProvider("app").getImmediate(),ne=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw mr.create("registration-window");if(!(0,ue.hl)())throw mr.create("indexed-db-unavailable");const{projectId:fe,apiKey:Ae,appId:He}=U.options;if(!fe)throw mr.create("registration-project-id");if(!Ae)throw mr.create("registration-api-key");if(!He)throw mr.create("registration-app-id");const ze=new Kd(He,U.name,x=x||"firebase"),Vt=new vm(ze),nn=new de.Yd(ha);nn.logLevel=de.in.ERROR;const sr=new Er(ne,ce.SDK_VERSION,x,fe,Ae,He),di=new Gd(sr,ze),ar=new Ur(di,ze,Vt,nn),Na=new Wd(U,ar,Vt,ze,nn);return function(T){const I=(0,ue.m9)(T);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Na),Na},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ha,"0.3.3"),(0,ce.registerVersion)(ha,"0.3.3","esm2017");const Ju="/firebase-messaging-sw.js",Qd="/firebase-cloud-messaging-push-scope",sc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ii="google.c.a.c_id",Vs="google.c.a.c_l",_r="google.c.a.ts",oc="google.c.a.e";var ga=(()=>{return(T=ga||(ga={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ga;var T})();function Ai(T){const I=new Uint8Array(T);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xd(T){const x=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),ne=new Uint8Array(U.length);for(let fe=0;fe<U.length;++fe)ne[fe]=U.charCodeAt(fe);return ne}const ma="fcm_token_details_db",ac="fcm_token_object_Store";function Hi(T){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(ma))return null;let I=null;return(yield(0,Q.openDb)(ma,5,function(){var U=(0,O.Z)(function*(ne){var fe;if(ne.oldVersion<2||!ne.objectStoreNames.contains(ac))return;const Ae=ne.transaction.objectStore(ac),He=yield Ae.index("fcmSenderId").get(T);if(yield Ae.clear(),He)if(2===ne.oldVersion){const ze=He;if(!ze.auth||!ze.p256dh||!ze.endpoint)return;I={token:ze.fcmToken,createTime:null!==(fe=ze.createTime)&&void 0!==fe?fe:Date.now(),subscriptionOptions:{auth:ze.auth,p256dh:ze.p256dh,endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:"string"==typeof ze.vapidKey?ze.vapidKey:Ai(ze.vapidKey)}}}else if(3===ne.oldVersion){const ze=He;I={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Ai(ze.auth),p256dh:Ai(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Ai(ze.vapidKey)}}}else if(4===ne.oldVersion){const ze=He;I={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Ai(ze.auth),p256dh:Ai(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Ai(ze.vapidKey)}}}});return function(ne){return U.apply(this,arguments)}}())).close(),yield(0,Q.deleteDb)(ma),yield(0,Q.deleteDb)("fcm_vapid_details_db"),yield(0,Q.deleteDb)("undefined"),Xu(I)?I:null})).apply(this,arguments)}function Xu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:I}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const yo="firebase-messaging-store";let _a=null;function Rn(){return _a||(_a=(0,Q.openDb)("firebase-messaging-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(yo)}})),_a}function iu(T){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(T){const I=ya(T),U=yield(yield Rn()).transaction(yo).objectStore(yo).get(I);if(U)return U;{const ne=yield Hi(T.appConfig.senderId);if(ne)return yield vo(T,ne),ne}})).apply(this,arguments)}function vo(T,I){return on.apply(this,arguments)}function on(){return(on=(0,O.Z)(function*(T,I){const x=ya(T),ne=(yield Rn()).transaction(yo,"readwrite");return yield ne.objectStore(yo).put(I,x),yield ne.complete,I})).apply(this,arguments)}function up(T){return uc.apply(this,arguments)}function uc(){return(uc=(0,O.Z)(function*(T){const I=ya(T),U=(yield Rn()).transaction(yo,"readwrite");yield U.objectStore(yo).delete(I),yield U.complete})).apply(this,arguments)}function ya({appConfig:T}){return T.appId}const Mn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lc(T,I){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(T,I){const x=yield tl(T),U=lt(I),ne={method:"POST",headers:x,body:JSON.stringify(U)};let fe;try{fe=yield(yield fetch(ps(T.appConfig),ne)).json()}catch(Ae){throw Mn.create("token-subscribe-failed",{errorInfo:Ae})}if(fe.error)throw Mn.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw Mn.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function ui(T,I){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(T,I){const x=yield tl(T),U=lt(I.subscriptionOptions),ne={method:"PATCH",headers:x,body:JSON.stringify(U)};let fe;try{fe=yield(yield fetch(`${ps(T.appConfig)}/${I.token}`,ne)).json()}catch(Ae){throw Mn.create("token-update-failed",{errorInfo:Ae})}if(fe.error)throw Mn.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw Mn.create("token-update-no-token");return fe.token})).apply(this,arguments)}function su(T,I){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(T,I){const U={method:"DELETE",headers:yield tl(T)};try{const fe=yield(yield fetch(`${ps(T.appConfig)}/${I}`,U)).json();if(fe.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(ne){throw Mn.create("token-unsubscribe-failed",{errorInfo:ne})}})).apply(this,arguments)}function ps({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function tl(T){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*({appConfig:T,installations:I}){const x=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:T,auth:I,endpoint:x,vapidKey:U}){const ne={web:{endpoint:x,auth:I,p256dh:T}};return U!==sc&&(ne.web.applicationPubKey=U),ne}const th=6048e5;function nh(T){return cc.apply(this,arguments)}function cc(){return(cc=(0,O.Z)(function*(T){const I=yield au(T.swRegistration,T.vapidKey),x={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:I.endpoint,auth:Ai(I.getKey("auth")),p256dh:Ai(I.getKey("p256dh"))},U=yield iu(T.firebaseDependencies);if(U){if(uu(U.subscriptionOptions,x))return Date.now()>=U.createTime+th?dc(T,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield su(T.firebaseDependencies,U.token)}catch(ne){console.warn(ne)}return De(T.firebaseDependencies,x)}return De(T.firebaseDependencies,x)})).apply(this,arguments)}function nl(T){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(T){const I=yield iu(T.firebaseDependencies);I&&(yield su(T.firebaseDependencies,I.token),yield up(T.firebaseDependencies));const x=yield T.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function dc(T,I){return gs.apply(this,arguments)}function gs(){return(gs=(0,O.Z)(function*(T,I){try{const x=yield ui(T.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:x,createTime:Date.now()});return yield vo(T.firebaseDependencies,U),x}catch(x){throw yield nl(T),x}})).apply(this,arguments)}function De(T,I){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(T,I){const U={token:yield lc(T,I),createTime:Date.now(),subscriptionOptions:I};return yield vo(T,U),U.token})).apply(this,arguments)}function au(T,I){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(T,I){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xd(I)})})).apply(this,arguments)}function uu(T,I){return I.vapidKey===T.vapidKey&&I.endpoint===T.endpoint&&I.auth===T.auth&&I.p256dh===T.p256dh}function Gi(T){const I={from:T.from,collapseKey:T.collapse_key,messageId:T.fcm_message_id};return function(T,I){if(!I.notification)return;T.notification={};const x=I.notification.title;x&&(T.notification.title=x);const U=I.notification.body;U&&(T.notification.body=U);const ne=I.notification.image;ne&&(T.notification.image=ne)}(I,T),function(T,I){!I.data||(T.data=I.data)}(I,T),function(T,I){if(!I.fcmOptions)return;T.fcmOptions={};const x=I.fcmOptions.link;x&&(T.fcmOptions.link=x);const U=I.fcmOptions.analytics_label;U&&(T.fcmOptions.analyticsLabel=U)}(I,T),I}function lp(T){return"object"==typeof T&&!!T&&Ii in T}function rl(T,I){const x=[];for(let U=0;U<T.length;U++)x.push(T.charAt(U)),U<I.length&&x.push(I.charAt(U));return x.join("")}function bo(T){return Mn.create("missing-app-config-values",{valueName:T})}rl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class or{constructor(I,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function(T){if(!T||!T.options)throw bo("App Configuration Object");if(!T.name)throw bo("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:x}=T;for(const U of I)if(!x[U])throw bo(U);return{appName:T.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:ne,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Yr(T){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Ju,{scope:Qd}),T.swRegistration.update().catch(()=>{})}catch(I){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function ms(T,I){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(T,I){if(!I&&!T.swRegistration&&(yield Yr(T)),I||!T.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");T.swRegistration=I}})).apply(this,arguments)}function bm(T,I){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(T,I){I?T.vapidKey=I:T.vapidKey||(T.vapidKey=sc)})).apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(T,I){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield bm(T,null==I?void 0:I.vapidKey),yield ms(T,null==I?void 0:I.serviceWorkerRegistration),nh(T)})).apply(this,arguments)}function fc(T,I,x){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(T,I,x){const U=pc(I);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[Ii],message_name:x[Vs],message_time:x[_r],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pc(T){switch(T){case ga.NOTIFICATION_CLICKED:return"notification_open";case ga.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sl(){return(sl=(0,O.Z)(function*(T,I){const x=I.data;if(!x.isFirebaseMessaging)return;T.onMessageHandler&&x.messageType===ga.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Gi(x)):T.onMessageHandler.next(Gi(x)));const U=x.data;lp(U)&&"1"===U[oc]&&(yield fc(T,x.messageType,U))})).apply(this,arguments)}const du="@firebase/messaging";function al(){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(){return"undefined"!=typeof window&&(0,ue.hl)()&&(yield(0,ue.eu)())&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new ee.wA("messaging",T=>{const I=new or(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(T,I){return sl.apply(this,arguments)}(I,x)),I},"PUBLIC")),(0,ce._registerComponent)(new ee.wA("messaging-internal",T=>{const I=T.getProvider("messaging").getImmediate();return{getToken:U=>function(T,I){return cu.apply(this,arguments)}(I,U)}},"PRIVATE")),(0,ce.registerVersion)(du,"0.9.4"),(0,ce.registerVersion)(du,"0.9.4","esm2017");const ul="analytics",mc="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ho="https://www.googletagmanager.com/gtag/js",rr=new de.Yd("@firebase/analytics");function yc(T){return Promise.all(T.map(I=>I.catch(x=>x)))}function ih(T,I){const x=document.createElement("script");x.src=`${Ho}?l=${T}&id=${I}`,x.async=!0,document.head.appendChild(x)}function ll(T,I,x,U,ne,fe){return qo.apply(this,arguments)}function qo(){return(qo=(0,O.Z)(function*(T,I,x,U,ne,fe){const Ae=U[ne];try{if(Ae)yield I[Ae];else{const ze=(yield yc(x)).find(Vt=>Vt.measurementId===ne);ze&&(yield I[ze.appId])}}catch(He){rr.error(He)}T("config",ne,fe)})).apply(this,arguments)}function sh(T,I,x,U,ne){return Go.apply(this,arguments)}function Go(){return(Go=(0,O.Z)(function*(T,I,x,U,ne){try{let fe=[];if(ne&&ne.send_to){let Ae=ne.send_to;Array.isArray(Ae)||(Ae=[Ae]);const He=yield yc(x);for(const ze of Ae){const Vt=He.find(sr=>sr.measurementId===ze),nn=Vt&&I[Vt.appId];if(!nn){fe=[];break}fe.push(nn)}}0===fe.length&&(fe=Object.values(I)),yield Promise.all(fe),T("event",U,ne||{})}catch(fe){rr.error(fe)}})).apply(this,arguments)}function wm(){const T=window.document.getElementsByTagName("script");for(const I of Object.values(T))if(I.src&&I.src.includes(Ho))return I;return null}const ys=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cl=new class{constructor(I={},x=1e3){this.throttleMetadata=I,this.intervalMillis=x}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,x){this.throttleMetadata[I]=x}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function pp(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function bc(T){return zi.apply(this,arguments)}function zi(){return(zi=(0,O.Z)(function*(T){var I;const{appId:x,apiKey:U}=T,ne={method:"GET",headers:pp(U)},fe=Ta.replace("{app-id}",x),Ae=yield fetch(fe,ne);if(200!==Ae.status&&304!==Ae.status){let He="";try{const ze=yield Ae.json();(null===(I=ze.error)||void 0===I?void 0:I.message)&&(He=ze.error.message)}catch(ze){}throw ys.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:He})}return Ae.json()})).apply(this,arguments)}function Ea(T){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(T,I=cl,x){const{appId:U,apiKey:ne,measurementId:fe}=T.options;if(!U)throw ys.create("no-app-id");if(!ne){if(fe)return{measurementId:fe,appId:U};throw ys.create("no-api-key")}const Ae=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Cc;return setTimeout((0,O.Z)(function*(){He.abort()}),void 0!==x?x:6e4),wc({appId:U,apiKey:ne,measurementId:fe},Ae,He,I)})).apply(this,arguments)}function wc(T,I,x){return Da.apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*(T,{throttleEndTimeMillis:I,backoffCount:x},U,ne=cl){const{appId:fe,measurementId:Ae}=T;try{yield _0(U,I)}catch(He){if(Ae)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:fe,measurementId:Ae};throw He}try{const He=yield bc(T);return ne.deleteThrottleMetadata(fe),He}catch(He){if(!ah(He)){if(ne.deleteThrottleMetadata(fe),Ae)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:fe,measurementId:Ae};throw He}const ze=503===Number(He.customData.httpStatus)?(0,ue.$s)(x,ne.intervalMillis,30):(0,ue.$s)(x,ne.intervalMillis),Vt={throttleEndTimeMillis:Date.now()+ze,backoffCount:x+1};return ne.setThrottleMetadata(fe,Vt),rr.debug(`Calling attemptFetch again in ${ze} millis`),wc(T,Vt,U,ne)}})).apply(this,arguments)}function _0(T,I){return new Promise((x,U)=>{const ne=Math.max(I-Date.now(),0),fe=setTimeout(x,ne);T.addEventListener(()=>{clearTimeout(fe),U(ys.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function ah(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Cc{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function uh(){return lh.apply(this,arguments)}function lh(){return(lh=(0,O.Z)(function*(){if(!(0,ue.hl)())return rr.warn(ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(T){return rr.warn(ys.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(T,I,x,U,ne,fe,Ae){var He;const ze=Ea(T);ze.then(ar=>{x[ar.measurementId]=ar.appId,T.options.measurementId&&ar.measurementId!==T.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>rr.error(ar)),I.push(ze);const Vt=uh().then(ar=>{if(ar)return U.getId()}),[nn,sr]=yield Promise.all([ze,Vt]);wm()||ih(fe,nn.measurementId),ne("js",new Date);const di=null!==(He=null==Ae?void 0:Ae.config)&&void 0!==He?He:{};return di.origin="firebase",di.update=!0,null!=sr&&(di[mc]=sr),ne("config",nn.measurementId,di),nn.measurementId})).apply(this,arguments)}class gn{constructor(I){this.app=I}_delete(){return delete Ge[this.app.options.appId],Promise.resolve()}}let Ge={},an=[];const ch={};let vs,Kn,xn="dataLayer",_u=!1;function kt(T,I,x){!function(){const T=[];if((0,ue.ru)()&&T.push("This is a browser extension environment."),(0,ue.zI)()||T.push("Cookies are not available."),T.length>0){const I=T.map((U,ne)=>`(${ne+1}) ${U}`).join(" "),x=ys.create("invalid-analytics-context",{errorInfo:I});rr.warn(x.message)}}();const U=T.options.appId;if(!U)throw ys.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw ys.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ge[U])throw ys.create("already-exists",{id:U});if(!_u){!function(T){let I=[];Array.isArray(window[T])?I=window[T]:window[T]=I}(xn);const{wrappedGtag:fe,gtagCore:Ae}=function(T,I,x,U,ne){let fe=function(...Ae){window[U].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(fe=window[ne]),window[ne]=function(T,I,x,U){function fe(){return(fe=(0,O.Z)(function*(Ae,He,ze){try{"event"===Ae?yield sh(T,I,x,He,ze):"config"===Ae?yield ll(T,I,x,U,He,ze):T("set",He)}catch(Vt){rr.error(Vt)}})).apply(this,arguments)}return function(Ae,He,ze){return fe.apply(this,arguments)}}(fe,T,I,x),{gtagCore:fe,wrappedGtag:window[ne]}}(Ge,an,ch,xn,"gtag");Kn=fe,vs=Ae,_u=!0}return Ge[U]=function(T,I,x,U,ne,fe,Ae){return gu.apply(this,arguments)}(T,an,ch,I,vs,xn,x),new gn(T)}function To(){return(To=(0,O.Z)(function*(T,I,x,U,ne){if(ne&&ne.global)T("event",x,U);else{const fe=yield I;T("event",x,Object.assign(Object.assign({},U),{send_to:fe}))}})).apply(this,arguments)}function Eo(){return fl.apply(this,arguments)}function fl(){return(fl=(0,O.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(T){return!1}})).apply(this,arguments)}const gp="@firebase/analytics";(0,ce._registerComponent)(new ee.wA(ul,(I,{options:x})=>kt(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new ee.wA("analytics-internal",function(I){try{const x=I.getProvider(ul).getImmediate();return{logEvent:(U,ne,fe)=>function(T,I,x,U){T=(0,ue.m9)(T),function(T,I,x,U,ne){return To.apply(this,arguments)}(Kn,Ge[T.app.options.appId],I,x,U).catch(ne=>rr.error(ne))}(x,U,ne,fe)}}catch(x){throw ys.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(gp,"0.7.4"),(0,ce.registerVersion)(gp,"0.7.4","esm2017");var mp=F(7771),Tm=F(3637),Ia=F(8307),vu=F(9746),fh=F(2639);const Em=new o.GfV("7.2.0"),Ic="__angularfire_symbol__analyticsIsSupported",Do="__angularfire_symbol__remoteConfigIsSupported",Sa="__angularfire_symbol__messagingIsSupported";function bs(T,I,x){if(I){if(1===I.length)return I[0];const fe=I.filter(Ae=>Ae.app===x);if(1===fe.length)return fe[0]}return x.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ic]||(globalThis[Ic]=Eo().then(T=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=T)),globalThis[Sa]||(globalThis[Sa]=al().then(T=>globalThis.__angularfire_symbol__messagingIsSupportedValue=T)),globalThis[Do]||(globalThis[Do]=op().then(T=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=T));const bu=(T,I)=>{const x=I?[I]:(0,Z.C6)(),U=[];return x.forEach(ne=>{ne.container.getProvider(T).instances.forEach(Ae=>{U.includes(Ae)||U.push(Ae)})}),U};function xi(){}class $s{constructor(I,x=mp.N){this.zone=I,this.delegate=x}now(){return this.delegate.now()}schedule(I,x,U){const ne=this.zone;return this.delegate.schedule(function(Ae){ne.runGuarded(()=>{I.apply(this,[Ae])})},x,U)}}class Sc{constructor(I){this.zone=I,this.task=null}call(I,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xi,{},xi,xi)),x.pipe((0,Ia.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ph=(()=>{class T{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new $s(Zone.current)),this.insideAngular=x.run(()=>new $s(Zone.current,Tm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(x){return new(x||T)(o.LFG(o.R0b))},T.\u0275prov=o.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function zo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function gh(T){return T.pipe((0,vu.QV)(zo().outsideAngular))}function Qn(T){return zo(),function(T){return function(x){return(x=x.lift(new Sc(T.ngZone))).pipe((0,fh.R)(T.outsideAngular),(0,vu.QV)(T.insideAngular))}}(zo())(T)}},2476:(We,be,F)=>{"use strict";F.d(be,{$:()=>bm,A:()=>ho,E:()=>Vr,G:()=>Er,I:()=>Us,K:()=>Os,L:()=>iu,M:()=>up,N:()=>uc,P:()=>ne,Q:()=>ya,R:()=>zo,T:()=>on,U:()=>qi,V:()=>ui,W:()=>tl,X:()=>Gi,Y:()=>lu,Z:()=>lp,_:()=>or,a:()=>vs,a0:()=>hc,a1:()=>fc,a2:()=>pc,a3:()=>sl,a4:()=>hu,a5:()=>cp,a6:()=>rh,a7:()=>$o,a8:()=>dp,a9:()=>Yn,aA:()=>Yo,aB:()=>Gs,aC:()=>Lr,aG:()=>dl,aJ:()=>Mn,aa:()=>m0,ab:()=>ul,ae:()=>Ta,af:()=>rr,ag:()=>yc,aj:()=>cc,ak:()=>Cm,am:()=>wc,an:()=>lh,ao:()=>ip,ap:()=>qn,aq:()=>nu,ar:()=>Ps,as:()=>Xt,at:()=>Eh,au:()=>bh,av:()=>Qt,aw:()=>Re,ax:()=>Ze,ay:()=>ht,az:()=>ml,b:()=>xn,c:()=>ar,d:()=>qs,e:()=>wu,f:()=>Tu,g:()=>yh,h:()=>Br,i:()=>mp,j:()=>Sm,k:()=>Oc,l:()=>Qn,m:()=>Dh,n:()=>Sp,o:()=>cs,r:()=>_p,s:()=>gh,u:()=>x,z:()=>ds});var o=F(8239),Z=F(3854),O=F(8026);function de(v,p){var _={};for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&p.indexOf(C)<0&&(_[C]=v[C]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(C=Object.getOwnPropertySymbols(v);S<C.length;S++)p.indexOf(C[S])<0&&Object.prototype.propertyIsEnumerable.call(v,C[S])&&(_[C[S]]=v[C[S]])}return _}var Qe=F(5422),Ut=F(3910);const cs={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ho={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ds=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ms=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ci=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xs=new Qe.Yd("@firebase/auth");function _n(v,...p){xs.logLevel<=Qe.in.ERROR&&xs.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Xt(v,...p){throw $i(v,...p)}function Qt(v,...p){return $i(v,...p)}function ks(v,p,_){const C=Object.assign(Object.assign({},Ms()),{[p]:_});return new Z.LL("auth","Firebase",C).create(p,{appName:v.name})}function Ti(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Xt(v,"argument-error"),ks(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $i(v,...p){if("string"!=typeof v){const _=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return Ci.create(v,...p)}function Re(v,p,..._){if(!v)throw $i(p,..._)}function wn(v){const p="INTERNAL ASSERTION FAILED: "+v;throw _n(p),new Error(p)}function qn(v,p){v||wn(p)}const Ei=new Map;function Ze(v){qn(v instanceof Function,"Expected a class definition");let p=Ei.get(v);return p?(qn(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Ei.set(v,p),p)}function Gn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function it(){return"http:"===et()||"https:"===et()}function et(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class zn{constructor(p,_){this.shortDelay=p,this.longDelay=_,qn(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(it()||(0,Z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function en(v,p){qn(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Pe{static initialize(p,_,C){this.fetchImpl=p,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},da=new zn(3e4,6e4);function cn(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function tn(v,p,_,C){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,o.Z)(function*(v,p,_,C,S={}){return dn(v,S,()=>{let k={},X={};C&&("GET"===p?X=C:k={body:JSON.stringify(C)});const _e=(0,Z.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),je=new(Pe.headers());return je.set("Content-Type","application/json"),je.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&je.set("X-Firebase-Locale",v.languageCode),Pe.fetch()(W(v,v.config.apiHost,_,_e),Object.assign({method:p,headers:je,referrerPolicy:"no-referrer"},k))})})).apply(this,arguments)}function dn(v,p,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,o.Z)(function*(v,p,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},Xe),p);try{const S=new ve(v),k=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const X=yield k.json();if("needConfirmation"in X)throw le(v,"account-exists-with-different-credential",X);if(k.ok&&!("errorMessage"in X))return X;{const _e=k.ok?X.errorMessage:X.error.message,[je,Fe]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw le(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===je)throw le(v,"email-already-in-use",X);const st=C[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Fe)throw ks(v,st,Fe);Xt(v,st)}}catch(S){if(S instanceof Z.ZR)throw S;Xt(v,"network-request-failed")}})).apply(this,arguments)}function G(v,p,_,C){return q.apply(this,arguments)}function q(){return(q=(0,o.Z)(function*(v,p,_,C,S={}){const k=yield tn(v,p,_,C,S);return"mfaPendingCredential"in k&&Xt(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function W(v,p,_,C){const S=`${p}${_}?${C}`;return v.config.emulator?en(v.config,S):`${v.config.apiScheme}://${S}`}class ve{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Qt(this.auth,"timeout")),da.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function le(v,p,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const S=Qt(v,p,C);return S.customData._tokenResponse=_,S}function ut(){return(ut=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ht(v,p){return An.apply(this,arguments)}function An(){return(An=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wn(v,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function se(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ce(){return(Ce=(0,o.Z)(function*(v,p=!1){const _=(0,Z.m9)(v),C=yield _.getIdToken(p),S=ct(C);Re(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const k="object"==typeof S.firebase?S.firebase:void 0,X=null==k?void 0:k.sign_in_provider;return{claims:S,token:C,authTime:se(Ve(S.auth_time)),issuedAtTime:se(Ve(S.iat)),expirationTime:se(Ve(S.exp)),signInProvider:X||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Ve(v){return 1e3*Number(v)}function ct(v){const[p,_,C]=v.split(".");if(void 0===p||void 0===_||void 0===C)return _n("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,Z.tV)(_);return S?JSON.parse(S):(_n("Failed to decode base64 JWT payload"),null)}catch(S){return _n("Caught error parsing JWT payload as JSON",S),null}}function It(v,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(C){throw C instanceof Z.ZR&&hn(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function hn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Sn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),C)}iteration(){var p=this;return(0,o.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class bt{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(v){return po.apply(this,arguments)}function po(){return(po=(0,o.Z)(function*(v){var p;const _=v.auth,C=yield v.getIdToken(),S=yield It(v,Wn(_,{idToken:C}));Re(null==S?void 0:S.users.length,_,"internal-error");const k=S.users[0];v._notifyReloadListener(k);const X=(null===(p=k.providerUserInfo)||void 0===p?void 0:p.length)?fn(k.providerUserInfo):[],_e=Pt(v.providerData,X),st=!!v.isAnonymous&&!(v.email&&k.passwordHash||(null==_e?void 0:_e.length)),qt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:_e,metadata:new bt(k.createdAt,k.lastLoginAt),isAnonymous:st};Object.assign(v,qt)})).apply(this,arguments)}function Ue(){return(Ue=(0,o.Z)(function*(v){const p=(0,Z.m9)(v);yield Nn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Pt(v,p){return[...v.filter(C=>!p.some(S=>S.providerId===C.providerId)),...p]}function fn(v){return v.map(p=>{var{providerId:_}=p,C=de(p,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Rs(){return(Rs=(0,o.Z)(function*(v,p){const _=yield dn(v,{},()=>{const C=(0,Z.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:k}=v.config,X=W(v,S,"/v1/token",`key=${k}`);return Pe.fetch()(X,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:C})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Re(p.idToken,"internal-error"),Re(void 0!==p.idToken,"internal-error"),Re(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=ct(v);return Re(p,"internal-error"),Re(void 0!==p.exp,"internal-error"),Re(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var C=this;return(0,o.Z)(function*(){return Re(!C.accessToken||C.refreshToken,p,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(p,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var C=this;return(0,o.Z)(function*(){const{accessToken:S,refreshToken:k,expiresIn:X}=yield function(v,p){return Rs.apply(this,arguments)}(p,_);C.updateTokensAndExpiration(S,k,Number(X))})()}updateTokensAndExpiration(p,_,C){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,_){const{refreshToken:C,accessToken:S,expirationTime:k}=_,X=new Vn;return C&&(Re("string"==typeof C,"internal-error",{appName:p}),X.refreshToken=C),S&&(Re("string"==typeof S,"internal-error",{appName:p}),X.accessToken=S),k&&(Re("number"==typeof k,"internal-error",{appName:p}),X.expirationTime=k),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Vn,this.toJSON())}_performRefresh(){return wn("not implemented")}}function Tr(v,p){Re("string"==typeof v||void 0===v,"internal-error",{appName:p})}class yn{constructor(p){var{uid:_,auth:C,stsTokenManager:S}=p,k=de(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.metadata=new bt(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,o.Z)(function*(){const C=yield It(_,_.stsTokenManager.getToken(_.auth,p));return Re(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(p){return function(v){return Ce.apply(this,arguments)}(this,p)}reload(){return function(v){return Ue.apply(this,arguments)}(this)}_assign(p){this!==p&&(Re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new yn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var C=this;return(0,o.Z)(function*(){let S=!1;p.idToken&&p.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(p),S=!0),_&&(yield Nn(C)),yield C.auth._persistUserIfCurrent(C),S&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var p=this;return(0,o.Z)(function*(){const _=yield p.getIdToken();return yield It(p,function(v,p){return ut.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var C,S,k,X,_e,je,Fe,st;const qt=null!==(C=_.displayName)&&void 0!==C?C:void 0,vn=null!==(S=_.email)&&void 0!==S?S:void 0,Zr=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,bn=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Pc=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,Ih=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,Ah=null!==(Fe=_.createdAt)&&void 0!==Fe?Fe:void 0,Np=null!==(st=_.lastLoginAt)&&void 0!==st?st:void 0,{uid:Sh,emailVerified:km,isAnonymous:Nh,providerData:Ao,stsTokenManager:Rm}=_;Re(Sh&&Rm,p,"internal-error");const El=Vn.fromJSON(this.name,Rm);Re("string"==typeof Sh,p,"internal-error"),Tr(qt,p.name),Tr(vn,p.name),Re("boolean"==typeof km,p,"internal-error"),Re("boolean"==typeof Nh,p,"internal-error"),Tr(Zr,p.name),Tr(bn,p.name),Tr(Pc,p.name),Tr(Ih,p.name),Tr(Ah,p.name),Tr(Np,p.name);const Om=new yn({uid:Sh,auth:p,email:vn,emailVerified:km,displayName:qt,isAnonymous:Nh,photoURL:bn,phoneNumber:Zr,tenantId:Pc,stsTokenManager:El,createdAt:Ah,lastLoginAt:Np});return Ao&&Array.isArray(Ao)&&(Om.providerData=Ao.map(Fc=>Object.assign({},Fc))),Ih&&(Om._redirectEventId=Ih),Om}static _fromIdTokenResponse(p,_,C=!1){return(0,o.Z)(function*(){const S=new Vn;S.updateFromServerResponse(_);const k=new yn({uid:_.localId,auth:p,stsTokenManager:S,isAnonymous:C});return yield Nn(k),k})()}}const Os=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,C){var S=this;return(0,o.Z)(function*(){S.storage[_]=C})()}_get(_){var C=this;return(0,o.Z)(function*(){const S=C.storage[_];return void 0===S?null:S})()}_remove(_){var C=this;return(0,o.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function ht(v,p,_){return`firebase:${v}:${p}:${_}`}class ai{constructor(p,_,C){this.persistence=p,this.auth=_,this.userKey=C;const{config:S,name:k}=this.auth;this.fullUserKey=ht(this.userKey,S.apiKey,k),this.fullPersistenceKey=ht("persistence",S.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,o.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?yn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,o.Z)(function*(){if(_.persistence===p)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,C="authUser"){return(0,o.Z)(function*(){if(!_.length)return new ai(Ze(Os),p,C);const S=(yield Promise.all(_.map(function(){var Fe=(0,o.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Fe.apply(this,arguments)}}()))).filter(Fe=>Fe);let k=S[0]||Ze(Os);const X=ht(C,p.config.apiKey,p.name);let _e=null;for(const Fe of _)try{const st=yield Fe._get(X);if(st){const qt=yn._fromJSON(p,st);Fe!==k&&(_e=qt),k=Fe;break}}catch(st){}const je=S.filter(Fe=>Fe._shouldAllowMigration);return k._shouldAllowMigration&&je.length?(k=je[0],_e&&(yield k._set(X,_e.toJSON())),yield Promise.all(_.map(function(){var Fe=(0,o.Z)(function*(st){if(st!==k)try{yield st._remove(X)}catch(qt){}});return function(st){return Fe.apply(this,arguments)}}())),new ai(k,p,C)):new ai(k,p,C)})()}}function go(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(fa(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(mr(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Di(p))return"Blackberry";if(_t(p))return"Webos";if(Vo(p))return"Safari";if((p.includes("chrome/")||Pr(p))&&!p.includes("edge/"))return"Chrome";if(Ps(p))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function mr(v=(0,Z.z$)()){return/firefox\//i.test(v)}function Vo(v=(0,Z.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Pr(v=(0,Z.z$)()){return/crios\//i.test(v)}function fa(v=(0,Z.z$)()){return/iemobile/i.test(v)}function Ps(v=(0,Z.z$)()){return/android/i.test(v)}function Di(v=(0,Z.z$)()){return/blackberry/i.test(v)}function _t(v=(0,Z.z$)()){return/webos/i.test(v)}function nu(v=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(v)}function ip(v=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Uo(v=(0,Z.z$)()){return nu(v)||Ps(v)||_t(v)||Di(v)||/windows phone/i.test(v)||fa(v)}function Fs(v,p=[]){let _;switch(v){case"Browser":_=go((0,Z.z$)());break;case"Worker":_=`${go((0,Z.z$)())}-${v}`;break;default:_=v}const C=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${C}`}class Fr{constructor(p,_){this.app=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ls(this),this.idTokenSubscription=new Ls(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ci,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(p,_){var C=this;return _&&(this._popupRedirectResolver=Ze(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var S,k;C._deleted||(C.persistenceManager=yield ai.create(C,p),!C._deleted&&((null===(S=C._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)&&(yield C._popupRedirectResolver._initialize(C)),yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,o.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_)}})()}initializeCurrentUser(p){var _=this;return(0,o.Z)(function*(){var C;let S=yield _.assertedPersistence.getCurrentUser();if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const k=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,X=null==S?void 0:S._redirectEventId,_e=yield _.tryRedirectSignIn(p);(!k||k===X)&&(null==_e?void 0:_e.user)&&(S=_e.user)}return S?S._redirectEventId?(Re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===S._redirectEventId?_.directlySetCurrentUser(S):_.reloadAndSetCurrentUserOrClear(S)):_.reloadAndSetCurrentUserOrClear(S):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var _=this;return(0,o.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(S){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,o.Z)(function*(){try{yield Nn(p)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,o.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,o.Z)(function*(){const C=p?(0,Z.m9)(p):null;return C&&Re(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,o.Z)(function*(){if(!_._deleted)return p&&Re(_.tenantId===p.tenantId,_,"tenant-id-mismatch"),_.queue((0,o.Z)(function*(){yield _.directlySetCurrentUser(p),_.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,o.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(Ze(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new Z.LL("auth","Firebase",p())}onAuthStateChanged(p,_,C){return this.registerStateListener(this.authStateSubscription,p,_,C)}onIdTokenChanged(p,_,C){return this.registerStateListener(this.idTokenSubscription,p,_,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var C=this;return(0,o.Z)(function*(){const S=yield C.getOrInitRedirectPersistenceManager(_);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const C=p&&Ze(p)||_._popupRedirectResolver;Re(C,_,"argument-error"),_.redirectPersistenceManager=yield ai.create(_,[Ze(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,o.Z)(function*(){var C,S;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===p?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,o.Z)(function*(){if(p===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,C,S){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(X,this,"internal-error"),X.then(()=>k(this.currentUser)),"function"==typeof _?p.addObserver(_,C,S):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Lr(v){return(0,Z.m9)(v)}class Ls{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Z.ne)(_=>this.observer=_)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vr(v,p,_){const C=Lr(v);Re(C._canInitEmulator,C,"emulator-config-failed"),Re(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const S=!!(null==_?void 0:_.disableWarnings),k=tc(p),{host:X,port:_e}=function(v){const p=tc(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(C);if(S){const k=S[1];return{host:k,port:Ur(C.substr(k.length+1))}}{const[k,X]=C.split(":");return{host:k,port:Ur(X)}}}(p);C.config.emulator={url:`${k}//${X}${null===_e?"":`:${_e}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:X,port:_e,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function tc(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Ur(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Er{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return wn("not implemented")}_getIdTokenResponse(p){return wn("not implemented")}_linkToIdToken(p,_){return wn("not implemented")}_getReauthenticationResolver(p){return wn("not implemented")}}function sp(v,p){return nc.apply(this,arguments)}function nc(){return(nc=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:resetPassword",cn(v,p))})).apply(this,arguments)}function Gd(v,p){return zd.apply(this,arguments)}function zd(){return(zd=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function _m(v,p){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:update",cn(v,p))})).apply(this,arguments)}function _o(){return(_o=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithPassword",cn(v,p))})).apply(this,arguments)}function ic(v,p){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:sendOobCode",cn(v,p))})).apply(this,arguments)}function ym(v,p){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,o.Z)(function*(v,p){return ic(v,p)})).apply(this,arguments)}function vm(v,p){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,o.Z)(function*(v,p){return ic(v,p)})).apply(this,arguments)}function g0(v,p){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,o.Z)(function*(v,p){return ic(v,p)})).apply(this,arguments)}function op(v,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,o.Z)(function*(v,p){return ic(v,p)})).apply(this,arguments)}function Qd(){return(Qd=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithEmailLink",cn(v,p))})).apply(this,arguments)}function Qu(){return(Qu=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithEmailLink",cn(v,p))})).apply(this,arguments)}class Ii extends Er{constructor(p,_,C,S=null){super("password",C),this._email=p,this._password=_,this._tenantId=S}static _fromEmailAndPassword(p,_){return new Ii(p,_,"password")}static _fromEmailAndCode(p,_,C=null){return new Ii(p,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function(v,p){return _o.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(v,p){return Qd.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Xt(p,"internal-error")}})()}_linkToIdToken(p,_){var C=this;return(0,o.Z)(function*(){switch(C.signInMethod){case"password":return Gd(p,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(v,p){return Qu.apply(this,arguments)}(p,{idToken:_,email:C._email,oobCode:C._password});default:Xt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Vs(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithIdp",cn(v,p))})).apply(this,arguments)}class Us extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Us(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Xt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:S}=_,k=de(_,["providerId","signInMethod"]);if(!C||!S)return null;const X=new Us(C,S);return X.idToken=k.idToken||void 0,X.accessToken=k.accessToken||void 0,X.secret=k.secret,X.nonce=k.nonce,X.pendingToken=k.pendingToken||null,X}_getIdTokenResponse(p){return Vs(p,this.buildRequest())}_linkToIdToken(p,_){const C=this.buildRequest();return C.idToken=_,Vs(p,C)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Vs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,Z.xO)(_)}return p}}function ga(v,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:sendVerificationCode",cn(v,p))})).apply(this,arguments)}function ma(){return(ma=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithPhoneNumber",cn(v,p))})).apply(this,arguments)}function ac(){return(ac=(0,o.Z)(function*(v,p){const _=yield G(v,"POST","/v1/accounts:signInWithPhoneNumber",cn(v,p));if(_.temporaryProof)throw le(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Hi={USER_NOT_FOUND:"user-not-found"};function Xu(){return(Xu=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithPhoneNumber",cn(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Hi)})).apply(this,arguments)}class fs extends Er{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new fs({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new fs({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function(v,p){return ma.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function(v,p){return ac.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return Xu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:C,verificationCode:S}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:C,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:C,phoneNumber:S,temporaryProof:k}=p;return C||_||S||k?new fs({verificationId:_,verificationCode:C,phoneNumber:S,temporaryProof:k}):null}}class _a{constructor(p){var _,C,S,k,X,_e;const je=(0,Z.zd)((0,Z.pd)(p)),Fe=null!==(_=je.apiKey)&&void 0!==_?_:null,st=null!==(C=je.oobCode)&&void 0!==C?C:null,qt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=je.mode)&&void 0!==S?S:null);Re(Fe&&st&&qt,"argument-error"),this.apiKey=Fe,this.operation=qt,this.code=st,this.continueUrl=null!==(k=je.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(X=je.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(_e=je.tenantId)&&void 0!==_e?_e:null}static parseLink(p){const _=function(v){const p=(0,Z.zd)((0,Z.pd)(v)).link,_=p?(0,Z.zd)((0,Z.pd)(p)).deep_link_id:null,C=(0,Z.zd)((0,Z.pd)(v)).deep_link_id;return(C?(0,Z.zd)((0,Z.pd)(C)).link:null)||C||_||p||v}(p);try{return new _a(_)}catch(C){return null}}}let iu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return Ii._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const S=_a.parseLink(C);return Re(S,"argument-error"),Ii._fromEmailAndCode(_,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Dr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class vo extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class on extends vo{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Re("providerId"in _&&"signInMethod"in _,"argument-error"),Us._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Re(p.idToken||p.accessToken,"argument-error"),Us._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return on.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return on.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:S,pendingToken:k,nonce:X,providerId:_e}=p;if(!C&&!S&&!_&&!k||!_e)return null;try{return new on(_e)._credential({idToken:_,accessToken:C,nonce:X,pendingToken:k})}catch(je){return null}}}let up=(()=>{class v extends vo{constructor(){super("facebook.com")}static credential(_){return Us._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),uc=(()=>{class v extends vo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Us._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:S}=_;if(!C&&!S)return null;try{return v.credential(C,S)}catch(k){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ya=(()=>{class v extends vo{constructor(){super("github.com")}static credential(_){return Us._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Mn extends Er{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Vs(p,this.buildRequest())}_linkToIdToken(p,_){const C=this.buildRequest();return C.idToken=_,Vs(p,C)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Vs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:S,pendingToken:k}=_;return C&&S&&k&&C===S?new Mn(C,k):null}static _create(p,_){return new Mn(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qi extends Dr{constructor(p){Re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return qi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return qi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Mn.fromJSON(p);return Re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:C}=p;if(!_||!C)return null;try{return Mn._create(C,_)}catch(S){return null}}}let ui=(()=>{class v extends vo{constructor(){super("twitter.com")}static credential(_,C){return Us._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:S}=_;if(!C||!S)return null;try{return v.credential(C,S)}catch(k){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function el(v,p){return su.apply(this,arguments)}function su(){return(su=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signUp",cn(v,p))})).apply(this,arguments)}class yr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,C,S=!1){return(0,o.Z)(function*(){const k=yield yn._fromIdTokenResponse(p,C,S),X=ps(C);return new yr({user:k,providerId:X,_tokenResponse:C,operationType:_})})()}static _forOperation(p,_,C){return(0,o.Z)(function*(){yield p._updateTokensIfNecessary(C,!0);const S=ps(C);return new yr({user:p,providerId:S,_tokenResponse:C,operationType:_})})()}}function ps(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function tl(v){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,o.Z)(function*(v){var p;const _=Lr(v);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new yr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield el(_,{returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class lt extends Z.ZR{constructor(p,_,C,S){var k;super(_.code,_.message),this.operationType=C,this.user=S,Object.setPrototypeOf(this,lt.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,_,C,S){return new lt(p,_,C,S)}}function th(v,p,_,C){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?lt._fromErrorAndOperation(v,k,p,C):k})}function nh(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function cc(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,o.Z)(function*(v,p){const _=(0,Z.m9)(v);yield gs(!0,_,p);const{providerUserInfo:C}=yield Ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),S=nh(C||[]);return _.providerData=_.providerData.filter(k=>S.has(k.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ou(v,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,o.Z)(function*(v,p,_=!1){const C=yield It(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return yr._forOperation(v,"link",C)})).apply(this,arguments)}function gs(v,p,_){return De.apply(this,arguments)}function De(){return(De=(0,o.Z)(function*(v,p,_){yield Nn(p);const S=!1===v?"provider-already-linked":"no-such-provider";Re(nh(p.providerData).has(_)===v,p.auth,S)})).apply(this,arguments)}function xt(v,p){return au.apply(this,arguments)}function au(){return(au=(0,o.Z)(function*(v,p,_=!1){const{auth:C}=v,S="reauthenticate";try{const k=yield It(v,th(C,S,p,v),_);Re(k.idToken,C,"internal-error");const X=ct(k.idToken);Re(X,C,"internal-error");const{sub:_e}=X;return Re(v.uid===_e,C,"user-mismatch"),yr._forOperation(v,S,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&Xt(C,"user-mismatch"),k}})).apply(this,arguments)}function Cn(v,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,o.Z)(function*(v,p,_=!1){const C="signIn",S=yield th(v,C,p),k=yield yr._fromIdTokenResponse(v,C,S);return _||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Gi(v,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,o.Z)(function*(v,p){return Cn(Lr(v),p)})).apply(this,arguments)}function lu(v,p){return va.apply(this,arguments)}function va(){return(va=(0,o.Z)(function*(v,p){const _=(0,Z.m9)(v);return yield gs(!1,_,p.providerId),ou(_,p)})).apply(this,arguments)}function lp(v,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,o.Z)(function*(v,p){return xt((0,Z.m9)(v),p)})).apply(this,arguments)}function il(v,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,o.Z)(function*(v,p){return G(v,"POST","/v1/accounts:signInWithCustomToken",cn(v,p))})).apply(this,arguments)}function or(v,p){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,o.Z)(function*(v,p){const _=Lr(v),C=yield il(_,{token:p,returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class ba{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ms._fromServerResponse(p,_):Xt(p,"internal-error")}}class ms extends ba{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ms(_)}}function Ir(v,p,_){var C;Re((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),Re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Re(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Re(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function bm(v,p,_){return wa.apply(this,arguments)}function wa(){return(wa=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v),S={requestType:"PASSWORD_RESET",email:p};_&&Ir(C,S,_),yield vm(C,S)})).apply(this,arguments)}function hc(v,p,_){return cu.apply(this,arguments)}function cu(){return(cu=(0,o.Z)(function*(v,p,_){yield sp((0,Z.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function fc(v,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,o.Z)(function*(v,p){yield _m((0,Z.m9)(v),{oobCode:p})})).apply(this,arguments)}function pc(v,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,o.Z)(function*(v,p){const _=(0,Z.m9)(v),C=yield sp(_,{oobCode:p}),S=C.requestType;switch(Re(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(C.mfaInfo,_,"internal-error");default:Re(C.email,_,"internal-error")}let k=null;return C.mfaInfo&&(k=ba._fromServerResponse(Lr(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:S}})).apply(this,arguments)}function sl(v,p){return du.apply(this,arguments)}function du(){return(du=(0,o.Z)(function*(v,p){const{data:_}=yield pc((0,Z.m9)(v),p);return _.email})).apply(this,arguments)}function hu(v,p,_){return ol.apply(this,arguments)}function ol(){return(ol=(0,o.Z)(function*(v,p,_){const C=Lr(v),S=yield el(C,{returnSecureToken:!0,email:p,password:_}),k=yield yr._fromIdTokenResponse(C,"signIn",S);return yield C._updateCurrentUser(k.user),k})).apply(this,arguments)}function cp(v,p,_){return Gi((0,Z.m9)(v),iu.credential(p,_))}function rh(v,p,_){return al.apply(this,arguments)}function al(){return(al=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};Re(_.handleCodeInApp,C,"argument-error"),_&&Ir(C,S,_),yield g0(C,S)})).apply(this,arguments)}function $o(v,p){const _=_a.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function dp(v,p,_){return fu.apply(this,arguments)}function fu(){return(fu=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v),S=iu.credentialWithLink(p,_||Gn());return Re(S._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Gi(C,S)})).apply(this,arguments)}function Ar(v,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:createAuthUri",cn(v,p))})).apply(this,arguments)}function Yn(v,p){return pu.apply(this,arguments)}function pu(){return(pu=(0,o.Z)(function*(v,p){const C={identifier:p,continueUri:it()?Gn():"http://localhost"},{signinMethods:S}=yield Ar((0,Z.m9)(v),C);return S||[]})).apply(this,arguments)}function m0(v,p){return gc.apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(v,p){const _=(0,Z.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ir(_.auth,S,p);const{email:k}=yield ym(_.auth,S);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function ul(v,p,_){return mc.apply(this,arguments)}function mc(){return(mc=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&Ir(C.auth,k,_);const{email:X}=yield op(C.auth,k);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function _c(v,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,o.Z)(function*(v,p){return tn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ta(v,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,o.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const C=(0,Z.m9)(v),k={idToken:yield C.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},X=yield It(C,_c(C.auth,k));C.displayName=X.displayName||null,C.photoURL=X.photoUrl||null;const _e=C.providerData.find(({providerId:je})=>"password"===je);_e&&(_e.displayName=C.displayName,_e.photoURL=C.photoURL),yield C._updateTokensIfNecessary(X)})).apply(this,arguments)}function rr(v,p){return ih((0,Z.m9)(v),p,null)}function yc(v,p){return ih((0,Z.m9)(v),null,p)}function ih(v,p,_){return _s.apply(this,arguments)}function _s(){return(_s=(0,o.Z)(function*(v,p,_){const{auth:C}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(k.email=p),_&&(k.password=_);const X=yield It(v,Gd(C,k));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class qo{constructor(p,_,C={}){this.isNewUser=p,this.providerId=_,this.profile=C}}class sh extends qo{constructor(p,_,C,S){super(p,_,C),this.username=S}}class Go extends qo{constructor(p,_){super(p,"facebook.com",_)}}class vc extends sh{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class hp extends qo{constructor(p,_){super(p,"google.com",_)}}class wm extends sh{constructor(p,_,C){super(p,"twitter.com",_,C)}}function Cm(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,_;if(!v)return null;const{providerId:C}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const X=null===(_=null===(p=ct(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new qo(k,"anonymous"!==X&&"custom"!==X?X:null)}if(!C)return null;switch(C){case"facebook.com":return new Go(k,S);case"github.com":return new vc(k,S);case"google.com":return new hp(k,S);case"twitter.com":return new wm(k,S,v.screenName||null);case"custom":case"anonymous":return new qo(k,null);default:return new qo(k,C,S)}}(_)}class Ea{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ea("enroll",p)}static _fromMfaPendingCredential(p){return new Ea("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,C;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ea._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(C=p.multiFactorSession)||void 0===C?void 0:C.idToken)return Ea._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Zs{constructor(p,_,C){this.session=p,this.hints=_,this.signInResolver=C}static _fromError(p,_){const C=Lr(p),S=_.customData._serverResponse,k=(S.mfaInfo||[]).map(_e=>ba._fromServerResponse(C,_e));Re(S.mfaPendingCredential,C,"internal-error");const X=Ea._fromMfaPendingCredential(S.mfaPendingCredential);return new Zs(X,k,function(){var _e=(0,o.Z)(function*(je){const Fe=yield je._process(C,X);delete S.mfaInfo,delete S.mfaPendingCredential;const st=Object.assign(Object.assign({},S),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(_.operationType){case"signIn":const qt=yield yr._fromIdTokenResponse(C,_.operationType,st);return yield C._updateCurrentUser(qt.user),qt;case"reauthenticate":return Re(_.user,C,"internal-error"),yr._forOperation(_.user,_.operationType,st);default:Xt(C,"internal-error")}});return function(je){return _e.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,o.Z)(function*(){return _.signInResolver(p)})()}}function wc(v,p){var _;const C=(0,Z.m9)(v),S=p;return Re(p.customData.operationType,C,"argument-error"),Re(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Zs._fromError(C,S)}function Da(v,p){return tn(v,"POST","/v2/accounts/mfaEnrollment:start",cn(v,p))}class Cc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>ba._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new Cc(p)}getSession(){var p=this;return(0,o.Z)(function*(){return Ea._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var C=this;return(0,o.Z)(function*(){const S=p,k=yield C.getSession(),X=yield It(C.user,S._process(C.user.auth,k,_));return yield C.user._updateTokensIfNecessary(X),C.user.reload()})()}unenroll(p){var _=this;return(0,o.Z)(function*(){const C="string"==typeof p?p:p.uid,S=yield _.user.getIdToken(),k=yield It(_.user,function(v,p){return tn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",cn(v,p))}(_.user.auth,{idToken:S,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==C),yield _.user._updateTokensIfNecessary(k);try{yield _.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const uh=new WeakMap;function lh(v){const p=(0,Z.m9)(v);return uh.has(p)||uh.set(p,Cc._fromUser(p)),uh.get(p)}const Co="__sak";class gu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Co,"1"),this.storage.removeItem(Co),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const xn=(()=>{class v extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,Z.z$)();return Vo(v)||nu(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Uo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const S=this.storage.getItem(C),k=this.localCache[C];S!==k&&_(C,k,S)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((_e,je,Fe)=>{this.notifyListeners(_e,Fe)});const S=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(S);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!C)return}const k=()=>{const _e=this.storage.getItem(S);!C&&this.localCache[S]===_e||this.notifyListeners(S,_e)},X=this.storage.getItem(S);(0,Z.w1)()&&10===document.documentMode&&X!==_.newValue&&_.newValue!==_.oldValue?setTimeout(k,10):k()}notifyListeners(_,C){this.localCache[_]=C;const S=this.listeners[_];if(S)for(const k of Array.from(S))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var S=()=>super._set,k=this;return(0,o.Z)(function*(){yield S().call(k,_,C),k.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,S=this;return(0,o.Z)(function*(){const k=yield C().call(S,_);return S.localCache[_]=JSON.stringify(k),k})()}_remove(_){var C=()=>super._remove,S=this;return(0,o.Z)(function*(){yield C().call(S,_),delete S.localCache[_]})()}}return v.type="LOCAL",v})(),vs=(()=>{class v extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let _u=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(k=>k.isListeningto(_));if(C)return C;const S=new v(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,o.Z)(function*(){const S=_,{eventId:k,eventType:X,data:_e}=S.data,je=C.handlersMap[X];if(!(null==je?void 0:je.size))return;S.ports[0].postMessage({status:"ack",eventId:k,eventType:X});const Fe=Array.from(je).map(function(){var qt=(0,o.Z)(function*(vn){return vn(S.origin,_e)});return function(vn){return qt.apply(this,arguments)}}()),st=yield function(v){return Promise.all(v.map(function(){var p=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return p.apply(this,arguments)}}()))}(Fe);S.ports[0].postMessage({status:"done",eventId:k,eventType:X,response:st})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function dl(v="",p=10){let _="";for(let C=0;C<p;C++)_+=Math.floor(10*Math.random());return v+_}class hl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,C=50){var S=this;return(0,o.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let X,_e;return new Promise((je,Fe)=>{const st=dl("",20);k.port1.start();const qt=setTimeout(()=>{Fe(new Error("unsupported_event"))},C);_e={messageChannel:k,onMessage(vn){const Zr=vn;if(Zr.data.eventId===st)switch(Zr.data.status){case"ack":clearTimeout(qt),X=setTimeout(()=>{Fe(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),je(Zr.data.response);break;default:clearTimeout(qt),clearTimeout(X),Fe(new Error("invalid_response"))}}},S.handlers.add(_e),k.port1.addEventListener("message",_e.onMessage),S.target.postMessage({eventType:p,eventId:st,data:_},[k.port2])}).finally(()=>{_e&&S.removeMessageHandler(_e)})})()}}function kt(){return window}function To(){return void 0!==kt().WorkerGlobalScope&&"function"==typeof kt().importScripts}function Ni(){return(Ni=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Dc="firebaseLocalStorageDb",Mi="firebaseLocalStorage",js="fbase_key";class Yi{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Kr(v,p){return v.transaction([Mi],p?"readwrite":"readonly").objectStore(Mi)}function fl(){const v=indexedDB.open(Dc,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Mi,{keyPath:js})}catch(S){_(S)}}),v.addEventListener("success",(0,o.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Mi)?p(C):(C.close(),yield function(){const v=indexedDB.deleteDatabase(Dc);return new Yi(v).toPromise()}(),p(yield fl()))}))})}function at(v,p,_){return li.apply(this,arguments)}function li(){return(li=(0,o.Z)(function*(v,p,_){const C=Kr(v,!0).put({[js]:p,value:_});return new Yi(C).toPromise()})).apply(this,arguments)}function hh(){return(hh=(0,o.Z)(function*(v,p){const _=Kr(v,!1).get(p),C=yield new Yi(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function On(v,p){const _=Kr(v,!0).delete(p);return new Yi(_).toPromise()}const mp=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield fl()),_.db})()}_withRetries(_){var C=this;return(0,o.Z)(function*(){let S=0;for(;;)try{const k=yield C._openDb();return yield _(k)}catch(k){if(S++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return To()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=_u._getInstance(To()?self:null),_.receiver._subscribe("keyChanged",function(){var C=(0,o.Z)(function*(S,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(S,k){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,o.Z)(function*(S,k){return["keyChanged"]});return function(S,k){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var C,S;if(_.activeServiceWorker=yield function(){return Ni.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new hl(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);!k||(null===(C=k[0])||void 0===C?void 0:C.fulfilled)&&(null===(S=k[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,o.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield fl();return yield at(_,Co,"1"),yield On(_,Co),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,o.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var S=this;return(0,o.Z)(function*(){return S._withPendingWrite((0,o.Z)(function*(){return yield S._withRetries(k=>at(k,_,C)),S.localCache[_]=C,S.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,o.Z)(function*(){const S=yield C._withRetries(k=>function(v,p){return hh.apply(this,arguments)}(k,_));return C.localCache[_]=S,S})()}_remove(_){var C=this;return(0,o.Z)(function*(){return C._withPendingWrite((0,o.Z)(function*(){return yield C._withRetries(S=>On(S,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const C=yield _._withRetries(X=>{const _e=Kr(X,!1).getAll();return new Yi(_e).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const S=[],k=new Set;for(const{fbase_key:X,value:_e}of C)k.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(_e)&&(_.notifyListeners(X,_e),S.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!k.has(X)&&(_.notifyListeners(X,null),S.push(X));return S})()}notifyListeners(_,C){this.localCache[_]=C;const S=this.listeners[_];if(S)for(const k of Array.from(S))k(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Tm(v,p){return tn(v,"POST","/v2/accounts/mfaSignIn:start",cn(v,p))}function fh(){return(fh=(0,o.Z)(function*(v){return(yield tn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pn(v){return new Promise((p,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=p,C.onerror=S=>{const k=Qt("internal-error");k.customData=S,_(k)},C.type="text/javascript",C.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(C)})}function Ic(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Fn=1e12;class Sa{constructor(p){this.auth=p,this.counter=Fn,this._widgets=new Map}render(p,_){const C=this.counter;return this._widgets.set(C,new Bn(p,this.auth.name,_||{})),this.counter++,C}reset(p){var _;const C=p||Fn;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Fn))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,o.Z)(function*(){var C;return null===(C=_._widgets.get(p||Fn))||void 0===C||C.execute(),""})()}}class Bn{constructor(p,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;Re(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}();const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gl=Ic("rcb"),Ki=new zn(3e4,6e4);class bu{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!kt().grecaptcha}load(p,_=""){return Re((v=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(kt().grecaptcha):new Promise((C,S)=>{const k=kt().setTimeout(()=>{S(Qt(p,"network-request-failed"))},Ki.get());kt()[gl]=()=>{kt().clearTimeout(k),delete kt()[gl];const _e=kt().grecaptcha;if(!_e)return void S(Qt(p,"internal-error"));const je=_e.render;_e.render=(Fe,st)=>{const qt=je(Fe,st);return this.counter++,qt},this.hostLanguage=_,C(_e)},Pn(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:gl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),S(Qt(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!kt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $s{load(p){return(0,o.Z)(function*(){return new Sa(p)})()}clearedOneInstance(){}}const Sc="recaptcha",ph={theme:"light",type:"image"};class zo{constructor(p,_=Object.assign({},ph),C){this.parameters=_,this.type=Sc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lr(C),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;Re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $s:new bu,this.validateStartingState()}verify(){var p=this;return(0,o.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(_)||new Promise(k=>{const X=_e=>{!_e||(p.tokenChangeListeners.delete(X),k(_e))};p.tokenChangeListeners.add(X),p.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof p)p(_);else if("string"==typeof p){const C=kt()[p];"function"==typeof C&&C(_)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,o.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,o.Z)(function*(){Re(it()&&!To(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function(v){return fh.apply(this,arguments)}(p.auth);Re(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hs{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=fs._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function gh(v,p,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,o.Z)(function*(v,p,_){const C=Lr(v),S=yield T(C,p,(0,Z.m9)(_));return new Hs(S,k=>Gi(C,k))})).apply(this,arguments)}function Qn(v,p,_){return Io.apply(this,arguments)}function Io(){return(Io=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v);yield gs(!1,C,"phone");const S=yield T(C.auth,p,(0,Z.m9)(_));return new Hs(S,k=>lu(C,k))})).apply(this,arguments)}function _p(v,p,_){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v),S=yield T(C.auth,p,(0,Z.m9)(_));return new Hs(S,k=>lp(C,k))})).apply(this,arguments)}function T(v,p,_){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)(function*(v,p,_){var C;const S=yield _.verify();try{let k;if(Re("string"==typeof S,v,"argument-error"),Re(_.type===Sc,v,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const X=k.session;if("phoneNumber"in k)return Re("enroll"===X.type,v,"internal-error"),(yield Da(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Re("signin"===X.type,v,"internal-error");const _e=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return Re(_e,v,"missing-multi-factor-info"),(yield Tm(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield ga(v,{phoneNumber:k.phoneNumber,recaptchaToken:S});return X}}finally{_._reset()}})).apply(this,arguments)}function x(v,p){return U.apply(this,arguments)}function U(){return(U=(0,o.Z)(function*(v,p){yield ou((0,Z.m9)(v),p)})).apply(this,arguments)}let ne=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Lr(_)}verifyPhoneNumber(_,C){return T(this.auth,_,(0,Z.m9)(C))}static credential(_,C){return fs._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:S}=_;return C&&S?fs._fromTokenResponse(C,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function fe(v,p){return p?Ze(p):(Re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ae extends Er{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Vs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Vs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Vs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function He(v){return Cn(v.auth,new Ae(v),v.bypassAuthState)}function ze(v){const{auth:p,user:_}=v;return Re(_,p,"internal-error"),xt(_,new Ae(v),v.bypassAuthState)}function Vt(v){return nn.apply(this,arguments)}function nn(){return(nn=(0,o.Z)(function*(v){const{auth:p,user:_}=v;return Re(_,p,"internal-error"),ou(_,new Ae(v),v.bypassAuthState)})).apply(this,arguments)}class sr{constructor(p,_,C,S,k=!1){this.auth=p,this.resolver=C,this.user=S,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,o.Z)(function*(C,S){p.pendingPromise={resolve:C,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(C,S){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,o.Z)(function*(){const{urlResponse:C,sessionId:S,postBody:k,tenantId:X,error:_e,type:je}=p;if(_e)return void _.reject(_e);const Fe={auth:_.auth,requestUri:C,sessionId:S,tenantId:X||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(Fe))}catch(st){_.reject(st)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return He;case"linkViaPopup":case"linkViaRedirect":return Vt;case"reauthViaPopup":case"reauthViaRedirect":return ze;default:Xt(this.auth,"internal-error")}}resolve(p){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const di=new zn(2e3,1e4);function ar(v,p,_){return Na.apply(this,arguments)}function Na(){return(Na=(0,o.Z)(function*(v,p,_){const C=Lr(v);Ti(v,p,Dr);const S=fe(C,_);return new gt(C,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function wu(v,p,_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v);Ti(C.auth,p,Dr);const S=fe(C.auth,_);return new gt(C.auth,"reauthViaPopup",p,S,C).executeNotNull()})).apply(this,arguments)}function qs(v,p,_){return hi.apply(this,arguments)}function hi(){return(hi=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v);Ti(C.auth,p,Dr);const S=fe(C.auth,_);return new gt(C.auth,"linkViaPopup",p,S,C).executeNotNull()})).apply(this,arguments)}let gt=(()=>{class v extends sr{constructor(_,C,S,k,X){super(_,C,k,X),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const C=yield _.execute();return Re(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,o.Z)(function*(){qn(1===_.filter.length,"Popup operations only handle one event");const C=dl();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(Qt(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,S;this.pollId=(null===(S=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,di.get())};_()}}return v.currentPopupAction=null,v})();const Tn=new Map;class yp extends sr{constructor(p,_,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,o.Z)(function*(){let C=Tn.get(_.auth._key());if(!C){try{const k=(yield function(v,p){return Wo.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;C=()=>Promise.resolve(k)}catch(S){C=()=>Promise.reject(S)}Tn.set(_.auth._key(),C)}return _.bypassAuthState||Tn.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,C=this;return(0,o.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(C,p);if("unknown"!==p.type){if(p.eventId){const S=yield C.auth._redirectUserForId(p.eventId);if(S)return C.user=S,_().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Wo(){return(Wo=(0,o.Z)(function*(v,p){const _=Am(p),C=mh(v);if(!(yield C._isAvailable()))return!1;const S="true"===(yield C._get(_));return yield C._remove(_),S})).apply(this,arguments)}function Cu(v,p){return vp.apply(this,arguments)}function vp(){return(vp=(0,o.Z)(function*(v,p){return mh(v)._set(Am(p),"true")})).apply(this,arguments)}function Gs(){Tn.clear()}function mh(v){return Ze(v._redirectPersistence)}function Am(v){return ht("pendingRedirect",v.config.apiKey,v.name)}function Tu(v,p,_){return function(v,p,_){return Xn.apply(this,arguments)}(v,p,_)}function Xn(){return(Xn=(0,o.Z)(function*(v,p,_){const C=Lr(v);Ti(v,p,Dr);const S=fe(C,_);return yield Cu(S,C),S._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function Br(v,p,_){return function(v,p,_){return _h.apply(this,arguments)}(v,p,_)}function _h(){return(_h=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v);Ti(C.auth,p,Dr);const S=fe(C.auth,_);yield Cu(S,C.auth);const k=yield xc(C);return S._openRedirect(C.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function yh(v,p,_){return function(v,p,_){return vh.apply(this,arguments)}(v,p,_)}function vh(){return(vh=(0,o.Z)(function*(v,p,_){const C=(0,Z.m9)(v);Ti(C.auth,p,Dr);const S=fe(C.auth,_);yield gs(!1,C,p.providerId),yield Cu(S,C.auth);const k=yield xc(C);return S._openRedirect(C.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function Sm(v,p){return bp.apply(this,arguments)}function bp(){return(bp=(0,o.Z)(function*(v,p){return yield Lr(v)._initializationPromise,Yo(v,p,!1)})).apply(this,arguments)}function Yo(v,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,o.Z)(function*(v,p,_=!1){const C=Lr(v),S=fe(C,p),X=yield new yp(C,S,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield C._persistUserIfCurrent(X.user),yield C._setRedirectUser(null,p)),X})).apply(this,arguments)}function xc(v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,o.Z)(function*(v){const p=dl(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ml{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(_=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oa(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var C;if(p.error&&!Oa(p)){const S=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Qt(this.auth,S))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const C=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(p))}saveEventToCache(p){this.cachedEventUids.add(b0(p)),this.lastProcessedEventTime=Date.now()}}function b0(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Oa({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function bh(v){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,o.Z)(function*(v,p={}){return tn(v,"GET","/v1/projects",p)})).apply(this,arguments)}const wp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ko=/^https?/;function wh(){return(wh=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield bh(v);for(const _ of p)try{if(Cp(_))return}catch(C){}Xt(v,"unauthorized-domain")})).apply(this,arguments)}function Cp(v){const p=Gn(),{protocol:_,hostname:C}=new URL(p);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===C}if(!Ko.test(_))return!1;if(wp.test(v))return C===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(C)}const Ch=new zn(3e4,6e4);function _l(){const v=kt().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let yl=null;function Tp(v){return yl=yl||function(v){return new Promise((p,_)=>{var C,S,k;function X(){_l(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{_l(),_(Qt(v,"network-request-failed"))},timeout:Ch.get()})}if(null===(S=null===(C=kt().gapi)||void 0===C?void 0:C.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(k=kt().gapi)||void 0===k?void 0:k.load)){const _e=Ic("iframefcb");return kt()[_e]=()=>{gapi.load?X():_(Qt(v,"network-request-failed"))},Pn(`https://apis.google.com/js/api.js?onload=${_e}`)}X()}}).catch(p=>{throw yl=null,p})}(v),yl}const Du=new zn(5e3,15e3),Th={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D0(v){const p=v.config;Re(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?en(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},S=E0.get(v.config.apiHost);S&&(C.eid=S);const k=v._getFrameworks();return k.length&&(C.fw=k.join(",")),`${_}?${(0,Z.xO)(C).slice(1)}`}function Pa(){return(Pa=(0,o.Z)(function*(v){const p=yield Tp(v),_=kt().gapi;return Re(_,v,"internal-error"),p.open({where:document.body,url:D0(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Th,dontclear:!0},C=>new Promise(function(){var S=(0,o.Z)(function*(k,X){yield C.restyle({setHideOnLeave:!1});const _e=Qt(v,"network-request-failed"),je=kt().setTimeout(()=>{X(_e)},Du.get());function Fe(){kt().clearTimeout(je),k(C)}C.ping(Fe).then(Fe,()=>{X(_e)})});return function(k,X){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const Nm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Eh(v,p,_,C,S,k){Re(v.config.authDomain,v,"auth-domain-config-required"),Re(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:O.SDK_VERSION,eventId:S};if(p instanceof Dr){p.setDefaultLanguage(v.languageCode),X.providerId=p.providerId||"",(0,Z.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[je,Fe]of Object.entries(k||{}))X[je]=Fe}if(p instanceof vo){const je=p.getScopes().filter(Fe=>""!==Fe);je.length>0&&(X.scopes=je.join(","))}v.tenantId&&(X.tid=v.tenantId);const _e=X;for(const je of Object.keys(_e))void 0===_e[je]&&delete _e[je];return`${function({config:v}){return v.emulator?en(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,Z.xO)(_e).slice(1)}`}const wl="webStorageSupport",Oc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vs,this._completeRedirectFn=Yo}_openPopup(p,_,C,S){var k=this;return(0,o.Z)(function*(){var X;qn(null===(X=k.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const _e=Eh(p,_,C,Gn(),S);return function(v,p,_,C=500,S=600){const k=Math.max((window.screen.availHeight-S)/2,0).toString(),X=Math.max((window.screen.availWidth-C)/2,0).toString();let _e="";const je=Object.assign(Object.assign({},Nm),{width:C.toString(),height:S.toString(),top:k,left:X}),Fe=(0,Z.z$)().toLowerCase();_&&(_e=Pr(Fe)?"_blank":_),mr(Fe)&&(p=p||"http://localhost",je.scrollbars="yes");const st=Object.entries(je).reduce((vn,[Zr,bn])=>`${vn}${Zr}=${bn},`,"");if(function(v=(0,Z.z$)()){var p;return nu(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Fe)&&"_self"!==_e)return function(v,p){const _=document.createElement("a");_.href=v,_.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(p||"",_e),new vl(null);const qt=window.open(p||"",_e,st);Re(qt,v,"popup-blocked");try{qt.focus()}catch(vn){}return new vl(qt)}(p,_e,dl())})()}_openRedirect(p,_,C,S){var k=this;return(0,o.Z)(function*(){return yield k._originValidation(p),v=Eh(p,_,C,Gn(),S),kt().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:S,promise:k}=this.eventManagers[_];return S?Promise.resolve(S):(qn(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(p);return this.eventManagers[_]={promise:C},C}initAndGetManager(p){var _=this;return(0,o.Z)(function*(){const C=yield function(v){return Pa.apply(this,arguments)}(p),S=new ml(p);return C.register("authEvent",k=>(Re(null==k?void 0:k.authEvent,p,"invalid-auth-event"),{status:S.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:S},_.iframes[p._key()]=C,S})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(wl,{type:wl},S=>{var k;const X=null===(k=null==S?void 0:S[0])||void 0===k?void 0:k[wl];void 0!==X&&_(!!X),Xt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(v){return wh.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Uo()||Vo()||nu()}};class Xo extends class{constructor(p){this.factorId=p}_process(p,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,C);case"signin":return this._finalizeSignIn(p,_.credential);default:return wn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Xo(p)}_finalizeEnroll(p,_,C){return function(v,p){return tn(v,"POST","/v2/accounts/mfaEnrollment:finalize",cn(v,p))}(p,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function(v,p){return tn(v,"POST","/v2/accounts/mfaSignIn:finalize",cn(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dh=(()=>{class v{constructor(){}static assertion(_){return Xo._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var v,Ap="@firebase/auth";class A0{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(C=>{var S;p((null===(S=C)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Sp(v=(0,O.getApp)()){const p=(0,O._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function(v,p){const _=(0,O._getProvider)(v,"auth");if(_.isInitialized()){const S=_.getImmediate(),k=_.getOptions();if((0,Z.vZ)(k,null!=p?p:{}))return S;Xt(S,"already-initialized")}return _.initialize({options:p})}(v,{popupRedirectResolver:Oc,persistence:[mp,xn,vs]})}v="Browser",(0,O._registerComponent)(new Ut.wA("auth",(p,{options:_})=>{const C=p.getProvider("app").getImmediate(),{apiKey:S,authDomain:k}=C.options;return(X=>{Re(S&&!S.includes(":"),"invalid-api-key",{appName:X.name}),Re(!(null==k?void 0:k.includes(":")),"argument-error",{appName:X.name});const _e={apiKey:S,authDomain:k,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fs(v)},je=new Fr(X,_e);return function(v,p){const _=(null==p?void 0:p.persistence)||[],C=(Array.isArray(_)?_:[_]).map(Ze);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(C,null==p?void 0:p.popupRedirectResolver)}(je,_),je})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,C)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ut.wA("auth-internal",p=>{const _=Lr(p.getProvider("auth").getImmediate());return new A0(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Ap,"0.19.3",void 0),(0,O.registerVersion)(Ap,"0.19.3","esm2017")},3854:(We,be,F)=>{"use strict";F.d(be,{BH:()=>he,LL:()=>Ye,ZR:()=>Ut,zI:()=>pt,US:()=>ee,tV:()=>z,$s:()=>tn,r3:()=>sn,Sg:()=>Oe,ne:()=>qn,vZ:()=>Qt,ZB:()=>B,pd:()=>Re,m9:()=>fo,z$:()=>Me,jU:()=>re,ru:()=>ae,d:()=>ke,xb:()=>_n,w1:()=>At,hl:()=>In,uI:()=>Ee,UG:()=>ge,b$:()=>Te,G6:()=>yt,Mn:()=>Nt,xO:()=>Ti,zd:()=>$i,eu:()=>Tt});const ce=function(G){const q=[];let W=0;for(let ve=0;ve<G.length;ve++){let le=G.charCodeAt(ve);le<128?q[W++]=le:le<2048?(q[W++]=le>>6|192,q[W++]=63&le|128):55296==(64512&le)&&ve+1<G.length&&56320==(64512&G.charCodeAt(ve+1))?(le=65536+((1023&le)<<10)+(1023&G.charCodeAt(++ve)),q[W++]=le>>18|240,q[W++]=le>>12&63|128,q[W++]=le>>6&63|128,q[W++]=63&le|128):(q[W++]=le>>12|224,q[W++]=le>>6&63|128,q[W++]=63&le|128)}return q},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,q){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let le=0;le<G.length;le+=3){const qe=G[le],ut=le+1<G.length,Ht=ut?G[le+1]:0,An=le+2<G.length,Wn=An?G[le+2]:0;let J=(15&Ht)<<2|Wn>>6,K=63&Wn;An||(K=64,ut||(J=64)),ve.push(W[qe>>2],W[(3&qe)<<4|Ht>>4],W[J],W[K])}return ve.join("")},encodeString(G,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(G):this.encodeByteArray(ce(G),q)},decodeString(G,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(G):function(G){const q=[];let W=0,ve=0;for(;W<G.length;){const le=G[W++];if(le<128)q[ve++]=String.fromCharCode(le);else if(le>191&&le<224){const qe=G[W++];q[ve++]=String.fromCharCode((31&le)<<6|63&qe)}else if(le>239&&le<365){const An=((7&le)<<18|(63&G[W++])<<12|(63&G[W++])<<6|63&G[W++])-65536;q[ve++]=String.fromCharCode(55296+(An>>10)),q[ve++]=String.fromCharCode(56320+(1023&An))}else{const qe=G[W++],ut=G[W++];q[ve++]=String.fromCharCode((15&le)<<12|(63&qe)<<6|63&ut)}}return q.join("")}(this.decodeStringToByteArray(G,q))},decodeStringToByteArray(G,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let le=0;le<G.length;){const qe=W[G.charAt(le++)],Ht=le<G.length?W[G.charAt(le)]:0;++le;const Wn=le<G.length?W[G.charAt(le)]:64;++le;const se=le<G.length?W[G.charAt(le)]:64;if(++le,null==qe||null==Ht||null==Wn||null==se)throw Error();ve.push(qe<<2|Ht>>4),64!==Wn&&(ve.push(Ht<<4&240|Wn>>2),64!==se&&ve.push(Wn<<6&192|se))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},Q=function(G){return function(G){const q=ce(G);return ee.encodeByteArray(q,!0)}(G).replace(/\./g,"")},z=function(G){try{return ee.decodeString(G,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function B(G,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!H(W)||(G[W]=B(G[W],q[W]));return G}function H(G){return"__proto__"!==G}class he{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,ve))}}}function Oe(G,q){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=q||"demo-project",le=G.iat||0,qe=G.sub||G.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:le,exp:le+3600,auth_time:le,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},G);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(ut)),""].join(".")}function Me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function re(){return"object"==typeof self&&self.self===self}function ae(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ke(){return Me().indexOf("Electron/")>=0}function At(){const G=Me();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Nt(){return Me().indexOf("MSAppHost/")>=0}function yt(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function In(){return"object"==typeof indexedDB}function Tt(){return new Promise((G,q)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(ve);le.onsuccess=()=>{le.result.close(),W||self.indexedDB.deleteDatabase(ve),G(!0)},le.onupgradeneeded=()=>{W=!1},le.onerror=()=>{var qe;q((null===(qe=le.error)||void 0===qe?void 0:qe.message)||"")}}catch(W){q(W)}})}function pt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ut extends Error{constructor(q,W,ve){super(W),this.code=q,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(q,W,ve){this.service=q,this.serviceName=W,this.errors=ve}create(q,...W){const ve=W[0]||{},le=`${this.service}/${q}`,qe=this.errors[q],ut=qe?function(G,q){return G.replace(tu,(W,ve)=>{const le=q[ve];return null!=le?String(le):`<${ve}?>`})}(qe,ve):"Error";return new Ut(le,`${this.serviceName}: ${ut} (${le}).`,ve)}}const tu=/\{\$([^}]+)}/g;function sn(G,q){return Object.prototype.hasOwnProperty.call(G,q)}function _n(G){for(const q in G)if(Object.prototype.hasOwnProperty.call(G,q))return!1;return!0}function Qt(G,q){if(G===q)return!0;const W=Object.keys(G),ve=Object.keys(q);for(const le of W){if(!ve.includes(le))return!1;const qe=G[le],ut=q[le];if(ks(qe)&&ks(ut)){if(!Qt(qe,ut))return!1}else if(qe!==ut)return!1}for(const le of ve)if(!W.includes(le))return!1;return!0}function ks(G){return null!==G&&"object"==typeof G}function Ti(G){const q=[];for(const[W,ve]of Object.entries(G))Array.isArray(ve)?ve.forEach(le=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(le))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return q.length?"&"+q.join("&"):""}function $i(G){const q={};return G.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[le,qe]=ve.split("=");q[decodeURIComponent(le)]=decodeURIComponent(qe)}}),q}function Re(G){const q=G.indexOf("?");if(!q)return"";const W=G.indexOf("#",q);return G.substring(q,W>0?W:void 0)}function qn(G,q){const W=new Ei(G,q);return W.subscribe.bind(W)}class Ei{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(ve=>{this.error(ve)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,ve){let le;if(void 0===q&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");le=function(G,q){if("object"!=typeof G||null===G)return!1;for(const W of["next","error","complete"])if(W in G&&"function"==typeof G[W])return!0;return!1}(q)?q:{next:q,error:W,complete:ve},void 0===le.next&&(le.next=gr),void 0===le.error&&(le.error=gr),void 0===le.complete&&(le.complete=gr);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch(ut){}}),this.observers.push(le),qe}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}function tn(G,q=1e3,W=2){const ve=q*Math.pow(W,G),le=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+le)}function fo(G){return G&&G._delegate?G._delegate:G}},2329:(We,be,F)=>{"use strict";F.d(be,{Mq:()=>o.getApp,C6:()=>o.getApps});var o=F(8026);(0,o.registerVersion)("firebase","9.6.0","app")},7841:(We,be,F)=>{"use strict";F.d(be,{Z:()=>o.Z});var o=F(3394);o.Z.registerVersion("firebase","9.6.0","app-compat")},4828:(We,be,F)=>{"use strict";F.r(be);var o=F(8239),Z=F(3394),O=F(2476),ce=F(3854),de=(F(8026),F(5422),F(3910));function Q(){return window}function B(){return(B=(0,o.Z)(function*(se,J,K){var Ce;const{BuildInfo:Ve}=Q();(0,O.ap)(J.sessionId,"AuthEvent did not contain a session ID");const ct=yield re(J.sessionId),Lt={};return(0,O.aq)()?Lt.ibi=Ve.packageName:(0,O.ar)()?Lt.apn=Ve.packageName:(0,O.as)(se,"operation-not-supported-in-this-environment"),Ve.displayName&&(Lt.appDisplayName=Ve.displayName),Lt.sessionId=ct,(0,O.at)(se,K,J.type,void 0,null!==(Ce=J.eventId)&&void 0!==Ce?Ce:void 0,Lt)})).apply(this,arguments)}function he(){return(he=(0,o.Z)(function*(se){const{BuildInfo:J}=Q(),K={};(0,O.aq)()?K.iosBundleId=J.packageName:(0,O.ar)()?K.androidPackageName=J.packageName:(0,O.as)(se,"operation-not-supported-in-this-environment"),yield(0,O.au)(se,K)})).apply(this,arguments)}function Ee(){return(Ee=(0,o.Z)(function*(se,J,K){const{cordova:Ce}=Q();let Ve=()=>{};try{yield new Promise((ct,Lt)=>{let It=null;function kn(){var bt;ct();const Nn=null===(bt=Ce.plugins.browsertab)||void 0===bt?void 0:bt.close;"function"==typeof Nn&&Nn(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function hn(){It||(It=window.setTimeout(()=>{Lt((0,O.av)(se,"redirect-cancelled-by-user"))},2e3))}function Sn(){"visible"===(null==document?void 0:document.visibilityState)&&hn()}J.addPassiveListener(kn),document.addEventListener("resume",hn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Sn,!1),Ve=()=>{J.removePassiveListener(kn),document.removeEventListener("resume",hn,!1),document.removeEventListener("visibilitychange",Sn,!1),It&&window.clearTimeout(It)}})}finally{Ve()}})).apply(this,arguments)}function re(se){return ae.apply(this,arguments)}function ae(){return(ae=(0,o.Z)(function*(se){const J=Te(se),K=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(K)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Te(se){if((0,O.ap)(/[0-9a-zA-Z]+/.test(se),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(se);const J=new ArrayBuffer(se.length),K=new Uint8Array(J);for(let Ce=0;Ce<se.length;Ce++)K[Ce]=se.charCodeAt(Ce);return K}class At extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(J)),super.onEvent(J)}initialized(){var J=this;return(0,o.Z)(function*(){yield J.initPromise})()}}function yt(se){return In.apply(this,arguments)}function In(){return(In=(0,o.Z)(function*(se){const J=yield Rt()._get(Qe(se));return J&&(yield Rt()._remove(Qe(se))),J})).apply(this,arguments)}function pt(){const se=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const Ce=Math.floor(Math.random()*J.length);se.push(J.charAt(Ce))}return se.join("")}function Rt(){return(0,O.ax)(O.b)}function Qe(se){return(0,O.ay)("authEvent",se.config.apiKey,se.name)}function cs(se){if(!(null==se?void 0:se.includes("?")))return{};const[J,...K]=se.split("?");return(0,ce.zd)(K.join("?"))}function Wt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function sn(){var se;return(null===(se=null==self?void 0:self.location)||void 0===se?void 0:se.protocol)||null}function _n(se=(0,ce.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()||!se.toLowerCase().match(/iphone|ipad|ipod|android/))}function $i(){try{const se=self.localStorage,J=O.aG();if(se)return se.setItem(J,"1"),se.removeItem(J),!function(se=(0,ce.z$)()){return(0,ce.w1)()&&11===(null==document?void 0:document.documentMode)||function(se=(0,ce.z$)()){return/Edge\/\d+/.test(se)}(se)}()||(0,ce.hl)()}catch(se){return Re()&&(0,ce.hl)()}return!1}function Re(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function wn(){return("http:"===sn()||"https:"===sn()||(0,ce.ru)()||_n())&&!((0,ce.b$)()||(0,ce.UG)())&&$i()&&!Re()}function qn(){return _n()&&"undefined"!=typeof document}function Ze(){return(Ze=(0,o.Z)(function*(){return!!qn()&&new Promise(se=>{const J=setTimeout(()=>{se(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),se(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},gr=O.aw,Gn="persistence";function et(se){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)(function*(se){yield se._initializationPromise;const J=zn(),K=O.ay(Gn,se.config.apiKey,se.name);(null==J?void 0:J.sessionStorage)&&J.sessionStorage.setItem(K,se._getPersistence())})).apply(this,arguments)}function zn(){return"undefined"!=typeof window?window:null}const en=O.aw;class Pe{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(J){var K=this;return(0,o.Z)(function*(){const Ce=J._key();let Ve=K.eventManagers.get(Ce);return Ve||(Ve=new At(J),K.eventManagers.set(Ce,Ve),K.attachCallbackListeners(J,Ve)),Ve})()}_openPopup(J){(0,O.as)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,K,Ce,Ve){var ct=this;return(0,o.Z)(function*(){!function(se){var J,K,Ce,Ve,ct,Lt,It,kn,hn,Sn;const bt=Q();(0,O.aw)("function"==typeof(null===(J=null==bt?void 0:bt.universalLinks)||void 0===J?void 0:J.subscribe),se,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(K=null==bt?void 0:bt.BuildInfo)||void 0===K?void 0:K.packageName),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(ct=null===(Ve=null===(Ce=null==bt?void 0:bt.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===ct?void 0:ct.openUrl),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(kn=null===(It=null===(Lt=null==bt?void 0:bt.cordova)||void 0===Lt?void 0:Lt.plugins)||void 0===It?void 0:It.browsertab)||void 0===kn?void 0:kn.isAvailable),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Sn=null===(hn=null==bt?void 0:bt.cordova)||void 0===hn?void 0:hn.InAppBrowser)||void 0===Sn?void 0:Sn.open),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const Lt=yield ct._initialize(J);yield Lt.initialized(),Lt.resetRedirect(),(0,O.aB)(),yield ct._originValidation(J);const It=function(se,J,K=null){return{type:J,eventId:K,urlResponse:null,sessionId:pt(),postBody:null,tenantId:se.tenantId,error:(0,O.av)(se,"no-auth-event")}}(J,Ce,Ve);yield function(se,J){return Rt()._set(Qe(se),J)}(J,It);const kn=yield function(se,J,K){return B.apply(this,arguments)}(J,It,K),hn=yield function(se){const{cordova:J}=Q();return new Promise(K=>{J.plugins.browsertab.isAvailable(Ce=>{let Ve=null;Ce?J.plugins.browsertab.openUrl(se):Ve=J.InAppBrowser.open(se,(0,O.ao)()?"_blank":"_system","location=yes"),K(Ve)})})}(kn);return function(se,J,K){return Ee.apply(this,arguments)}(J,Lt,hn)})()}_isIframeWebStorageSupported(J,K){throw new Error("Method not implemented.")}_originValidation(J){const K=J._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(se){return he.apply(this,arguments)}(J)),this.originValidationPromises[K]}attachCallbackListeners(J,K){const{universalLinks:Ce,handleOpenURL:Ve,BuildInfo:ct}=Q(),Lt=setTimeout((0,o.Z)(function*(){yield yt(J),K.onEvent(Wt())}),500),It=function(){var Sn=(0,o.Z)(function*(bt){clearTimeout(Lt);const Nn=yield yt(J);let po=null;Nn&&(null==bt?void 0:bt.url)&&(po=function(se,J){var K,Ce;const Ve=function(se){const J=cs(se),K=J.link?decodeURIComponent(J.link):void 0,Ce=cs(K).link,Ve=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return cs(Ve).link||Ve||Ce||K||se}(J);if(Ve.includes("/__/auth/callback")){const ct=cs(Ve),Lt=ct.firebaseError?function(se){try{return JSON.parse(se)}catch(J){return null}}(decodeURIComponent(ct.firebaseError)):null,It=null===(Ce=null===(K=null==Lt?void 0:Lt.code)||void 0===K?void 0:K.split("auth/"))||void 0===Ce?void 0:Ce[1],kn=It?(0,O.av)(It):null;return kn?{type:se.type,eventId:se.eventId,tenantId:se.tenantId,error:kn,urlResponse:null,sessionId:null,postBody:null}:{type:se.type,eventId:se.eventId,tenantId:se.tenantId,sessionId:se.sessionId,urlResponse:Ve,postBody:null}}return null}(Nn,bt.url)),K.onEvent(po||Wt())});return function(Nn){return Sn.apply(this,arguments)}}();void 0!==Ce&&"function"==typeof Ce.subscribe&&Ce.subscribe(null,It);const kn=Ve,hn=`${ct.packageName.toLowerCase()}://`;Q().handleOpenURL=function(){var Sn=(0,o.Z)(function*(bt){if(bt.toLowerCase().startsWith(hn)&&It({url:bt}),"function"==typeof kn)try{kn(bt)}catch(Nn){console.error(Nn)}});return function(bt){return Sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(J){var K=this;return(0,o.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,K,Ce,Ve){var ct=this;return(0,o.Z)(function*(){return yield ct.selectUnderlyingResolver(),ct.assertedUnderlyingResolver._openPopup(J,K,Ce,Ve)})()}_openRedirect(J,K,Ce,Ve){var ct=this;return(0,o.Z)(function*(){return yield ct.selectUnderlyingResolver(),ct.assertedUnderlyingResolver._openRedirect(J,K,Ce,Ve)})()}_isIframeWebStorageSupported(J,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,K)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return en(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,o.Z)(function*(){if(J.underlyingResolver)return;const K=yield function(){return Ze.apply(this,arguments)}();J.underlyingResolver=K?J.cordovaResolver:J.browserResolver})()}}function Xe(se){return se.unwrap()}function cn(se){return Yt(se)}function Yt(se){const{_tokenResponse:J}=se instanceof ce.ZR?se.customData:se;if(!J)return null;if(!(se instanceof ce.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return O.P.credentialFromResult(se);const K=J.providerId;if(!K||K===O.o.PASSWORD)return null;let Ce;switch(K){case O.o.GOOGLE:Ce=O.N;break;case O.o.FACEBOOK:Ce=O.M;break;case O.o.GITHUB:Ce=O.Q;break;case O.o.TWITTER:Ce=O.V;break;default:const{oauthIdToken:Ve,oauthAccessToken:ct,oauthTokenSecret:Lt,pendingToken:It,nonce:kn}=J;return ct||Lt||Ve||It?It?K.startsWith("saml.")?O.aJ._create(K,It):O.I._fromParams({providerId:K,signInMethod:K,pendingToken:It,idToken:Ve,accessToken:ct}):new O.T(K).credential({idToken:Ve,accessToken:ct,rawNonce:kn}):null}return se instanceof ce.ZR?Ce.credentialFromError(se):Ce.credentialFromResult(se)}function dn(se,J){return J.catch(K=>{throw K instanceof ce.ZR&&function(se,J){var K;const Ce=null===(K=J.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===J.code)J.resolver=new q(se,O.am(se,J));else if(Ce){const Ve=Yt(J),ct=J;Ve&&(ct.credential=Ve,ct.tenantId=Ce.tenantId||void 0,ct.email=Ce.email||void 0,ct.phoneNumber=Ce.phoneNumber||void 0)}}(se,K),K}).then(K=>{const Ve=K.user;return{operationType:K.operationType,credential:cn(K),additionalUserInfo:O.ak(K),user:W.getOrCreate(Ve)}})}function fo(se,J){return G.apply(this,arguments)}function G(){return(G=(0,o.Z)(function*(se,J){const K=yield J;return{verificationId:K.verificationId,confirm:Ce=>dn(se,K.confirm(Ce))}})).apply(this,arguments)}class q{constructor(J,K){this.resolver=K,this.auth=J.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return dn(Xe(this.auth),this.resolver.resolveSignIn(J))}}class W{constructor(J){this._delegate=J,this.multiFactor=O.an(J)}static getOrCreate(J){return W.USER_MAP.has(J)||W.USER_MAP.set(J,new W(J)),W.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var K=this;return(0,o.Z)(function*(){return dn(K.auth,O.Y(K._delegate,J))})()}linkWithPhoneNumber(J,K){var Ce=this;return(0,o.Z)(function*(){return fo(Ce.auth,O.l(Ce._delegate,J,K))})()}linkWithPopup(J){var K=this;return(0,o.Z)(function*(){return dn(K.auth,O.d(K._delegate,J,Pe))})()}linkWithRedirect(J){var K=this;return(0,o.Z)(function*(){return yield et(O.aC(K.auth)),O.g(K._delegate,J,Pe)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var K=this;return(0,o.Z)(function*(){return dn(K.auth,O.Z(K._delegate,J))})()}reauthenticateWithPhoneNumber(J,K){return fo(this.auth,O.r(this._delegate,J,K))}reauthenticateWithPopup(J){return dn(this.auth,O.e(this._delegate,J,Pe))}reauthenticateWithRedirect(J){var K=this;return(0,o.Z)(function*(){return yield et(O.aC(K.auth)),O.h(K._delegate,J,Pe)})()}sendEmailVerification(J){return O.aa(this._delegate,J)}unlink(J){var K=this;return(0,o.Z)(function*(){return yield O.aj(K._delegate,J),K})()}updateEmail(J){return O.af(this._delegate,J)}updatePassword(J){return O.ag(this._delegate,J)}updatePhoneNumber(J){return O.u(this._delegate,J)}updateProfile(J){return O.ae(this._delegate,J)}verifyBeforeUpdateEmail(J,K){return O.ab(this._delegate,J,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}W.USER_MAP=new WeakMap;const ve=O.aw;let le=(()=>{class se{constructor(K,Ce){if(this.app=K,Ce.isInitialized())return this._delegate=Ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=K.options;ve(Ve,"invalid-api-key",{appName:K.name});let ct=[O.K];if("undefined"!=typeof window){ct=function(se,J){const K=zn();if(!(null==K?void 0:K.sessionStorage))return[];const Ce=O.ay(Gn,se,J);switch(K.sessionStorage.getItem(Ce)){case jt.NONE:return[O.K];case jt.LOCAL:return[O.i,O.a];case jt.SESSION:return[O.a];default:return[]}}(Ve,K.name);for(const It of[O.i,O.b,O.a])ct.includes(It)||ct.push(It)}ve(Ve,"invalid-api-key",{appName:K.name});const Lt="undefined"!=typeof window?Pe:void 0;this._delegate=Ce.initialize({options:{persistence:ct,popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?W.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,Ce){O.E(this._delegate,K,Ce)}applyActionCode(K){return O.a1(this._delegate,K)}checkActionCode(K){return O.a2(this._delegate,K)}confirmPasswordReset(K,Ce){return O.a0(this._delegate,K,Ce)}createUserWithEmailAndPassword(K,Ce){var Ve=this;return(0,o.Z)(function*(){return dn(Ve._delegate,O.a4(Ve._delegate,K,Ce))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.a9(this._delegate,K)}isSignInWithEmailLink(K){return O.a7(this._delegate,K)}getRedirectResult(){var K=this;return(0,o.Z)(function*(){ve(wn(),K._delegate,"operation-not-supported-in-this-environment");const Ce=yield O.j(K._delegate,Pe);return Ce?dn(K._delegate,Promise.resolve(Ce)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(se,J){(0,O.aC)(se)._logFramework(J)}(this._delegate,K)}onAuthStateChanged(K,Ce,Ve){const{next:ct,error:Lt,complete:It}=qe(K,Ce,Ve);return this._delegate.onAuthStateChanged(ct,Lt,It)}onIdTokenChanged(K,Ce,Ve){const{next:ct,error:Lt,complete:It}=qe(K,Ce,Ve);return this._delegate.onIdTokenChanged(ct,Lt,It)}sendSignInLinkToEmail(K,Ce){return O.a6(this._delegate,K,Ce)}sendPasswordResetEmail(K,Ce){return O.$(this._delegate,K,Ce||void 0)}setPersistence(K){var Ce=this;return(0,o.Z)(function*(){let Ve;switch(function(se,J){gr(Object.values(jt).includes(J),se,"invalid-persistence-type"),(0,ce.b$)()?gr(J!==jt.SESSION,se,"unsupported-persistence-type"):(0,ce.UG)()?gr(J===jt.NONE,se,"unsupported-persistence-type"):Re()?gr(J===jt.NONE||J===jt.LOCAL&&(0,ce.hl)(),se,"unsupported-persistence-type"):gr(J===jt.NONE||$i(),se,"unsupported-persistence-type")}(Ce._delegate,K),K){case jt.SESSION:Ve=O.a;break;case jt.LOCAL:Ve=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case jt.NONE:Ve=O.K;break;default:return O.as("argument-error",{appName:Ce._delegate.name})}return Ce._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return dn(this._delegate,O.W(this._delegate))}signInWithCredential(K){return dn(this._delegate,O.X(this._delegate,K))}signInWithCustomToken(K){return dn(this._delegate,O._(this._delegate,K))}signInWithEmailAndPassword(K,Ce){return dn(this._delegate,O.a5(this._delegate,K,Ce))}signInWithEmailLink(K,Ce){return dn(this._delegate,O.a8(this._delegate,K,Ce))}signInWithPhoneNumber(K,Ce){return fo(this._delegate,O.s(this._delegate,K,Ce))}signInWithPopup(K){var Ce=this;return(0,o.Z)(function*(){return ve(wn(),Ce._delegate,"operation-not-supported-in-this-environment"),dn(Ce._delegate,O.c(Ce._delegate,K,Pe))})()}signInWithRedirect(K){var Ce=this;return(0,o.Z)(function*(){return ve(wn(),Ce._delegate,"operation-not-supported-in-this-environment"),yield et(Ce._delegate),O.f(Ce._delegate,K,Pe)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a3(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return se.Persistence=jt,se})();function qe(se,J,K){let Ce=se;"function"!=typeof se&&({next:Ce,error:J,complete:K}=se);const Ve=Ce;return{next:Lt=>Ve(Lt&&W.getOrCreate(Lt)),error:J,complete:K}}class ut{constructor(){this.providerId="phone",this._delegate=new O.P(Xe(Z.Z.auth()))}static credential(J,K){return O.P.credential(J,K)}verifyPhoneNumber(J,K){return this._delegate.verifyPhoneNumber(J,K)}unwrap(){return this._delegate}}ut.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ut.PROVIDER_ID=O.P.PROVIDER_ID;const Ht=O.aw;var se;(se=Z.Z).INTERNAL.registerComponent(new de.wA("auth-compat",J=>{const K=J.getProvider("app-compat").getImmediate(),Ce=J.getProvider("auth");return new le(K,Ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:ut,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(J,K,Ce=Z.Z.app()){var Ve;Ht(null===(Ve=Ce.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:Ce.name}),this._delegate=new O.R(J,K,Ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:le,AuthCredential:O.G,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),se.registerVersion("@firebase/auth-compat","0.2.3")},6676:function(We,be){!function(F){"use strict";function o(ge){return Array.prototype.slice.call(ge)}function Z(ge){return new Promise(function(re,ae){ge.onsuccess=function(){re(ge.result)},ge.onerror=function(){ae(ge.error)}})}function O(ge,re,ae){var Te,ke=new Promise(function(At,Nt){Z(Te=ge[re].apply(ge,ae)).then(At,Nt)});return ke.request=Te,ke}function ce(ge,re,ae){var Te=O(ge,re,ae);return Te.then(function(ke){if(ke)return new L(ke,Te.request)})}function ue(ge,re,ae){ae.forEach(function(Te){Object.defineProperty(ge.prototype,Te,{get:function(){return this[re][Te]},set:function(ke){this[re][Te]=ke}})})}function ee(ge,re,ae,Te){Te.forEach(function(ke){ke in ae.prototype&&(ge.prototype[ke]=function(){return O(this[re],ke,arguments)})})}function de(ge,re,ae,Te){Te.forEach(function(ke){ke in ae.prototype&&(ge.prototype[ke]=function(){return this[re][ke].apply(this[re],arguments)})})}function Q(ge,re,ae,Te){Te.forEach(function(ke){ke in ae.prototype&&(ge.prototype[ke]=function(){return ce(this[re],ke,arguments)})})}function z(ge){this._index=ge}function L(ge,re){this._cursor=ge,this._request=re}function B(ge){this._store=ge}function H(ge){this._tx=ge,this.complete=new Promise(function(re,ae){ge.oncomplete=function(){re()},ge.onerror=function(){ae(ge.error)},ge.onabort=function(){ae(ge.error)}})}function he(ge,re,ae){this._db=ge,this.oldVersion=re,this.transaction=new H(ae)}function Oe(ge){this._db=ge}ue(z,"_index",["name","keyPath","multiEntry","unique"]),ee(z,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Q(z,"_index",IDBIndex,["openCursor","openKeyCursor"]),ue(L,"_cursor",["direction","key","primaryKey","value"]),ee(L,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ge){ge in IDBCursor.prototype&&(L.prototype[ge]=function(){var re=this,ae=arguments;return Promise.resolve().then(function(){return re._cursor[ge].apply(re._cursor,ae),Z(re._request).then(function(Te){if(Te)return new L(Te,re._request)})})})}),B.prototype.createIndex=function(){return new z(this._store.createIndex.apply(this._store,arguments))},B.prototype.index=function(){return new z(this._store.index.apply(this._store,arguments))},ue(B,"_store",["name","keyPath","indexNames","autoIncrement"]),ee(B,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Q(B,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),de(B,"_store",IDBObjectStore,["deleteIndex"]),H.prototype.objectStore=function(){return new B(this._tx.objectStore.apply(this._tx,arguments))},ue(H,"_tx",["objectStoreNames","mode"]),de(H,"_tx",IDBTransaction,["abort"]),he.prototype.createObjectStore=function(){return new B(this._db.createObjectStore.apply(this._db,arguments))},ue(he,"_db",["name","version","objectStoreNames"]),de(he,"_db",IDBDatabase,["deleteObjectStore","close"]),Oe.prototype.transaction=function(){return new H(this._db.transaction.apply(this._db,arguments))},ue(Oe,"_db",["name","version","objectStoreNames"]),de(Oe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ge){[B,z].forEach(function(re){ge in re.prototype&&(re.prototype[ge.replace("open","iterate")]=function(){var ae=o(arguments),Te=ae[ae.length-1],ke=this._store||this._index,At=ke[ge].apply(ke,ae.slice(0,-1));At.onsuccess=function(){Te(At.result)}})})}),[z,B].forEach(function(ge){ge.prototype.getAll||(ge.prototype.getAll=function(re,ae){var Te=this,ke=[];return new Promise(function(At){Te.iterateCursor(re,function(Nt){Nt?(ke.push(Nt.value),void 0===ae||ke.length!=ae?Nt.continue():At(ke)):At(ke)})})})}),F.openDb=function(ge,re,ae){var Te=O(indexedDB,"open",[ge,re]),ke=Te.request;return ke&&(ke.onupgradeneeded=function(At){ae&&ae(new he(ke.result,At.oldVersion,ke.transaction))}),Te.then(function(At){return new Oe(At)})},F.deleteDb=function(ge){return O(indexedDB,"deleteDatabase",[ge])},Object.defineProperty(F,"__esModule",{value:!0})}(be)},1593:(We,be,F)=>{"use strict";F.d(be,{P:()=>de});var o=F(9193),Z=F(5917),O=F(7574);class de{constructor(z,L,B){this.kind=z,this.value=L,this.error=B,this.hasValue="N"===z}observe(z){switch(this.kind){case"N":return z.next&&z.next(this.value);case"E":return z.error&&z.error(this.error);case"C":return z.complete&&z.complete()}}do(z,L,B){switch(this.kind){case"N":return z&&z(this.value);case"E":return L&&L(this.error);case"C":return B&&B()}}accept(z,L,B){return z&&"function"==typeof z.next?this.observe(z):this.do(z,L,B)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return Q=this.error,new O.y(L=>L.error(Q));case"C":return(0,o.c)()}var Q;throw new Error("unexpected notification kind value")}static createNext(z){return void 0!==z?new de("N",z):de.undefinedValueNotification}static createError(z){return new de("E",void 0,z)}static createComplete(){return de.completeNotification}}de.completeNotification=new de("C"),de.undefinedValueNotification=new de("N",void 0)},7574:(We,be,F)=>{"use strict";F.d(be,{y:()=>B});var o=F(7393),O=F(9181),ce=F(6490),ee=F(6554),de=F(4487);var L=F(2494);let B=(()=>{class he{constructor(Me){this._isScalar=!1,Me&&(this._subscribe=Me)}lift(Me){const Ee=new he;return Ee.source=this,Ee.operator=Me,Ee}subscribe(Me,Ee,ge){const{operator:re}=this,ae=function(he,Oe,Me){if(he){if(he instanceof o.L)return he;if(he[O.b])return he[O.b]()}return he||Oe||Me?new o.L(he,Oe,Me):new o.L(ce.c)}(Me,Ee,ge);if(ae.add(re?re.call(ae,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!ae.syncErrorThrowable?this._subscribe(ae):this._trySubscribe(ae)),L.v.useDeprecatedSynchronousErrorHandling&&ae.syncErrorThrowable&&(ae.syncErrorThrowable=!1,ae.syncErrorThrown))throw ae.syncErrorValue;return ae}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ee){L.v.useDeprecatedSynchronousErrorHandling&&(Me.syncErrorThrown=!0,Me.syncErrorValue=Ee),function(he){for(;he;){const{closed:Oe,destination:Me,isStopped:Ee}=he;if(Oe||Ee)return!1;he=Me&&Me instanceof o.L?Me:null}return!0}(Me)?Me.error(Ee):console.warn(Ee)}}forEach(Me,Ee){return new(Ee=H(Ee))((ge,re)=>{let ae;ae=this.subscribe(Te=>{try{Me(Te)}catch(ke){re(ke),ae&&ae.unsubscribe()}},re,ge)})}_subscribe(Me){const{source:Ee}=this;return Ee&&Ee.subscribe(Me)}[ee.L](){return this}pipe(...Me){return 0===Me.length?this:function(he){return 0===he.length?de.y:1===he.length?he[0]:function(Me){return he.reduce((Ee,ge)=>ge(Ee),Me)}}(Me)(this)}toPromise(Me){return new(Me=H(Me))((Ee,ge)=>{let re;this.subscribe(ae=>re=ae,ae=>ge(ae),()=>Ee(re))})}}return he.create=Oe=>new he(Oe),he})();function H(he){if(he||(he=L.v.Promise||Promise),!he)throw new Error("no Promise impl found");return he}},6490:(We,be,F)=>{"use strict";F.d(be,{c:()=>O});var o=F(2494),Z=F(4449);const O={closed:!0,next(ce){},error(ce){if(o.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,Z.z)(ce)},complete(){}}},9765:(We,be,F)=>{"use strict";F.d(be,{Yc:()=>de,xQ:()=>Q});var o=F(7574),Z=F(7393),O=F(5319),ce=F(7971),ue=F(8858),ee=F(9181);class de extends Z.L{constructor(B){super(B),this.destination=B}}let Q=(()=>{class L extends o.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new de(this)}lift(H){const he=new z(this,this);return he.operator=H,he}next(H){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:he}=this,Oe=he.length,Me=he.slice();for(let Ee=0;Ee<Oe;Ee++)Me[Ee].next(H)}}error(H){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:he}=this,Oe=he.length,Me=he.slice();for(let Ee=0;Ee<Oe;Ee++)Me[Ee].error(H);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:H}=this,he=H.length,Oe=H.slice();for(let Me=0;Me<he;Me++)Oe[Me].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new ce.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new ce.N;return this.hasError?(H.error(this.thrownError),O.w.EMPTY):this.isStopped?(H.complete(),O.w.EMPTY):(this.observers.push(H),new ue.W(this,H))}asObservable(){const H=new o.y;return H.source=this,H}}return L.create=(B,H)=>new z(B,H),L})();class z extends Q{constructor(B,H){super(),this.destination=B,this.source=H}next(B){const{destination:H}=this;H&&H.next&&H.next(B)}error(B){const{destination:H}=this;H&&H.error&&this.destination.error(B)}complete(){const{destination:B}=this;B&&B.complete&&this.destination.complete()}_subscribe(B){const{source:H}=this;return H?this.source.subscribe(B):O.w.EMPTY}}},8858:(We,be,F)=>{"use strict";F.d(be,{W:()=>Z});var o=F(5319);class Z extends o.w{constructor(ce,ue){super(),this.subject=ce,this.subscriber=ue,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,ue=ce.observers;if(this.subject=null,!ue||0===ue.length||ce.isStopped||ce.closed)return;const ee=ue.indexOf(this.subscriber);-1!==ee&&ue.splice(ee,1)}}},7393:(We,be,F)=>{"use strict";F.d(be,{L:()=>de});var o=F(9105),Z=F(6490),O=F(5319),ce=F(9181),ue=F(2494),ee=F(4449);class de extends O.w{constructor(L,B,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Z.c;break;case 1:if(!L){this.destination=Z.c;break}if("object"==typeof L){L instanceof de?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,L,B,H)}}[ce.b](){return this}static create(L,B,H){const he=new de(L,B,H);return he.syncErrorThrowable=!1,he}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class Q extends de{constructor(L,B,H,he){super(),this._parentSubscriber=L;let Oe,Me=this;(0,o.m)(B)?Oe=B:B&&(Oe=B.next,H=B.error,he=B.complete,B!==Z.c&&(Me=Object.create(B),(0,o.m)(Me.unsubscribe)&&this.add(Me.unsubscribe.bind(Me)),Me.unsubscribe=this.unsubscribe.bind(this))),this._context=Me,this._next=Oe,this._error=H,this._complete=he}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:B}=this;ue.v.useDeprecatedSynchronousErrorHandling&&B.syncErrorThrowable?this.__tryOrSetError(B,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:B}=this,{useDeprecatedSynchronousErrorHandling:H}=ue.v;if(this._error)H&&B.syncErrorThrowable?(this.__tryOrSetError(B,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(B.syncErrorThrowable)H?(B.syncErrorValue=L,B.syncErrorThrown=!0):(0,ee.z)(L),this.unsubscribe();else{if(this.unsubscribe(),H)throw L;(0,ee.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const B=()=>this._complete.call(this._context);ue.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,B),this.unsubscribe()):(this.__tryOrUnsub(B),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,B){try{L.call(this._context,B)}catch(H){if(this.unsubscribe(),ue.v.useDeprecatedSynchronousErrorHandling)throw H;(0,ee.z)(H)}}__tryOrSetError(L,B,H){if(!ue.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{B.call(this._context,H)}catch(he){return ue.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=he,L.syncErrorThrown=!0,!0):((0,ee.z)(he),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(We,be,F)=>{"use strict";F.d(be,{w:()=>ee});var o=F(9796),Z=F(1555),O=F(9105);const ue=(()=>{function Q(z){return Error.call(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((L,B)=>`${B+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z,this}return Q.prototype=Object.create(Error.prototype),Q})();class ee{constructor(z){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,z&&(this._ctorUnsubscribe=!0,this._unsubscribe=z)}unsubscribe(){let z;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:B,_unsubscribe:H,_subscriptions:he}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof ee)L.remove(this);else if(null!==L)for(let Oe=0;Oe<L.length;++Oe)L[Oe].remove(this);if((0,O.m)(H)){B&&(this._unsubscribe=void 0);try{H.call(this)}catch(Oe){z=Oe instanceof ue?de(Oe.errors):[Oe]}}if((0,o.k)(he)){let Oe=-1,Me=he.length;for(;++Oe<Me;){const Ee=he[Oe];if((0,Z.K)(Ee))try{Ee.unsubscribe()}catch(ge){z=z||[],ge instanceof ue?z=z.concat(de(ge.errors)):z.push(ge)}}}if(z)throw new ue(z)}add(z){let L=z;if(!z)return ee.EMPTY;switch(typeof z){case"function":L=new ee(z);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof ee)){const he=L;L=new ee,L._subscriptions=[he]}break;default:throw new Error("unrecognized teardown "+z+" added to Subscription.")}let{_parentOrParents:B}=L;if(null===B)L._parentOrParents=this;else if(B instanceof ee){if(B===this)return L;L._parentOrParents=[B,this]}else{if(-1!==B.indexOf(this))return L;B.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[L]:H.push(L),L}remove(z){const L=this._subscriptions;if(L){const B=L.indexOf(z);-1!==B&&L.splice(B,1)}}}var Q;function de(Q){return Q.reduce((z,L)=>z.concat(L instanceof ue?L.errors:L),[])}ee.EMPTY=((Q=new ee).closed=!0,Q)},2494:(We,be,F)=>{"use strict";F.d(be,{v:()=>Z});let o=!1;const Z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=O},get useDeprecatedSynchronousErrorHandling(){return o}}},5345:(We,be,F)=>{"use strict";F.d(be,{IY:()=>ce,Ds:()=>ee,ft:()=>Q});var o=F(7393),Z=F(7574),O=F(7444);class ce extends o.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends o.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function Q(z,L){if(L.closed)return;if(z instanceof Z.y)return z.subscribe(L);let B;try{B=(0,O.s)(z)(L)}catch(H){L.error(H)}return B}},2441:(We,be,F)=>{"use strict";F.d(be,{c:()=>ue,N:()=>ee});var o=F(9765),Z=F(7574),O=F(5319),ce=F(1307);class ue extends Z.y{constructor(B,H){super(),this.source=B,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe(B){return this.getSubject().subscribe(B)}getSubject(){const B=this._subject;return(!B||B.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let B=this._connection;return B||(this._isComplete=!1,B=this._connection=new O.w,B.add(this.source.subscribe(new de(this.getSubject(),this))),B.closed&&(this._connection=null,B=O.w.EMPTY)),B}refCount(){return(0,ce.x)()(this)}}const ee=(()=>{const L=ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class de extends o.Yc{constructor(B,H){super(B),this.connectable=H}_error(B){this._unsubscribe(),super._error(B)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const B=this.connectable;if(B){this.connectable=null;const H=B._connection;B._refCount=0,B._subject=null,B._connection=null,H&&H.unsubscribe()}}}},9193:(We,be,F)=>{"use strict";F.d(be,{E:()=>Z,c:()=>O});var o=F(7574);const Z=new o.y(ue=>ue.complete());function O(ue){return ue?function(ue){return new o.y(ee=>ue.schedule(()=>ee.complete()))}(ue):Z}},4402:(We,be,F)=>{"use strict";F.d(be,{D:()=>Me});var o=F(7574),Z=F(7444),O=F(5319),ce=F(6554),de=F(4087),Q=F(377),B=F(4072),H=F(9489);function Me(Ee,ge){return ge?function(Ee,ge){if(null!=Ee){if(function(Ee){return Ee&&"function"==typeof Ee[ce.L]}(Ee))return function(Ee,ge){return new o.y(re=>{const ae=new O.w;return ae.add(ge.schedule(()=>{const Te=Ee[ce.L]();ae.add(Te.subscribe({next(ke){ae.add(ge.schedule(()=>re.next(ke)))},error(ke){ae.add(ge.schedule(()=>re.error(ke)))},complete(){ae.add(ge.schedule(()=>re.complete()))}}))})),ae})}(Ee,ge);if((0,B.t)(Ee))return function(Ee,ge){return new o.y(re=>{const ae=new O.w;return ae.add(ge.schedule(()=>Ee.then(Te=>{ae.add(ge.schedule(()=>{re.next(Te),ae.add(ge.schedule(()=>re.complete()))}))},Te=>{ae.add(ge.schedule(()=>re.error(Te)))}))),ae})}(Ee,ge);if((0,H.z)(Ee))return(0,de.r)(Ee,ge);if(function(Ee){return Ee&&"function"==typeof Ee[Q.hZ]}(Ee)||"string"==typeof Ee)return function(Ee,ge){if(!Ee)throw new Error("Iterable cannot be null");return new o.y(re=>{const ae=new O.w;let Te;return ae.add(()=>{Te&&"function"==typeof Te.return&&Te.return()}),ae.add(ge.schedule(()=>{Te=Ee[Q.hZ](),ae.add(ge.schedule(function(){if(re.closed)return;let ke,At;try{const Nt=Te.next();ke=Nt.value,At=Nt.done}catch(Nt){return void re.error(Nt)}At?re.complete():(re.next(ke),this.schedule())}))})),ae})}(Ee,ge)}throw new TypeError((null!==Ee&&typeof Ee||Ee)+" is not observable")}(Ee,ge):Ee instanceof o.y?Ee:new o.y((0,Z.s)(Ee))}},6693:(We,be,F)=>{"use strict";F.d(be,{n:()=>ce});var o=F(7574),Z=F(5015),O=F(4087);function ce(ue,ee){return ee?(0,O.r)(ue,ee):new o.y((0,Z.V)(ue))}},6682:(We,be,F)=>{"use strict";F.d(be,{T:()=>ue});var o=F(7574),Z=F(4869),O=F(3282),ce=F(6693);function ue(...ee){let de=Number.POSITIVE_INFINITY,Q=null,z=ee[ee.length-1];return(0,Z.K)(z)?(Q=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(de=ee.pop())):"number"==typeof z&&(de=ee.pop()),null===Q&&1===ee.length&&ee[0]instanceof o.y?ee[0]:(0,O.J)(de)((0,ce.n)(ee,Q))}},5917:(We,be,F)=>{"use strict";F.d(be,{of:()=>ce});var o=F(4869),Z=F(6693),O=F(4087);function ce(...ue){let ee=ue[ue.length-1];return(0,o.K)(ee)?(ue.pop(),(0,O.r)(ue,ee)):(0,Z.n)(ue)}},8002:(We,be,F)=>{"use strict";F.d(be,{U:()=>Z});var o=F(7393);function Z(ue,ee){return function(Q){if("function"!=typeof ue)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Q.lift(new O(ue,ee))}}class O{constructor(ee,de){this.project=ee,this.thisArg=de}call(ee,de){return de.subscribe(new ce(ee,this.project,this.thisArg))}}class ce extends o.L{constructor(ee,de,Q){super(ee),this.project=de,this.count=0,this.thisArg=Q||this}_next(ee){let de;try{de=this.project.call(this.thisArg,ee,this.count++)}catch(Q){return void this.destination.error(Q)}this.destination.next(de)}}},3282:(We,be,F)=>{"use strict";F.d(be,{J:()=>O});var o=F(9773),Z=F(4487);function O(ce=Number.POSITIVE_INFINITY){return(0,o.zg)(Z.y,ce)}},9773:(We,be,F)=>{"use strict";F.d(be,{zg:()=>ce});var o=F(8002),Z=F(4402),O=F(5345);function ce(Q,z,L=Number.POSITIVE_INFINITY){return"function"==typeof z?B=>B.pipe(ce((H,he)=>(0,Z.D)(Q(H,he)).pipe((0,o.U)((Oe,Me)=>z(H,Oe,he,Me))),L)):("number"==typeof z&&(L=z),B=>B.lift(new ue(Q,L)))}class ue{constructor(z,L=Number.POSITIVE_INFINITY){this.project=z,this.concurrent=L}call(z,L){return L.subscribe(new ee(z,this.project,this.concurrent))}}class ee extends O.Ds{constructor(z,L,B=Number.POSITIVE_INFINITY){super(z),this.project=L,this.concurrent=B,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(z){this.active<this.concurrent?this._tryNext(z):this.buffer.push(z)}_tryNext(z){let L;const B=this.index++;try{L=this.project(z,B)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(L)}_innerSub(z){const L=new O.IY(this),B=this.destination;B.add(L);const H=(0,O.ft)(z,L);H!==L&&B.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(z){this.destination.next(z)}notifyComplete(){const z=this.buffer;this.active--,z.length>0?this._next(z.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(We,be,F)=>{"use strict";F.d(be,{QV:()=>O,ht:()=>ue});var o=F(7393),Z=F(1593);function O(de,Q=0){return function(L){return L.lift(new ce(de,Q))}}class ce{constructor(Q,z=0){this.scheduler=Q,this.delay=z}call(Q,z){return z.subscribe(new ue(Q,this.scheduler,this.delay))}}class ue extends o.L{constructor(Q,z,L=0){super(Q),this.scheduler=z,this.delay=L}static dispatch(Q){const{notification:z,destination:L}=Q;z.observe(L),this.unsubscribe()}scheduleMessage(Q){this.destination.add(this.scheduler.schedule(ue.dispatch,this.delay,new ee(Q,this.destination)))}_next(Q){this.scheduleMessage(Z.P.createNext(Q))}_error(Q){this.scheduleMessage(Z.P.createError(Q)),this.unsubscribe()}_complete(){this.scheduleMessage(Z.P.createComplete()),this.unsubscribe()}}class ee{constructor(Q,z){this.notification=Q,this.destination=z}}},1307:(We,be,F)=>{"use strict";F.d(be,{x:()=>Z});var o=F(7393);function Z(){return function(ee){return ee.lift(new O(ee))}}class O{constructor(ee){this.connectable=ee}call(ee,de){const{connectable:Q}=this;Q._refCount++;const z=new ce(ee,Q),L=de.subscribe(z);return z.closed||(z.connection=Q.connect()),L}}class ce extends o.L{constructor(ee,de){super(ee),this.connectable=de}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const de=ee._refCount;if(de<=0)return void(this.connection=null);if(ee._refCount=de-1,de>1)return void(this.connection=null);const{connection:Q}=this,z=ee._connection;this.connection=null,z&&(!Q||z===Q)&&z.unsubscribe()}}},8819:(We,be,F)=>{"use strict";F.d(be,{B:()=>de});var o=F(2441);var ce=F(1307),ue=F(9765);function ee(){return new ue.xQ}function de(){return Q=>(0,ce.x)()(function(Q,z){return function(B){let H;H="function"==typeof Q?Q:function(){return Q};const he=Object.create(B,o.N);return he.source=B,he.subjectFactory=H,he}}(ee)(Q))}},2639:(We,be,F)=>{"use strict";F.d(be,{R:()=>Ee});var o=F(7574);let Z=1;const O=Promise.resolve(),ce={};function ue(re){return re in ce&&(delete ce[re],!0)}const ee={setImmediate(re){const ae=Z++;return ce[ae]=!0,O.then(()=>ue(ae)&&re()),ae},clearImmediate(re){ue(re)}};var Q=F(6465),L=F(6102);const he=new class extends L.v{flush(ae){this.active=!0,this.scheduled=void 0;const{actions:Te}=this;let ke,At=-1,Nt=Te.length;ae=ae||Te.shift();do{if(ke=ae.execute(ae.state,ae.delay))break}while(++At<Nt&&(ae=Te.shift()));if(this.active=!1,ke){for(;++At<Nt&&(ae=Te.shift());)ae.unsubscribe();throw ke}}}(class extends Q.o{constructor(ae,Te){super(ae,Te),this.scheduler=ae,this.work=Te}requestAsyncId(ae,Te,ke=0){return null!==ke&&ke>0?super.requestAsyncId(ae,Te,ke):(ae.actions.push(this),ae.scheduled||(ae.scheduled=ee.setImmediate(ae.flush.bind(ae,null))))}recycleAsyncId(ae,Te,ke=0){if(null!==ke&&ke>0||null===ke&&this.delay>0)return super.recycleAsyncId(ae,Te,ke);0===ae.actions.length&&(ee.clearImmediate(Te),ae.scheduled=void 0)}});var Oe=F(6561);class Me extends o.y{constructor(ae,Te=0,ke=he){super(),this.source=ae,this.delayTime=Te,this.scheduler=ke,(!(0,Oe.k)(Te)||Te<0)&&(this.delayTime=0),(!ke||"function"!=typeof ke.schedule)&&(this.scheduler=he)}static create(ae,Te=0,ke=he){return new Me(ae,Te,ke)}static dispatch(ae){const{source:Te,subscriber:ke}=ae;return this.add(Te.subscribe(ke))}_subscribe(ae){return this.scheduler.schedule(Me.dispatch,this.delayTime,{source:this.source,subscriber:ae})}}function Ee(re,ae=0){return function(ke){return ke.lift(new ge(re,ae))}}class ge{constructor(ae,Te){this.scheduler=ae,this.delay=Te}call(ae,Te){return new Me(Te,this.delay,this.scheduler).subscribe(ae)}}},8307:(We,be,F)=>{"use strict";F.d(be,{b:()=>ce});var o=F(7393),Z=F(8640),O=F(9105);function ce(de,Q,z){return function(B){return B.lift(new ue(de,Q,z))}}class ue{constructor(Q,z,L){this.nextOrObserver=Q,this.error=z,this.complete=L}call(Q,z){return z.subscribe(new ee(Q,this.nextOrObserver,this.error,this.complete))}}class ee extends o.L{constructor(Q,z,L,B){super(Q),this._tapNext=Z.Z,this._tapError=Z.Z,this._tapComplete=Z.Z,this._tapError=L||Z.Z,this._tapComplete=B||Z.Z,(0,O.m)(z)?(this._context=this,this._tapNext=z):z&&(this._context=z,this._tapNext=z.next||Z.Z,this._tapError=z.error||Z.Z,this._tapComplete=z.complete||Z.Z)}_next(Q){try{this._tapNext.call(this._context,Q)}catch(z){return void this.destination.error(z)}this.destination.next(Q)}_error(Q){try{this._tapError.call(this._context,Q)}catch(z){return void this.destination.error(z)}this.destination.error(Q)}_complete(){try{this._tapComplete.call(this._context)}catch(Q){return void this.destination.error(Q)}return this.destination.complete()}}},4087:(We,be,F)=>{"use strict";F.d(be,{r:()=>O});var o=F(7574),Z=F(5319);function O(ce,ue){return new o.y(ee=>{const de=new Z.w;let Q=0;return de.add(ue.schedule(function(){Q!==ce.length?(ee.next(ce[Q++]),ee.closed||de.add(this.schedule())):ee.complete()})),de})}},6465:(We,be,F)=>{"use strict";F.d(be,{o:()=>O});var o=F(5319);class Z extends o.w{constructor(ue,ee){super()}schedule(ue,ee=0){return this}}class O extends Z{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee,this.pending=!1}schedule(ue,ee=0){if(this.closed)return this;this.state=ue;const de=this.id,Q=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(Q,de,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(Q,this.id,ee),this}requestAsyncId(ue,ee,de=0){return setInterval(ue.flush.bind(ue,this),de)}recycleAsyncId(ue,ee,de=0){if(null!==de&&this.delay===de&&!1===this.pending)return ee;clearInterval(ee)}execute(ue,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ue,ee);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ee){let Q,de=!1;try{this.work(ue)}catch(z){de=!0,Q=!!z&&z||new Error(z)}if(de)return this.unsubscribe(),Q}_unsubscribe(){const ue=this.id,ee=this.scheduler,de=ee.actions,Q=de.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Q&&de.splice(Q,1),null!=ue&&(this.id=this.recycleAsyncId(ee,ue,null)),this.delay=null}}},6102:(We,be,F)=>{"use strict";F.d(be,{v:()=>Z});let o=(()=>{class O{constructor(ue,ee=O.now){this.SchedulerAction=ue,this.now=ee}schedule(ue,ee=0,de){return new this.SchedulerAction(this,ue).schedule(de,ee)}}return O.now=()=>Date.now(),O})();class Z extends o{constructor(ce,ue=o.now){super(ce,()=>Z.delegate&&Z.delegate!==this?Z.delegate.now():ue()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,ue=0,ee){return Z.delegate&&Z.delegate!==this?Z.delegate.schedule(ce,ue,ee):super.schedule(ce,ue,ee)}flush(ce){const{actions:ue}=this;if(this.active)return void ue.push(ce);let ee;this.active=!0;do{if(ee=ce.execute(ce.state,ce.delay))break}while(ce=ue.shift());if(this.active=!1,ee){for(;ce=ue.shift();)ce.unsubscribe();throw ee}}}},3637:(We,be,F)=>{"use strict";F.d(be,{z:()=>O,P:()=>ce});var o=F(6465);const O=new(F(6102).v)(o.o),ce=O},7771:(We,be,F)=>{"use strict";F.d(be,{c:()=>ee,N:()=>ue});var o=F(6465),O=F(6102);const ue=new class extends O.v{}(class extends o.o{constructor(Q,z){super(Q,z),this.scheduler=Q,this.work=z}schedule(Q,z=0){return z>0?super.schedule(Q,z):(this.delay=z,this.state=Q,this.scheduler.flush(this),this)}execute(Q,z){return z>0||this.closed?super.execute(Q,z):this._execute(Q,z)}requestAsyncId(Q,z,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(Q,z,L):Q.flush(this)}}),ee=ue},377:(We,be,F)=>{"use strict";F.d(be,{hZ:()=>Z});const Z="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(We,be,F)=>{"use strict";F.d(be,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(We,be,F)=>{"use strict";F.d(be,{b:()=>o});const o="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(We,be,F)=>{"use strict";F.d(be,{N:()=>Z});const Z=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(We,be,F)=>{"use strict";function o(Z){setTimeout(()=>{throw Z},0)}F.d(be,{z:()=>o})},4487:(We,be,F)=>{"use strict";function o(Z){return Z}F.d(be,{y:()=>o})},9796:(We,be,F)=>{"use strict";F.d(be,{k:()=>o});const o=Array.isArray||(Z=>Z&&"number"==typeof Z.length)},9489:(We,be,F)=>{"use strict";F.d(be,{z:()=>o});const o=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},9105:(We,be,F)=>{"use strict";function o(Z){return"function"==typeof Z}F.d(be,{m:()=>o})},6561:(We,be,F)=>{"use strict";F.d(be,{k:()=>Z});var o=F(9796);function Z(O){return!(0,o.k)(O)&&O-parseFloat(O)+1>=0}},1555:(We,be,F)=>{"use strict";function o(Z){return null!==Z&&"object"==typeof Z}F.d(be,{K:()=>o})},4072:(We,be,F)=>{"use strict";function o(Z){return!!Z&&"function"!=typeof Z.subscribe&&"function"==typeof Z.then}F.d(be,{t:()=>o})},4869:(We,be,F)=>{"use strict";function o(Z){return Z&&"function"==typeof Z.schedule}F.d(be,{K:()=>o})},8640:(We,be,F)=>{"use strict";function o(){}F.d(be,{Z:()=>o})},7444:(We,be,F)=>{"use strict";F.d(be,{s:()=>B});var o=F(5015),Z=F(4449),ce=F(377),ee=F(6554),Q=F(9489),z=F(4072),L=F(1555);const B=H=>{if(H&&"function"==typeof H[ee.L])return(H=>he=>{const Oe=H[ee.L]();if("function"!=typeof Oe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Oe.subscribe(he)})(H);if((0,Q.z)(H))return(0,o.V)(H);if((0,z.t)(H))return(H=>he=>(H.then(Oe=>{he.closed||(he.next(Oe),he.complete())},Oe=>he.error(Oe)).then(null,Z.z),he))(H);if(H&&"function"==typeof H[ce.hZ])return(H=>he=>{const Oe=H[ce.hZ]();for(;;){let Me;try{Me=Oe.next()}catch(Ee){return he.error(Ee),he}if(Me.done){he.complete();break}if(he.next(Me.value),he.closed)break}return"function"==typeof Oe.return&&he.add(()=>{Oe.return&&Oe.return()}),he})(H);{const Oe=`You provided ${(0,L.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Oe)}}},5015:(We,be,F)=>{"use strict";F.d(be,{V:()=>o});const o=Z=>O=>{for(let ce=0,ue=Z.length;ce<ue&&!O.closed;ce++)O.next(Z[ce]);O.complete()}},5697:(We,be,F)=>{"use strict";var o=F(7716);let Z=null;function O(){return Z}const de=new o.OlP("DocumentToken");let Q=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,o.Yz7)({factory:z,token:n,providedIn:"platform"}),n})();function z(){return(0,o.LFG)(B)}const L=new o.OlP("Location Initialized");let B=(()=>{class n extends Q{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(e){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,a){H()?this._history.pushState(e,r,a):this.location.hash=a}replaceState(e,r,a){H()?this._history.replaceState(e,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=(0,o.Yz7)({factory:he,token:n,providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function he(){return new B((0,o.LFG)(de))}function Oe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Me(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ee(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,o.Yz7)({factory:re,token:n,providedIn:"root"}),n})();function re(n){const t=(0,o.LFG)(de).location;return new Te((0,o.LFG)(Q),t&&t.origin||"")}const ae=new o.OlP("appBaseHref");let Te=(()=>{class n extends ge{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Oe(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Ee(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${r}${a}`:r}pushState(e,r,a,l){const h=this.prepareExternalUrl(a+Ee(l));this._platformLocation.pushState(e,r,h)}replaceState(e,r,a,l){const h=this.prepareExternalUrl(a+Ee(l));this._platformLocation.replaceState(e,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Q),o.LFG(ae,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n extends ge{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Oe(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,a,l){let h=this.prepareExternalUrl(a+Ee(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(e,r,h)}replaceState(e,r,a,l){let h=this.prepareExternalUrl(a+Ee(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Q),o.LFG(ae,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),At=(()=>{class n{constructor(e,r){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(yt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ee(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,yt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",a=null){this._platformStrategy.pushState(a,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ee(r)),a)}replaceState(e,r="",a=null){this._platformStrategy.replaceState(a,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ee(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(a=>a(e,r))}subscribe(e,r,a){return this._subject.subscribe({next:e,error:r,complete:a})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ge),o.LFG(Q))},n.normalizeQueryParams=Ee,n.joinWithSlash=Oe,n.stripTrailingSlash=Me,n.\u0275prov=(0,o.Yz7)({factory:Nt,token:n,providedIn:"root"}),n})();function Nt(){return new At((0,o.LFG)(ge),(0,o.LFG)(Q))}function yt(n){return n.replace(/\/index.html$/,"")}var pt=(()=>((pt=pt||{})[pt.Zero=0]="Zero",pt[pt.One=1]="One",pt[pt.Two=2]="Two",pt[pt.Few=3]="Few",pt[pt.Many=4]="Many",pt[pt.Other=5]="Other",pt))();const Re=o.kL8;class ai{}let mr=(()=>{class n extends ai{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Re(r||this.locale)(e)){case pt.Zero:return"zero";case pt.One:return"one";case pt.Two:return"two";case pt.Few:return"few";case pt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.soG))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Di{constructor(t,e,r,a){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _t=(()=>{class n{constructor(e,r,a){this._viewContainer=e,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((a,l,h)=>{if(null==a.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new Di(null,this._ngForOf,-1,-1),null===h?void 0:h),b=new nu(a,m);r.push(b)}else if(null==h)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const m=this._viewContainer.get(l);this._viewContainer.move(m,h);const b=new nu(a,m);r.push(b)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=l,h.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class nu{constructor(t,e){this.record=t,this.view=e}}let pn=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new ec,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Uo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Uo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ec{constructor(){this.$implicit=null,this.ngIf=null}}function Uo(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let Ur=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o.TTD]}),n})(),_r=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[{provide:ai,useClass:mr}]}),n})();function ma(n){return"server"===n}let ru=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Xu((0,o.LFG)(de),window)}),n})();class Xu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const l=a.shadowRoot;if(l){const h=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],a-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class iu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new iu,Z||(Z=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Dr=Dr||document.querySelector("base"),Dr?Dr.getAttribute("href"):null);return null==e?null:function(n){on=on||document.createElement("a"),on.setAttribute("href",n);const t=on.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Dr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[a,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(a.trim()===t)return decodeURIComponent(l)}return null}(document.cookie,t)}}let on,Dr=null;const uc=new o.OlP("TRANSITION_ID"),Si=[{provide:o.ip1,useFactory:function(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const r=O(),a=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)r.remove(a[l])})}},deps:[uc,de,o.zs3],multi:!0}];class Mn{static init(){(0,o.VLi)(new Mn)}addToWindow(t){o.dqk.getAngularTestability=(r,a=!0)=>{const l=t.findTestabilityInTree(r,a);if(null==l)throw new Error("Could not find testability for element.");return l},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const a=o.dqk.getAllAngularTestabilities();let l=a.length,h=!1;const m=function(b){h=h||b,l--,0==l&&r(h)};a.forEach(function(b){b.whenStable(m)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:r?O().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let lc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const gs=new o.OlP("EventManagerPlugins");let De=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,a){return this._findPluginFor(r).addEventListener(e,r,a)}addGlobalEventListener(e,r,a){return this._findPluginFor(r).addGlobalEventListener(e,r,a)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const a=this._plugins;for(let l=0;l<a.length;l++){const h=a[l];if(h.supports(e))return this._eventNameToPlugin.set(e,h),h}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(gs),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class xt{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const a=O().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,r)}}let au=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Cn=(()=>{class n extends au{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,a){e.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,a.push(r.appendChild(h))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(uu),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(e,a,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(uu))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function uu(n){O().remove(n)}const Gi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wr=/%COMP%/g;function or(n,t,e){for(let r=0;r<t.length;r++){let a=t[r];Array.isArray(a)?or(n,a,e):(a=a.replace(Wr,n),e.push(a))}return e}function Yr(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ms=(()=>{class n{constructor(e,r,a){this.eventManager=e,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ir(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case o.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new cu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(e),a}case 1:case o.ifc.ShadowDom:return new fc(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const a=or(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(De),o.LFG(Cn),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Ir{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gi[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,a){if(a){e=a+":"+e;const l=Gi[a];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const a=Gi[r];a?t.removeAttributeNS(a,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,a){a&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,r,a&o.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Yr(r)):this.eventManager.addEventListener(t,e,Yr(r))}}class cu extends Ir{constructor(t,e,r,a){super(t),this.component=r;const l=or(a+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Wr,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Wr,n)}(a+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class fc extends Ir{constructor(t,e,r,a){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=or(a.id,a.styles,[]);for(let h=0;h<l.length;h++){const m=document.createElement("style");m.textContent=l[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Zo=(()=>{class n extends xt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,a){return e.addEventListener(r,a,!1),()=>this.removeEventListener(e,r,a)}removeEventListener(e,r,a){return e.removeEventListener(r,a)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const $o=["alt","control","meta","shift"],fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ul=(()=>{class n extends xt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,a){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(e,l.domEventName,h))}static parseEventName(e){const r=e.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(r.pop());let h="";if($o.forEach(b=>{const D=r.indexOf(b);D>-1&&(r.splice(D,1),h+=b+".")}),h+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=a,m.fullKey=h,m}static getEventFullKey(e){let r="",a=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ar.hasOwnProperty(t)&&(t=Ar[t]))}return fu[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),$o.forEach(l=>{l!=a&&gc[l](e)&&(r+=l+".")}),r+=a,r}static eventCallback(e,r,a){return l=>{n.getEventFullKey(l)===e&&a.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Go=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function(){iu.makeCurrent(),Mn.init()},multi:!0},{provide:de,useFactory:function(){return(0,o.RDi)(document),document},deps:[]}]),vc=[[],{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function(){return new o.qLn},deps:[]},{provide:gs,useClass:Zo,multi:!0,deps:[de,o.R0b,o.Lbi]},{provide:gs,useClass:ul,multi:!0,deps:[de]},[],{provide:ms,useClass:ms,deps:[De,Cn,o.AFp]},{provide:o.FYo,useExisting:ms},{provide:au,useExisting:Cn},{provide:Cn,useClass:Cn,deps:[de]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:De,useClass:De,deps:[gs,o.R0b]},{provide:class{},useClass:lc,deps:[]},[]];let hp=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:uc,useExisting:o.AFp},Si]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:vc,imports:[_r,o.hGG]}),n})();"undefined"!=typeof window&&window;var gn=F(4402),Ge=F(5917),an=F(9765),ch=F(7971);class xn extends an.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ch.N;return this._value}next(t){super.next(this._value=t)}}var mu=F(4869),vs=F(9796),Kn=F(7393);class _u extends Kn.L{notifyNext(t,e,r,a,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class dl extends Kn.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var hl=F(7444),kt=F(7574);function Tc(n,t,e,r,a=new dl(n,e,r)){if(!a.closed)return t instanceof kt.y?t.subscribe(a):(0,hl.s)(t)(a)}var To=F(6693);const Ec={};class dh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new yu(t,this.resultSelector))}}class yu extends _u{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ec),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Tc(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const a=this.values,h=this.toRespond?a[r]===Ec?--this.toRespond:this.toRespond:0;a[r]=e,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const Wi=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Mi=F(3282);function Yi(...n){return(0,Mi.J)(1)((0,Ge.of)(...n))}var Kr=F(9193);function Eo(n){return new kt.y(t=>{let e;try{e=n()}catch(a){return void t.error(a)}return(e?(0,gn.D)(e):(0,Kr.c)()).subscribe(t)})}var fl=F(2441),at=F(8002),li=F(5345);function ir(n,t){return"function"==typeof t?e=>e.pipe(ir((r,a)=>(0,gn.D)(n(r,a)).pipe((0,at.U)((l,h)=>t(r,l,a,h))))):e=>e.lift(new hh(n))}class hh{constructor(t){this.project=t}call(t,e){return e.subscribe(new On(t,this.project))}}class On extends li.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new li.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,li.ft)(t,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const pl=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ci(n){return t=>0===n?(0,Kr.c)():t.lift(new mp(n))}class mp{constructor(t){if(this.total=t,this.total<0)throw new pl}call(t,e){return e.subscribe(new Tm(t,this.total))}}class Tm extends Kn.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function Ia(...n){const t=n[n.length-1];return(0,mu.K)(t)?(n.pop(),e=>Yi(n,e,t)):e=>Yi(n,e)}function vu(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new fh(n,t,e))}}class fh{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Em(t,this.accumulator,this.seed,this.hasSeed))}}class Em extends Kn.L{constructor(t,e,r,a){super(t),this.accumulator=e,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function Pn(n,t){return function(r){return r.lift(new Ic(n,t))}}class Ic{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Aa(t,this.predicate,this.thisArg))}}class Aa extends Kn.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Do(n){return function(e){const r=new Fn(n),a=e.lift(r);return r.caught=a}}class Fn{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Sa(t,this.selector,this.caught))}}class Sa extends li.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new li.IY(this);this.add(r);const a=(0,li.ft)(e,r);a!==r&&this.add(a)}}}var Bn=F(9773);function Ac(n,t){return(0,Bn.zg)(n,t,1)}function gl(n){return function(e){return 0===n?(0,Kr.c)():e.lift(new Ki(n))}}class Ki{constructor(t){if(this.total=t,this.total<0)throw new pl}call(t,e){return e.subscribe(new bs(t,this.total))}}class bs extends Kn.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,a=this.count++;e.length<r?e.push(t):e[a%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<r;l++){const h=e++%r;t.next(a[h])}}t.complete()}}function bu(n=Sc){return t=>t.lift(new xi(n))}class xi{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new $s(t,this.errorFactory))}}class $s extends Kn.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Sc(){return new Wi}function ph(n=null){return t=>t.lift(new zo(n))}class zo{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Dm(t,this.defaultValue))}}class Dm extends Kn.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Hs=F(4487);function Jn(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Pn((a,l)=>n(a,l,r)):Hs.y,ci(1),e?ph(t):bu(()=>new Wi))}var Qn=F(8307),Io=F(1307),_p=F(5319);class T{constructor(t){this.callback=t}call(t,e){return e.subscribe(new I(t,this.callback))}}class I extends Kn.L{constructor(t,e){super(t),this.add(new _p.w(e))}}class x{constructor(t,e){this.id=t,this.url=e}}class U extends x{constructor(t,e,r="imperative",a=null){super(t,e),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ne extends x{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fe extends x{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ae extends x{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class He extends x{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ze extends x{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vt extends x{constructor(t,e,r,a,l){super(t,e),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nn extends x{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends x{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ar{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Na{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wu{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ma{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const gt="primary";class y0{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tn(n){return new y0(n)}const yp="ngNavigationCancelingError";function Im(n){const t=Error("NavigationCancelingError: "+n);return t[yp]=!0,t}function Cu(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const a={};for(let l=0;l<r.length;l++){const h=r[l],m=n[l];if(h.startsWith(":"))a[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function Gs(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let a;for(let l=0;l<e.length;l++)if(a=e[l],!mh(n[a],t[a]))return!1;return!0}function mh(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((a,l)=>r[l]===a)}return n===t}function Am(n){return Array.prototype.concat.apply([],n)}function Tu(n){return n.length>0?n[n.length-1]:null}function Xn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Br(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,gn.D)(Promise.resolve(n)):(0,Ge.of)(n)}const _h={exact:function Sm(n,t,e){if(!Oa(n.segments,t.segments)||!xc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Sm(n.children[r],t.children[r],e))return!1;return!0},subset:Yo},yh={exact:function(n,t){return Gs(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>mh(n[e],t[e]))},ignored:()=>!0};function Mc(n,t,e){return _h[e.paths](n.root,t.root,e.matrixParams)&&yh[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Yo(n,t,e){return ka(n,t,t.segments,e)}function ka(n,t,e,r){if(n.segments.length>e.length){const a=n.segments.slice(0,e.length);return!(!Oa(a,e)||t.hasChildren()||!xc(a,e,r))}if(n.segments.length===e.length){if(!Oa(n.segments,e)||!xc(n.segments,e,r))return!1;for(const a in t.children)if(!n.children[a]||!Yo(n.children[a],t.children[a],r))return!1;return!0}{const a=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(Oa(n.segments,a)&&xc(n.segments,a,r)&&n.children[gt])&&ka(n.children[gt],t,l,r)}}function xc(n,t,e){return t.every((r,a)=>yh[e](n[a].parameters,r.parameters))}class Ra{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return wp.serialize(this)}}class Zt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Xn(e,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ko(this)}}class ml{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tn(this.parameters)),this._parameterMap}toString(){return Tp(this)}}function Oa(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class bh{}class Eu{parse(t){const e=new Nm(t);return new Ra(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${kc(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(a=>`${Cp(e)}=${Cp(a)}`).join("&"):`${Cp(e)}=${Cp(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const wp=new Eu;function Ko(n){return n.segments.map(t=>Tp(t)).join("/")}function kc(n,t){if(!n.hasChildren())return Ko(n);if(t){const e=n.children[gt]?kc(n.children[gt],!1):"",r=[];return Xn(n.children,(a,l)=>{l!==gt&&r.push(`${l}:${kc(a,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Xn(n.children,(r,a)=>{a===gt&&(e=e.concat(t(r,a)))}),Xn(n.children,(r,a)=>{a!==gt&&(e=e.concat(t(r,a)))}),e}(n,(r,a)=>a===gt?[kc(n.children[gt],!1)]:[`${a}:${kc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[gt]?`${Ko(n)}/${e[0]}`:`${Ko(n)}/(${e.join("//")})`}}function wh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cp(n){return wh(n).replace(/%3B/gi,";")}function _l(n){return wh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rc(n){return decodeURIComponent(n)}function yl(n){return Rc(n.replace(/\+/g,"%20"))}function Tp(n){return`${_l(n.path)}${function(n){return Object.keys(n).map(t=>`;${_l(t)}=${_l(n[t])}`).join("")}(n.parameters)}`}const T0=/^[^\/()?;=#]+/;function Th(n){const t=n.match(T0);return t?t[0]:""}const E0=/^[^=?&#]+/,Jo=/^[^?&#]+/;class Nm{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[gt]=new Zt(t,e)),r}parseSegment(){const t=Th(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ml(Rc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Th(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const a=Th(this.remaining);a&&(r=a,this.capture(r))}t[Rc(e)]=Rc(r)}parseQueryParam(t){const e=function(n){const t=n.match(E0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const h=function(n){const t=n.match(Jo);return t?t[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=yl(e),l=yl(r);if(t.hasOwnProperty(a)){let h=t[a];Array.isArray(h)||(h=[h],t[a]=h),h.push(l)}else t[a]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Th(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=gt);const h=this.parseChildren();e[l]=1===Object.keys(h).length?h[gt]:new Zt([],h),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Mm{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ep(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Ep(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Dp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return Dp(t,this._root).map(e=>e.value)}}function Ep(n,t){if(n===t.value)return t;for(const e of t.children){const r=Ep(n,e);if(r)return r}return null}function Dp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Dp(n,e);if(r.length)return r.unshift(t),r}return[]}class Qo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function vl(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ip extends Mm{constructor(t,e){super(t),this.snapshot=e,Oc(this,t)}toString(){return this.snapshot.toString()}}function xm(n,t){const e=function(n,t){const h=new wl([],{},{},"",{},gt,t,null,n.root,-1,{});return new Cl("",new Qo(h,[]))}(n,t),r=new xn([new ml("",{})]),a=new xn({}),l=new xn({}),h=new xn({}),m=new xn(""),b=new bl(r,a,h,m,l,gt,t,e.root);return b.snapshot=e.root,new Ip(new Qo(b,[]),e)}class bl{constructor(t,e,r,a,l,h,m,b){this.url=t,this.params=e,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=h,this.component=m,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(t=>Tn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(t=>Tn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Eh(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const a=e[r],l=e[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class wl{constructor(t,e,r,a,l,h,m,b,D,N,M){this.url=t,this.params=e,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=h,this.component=m,this.routeConfig=b,this._urlSegment=D,this._lastPathIndex=N,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cl extends Mm{constructor(t,e){super(e),this.url=t,Oc(this,e)}toString(){return zs(this._root)}}function Oc(n,t){t.value._routerState=n,t.children.forEach(e=>Oc(n,e))}function zs(n){const t=n.children.length>0?` { ${n.children.map(zs).join(", ")} } `:"";return`${n.value}${t}`}function Xo(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Gs(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Gs(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Gs(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Gs(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dh(n,t){return Gs(n.params,t.params)&&function(n,t){return Oa(n,t)&&n.every((e,r)=>Gs(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Dh(n.parent,t.parent))}function Tl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const a=function(n,t,e){return t.children.map(r=>{for(const a of e.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return Tl(n,r,a);return Tl(n,r)})}(n,t,e);return new Qo(r,a)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const h=l.route;return A0(t,h),h}}const r=function(n){return new bl(new xn(n.url),new xn(n.params),new xn(n.queryParams),new xn(n.fragment),new xn(n.data),n.outlet,n.component,n)}(t.value),a=t.children.map(l=>Tl(n,l));return new Qo(r,a)}}function A0(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)A0(n.children[e],t.children[e])}function v(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function p(n){return"object"==typeof n&&null!=n&&n.outlets}function _(n,t,e,r,a){let l={};return r&&Xn(r,(h,m)=>{l[m]=Array.isArray(h)?h.map(b=>`${b}`):`${h}`}),new Ra(e.root===n?t:C(e.root,n,t),l,a)}function C(n,t,e){const r={};return Xn(n.children,(a,l)=>{r[l]=a===t?e:C(a,t,e)}),new Zt(n.segments,r)}class S{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&v(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(p);if(a&&a!==Tu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class X{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function st(n,t,e){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return qt(n,t,e);const r=function(n,t,e){let r=0,a=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=e.length)return l;const h=n.segments[a],m=e[r];if(p(m))break;const b=`${m}`,D=r<e.length-1?e[r+1]:null;if(a>0&&void 0===b)break;if(b&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ih(b,D,h))return l;r+=2}else{if(!Ih(b,{},h))return l;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,t,e),a=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Zt(n.segments.slice(0,r.pathIndex),{});return l.children[gt]=new Zt(n.segments.slice(r.pathIndex),n.children),qt(l,0,a)}return r.match&&0===a.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?Zr(n,t,e):r.match?qt(n,0,a):Zr(n,t,e)}function qt(n,t,e){if(0===e.length)return new Zt(n.segments,{});{const r=function(n){return p(n[0])?n[0].outlets:{[gt]:n}}(e),a={};return Xn(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[h]=st(n.children[h],t,l))}),Xn(n.children,(l,h)=>{void 0===r[h]&&(a[h]=l)}),new Zt(n.segments,a)}}function Zr(n,t,e){const r=n.segments.slice(0,t);let a=0;for(;a<e.length;){const l=e[a];if(p(l)){const b=bn(l.outlets);return new Zt(r,b)}if(0===a&&v(e[0])){r.push(new ml(n.segments[t].path,Pc(e[0]))),a++;continue}const h=p(l)?l.outlets[gt]:`${l}`,m=a<e.length-1?e[a+1]:null;h&&m&&v(m)?(r.push(new ml(h,Pc(m))),a+=2):(r.push(new ml(h,{})),a++)}return new Zt(r,{})}function bn(n){const t={};return Xn(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Zr(new Zt([],{}),0,e))}),t}function Pc(n){const t={};return Xn(n,(e,r)=>t[r]=`${e}`),t}function Ih(n,t,e){return n==e.path&&Gs(t,e.parameters)}class Np{constructor(t,e,r,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=a}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Xo(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const a=vl(e);t.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,a[h],r),delete a[h]}),Xn(a,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const a=t.value,l=e?e.value:null;if(a===l)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(t,e,h.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),a=r&&t.value.component?r.children:e,l=vl(t);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const a=vl(e);t.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],r),this.forwardEvent(new qs(l.value.snapshot))}),t.children.length&&this.forwardEvent(new wu(t.value.snapshot))}activateRoutes(t,e,r){const a=t.value,l=e?e.value:null;if(Xo(a),a===l)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,h.children)}else this.activateChildRoutes(t,e,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const m=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),Sh(m.route)}else{const m=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),b=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=b,h.outlet&&h.outlet.activateWith(a,b),this.activateChildRoutes(t,null,h.children)}}else this.activateChildRoutes(t,null,r)}}function Sh(n){Xo(n.value),n.children.forEach(Sh)}class Nh{constructor(t,e){this.routes=t,this.module=e}}function Ao(n){return"function"==typeof n}function El(n){return n instanceof Ra}const Mh=Symbol("INITIAL_VALUE");function xh(){return ir(n=>function(...n){let t,e;return(0,mu.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,vs.k)(n[0])&&(n=n[0]),(0,To.n)(n,e).lift(new dh(t))}(n.map(t=>t.pipe(ci(1),Ia(Mh)))).pipe(vu((t,e)=>{let r=!1;return e.reduce((a,l,h)=>a!==Mh?a:(l===Mh&&(r=!0),r||!1!==l&&h!==e.length-1&&!El(l)?a:l),t)},Mh),Pn(t=>t!==Mh),(0,at.U)(t=>El(t)?t:!0===t),ci(1)))}let fi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&o._UZ(0,"router-outlet")},directives:function(){return[Fh]},encapsulation:2}),n})();function kh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];N0(r,OI(t,r))}}function N0(n,t){n.children&&kh(n.children,t)}function OI(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function M0(n){const t=n.children&&n.children.map(M0),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==gt&&(e.component=fi),e}function Ws(n){return n.outlet||gt}function Aw(n,t){const e=n.filter(r=>Ws(r)===t);return e.push(...n.filter(r=>Ws(r)!==t)),e}const x0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pm(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},x0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||Cu)(e,n,t);if(!l)return Object.assign({},x0);const h={};Xn(l.posParams,(b,D)=>{h[D]=b.path});const m=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Mp(n,t,e,r,a="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Rh(n,t,r)&&Ws(r)!==gt)}(n,e,r)){const h=new Zt(t,function(n,t,e,r){const a={};a[gt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&Ws(l)!==gt){const h=new Zt([],{});h._sourceSegment=n,h._segmentIndexShift=t.length,a[Ws(l)]=h}return a}(n,t,r,new Zt(e,n.children)));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Rh(n,t,r))}(n,e,r)){const h=new Zt(n.segments,function(n,t,e,r,a,l){const h={};for(const m of r)if(Rh(n,e,m)&&!a[Ws(m)]){const b=new Zt([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===l?n.segments.length:t.length,h[Ws(m)]=b}return Object.assign(Object.assign({},a),h)}(n,t,e,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:e}}const l=new Zt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Rh(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function k0(n,t,e,r){return!!(Ws(n)===r||r!==gt&&Rh(t,e,n))&&("**"===n.path||Pm(t,n,e).matched)}function Nw(n,t,e){return 0===t.length&&!n.children[e]}class Fm{constructor(t){this.segmentGroup=t||null}}class R0{constructor(t){this.urlTree=t}}function Lc(n){return new kt.y(t=>t.error(new Fm(n)))}function Mw(n){return new kt.y(t=>t.error(new R0(n)))}function VI(n){return new kt.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class BI{constructor(t,e,r,a,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=Mp(this.urlTree.root,[],[],this.config).segmentGroup,e=new Zt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,gt).pipe((0,at.U)(l=>this.createUrlTree(O0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Do(l=>{if(l instanceof R0)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Fm?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,gt).pipe((0,at.U)(a=>this.createUrlTree(O0(a),t.queryParams,t.fragment))).pipe(Do(a=>{throw a instanceof Fm?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const a=t.segments.length>0?new Zt([],{[gt]:t}):t;return new Ra(a,e,r)}expandSegmentGroup(t,e,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,at.U)(l=>new Zt([],l))):this.expandSegment(t,r,e,r.segments,a,!0)}expandChildren(t,e,r){const a=[];for(const l of Object.keys(r.children))"primary"===l?a.unshift(l):a.push(l);return(0,gn.D)(a).pipe(Ac(l=>{const h=r.children[l],m=Aw(e,l);return this.expandSegmentGroup(t,m,h,l).pipe((0,at.U)(b=>({segment:b,outlet:l})))}),vu((l,h)=>(l[h.outlet]=h.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Pn((a,l)=>n(a,l,r)):Hs.y,gl(1),e?ph(t):bu(()=>new Wi))}())}expandSegment(t,e,r,a,l,h){return(0,gn.D)(r).pipe(Ac(m=>this.expandSegmentAgainstRoute(t,e,r,m,a,l,h).pipe(Do(D=>{if(D instanceof Fm)return(0,Ge.of)(null);throw D}))),Jn(m=>!!m),Do((m,b)=>{if(m instanceof Wi||"EmptyError"===m.name){if(Nw(e,a,l))return(0,Ge.of)(new Zt([],{}));throw new Fm(e)}throw m}))}expandSegmentAgainstRoute(t,e,r,a,l,h,m){return k0(a,e,l,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,l,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,a,l,h):Lc(e):Lc(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,a,l,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,a,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,a){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Mw(l):this.lineralizeSegments(r,l).pipe((0,Bn.zg)(h=>{const m=new Zt(h,{});return this.expandSegment(t,m,e,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,a,l,h){const{matched:m,consumedSegments:b,lastChild:D,positionalParamSegments:N}=Pm(e,a,l);if(!m)return Lc(e);const M=this.applyRedirectCommands(b,a.redirectTo,N);return a.redirectTo.startsWith("/")?Mw(M):this.lineralizeSegments(a,M).pipe((0,Bn.zg)(V=>this.expandSegment(t,e,r,V.concat(l.slice(D)),h,!1)))}matchSegmentAgainstRoute(t,e,r,a,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Ge.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,at.U)(V=>(r._loadedConfig=V,new Zt(a,{})))):(0,Ge.of)(new Zt(a,{}));const{matched:h,consumedSegments:m,lastChild:b}=Pm(e,r,a);if(!h)return Lc(e);const D=a.slice(b);return this.getChildConfig(t,r,a).pipe((0,Bn.zg)(M=>{const V=M.module,$=M.routes,{segmentGroup:ie,slicedSegments:ye}=Mp(e,m,D,$),Se=new Zt(ie.segments,ie.children);if(0===ye.length&&Se.hasChildren())return this.expandChildren(V,$,Se).pipe((0,at.U)(ot=>new Zt(m,ot)));if(0===$.length&&0===ye.length)return(0,Ge.of)(new Zt(m,{}));const rt=Ws(r)===l;return this.expandSegment(V,Se,$,ye,rt?gt:l,!0).pipe((0,at.U)(St=>new Zt(m.concat(St.segments),St.children)))}))}getChildConfig(t,e,r){return e.children?(0,Ge.of)(new Nh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Ge.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Bn.zg)(a=>{return a?this.configLoader.load(t.injector,e).pipe((0,at.U)(l=>(e._loadedConfig=l,l))):(n=e,new kt.y(t=>t.error(Im(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Ge.of)(new Nh([],t))}runCanLoadGuards(t,e,r){const a=e.canLoad;if(!a||0===a.length)return(0,Ge.of)(!0);const l=a.map(h=>{const m=t.get(h);let b;if((n=m)&&Ao(n.canLoad))b=m.canLoad(e,r);else{if(!Ao(m))throw new Error("Invalid CanLoad guard");b=m(e,r)}var n;return Br(b)});return(0,Ge.of)(l).pipe(xh(),(0,Qn.b)(h=>{if(!El(h))return;const m=Im(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,at.U)(h=>!0===h))}lineralizeSegments(t,e){let r=[],a=e.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,Ge.of)(r);if(a.numberOfChildren>1||!a.children[gt])return VI(t.redirectTo);a=a.children[gt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,a){const l=this.createSegmentGroup(t,e.root,r,a);return new Ra(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Xn(t,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const m=a.substring(1);r[l]=e[m]}else r[l]=a}),r}createSegmentGroup(t,e,r,a){const l=this.createSegments(t,e.segments,r,a);let h={};return Xn(e.children,(m,b)=>{h[b]=this.createSegmentGroup(t,m,r,a)}),new Zt(l,h)}createSegments(t,e,r,a){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,a):this.findOrReturn(l,r))}findPosParam(t,e,r){const a=r[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let r=0;for(const a of e){if(a.path===t.path)return e.splice(r),a;r++}return t}}function O0(n){const t={};for(const r of Object.keys(n.children)){const l=O0(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[gt]){const t=n.children[gt];return new Zt(n.segments.concat(t.segments),t.children)}return n}(new Zt(n.segments,t))}class xp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qi{constructor(t,e){this.component=t,this.route=e}}function xw(n,t,e){const r=n._root;return Vm(r,t?t._root:null,e,[r.value])}function Lm(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function Vm(n,t,e,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=vl(t);return n.children.forEach(h=>{(function(n,t,e,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=t?t.value:null,m=e?e.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const b=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Oa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Oa(n.url,t.url)||!Gs(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(n,t)||!Gs(n.queryParams,t.queryParams);case"paramsChange":default:return!Dh(n,t)}}(h,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new xp(r)):(l.data=h.data,l._resolvedData=h._resolvedData),Vm(n,t,l.component?m?m.children:null:e,r,a),b&&m&&m.outlet&&m.outlet.isActivated&&a.canDeactivateChecks.push(new Qi(m.outlet.component,h))}else h&&kp(t,m,a),a.canActivateChecks.push(new xp(r)),Vm(n,null,l.component?m?m.children:null:e,r,a)})(h,l[h.value.outlet],e,r.concat([h.value]),a),delete l[h.value.outlet]}),Xn(l,(h,m)=>kp(h,e.getContext(m),a)),a}function kp(n,t,e){const r=vl(n),a=n.value;Xn(r,(l,h)=>{kp(l,a.component?t?t.children.getContext(h):null:t,e)}),e.canDeactivateChecks.push(new Qi(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class P0{}function Um(n){return new kt.y(t=>t.error(n))}class Pw{constructor(t,e,r,a,l,h){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const t=Mp(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,gt);if(null===e)return null;const r=new wl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Qo(r,e),l=new Cl(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=Eh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const h=e.children[l],m=Aw(t,l),b=this.processSegmentGroup(m,h,l);if(null===b)return null;r.push(...b)}const a=Bm(r);return a.sort((t,e)=>t.value.outlet===gt?-1:e.value.outlet===gt?1:t.value.outlet.localeCompare(e.value.outlet)),a}processSegment(t,e,r,a){for(const l of t){const h=this.processSegmentAgainstRoute(l,e,r,a);if(null!==h)return h}return Nw(e,r,a)?[]:null}processSegmentAgainstRoute(t,e,r,a){if(t.redirectTo||!k0(t,e,r,a))return null;let l,h=[],m=[];if("**"===t.path){const $=r.length>0?Tu(r).parameters:{};l=new wl(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(t),Ws(t),t.component,t,F0(e),zI(e)+r.length,Zm(t))}else{const $=Pm(e,t,r);if(!$.matched)return null;h=$.consumedSegments,m=r.slice($.lastChild),l=new wl(h,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(t),Ws(t),t.component,t,F0(e),zI(e)+h.length,Zm(t))}const b=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:N}=Mp(e,h,m,b.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===N.length&&D.hasChildren()){const $=this.processChildren(b,D);return null===$?null:[new Qo(l,$)]}if(0===b.length&&0===N.length)return[new Qo(l,[])];const M=Ws(t)===a,V=this.processSegment(b,D,N,M?gt:a);return null===V?null:[new Qo(l,V)]}}function Lw(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Bm(n){const t=[],e=new Set;for(const r of n){if(!Lw(r)){t.push(r);continue}const a=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...r.children),e.add(a)):t.push(r)}for(const r of e){const a=Bm(r.children);t.push(new Qo(r.value,a))}return t.filter(r=>!e.has(r))}function F0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function zI(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function Vc(n){return n.data||{}}function Zm(n){return n.resolve||{}}function V0(n){return ir(t=>{const e=n(t);return e?(0,gn.D)(e).pipe((0,at.U)(()=>t)):(0,Ge.of)(t)})}class XI extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const jm=new o.OlP("ROUTES");class $m{constructor(t,e,r,a){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe((0,at.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const h=l.create(t);return new Nh(Am(h.injector.get(jm,void 0,o.XFs.Self|o.XFs.Optional)).map(M0),h)}),Do(l=>{throw e._loader$=void 0,l}));return e._loader$=new fl.c(a,()=>new an.xQ).pipe((0,Io.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,gn.D)(this.loader.load(t)):Br(t()).pipe((0,Bn.zg)(e=>e instanceof o.YKP?(0,Ge.of)(e):(0,gn.D)(this.compiler.compileModuleAsync(e))))}}class Bw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dl,this.attachRef=null}}class Dl{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Bw,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class tA{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Zw(n){throw n}function jw(n,t,e){return t.parse("/")}function Il(n,t){return(0,Ge.of)(null)}const $w={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{class n{constructor(e,r,a,l,h,m,b,D){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=a,this.location=l,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new an.xQ,this.errorHandler=Zw,this.malformedUriErrorHandler=jw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Il,afterPreactivation:Il},this.urlHandlingStrategy=new tA,this.routeReuseStrategy=new XI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(o.h0i),this.console=h.get(o.c2e);const V=h.get(o.R0b);this.isNgZoneEnabled=V instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new Ra(new Zt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $m(m,b,$=>this.triggerEvent(new di($)),$=>this.triggerEvent(new ar($))),this.routerState=xm(this.currentUrlTree,this.rootComponentType),this.transitions=new xn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Pn(a=>0!==a.id),(0,at.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),ir(a=>{let l=!1,h=!1;return(0,Ge.of)(a).pipe((0,Qn.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ir(m=>{const b=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return qm(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,Ge.of)(m).pipe(ir(M=>{const V=this.transitions.getValue();return r.next(new U(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),V!==this.transitions.getValue()?Kr.E:Promise.resolve(M)}),function(n,t,e,r){return ir(a=>function(n,t,e,r,a){return new BI(n,t,e,r,a).apply()}(n,t,e,a.extractedUrl,r).pipe((0,at.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qn.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(n,t,e,r,a){return(0,Bn.zg)(l=>function(n,t,e,r,a="emptyOnly",l="legacy"){try{const h=new Pw(n,t,e,r,a,l).recognize();return null===h?Um(new P0):(0,Ge.of)(h)}catch(h){return Um(h)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,a).pipe((0,at.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qn.b)(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const V=new He(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(V)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:$,source:ie,restoredState:ye,extras:Se}=m,rt=new U(V,this.serializeUrl($),ie,ye);r.next(rt);const Je=xm($,this.rootComponentType).snapshot;return(0,Ge.of)(Object.assign(Object.assign({},m),{targetSnapshot:Je,urlAfterRedirects:$,extras:Object.assign(Object.assign({},Se),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),Kr.E}),V0(m=>{const{targetSnapshot:b,id:D,extractedUrl:N,rawUrl:M,extras:{skipLocationChange:V,replaceUrl:$}}=m;return this.hooks.beforePreactivation(b,{navigationId:D,appliedUrlTree:N,rawUrlTree:M,skipLocationChange:!!V,replaceUrl:!!$})}),(0,Qn.b)(m=>{const b=new ze(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),(0,at.U)(m=>Object.assign(Object.assign({},m),{guards:xw(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Bn.zg)(e=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:h}}=e;return 0===h.length&&0===l.length?(0,Ge.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,gn.D)(n).pipe((0,Bn.zg)(a=>function(n,t,e,r,a){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Ge.of)(!0);const h=l.map(m=>{const b=Lm(m,t,a);let D;if(function(n){return n&&Ao(n.canDeactivate)}(b))D=Br(b.canDeactivate(n,t,e,r));else{if(!Ao(b))throw new Error("Invalid CanDeactivate guard");D=Br(b(n,t,e,r))}return D.pipe(Jn())});return(0,Ge.of)(h).pipe(xh())}(a.component,a.route,e,t,r)),Jn(a=>!0!==a,!0))}(h,r,a,n).pipe((0,Bn.zg)(m=>m&&function(n){return"boolean"==typeof n}(m)?function(n,t,e,r){return(0,gn.D)(t).pipe(Ac(a=>Yi(function(n,t){return null!==n&&t&&t(new Na(n)),(0,Ge.of)(!0)}(a.route.parent,r),function(n,t){return null!==n&&t&&t(new Ma(n)),(0,Ge.of)(!0)}(a.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(h=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(h)).filter(h=>null!==h).map(h=>Eo(()=>{const m=h.guards.map(b=>{const D=Lm(b,h.node,e);let N;if(function(n){return n&&Ao(n.canActivateChild)}(D))N=Br(D.canActivateChild(r,n));else{if(!Ao(D))throw new Error("Invalid CanActivateChild guard");N=Br(D(r,n))}return N.pipe(Jn())});return(0,Ge.of)(m).pipe(xh())}));return(0,Ge.of)(l).pipe(xh())}(n,a.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ge.of)(!0);const a=r.map(l=>Eo(()=>{const h=Lm(l,t,e);let m;if(function(n){return n&&Ao(n.canActivate)}(h))m=Br(h.canActivate(t,n));else{if(!Ao(h))throw new Error("Invalid CanActivate guard");m=Br(h(t,n))}return m.pipe(Jn())}));return(0,Ge.of)(a).pipe(xh())}(n,a.route,e))),Jn(a=>!0!==a,!0))}(r,l,n,t):(0,Ge.of)(m)),(0,at.U)(m=>Object.assign(Object.assign({},e),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Qn.b)(m=>{if(El(m.guardsResult)){const D=Im(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const b=new Vt(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(b)}),Pn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),V0(m=>{if(m.guards.canActivateChecks.length)return(0,Ge.of)(m).pipe((0,Qn.b)(b=>{const D=new nn(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}),ir(b=>{let D=!1;return(0,Ge.of)(b).pipe(function(n,t){return(0,Bn.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=e;if(!a.length)return(0,Ge.of)(e);let l=0;return(0,gn.D)(a).pipe(Ac(h=>function(n,t,e,r){return function(n,t,e,r){const a=Object.keys(n);if(0===a.length)return(0,Ge.of)({});const l={};return(0,gn.D)(a).pipe((0,Bn.zg)(h=>function(n,t,e,r){const a=Lm(n,t,r);return Br(a.resolve?a.resolve(t,e):a(t,e))}(n[h],t,e,r).pipe((0,Qn.b)(m=>{l[h]=m}))),gl(1),(0,Bn.zg)(()=>Object.keys(l).length===a.length?(0,Ge.of)(l):Kr.E))}(n._resolve,n,t,r).pipe((0,at.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Eh(n,e).resolve),null)))}(h.route,r,n,t)),(0,Qn.b)(()=>l++),gl(1),(0,Bn.zg)(h=>l===a.length?(0,Ge.of)(e):Kr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qn.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,Qn.b)(b=>{const D=new sr(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}))}),V0(m=>{const{targetSnapshot:b,id:D,extractedUrl:N,rawUrl:M,extras:{skipLocationChange:V,replaceUrl:$}}=m;return this.hooks.afterPreactivation(b,{navigationId:D,appliedUrlTree:N,rawUrlTree:M,skipLocationChange:!!V,replaceUrl:!!$})}),(0,at.U)(m=>{const b=function(n,t,e){const r=Tl(n,t._root,e?e._root:void 0);return new Ip(r,t)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:b})}),(0,Qn.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,t,e)=>(0,at.U)(r=>(new Np(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Qn.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new T(n))}(()=>{var m;if(!l&&!h){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===a.id&&(this.currentNavigation=null)}),Do(m=>{if(h=!0,function(n){return n&&n[yp]}(m)){const b=El(m.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const D=new fe(a.id,this.serializeUrl(a.extractedUrl),m.message);r.next(D),b?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),M={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qm(a.source)};this.scheduleNavigation(N,"imperative",null,M,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new Ae(a.id,this.serializeUrl(a.extractedUrl),m);r.next(b);try{a.resolve(this.errorHandler(m))}catch(D){a.reject(D)}}return Kr.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:l,urlTree:h}=r,m={replaceUrl:!0};if(l){const b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(m.state=b)}this.scheduleNavigation(h,a,l,m)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const a=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!a||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){kh(e),this.config=e.map(M0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:a,queryParams:l,fragment:h,queryParamsHandling:m,preserveFragment:b}=r,D=a||this.routerState.root,N=b?this.currentUrlTree.fragment:h;let M=null;switch(m){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=l||null}return null!==M&&(M=this.removeEmptyProps(M)),function(n,t,e,r,a){if(0===e.length)return _(t.root,t.root,t,r,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new S(!0,0,n);let t=0,e=!1;const r=n.reduce((a,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Xn(l.outlets,(b,D)=>{m[D]="string"==typeof b?b.split("/"):b}),[...a,{outlets:m}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===h?(l.split("/").forEach((m,b)=>{0==b&&"."===m||(0==b&&""===m?e=!0:".."===m?t++:""!=m&&a.push(m))}),a):[...a,l]},[]);return new S(e,t,r)}(e);if(l.toRoot())return _(t.root,new Zt([],{}),t,r,a);const h=function(n,t,e){if(n.isAbsolute)return new X(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new X(l,l===t.root,0)}const r=v(n.commands[0])?0:1;return function(n,t,e){let r=n,a=t,l=e;for(;l>a;){if(l-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new X(r,!1,a-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),m=h.processChildren?qt(h.segmentGroup,h.index,l.commands):st(h.segmentGroup,h.index,l.commands);return _(h.segmentGroup,m,t,r,a)}(D,this.currentUrlTree,e,M,null!=N?N:null)}navigateByUrl(e,r={skipLocationChange:!1}){const a=El(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return r}isActive(e,r){let a;if(a=!0===r?Object.assign({},$w):!1===r?Object.assign({},Hw):r,El(e))return Mc(this.currentUrlTree,e,a);const l=this.parseUrl(e);return Mc(this.currentUrlTree,l,a)}removeEmptyProps(e){return Object.keys(e).reduce((r,a)=>{const l=e[a];return null!=l&&(r[a]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,a,l,h){var m,b;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),N=qm(r)&&D&&!qm(D.source),$=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===e.toString();if(N&&$)return Promise.resolve(!0);let ie,ye,Se;h?(ie=h.resolve,ye=h.reject,Se=h.promise):Se=new Promise((St,ot)=>{ie=St,ye=ot});const rt=++this.navigationId;let Je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Je=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):Je=0,this.setTransition({id:rt,targetPageId:Je,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:ie,reject:ye,promise:Se,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Se.catch(St=>Promise.reject(St))}setBrowserUrl(e,r){const a=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(e,r=!1){var a,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const a=new fe(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.DyG),o.LFG(bh),o.LFG(Dl),o.LFG(At),o.LFG(o.zs3),o.LFG(o.v3s),o.LFG(o.Sil),o.LFG(void 0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function qm(n){return"imperative"!==n}let Fh=(()=>{class n{constructor(e,r,a,l,h){this.parentContexts=e,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.name=l||gt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const h=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,b=new Wm(e,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Dl),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Wm{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===bl?this.route:t===Dl?this.childContexts:this.parent.get(t,e)}}class B0{}class j0{preload(t,e){return(0,Ge.of)(null)}}let Ym=(()=>{class n{constructor(e,r,a,l,h){this.router=e,this.injector=l,this.preloadingStrategy=h,this.loader=new $m(r,a,D=>e.triggerEvent(new di(D)),D=>e.triggerEvent(new ar(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(e=>e instanceof ne),Ac(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(o.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const a=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(e,l)):l.children&&a.push(this.processRoutes(e,l.children));return(0,gn.D)(a).pipe((0,Mi.J)(),(0,at.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Ge.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Bn.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vr),o.LFG(o.v3s),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(B0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Bc=(()=>{class n{constructor(e,r,a={}){this.router=e,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof U?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ne&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof hi&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new hi(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vr),o.LFG(ru),o.LFG(void 0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Al=new o.OlP("ROUTER_CONFIGURATION"),Gw=new o.OlP("ROUTER_FORROOT_GUARD"),zw=[At,{provide:bh,useClass:Eu},{provide:vr,useFactory:function(n,t,e,r,a,l,h,m={},b,D){const N=new vr(null,n,t,e,r,a,l,Am(h));return b&&(N.urlHandlingStrategy=b),D&&(N.routeReuseStrategy=D),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(m,N),m.enableTracing&&N.events.subscribe(M=>{var V,$;null===(V=console.group)||void 0===V||V.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===($=console.groupEnd)||void 0===$||$.call(console)}),N},deps:[bh,Dl,At,o.zs3,o.v3s,o.Sil,jm,Al,[class{},new o.FiY],[class{},new o.FiY]]},Dl,{provide:bl,useFactory:function(n){return n.routerState.root},deps:[vr]},{provide:o.v3s,useClass:o.EAV},Ym,j0,class{preload(t,e){return e().pipe(Do(()=>(0,Ge.of)(null)))}},{provide:Al,useValue:{enableTracing:!1}}];function $0(){return new o.PXZ("Router",vr)}let H0=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[zw,q0(e),{provide:Gw,useFactory:rA,deps:[[vr,new o.FiY,new o.tp0]]},{provide:Al,useValue:r||{}},{provide:ge,useFactory:Ww,deps:[Q,[new o.tBr(ae),new o.FiY],Al]},{provide:Bc,useFactory:gx,deps:[vr,ru,Al]},{provide:B0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:j0},{provide:o.PXZ,multi:!0,useFactory:$0},[G0,{provide:o.ip1,multi:!0,useFactory:Yw,deps:[G0]},{provide:Kw,useFactory:oA,deps:[G0]},{provide:o.tb,multi:!0,useExisting:Kw}]]}}static forChild(e){return{ngModule:n,providers:[q0(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Gw,8),o.LFG(vr,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function gx(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Bc(n,t,e)}function Ww(n,t,e={}){return e.useHash?new ke(n,t):new Te(n,t)}function rA(n){return"guarded"}function q0(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:jm,multi:!0,useValue:n}]}let G0=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new an.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(m=>r=m),l=this.injector.get(vr),h=this.injector.get(Al);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Ge.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),a})}bootstrapListener(e){const r=this.injector.get(Al),a=this.injector.get(Ym),l=this.injector.get(Bc),h=this.injector.get(vr),m=this.injector.get(o.z2F);e===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),l.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Yw(n){return n.appInitializer.bind(n)}function oA(n){return n.bootstrapListener.bind(n)}const Kw=new o.OlP("Router Initializer");var oe=F(8239),Km=F(7841),Jm=F(3637),er=F(9396);function wt(){return n=>n.lift(new Jw)}class Jw{call(t,e){return e.subscribe(new Qw(t))}}class Qw extends Kn.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class ta{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Xw(t,this.compare,this.keySelector))}}class Xw extends Kn.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:a}=this;e=a?a(t):t}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}var $e,Xi=F(8939),Va=(F(4828),F(3394)),Ys=F(8026),jc=F(3910),Ua=F(5422),Et=F(3854),tC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Sl={},Lh=Lh||{},vt=tC||self;function Vh(){}function nC(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Op(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var iC="closure_uid_"+(1e9*Math.random()>>>0),uA=0;function _x(n,t,e){return n.call.apply(n.bind,arguments)}function sC(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(t,a)}}return function(){return n.apply(t,arguments)}}function Jr(n,t,e){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_x:sC).apply(null,arguments)}function Qm(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function jr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,a,l){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return t.prototype[a].apply(r,h)}}function $c(){this.s=this.s,this.o=this.o}var vx={};$c.prototype.s=!1,$c.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,iC)&&n[iC]||(n[iC]=++uA)}(this);delete vx[n]}},$c.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lA=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},cA=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in a&&t.call(e,a[l],l,n)};function dA(n){return Array.prototype.concat.apply([],arguments)}function oC(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function z0(n){return/^[\s\xa0]*$/.test(n)}var pi,hA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ws(n,t){return-1!=n.indexOf(t)}function Ba(n,t){return n<t?-1:n>t?1:0}e:{var aC=vt.navigator;if(aC){var W0=aC.userAgent;if(W0){pi=W0;break e}}pi=""}function Pp(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function Y0(n){const t={};for(const e in n)t[e]=n[e];return t}var Xm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uC(n,t){let e,r;for(let a=1;a<arguments.length;a++){for(e in r=arguments[a],r)n[e]=r[e];for(let l=0;l<Xm.length;l++)e=Xm[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function Za(n){return Za[" "](n),n}Za[" "]=Vh;var Nl,n,fA=ws(pi,"Opera"),Fp=ws(pi,"Trident")||ws(pi,"MSIE"),e_=ws(pi,"Edge"),K0=e_||Fp,J0=ws(pi,"Gecko")&&!(ws(pi.toLowerCase(),"webkit")&&!ws(pi,"Edge"))&&!(ws(pi,"Trident")||ws(pi,"MSIE"))&&!ws(pi,"Edge"),pA=ws(pi.toLowerCase(),"webkit")&&!ws(pi,"Edge");function cC(){var n=vt.document;return n?n.documentMode:void 0}e:{var Ml="",Lp=(n=pi,J0?/rv:([^\);]+)(\)|;)/.exec(n):e_?/Edge\/([\d\.]+)/.exec(n):Fp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pA?/WebKit\/(\S+)/.exec(n):fA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Lp&&(Ml=Lp?Lp[1]:""),Fp){var xl=cC();if(null!=xl&&xl>parseFloat(Ml)){Nl=String(xl);break e}}Nl=Ml}var Vp={};function Uh(){return t=Vp,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=hA(String(Nl)).split("."),e=hA("9").split("."),r=Math.max(t.length,e.length);for(let h=0;0==n&&h<r;h++){var a=t[h]||"",l=e[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=Ba(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Ba(0==a[2].length,0==l[2].length)||Ba(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var t}var dC=vt.document&&Fp&&(cC()||parseInt(Nl,10))||void 0,ev=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",Vh,t),vt.removeEventListener("test",Vh,t)}catch(e){}return n}();function Qr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Bh(n,t){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(J0){e:{try{Za(t.nodeName);var a=!0;break e}catch(l){}a=!1}a||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:t_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bh.Z.h.call(this)}}Qr.prototype.h=function(){this.defaultPrevented=!0},jr(Bh,Qr);var t_={2:"touch",3:"pen",4:"mouse"};Bh.prototype.h=function(){Bh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Up="closure_listenable_"+(1e6*Math.random()|0),hC=0;function wx(n,t,e,r,a){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=a,this.key=++hC,this.ca=this.fa=!1}function Bp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Zp(n){this.src=n,this.g={},this.h=0}function tv(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],a=lA(r,t);(l=0<=a)&&Array.prototype.splice.call(r,a,1),l&&(Bp(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function n_(n,t,e,r){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return a}return-1}Zp.prototype.add=function(n,t,e,r,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=n_(n,t,r,a);return-1<h?(t=n[h],e||(t.fa=!1)):((t=new wx(t,this.src,l,!!r,a)).fa=e,n.push(t)),t};var nv="closure_lm_"+(1e6*Math.random()|0),rv={};function Cs(n,t,e,r,a){if(r&&r.once)return mA(n,t,e,r,a);if(Array.isArray(t)){for(var l=0;l<t.length;l++)Cs(n,t[l],e,r,a);return null}return e=iv(e),n&&n[Up]?n.N(t,e,Op(r)?!!r.capture:!!r,a):fC(n,t,e,!1,r,a)}function fC(n,t,e,r,a,l){if(!t)throw Error("Invalid event type");var h=Op(a)?!!a.capture:!!a,m=jp(n);if(m||(n[nv]=m=new Zp(n)),(e=m.add(t,e,r,h,l)).proxy)return e;if(r=function(){var t=vA;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)ev||(a=h),void 0===a&&(a=!1),n.addEventListener(t.toString(),r,a);else if(n.attachEvent)n.attachEvent(yA(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function mA(n,t,e,r,a){if(Array.isArray(t)){for(var l=0;l<t.length;l++)mA(n,t[l],e,r,a);return null}return e=iv(e),n&&n[Up]?n.O(t,e,Op(r)?!!r.capture:!!r,a):fC(n,t,e,!0,r,a)}function _A(n,t,e,r,a){if(Array.isArray(t))for(var l=0;l<t.length;l++)_A(n,t[l],e,r,a);else r=Op(r)?!!r.capture:!!r,e=iv(e),n&&n[Up]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=n_(l=n.g[t],e,r,a))&&(Bp(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=jp(n))&&(t=n.g[t.toString()],n=-1,t&&(n=n_(t,e,r,a)),(e=-1<n?t[n]:null)&&r_(e))}function r_(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Up])tv(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(yA(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=jp(t))?(tv(e,n),0==e.h&&(e.src=null,t[nv]=null)):Bp(n)}}}function yA(n){return n in rv?rv[n]:rv[n]="on"+n}function vA(n,t){if(n.ca)n=!0;else{t=new Bh(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&r_(n),n=e.call(r,t)}return n}function jp(n){return(n=n[nv])instanceof Zp?n:null}var i_="__closure_events_fn_"+(1e9*Math.random()>>>0);function iv(n){return"function"==typeof n?n:(n[i_]||(n[i_]=function(t){return n.handleEvent(t)}),n[i_])}function Xr(){$c.call(this),this.i=new Zp(this),this.P=this,this.I=null}function gi(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Qr(t,n);else if(t instanceof Qr)t.target=t.target||n;else{var a=t;uC(t=new Qr(r,n),a)}if(a=!0,e)for(var l=e.length-1;0<=l;l--){var h=t.g=e[l];a=$p(h,r,!0,t)&&a}if(a=$p(h=t.g=n,r,!0,t)&&a,a=$p(h,r,!1,t)&&a,e)for(l=0;l<e.length;l++)a=$p(h=t.g=e[l],r,!1,t)&&a}function $p(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,l=0;l<t.length;++l){var h=t[l];if(h&&!h.ca&&h.capture==e){var m=h.listener,b=h.ia||h.src;h.fa&&tv(n.i,h),a=!1!==m.call(b,r)&&a}}return a&&!r.defaultPrevented}jr(Xr,$c),Xr.prototype[Up]=!0,Xr.prototype.removeEventListener=function(n,t,e,r){_A(this,n,t,e,r)},Xr.prototype.M=function(){if(Xr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)Bp(e[r]);delete n.g[t],n.h--}}this.I=null},Xr.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},Xr.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var sv=vt.JSON.stringify;function pC(){var n=yC;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var So,gC=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mC,n=>n.reset());class mC{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function _C(n){vt.setTimeout(()=>{throw n},0)}function ov(n,t){So||function(){var n=vt.Promise.resolve(void 0);So=function(){n.then(Cx)}}(),uv||(So(),uv=!0),yC.add(n,t)}var uv=!1,yC=new class{constructor(){this.h=this.g=null}add(t,e){const r=gC.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function Cx(){for(var n;n=pC();){try{n.h.call(n.g)}catch(e){_C(e)}var t=gC;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}uv=!1}function Hp(n,t){Xr.call(this),this.h=n||1,this.g=t||vt,this.j=Jr(this.kb,this),this.l=Date.now()}function lv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function cv(n,t,e){if("function"==typeof n)e&&(n=Jr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(t)?-1:vt.setTimeout(n,t||0)}function vC(n){n.g=cv(()=>{n.g=null,n.i&&(n.i=!1,vC(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}jr(Hp,Xr),($e=Hp.prototype).da=!1,$e.S=null,$e.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gi(this,"tick"),this.da&&(lv(this),this.start()))}},$e.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$e.M=function(){Hp.Z.M.call(this),lv(this),delete this.g};class dv extends $c{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:vC(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qp(n){$c.call(this),this.h=n,this.g={}}jr(qp,$c);var bC=[];function Gp(n,t,e,r){Array.isArray(e)||(e&&(bC[0]=e.toString()),e=bC);for(var a=0;a<e.length;a++){var l=Cs(t,e[a],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function s_(n){Pp(n.g,function(t,e){this.g.hasOwnProperty(e)&&r_(t)},n),n.g={}}function o_(){this.g=!0}function Hc(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<a.length;h++)a[h]=""}}}return sv(e)}catch(m){return t}}(n,e)+(r?" "+r:"")})}qp.prototype.M=function(){qp.Z.M.call(this),s_(this)},qp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},o_.prototype.Aa=function(){this.g=!1},o_.prototype.info=function(){};var Iu={},TA=null;function a_(){return TA=TA||new Xr}function pv(n){Qr.call(this,Iu.Ma,n)}function Zh(n){const t=a_();gi(t,new pv(t,n))}function gv(n,t){Qr.call(this,Iu.STAT_EVENT,n),this.stat=t}function ki(n){const t=a_();gi(t,new gv(t,n))}function mv(n,t){Qr.call(this,Iu.Na,n),this.size=t}function Ks(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},t)}Iu.Ma="serverreachability",jr(pv,Qr),Iu.STAT_EVENT="statevent",jr(gv,Qr),Iu.Na="timingevent",jr(mv,Qr);var qc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function _v(){}function Gc(){}_v.prototype.h=null;var yv,jh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zc(){Qr.call(this,"d")}function Wc(){Qr.call(this,"c")}function $h(){}function Hh(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new qp(this),this.P=TC,this.W=new Hp(n=K0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new CC}function CC(){this.i=null,this.g="",this.h=!1}jr(zc,Qr),jr(Wc,Qr),jr($h,_v),$h.prototype.g=function(){return new XMLHttpRequest},$h.prototype.i=function(){return{}},yv=new $h;var TC=45e3,vv={},qh={};function bv(n,t,e){n.K=1,n.v=Yp(na(t)),n.s=e,n.U=!0,EC(n,null)}function EC(n,t){n.F=Date.now(),zp(n),n.A=na(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ev(e.h,"t",r),n.C=0,e=n.l.H,n.h=new CC,n.g=kv(n.l,e?t:null,!n.s),0<n.O&&(n.L=new dv(Jr(n.Ia,n,n.g),n.O)),Gp(n.V,n.g,"readystatechange",n.gb),t=n.H?Y0(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Zh(1),function(n,t,e,r,a,l){n.info(function(){if(n.g)if(l)for(var h="",m=l.split("&"),b=0;b<m.length;b++){var D=m[b].split("=");if(1<D.length){var N=D[0];D=D[1];var M=N.split("_");h=2<=M.length&&"type"==M[1]?h+(N+"=")+D+"&":h+(N+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+e+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function wv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Yc(n,t,e){let a,r=!0;for(;!n.I&&n.C<e.length;){if(a=DC(n,e),a==qh){4==t&&(n.o=4,ki(14),r=!1),Hc(n.j,n.m,null,"[Incomplete Response]");break}if(a==vv){n.o=4,ki(15),Hc(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Hc(n.j,n.m,a,null),Cv(n,a)}wv(n)&&a!=qh&&a!=vv&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ki(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Ol(t),t.L=!0,ki(11))):(Hc(n.j,n.m,e,"[Invalid Chunked Response]"),Kc(n),Wp(n))}function DC(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?qh:(e=Number(t.substring(e,r)),isNaN(e)?vv:(r+=1)+e>t.length?qh:(t=t.substr(r,e),n.C=r+e,t))}function zp(n){n.Y=Date.now()+n.P,IC(n,n.P)}function IC(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ks(Jr(n.eb,n),t)}function Au(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function Wp(n){0==n.l.G||n.I||Sv(n.l,n)}function Kc(n){Au(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,lv(n.W),s_(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Cv(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||Dv(e.i,n)))if(e.I=n.N,!n.J&&Dv(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(e.u)e.ta=a[1],0<e.ta-e.U&&37500>a[2]&&e.N&&0==e.A&&!e.v&&(e.v=Ks(Jr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Su(e),ja(e)}Rl(e),ki(18)}if(1>=h_(e.i)&&e.ka){try{e.ka()}catch(D){}e.ka=void 0}}else Pl(e,11)}else if((n.J||e.g==n)&&Su(e),!z0(t))for(a=e.Ca.g.parse(t),t=0;t<a.length;t++){let D=a[t];if(e.U=D[0],D=D[1],2==e.G)if("c"==D[0]){e.J=D[1],e.la=D[2];const N=D[3];null!=N&&(e.ma=N,e.h.info("VER="+e.ma));const M=D[4];null!=M&&(e.za=M,e.h.info("SVER="+e.za));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(e.K=r=1.5*V,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const $=n.g;if($){const ie=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var l=r.i;!l.g&&(ws(ie,"spdy")||ws(ie,"quic")||ws(ie,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(f_(l,l.h),l.h=null))}if(r.D){const ye=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Zn(r.F,r.D,ye))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var h=n;if((r=e).oa=xv(r,r.H?r.la:null,r.W),h.J){Iv(r.i,h);var m=h,b=r.K;b&&m.setTimeout(b),m.B&&(Au(m),zp(m)),r.g=h}else td(r);0<e.l.length&&Jh(e)}else"stop"!=D[0]&&"close"!=D[0]||Pl(e,7);else 3==e.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Pl(e,7):ei(e):"noop"!=D[0]&&e.j&&e.j.wa(D),e.A=0)}Zh(4)}catch(D){}}function AC(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(nC(n)||"string"==typeof n)cA(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(nC(n)||"string"==typeof n){e=[];for(var r=n.length,a=0;a<r;a++)e.push(a)}else for(a in e=[],r=0,n)e[r++]=a;a=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(nC(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<a;l++)t.call(void 0,r[l],e&&e[l],n)}}function Gh(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Gh)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function u_(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];En(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var a={};for(e=t=0;t<n.g.length;)En(a,r=n.g[t])||(n.g[e++]=r,a[r]=1),t++;n.g.length=e}}function En(n,t){return Object.prototype.hasOwnProperty.call(n,t)}($e=Hh.prototype).setTimeout=function(n){this.P=n},$e.gb=function(n){n=n.target;const t=this.L;t&&3==Qs(n)?t.l():this.Ia(n)},$e.Ia=function(n){try{if(n==this.g)e:{const N=Qs(this.g);var t=this.g.Da();const M=this.g.ba();if(!(3>N)&&(3!=N||K0||this.g&&(this.h.h||this.g.ga()||ZC(this.g)))){this.I||4!=N||7==t||Zh(8==t||0>=M?3:2),Au(this);var e=this.g.ba();this.N=e;t:if(wv(this)){var r=ZC(this.g);n="";var a=r.length,l=4==Qs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kc(this),Wp(this);var h="";break t}this.h.i=new vt.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==e,function(n,t,e,r,a,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+e+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,N,e),this.i){if(this.$&&!this.J){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z0(m)){var D=m;break t}}D=null}if(!(e=D)){this.i=!1,this.o=3,ki(12),Kc(this),Wp(this);break e}Hc(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cv(this,e)}this.U?(Yc(this,N,h),K0&&this.i&&3==N&&(Gp(this.V,this.W,"tick",this.fb),this.W.start())):(Hc(this.j,this.m,h,null),Cv(this,h)),4==N&&Kc(this),this.i&&!this.I&&(4==N?Sv(this.l,this):(this.i=!1,zp(this)))}else 400==e&&0<h.indexOf("Unknown SID")?(this.o=3,ki(12)):(this.o=0,ki(13)),Kc(this),Wp(this)}}}catch(N){}},$e.fb=function(){if(this.g){var n=Qs(this.g),t=this.g.ga();this.C<t.length&&(Au(this),Yc(this,n,t),this.i&&4!=n&&zp(this))}},$e.cancel=function(){this.I=!0,Kc(this)},$e.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Zh(3),ki(17)),Kc(this),this.o=2,Wp(this)):IC(this,this.Y-n)},($e=Gh.prototype).R=function(){u_(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},$e.T=function(){return u_(this),this.g.concat()},$e.get=function(n,t){return En(this.h,n)?this.h[n]:t},$e.set=function(n,t){En(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},$e.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var a=e[r],l=this.get(a);n.call(t,l,a,this)}};var l_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function es(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof es){this.g=void 0!==t?t:n.g,zh(this,n.j),this.s=n.s,Tv(this,n.i),c_(this,n.m),this.l=n.l,t=n.h;var e=new Xp;e.i=t.i,t.g&&(e.g=new Gh(t.g),e.h=t.h),SC(this,e),this.o=n.o}else n&&(e=String(n).match(l_))?(this.g=!!t,zh(this,e[1]||"",!0),this.s=Kp(e[2]||""),Tv(this,e[3]||"",!0),c_(this,e[4]),this.l=Kp(e[5]||"",!0),SC(this,e[6]||"",!0),this.o=Kp(e[7]||"")):(this.g=!!t,this.h=new Xp(null,this.g))}function na(n){return new es(n)}function zh(n,t,e){n.j=e?Kp(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Tv(n,t,e){n.i=e?Kp(t,!0):t}function c_(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function SC(n,t,e){t instanceof Xp?(n.h=t,function(n,t){t&&!n.j&&(kl(n),n.i=null,n.g.forEach(function(e,r){var a=r.toLowerCase();r!=a&&(PC(this,r),Ev(this,a,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Jp(t,RC)),n.h=new Xp(t,n.g))}function Zn(n,t,e){n.h.set(t,e)}function Yp(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kp(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jp(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,Qp),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Qp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}es.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Jp(t,d_,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Jp(t,d_,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Jp(e,"/"==e.charAt(0)?kC:xC,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Jp(e,OC)),n.join("")};var d_=/[#\/\?@]/g,xC=/[#\?:]/g,kC=/[#\?]/g,RC=/[#\?@]/g,OC=/#/g;function Xp(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function kl(n){n.g||(n.g=new Gh,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),a=null;if(0<=r){var l=n[e].substring(0,r);a=n[e].substring(r+1)}else l=n[e];t(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function PC(n,t){kl(n),t=eg(n,t),En(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,En((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&u_(n)))}function FC(n,t){return kl(n),t=eg(n,t),En(n.g.h,t)}function Ev(n,t,e){PC(n,t),0<e.length&&(n.i=null,n.g.set(eg(n,t),oC(e)),n.h+=e.length)}function eg(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function VC(n){this.l=n||Ex,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($e=Xp.prototype).add=function(n,t){kl(this),this.i=null,n=eg(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},$e.forEach=function(n,t){kl(this),this.g.forEach(function(e,r){cA(e,function(a){n.call(t,a,r,this)},this)},this)},$e.T=function(){kl(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var a=n[r],l=0;l<a.length;l++)e.push(t[r]);return e},$e.R=function(n){kl(this);var t=[];if("string"==typeof n)FC(this,n)&&(t=dA(t,this.g.get(eg(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=dA(t,n[e])}return t},$e.set=function(n,t){return kl(this),this.i=null,FC(this,n=eg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},$e.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},$e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],a=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=a;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var Ex=10;function AA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function h_(n){return n.h?1:n.g?n.g.size:0}function Dv(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function f_(n,t){n.g?n.g.add(t):n.h=t}function Iv(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function SA(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return oC(n.i)}function Js(){}function Dx(){this.g=new Js}function Ix(n,t,e){const r=e||"";try{AC(n,function(a,l){let h=a;Op(a)&&(h=sv(a)),t.push(r+l+"="+encodeURIComponent(h))})}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function tg(n,t,e,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(l){}}function Wh(n){this.l=n.$b||null,this.j=n.ib||!1}function ng(n,t){Xr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}VC.prototype.cancel=function(){if(this.i=SA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Js.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},Js.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},jr(Wh,_v),Wh.prototype.g=function(){return new ng(this.l,this.j)},Wh.prototype.i=function(n){return function(){return n}}({}),jr(ng,Xr);var Av=0;function NA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Yh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jc(n)}function Jc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}($e=ng.prototype).open=function(n,t){if(this.readyState!=Av)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Jc(this)},$e.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||vt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},$e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yh(this)),this.readyState=Av},$e.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jc(this)),this.g&&(this.readyState=3,Jc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},$e.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Yh(this):Jc(this),3==this.readyState&&NA(this)}},$e.Ua=function(n){this.g&&(this.response=this.responseText=n,Yh(this))},$e.Ta=function(n){this.g&&(this.response=n,Yh(this))},$e.ha=function(){this.g&&Yh(this)},$e.setRequestHeader=function(n,t){this.v.append(n,t)},$e.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},$e.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(ng.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MA=vt.JSON.parse;function ur(n){Xr.call(this),this.headers=new Gh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=UC,this.K=this.L=!1}jr(ur,Xr);var UC="",xA=/^https?$/i,kA=["POST","PUT"];function OA(n){return"content-type"==n.toLowerCase()}function BC(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,rg(n),ig(n)}function rg(n){n.D||(n.D=!0,gi(n,"complete"),gi(n,"error"))}function Qc(n){if(n.h&&void 0!==Lh&&(!n.C[1]||4!=Qs(n)||2!=n.ba()))if(n.v&&4==Qs(n))cv(n.Fa,0,n);else if(gi(n,"readystatechange"),4==Qs(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===m){var a=String(n.H).match(l_)[1]||null;if(!a&&vt.self&&vt.self.location){var l=vt.self.location.protocol;a=l.substr(0,l.length-1)}r=!xA.test(a?a.toLowerCase():"")}e=r}if(e)gi(n,"complete"),gi(n,"success");else{n.m=6;try{var h=2<Qs(n)?n.g.statusText:""}catch(b){h=""}n.j=h+" ["+n.ba()+"]",rg(n)}}finally{ig(n)}}}function ig(n,t){if(n.g){No(n);const e=n.g,r=n.C[0]?Vh:null;n.g=null,n.C=null,t||gi(n,"ready");try{e.onreadystatechange=r}catch(a){}}}function No(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Qs(n){return n.g?n.g.readyState:0}function ZC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case UC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function sg(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return Pp(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Zn(n,t,e))}function Ts(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function Kh(n){this.za=0,this.l=[],this.h=new o_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ts("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ts("baseRetryDelayMs",5e3,n),this.$a=Ts("retryDelaySeedMs",1e4,n),this.Ya=Ts("forwardChannelMaxRetries",2,n),this.ra=Ts("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new VC(n&&n.concurrentRequestLimit),this.Ca=new Dx,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ei(n){if(og(n),3==n.G){var t=n.V++,e=na(n.F);Zn(e,"SID",n.J),Zn(e,"RID",t),Zn(e,"TYPE","terminate"),$a(n,e),(t=new Hh(n,n.h,t,void 0)).K=2,t.v=Yp(na(e)),e=!1,vt.navigator&&vt.navigator.sendBeacon&&(e=vt.navigator.sendBeacon(t.v.toString(),"")),!e&&vt.Image&&((new Image).src=t.v,e=!0),e||(t.g=kv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),zp(t)}Mv(n)}function ja(n){n.g&&(Ol(n),n.g.cancel(),n.g=null)}function og(n){ja(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Su(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function Es(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Jh(n)}function Jh(n){AA(n.i)||n.m||(n.m=!0,ov(n.Ha,n),n.C=0)}function Xc(n,t){var e;e=t?t.m:n.V++;const r=na(n.F);Zn(r,"SID",n.J),Zn(r,"RID",e),Zn(r,"AID",n.U),$a(n,r),n.o&&n.s&&sg(r,n.o,n.s),e=new Hh(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=ed(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),f_(n.i,e),bv(e,r,t)}function $a(n,t){n.j&&AC({},function(e,r){Zn(t,r,e)})}function ed(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const h=["count="+e];-1==l?0<e?(l=a[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let m=!0;for(let b=0;b<e;b++){let D=a[b].h;const N=a[b].g;if(D-=l,0>D)l=Math.max(0,a[b].h-100),m=!1;else try{Ix(N,h,"req"+D+"_")}catch(M){r&&r(N)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function td(n){n.g||n.u||(n.Y=1,ov(n.Ga,n),n.A=0)}function Rl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ks(Jr(n.Ga,n),Nv(n,n.A)),n.A++,0))}function Ol(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function nd(n){n.g=new Hh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=na(n.oa);Zn(t,"RID","rpc"),Zn(t,"SID",n.J),Zn(t,"CI",n.N?"0":"1"),Zn(t,"AID",n.U),$a(n,t),Zn(t,"TYPE","xmlhttp"),n.o&&n.s&&sg(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Yp(na(t)),e.s=null,e.U=!0,EC(e,n)}function Su(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function Sv(n,t){var e=null;if(n.g==t){Su(n),Ol(n),n.g=null;var r=2}else{if(!Dv(n.i,t))return;e=t.D,Iv(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var a=n.C;gi(r=a_(),new mv(r,e,t,a)),Jh(n)}else td(n);else if(3==(a=t.o)||0==a&&0<n.I||!(1==r&&function(n,t){return!(h_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ks(Jr(n.Ha,n,t),Nv(n,n.C)),n.C++,0)))}(n,t)||2==r&&Rl(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),a){case 1:Pl(n,5);break;case 4:Pl(n,10);break;case 3:Pl(n,6);break;default:Pl(n,2)}}function Nv(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Pl(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Jr(n.jb,n);e||(e=new es("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||zh(e,"https"),Yp(e)),function(n,t){const e=new o_;if(vt.Image){const r=new Image;r.onload=Qm(tg,e,r,"TestLoadImage: loaded",!0,t),r.onerror=Qm(tg,e,r,"TestLoadImage: error",!1,t),r.onabort=Qm(tg,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qm(tg,e,r,"TestLoadImage: timeout",!1,t),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else ki(2);n.G=0,n.j&&n.j.va(t),Mv(n),og(n)}function Mv(n){n.G=0,n.I=-1,n.j&&((0!=SA(n.i).length||0!=n.l.length)&&(n.i.i.length=0,oC(n.l),n.l.length=0),n.j.ua())}function xv(n,t,e){let r=function(n){return n instanceof es?na(n):new es(n,void 0)}(e);if(""!=r.i)t&&Tv(r,t+"."+r.i),c_(r,r.m);else{const a=vt.location;r=function(n,t,e,r){var a=new es(null,void 0);return n&&zh(a,n),t&&Tv(a,t),e&&c_(a,e),r&&(a.l=r),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,e)}return n.aa&&Pp(n.aa,function(a,l){Zn(r,l,a)}),e=n.sa,(t=n.D)&&e&&Zn(r,t,e),Zn(r,"VER",n.ma),$a(n,r),r}function kv(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ur(e&&n.Ba&&!n.qa?new Wh({ib:!0}):n.qa)).L=n.H,t}function Rv(){}function ag(){if(Fp&&!(10<=Number(dC)))throw Error("Environmental error: no available transport.")}function Ds(n,t){Xr.call(this),this.g=new Kh(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!z0(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!z0(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Xh(this)}function jC(n){zc.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function Ov(){Wc.call(this),this.status=1}function Xh(n){this.g=n}($e=ur.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yv.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:yv),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void BC(this,l)}n=e||"";const a=new Gh(this.headers);r&&AC(r,function(l,h){a.set(h,l)}),r=function(n){e:{var t=OA;const e=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<e;a++)if(a in r&&t.call(void 0,r[a],a,n)){t=a;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(a.T()),e=vt.FormData&&n instanceof vt.FormData,!(0<=lA(kA,t))||r||e||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{No(this),0<this.B&&((this.K=function(n){return Fp&&Uh()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=cv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){BC(this,l)}},$e.pa=function(){void 0!==Lh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gi(this,"timeout"),this.abort(8))},$e.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,gi(this,"complete"),gi(this,"abort"),ig(this))},$e.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ig(this,!0)),ur.Z.M.call(this)},$e.Fa=function(){this.s||(this.F||this.v||this.l?Qc(this):this.cb())},$e.cb=function(){Qc(this)},$e.ba=function(){try{return 2<Qs(this)?this.g.status:-1}catch(n){return-1}},$e.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},$e.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),MA(t)}},$e.Da=function(){return this.m},$e.La=function(){return"string"==typeof this.j?this.j:String(this.j)},($e=Kh.prototype).ma=8,$e.G=1,$e.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},$e.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Hh(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Y0(l),uC(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=ed(this,a,t),Zn(e=na(this.F),"RID",n),Zn(e,"CVER",22),this.D&&Zn(e,"X-HTTP-Session-Id",this.D),$a(this,e),this.o&&l&&sg(e,this.o,l),f_(this.i,a),this.Ra&&Zn(e,"TYPE","init"),this.ja?(Zn(e,"$req",t),Zn(e,"SID","null"),a.$=!0,bv(a,e,null)):bv(a,e,t),this.G=2}}else 3==this.G&&(n?Xc(this,n):0==this.l.length||AA(this.i)||Xc(this))},$e.Ga=function(){if(this.u=null,nd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ks(Jr(this.bb,this),n)}},$e.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ki(10),ja(this),nd(this))},$e.ab=function(){null!=this.v&&(this.v=null,ja(this),Rl(this),ki(19))},$e.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ki(2)):(this.h.info("Failed to ping google.com"),ki(1))},($e=Rv.prototype).xa=function(){},$e.wa=function(){},$e.va=function(){},$e.ua=function(){},$e.Oa=function(){},ag.prototype.g=function(n,t){return new Ds(n,t)},jr(Ds,Xr),Ds.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ov(Jr(n.hb,n,t))),ki(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=xv(n,null,n.W),Jh(n)},Ds.prototype.close=function(){ei(this.g)},Ds.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,Es(this.g,t)}else this.v?((t={}).__data__=sv(n),Es(this.g,t)):Es(this.g,n)},Ds.prototype.M=function(){this.g.j=null,delete this.j,ei(this.g),delete this.g,Ds.Z.M.call(this)},jr(jC,zc),jr(Ov,Wc),jr(Xh,Rv),Xh.prototype.xa=function(){gi(this.g,"a")},Xh.prototype.wa=function(n){gi(this.g,new jC(n))},Xh.prototype.va=function(n){gi(this.g,new Ov(n))},Xh.prototype.ua=function(){gi(this.g,"b")},ag.prototype.createWebChannel=ag.prototype.g,Ds.prototype.send=Ds.prototype.u,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,wC.COMPLETE="complete",Gc.EventType=jh,jh.OPEN="a",jh.CLOSE="b",jh.ERROR="c",jh.MESSAGE="d",Xr.prototype.listen=Xr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.La,ur.prototype.getLastErrorCode=ur.prototype.Da,ur.prototype.getStatus=ur.prototype.ba,ur.prototype.getResponseJson=ur.prototype.Qa,ur.prototype.getResponseText=ur.prototype.ga,ur.prototype.send=ur.prototype.ea;var $C=Sl.createWebChannelTransport=function(){return new ag},HC=Sl.getStatEventTarget=function(){return a_()},Pv=Sl.ErrorCode=qc,Sx=Sl.EventType=wC,FA=Sl.Event=Iu,Fv=Sl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},LA=Sl.FetchXmlHttpFactory=Wh,ug=Sl.WebChannel=Gc,VA=Sl.XhrIo=ur;const qC="@firebase/firestore";class Ri{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let ef="9.6.0";const Nu=new Ua.Yd("@firebase/firestore");function GC(){return Nu.logLevel}function Le(n,...t){if(Nu.logLevel<=Ua.in.DEBUG){const e=t.map(Lv);Nu.debug(`Firestore (${ef}): ${n}`,...e)}}function Sr(n,...t){if(Nu.logLevel<=Ua.in.ERROR){const e=t.map(Lv);Nu.error(`Firestore (${ef}): ${n}`,...e)}}function p_(n,...t){if(Nu.logLevel<=Ua.in.WARN){const e=t.map(Lv);Nu.warn(`Firestore (${ef}): ${n}`,...e)}}function Lv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function tt(n="Unexpected state"){const t=`FIRESTORE (${ef}) INTERNAL ASSERTION FAILED: `+n;throw Sr(t),new Error(t)}function ft(n,t){n||tt()}function Be(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class zC{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class WC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ri.UNAUTHENTICATED))}shutdown(){}}class Mx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class UA{constructor(t){this.t=t,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let a=this.i;const l=D=>this.i!==a?(a=this.i,e(D)):Promise.resolve();let h=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new mi,t.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const D=h;t.enqueueRetryable((0,oe.Z)(function*(){yield D.promise,yield l(r.currentUser)}))},b=D=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>b(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?b(D):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new mi)}},0),m()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft("string"==typeof r.accessToken),new zC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ft(null===t||"string"==typeof t),new Ri(t)}}class tf{constructor(t,e,r){this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class BA{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new tf(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZA{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=a=>{t.enqueueRetryable(()=>{return null!=(l=a).error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),e(l.token);var l})};const r=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?r(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ft("string"==typeof e.token),new Uv(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Oi{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.p(r),this.T=r=>e.writeSequenceNumber(r))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function $A(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Oi.I=-1;class Bv{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const a=$A(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<e&&(r+=t.charAt(a[l]%t.length))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function nf(n,t,e){return n.length===t.length&&n.every((r,a)=>e(r,t[a]))}function YC(n){return n+"\0"}class ti{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ti.fromMillis(Date.now())}static fromDate(t){return ti.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new ti(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ft(t)}static min(){return new Ft(new ti(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zv(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function rd(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function jv(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class rf{constructor(t,e,r){void 0===e?e=0:e>t.length&&tt(),void 0===r?r=t.length-e:r>t.length-e&&tt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===rf.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof rf?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const l=t.get(a),h=e.get(a);if(l<h)return-1;if(l>h)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class un extends rf{construct(t,e,r){return new un(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(a=>a.length>0))}return new un(e)}static emptyPath(){return new un([])}}const xx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $r extends rf{construct(t,e,r){return new $r(t,e,r)}static isValidIdentifier(t){return xx.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$r.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $r(["__name__"])}static fromServerFormat(t){const e=[];let r="",a=0;const l=()=>{if(0===r.length)throw new xe(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;a<t.length;){const m=t[a];if("\\"===m){if(a+1===t.length)throw new xe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const b=t[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new xe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=b,a+=2}else"`"===m?(h=!h,a++):"."!==m||h?(r+=m,a++):(l(),a++)}if(l(),h)throw new xe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $r(e)}static emptyPath(){return new $r([])}}class sf{constructor(t){this.fields=t,t.sort($r.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return nf(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class lr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new lr(e)}static fromUint8Array(t){const e=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(t);return new lr(e)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const HA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(n){if(ft(!!n),"string"==typeof n){let t=0;const e=HA.exec(n);if(ft(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function af(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function lg(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function g_(n){const t=n.mapValue.fields.__previous_value__;return lg(t)?g_(t):t}function uf(n){const t=Ha(n.mapValue.fields.__local_write_time__.timestampValue);return new ti(t.seconds,t.nanos)}function lf(n){return null==n}function m_(n){return 0===n&&1/n==-1/0}function __(n){return"number"==typeof n&&Number.isInteger(n)&&!m_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(t){this.path=t}static fromPath(t){return new Ke(un.fromString(t))}static fromName(t){return new Ke(un.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===un.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return un.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ke(new un(t.slice()))}}function id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:10:tt()}function ra(n,t){const e=id(n);if(e!==id(t))return!1;switch(e){case 0:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return uf(n).isEqual(uf(t));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Ha(r.timestampValue),h=Ha(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return a=t,af(n.bytesValue).isEqual(af(a.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,a){return cr(r.geoPointValue.latitude)===cr(a.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(a.geoPointValue.longitude)}(n,t);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return cr(r.integerValue)===cr(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=cr(r.doubleValue),h=cr(a.doubleValue);return l===h?m_(l)===m_(h):isNaN(l)&&isNaN(h)}return!1}(n,t);case 9:return nf(n.arrayValue.values||[],t.arrayValue.values||[],ra);case 10:return function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(Zv(l)!==Zv(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===h[m]||!ra(l[m],h[m])))return!1;return!0}(n,t);default:return tt()}var a}function sd(n,t){return void 0!==(n.values||[]).find(e=>ra(e,t))}function od(n,t){const e=id(n),r=id(t);if(e!==r)return Kt(e,r);switch(e){case 0:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(a,l){const h=cr(a.integerValue||a.doubleValue),m=cr(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,t);case 3:return y_(n.timestampValue,t.timestampValue);case 4:return y_(uf(n),uf(t));case 5:return Kt(n.stringValue,t.stringValue);case 6:return function(a,l){const h=af(a),m=af(l);return h.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(a,l){const h=a.split("/"),m=l.split("/");for(let b=0;b<h.length&&b<m.length;b++){const D=Kt(h[b],m[b]);if(0!==D)return D}return Kt(h.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,l){const h=Kt(cr(a.latitude),cr(l.latitude));return 0!==h?h:Kt(cr(a.longitude),cr(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(a,l){const h=a.values||[],m=l.values||[];for(let b=0;b<h.length&&b<m.length;++b){const D=od(h[b],m[b]);if(D)return D}return Kt(h.length,m.length)}(n.arrayValue,t.arrayValue);case 10:return function(a,l){const h=a.fields||{},m=Object.keys(h),b=l.fields||{},D=Object.keys(b);m.sort(),D.sort();for(let N=0;N<m.length&&N<D.length;++N){const M=Kt(m[N],D[N]);if(0!==M)return M;const V=od(h[m[N]],b[D[N]]);if(0!==V)return V}return Kt(m.length,D.length)}(n.mapValue,t.mapValue);default:throw tt()}}function y_(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Kt(n,t);const e=Ha(n),r=Ha(t),a=Kt(e.seconds,r.seconds);return 0!==a?a:Kt(e.nanos,r.nanos)}function cg(n){return v_(n)}function v_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Ha(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?af(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let a="[",l=!0;for(const h of r.values||[])l?l=!1:a+=",",a+=v_(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const m of a)h?h=!1:l+=",",l+=`${m}:${v_(r.fields[m])}`;return l+"}"}(n.mapValue):tt();var t}function b_(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function w_(n){return!!n&&"integerValue"in n}function C_(n){return!!n&&"arrayValue"in n}function T_(n){return!!n&&"nullValue"in n}function $v(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function E_(n){return!!n&&"mapValue"in n}function cf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return rd(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=cf(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=cf(n.arrayValue.values[e]);return t}return Object.assign({},n)}class _i{constructor(t){this.value=t}static empty(){return new _i({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!E_(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=cf(e)}setAll(t){let e=$r.emptyPath(),r={},a=[];t.forEach((h,m)=>{if(!e.isImmediateParentOf(m)){const b=this.getFieldsMap(e);this.applyChanges(b,r,a),r={},a=[],e=m.popLast()}h?r[m.lastSegment()]=cf(h):a.push(m.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,a)}delete(t){const e=this.field(t.popLast());E_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ra(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=e.mapValue.fields[t.get(r)];E_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,r){rd(e,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new _i(cf(this.value))}}function D_(n){const t=[];return rd(n.fields,(e,r)=>{const a=new $r([e]);if(E_(r)){const l=D_(r.mapValue).fields;if(0===l.length)t.push(a);else for(const h of l)t.push(a.child(h))}else t.push(a)}),new sf(t)}class Ln{constructor(t,e,r,a,l){this.key=t,this.documentType=e,this.version=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Ln(t,0,Ft.min(),_i.empty(),0)}static newFoundDocument(t,e,r){return new Ln(t,1,e,r,0)}static newNoDocument(t,e){return new Ln(t,2,e,_i.empty(),0)}static newUnknownDocument(t,e){return new Ln(t,3,e,_i.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new Ln(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class KC{constructor(t,e=null,r=[],a=[],l=null,h=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=h,this.endAt=m,this.R=null}}function Hv(n,t=null,e=[],r=[],a=null,l=null,h=null){return new KC(n,t,e,r,a,l,h)}function df(n){const t=Be(n);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+cg(n.value)}(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),lf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=pg(t.startAt)),t.endAt&&(e+="|ub:",e+=pg(t.endAt)),t.R=e}return t.R}function dg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!eT(n.orderBy[a],t.orderBy[a]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((e=n.filters[a]).op!==(r=t.filters[a]).op||!e.field.isEqual(r.field)||!ra(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ad(n.startAt,t.startAt)&&ad(n.endAt,t.endAt)}function hg(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Pi extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,r):new Rx(t,e,r):"array-contains"===e?new zA(t,r):"in"===e?new Hr(t,r):"not-in"===e?new XC(t,r):"array-contains-any"===e?new WA(t,r):new Pi(t,e,r)}static P(t,e,r){return"in"===e?new qA(t,r):new GA(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(od(e,this.value)):null!==e&&id(this.value)===id(e)&&this.v(od(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return tt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Rx extends Pi{constructor(t,e,r){super(t,e,r),this.key=Ke.fromName(r.referenceValue)}matches(t){const e=Ke.comparator(t.key,this.key);return this.v(e)}}class qA extends Pi{constructor(t,e){super(t,"in",e),this.keys=qv(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class GA extends Pi{constructor(t,e){super(t,"not-in",e),this.keys=qv(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function qv(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class zA extends Pi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return C_(e)&&sd(e.arrayValue,this.value)}}class Hr extends Pi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&sd(this.value.arrayValue,e)}}class XC extends Pi{constructor(t,e){super(t,"not-in",e)}matches(t){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!sd(this.value.arrayValue,e)}}class WA extends Pi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!C_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>sd(this.value.arrayValue,r))}}class fg{constructor(t,e){this.position=t,this.before=e}}function pg(n){return`${n.before?"b":"a"}:${n.position.map(t=>cg(t)).join(",")}`}class hf{constructor(t,e="asc"){this.field=t,this.dir=e}}function eT(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function Gv(n,t,e){let r=0;for(let a=0;a<n.position.length;a++){const l=t[a],h=n.position[a];if(r=l.field.isKeyField()?Ke.comparator(Ke.fromName(h.referenceValue),e.key):od(h,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function ad(n,t){if(null===n)return null===t;if(null===t||n.before!==t.before||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ra(n.position[e],t.position[e]))return!1;return!0}class Mu{constructor(t,e=null,r=[],a=[],l=null,h="F",m=null,b=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=b,this.S=null,this.D=null}}function tT(n,t,e,r,a,l,h,m){return new Mu(n,t,e,r,a,l,h,m)}function ud(n){return new Mu(n)}function I_(n){return!lf(n.limit)&&"F"===n.limitType}function gg(n){return!lf(n.limit)&&"L"===n.limitType}function nT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mg(n){for(const t of n.filters)if(t.V())return t.field;return null}function _g(n){return null!==n.collectionGroup}function ts(n){const t=Be(n);if(null===t.S){t.S=[];const e=mg(t),r=nT(t);if(null!==e&&null===r)e.isKeyField()||t.S.push(new hf(e)),t.S.push(new hf($r.keyField(),"asc"));else{let a=!1;for(const l of t.explicitOrderBy)t.S.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new hf($r.keyField(),l))}}}return t.S}function Mo(n){const t=Be(n);if(!t.D)if("F"===t.limitType)t.D=Hv(t.path,t.collectionGroup,ts(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of ts(t))e.push(new hf(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new fg(t.endAt.position,!t.endAt.before):null,a=t.startAt?new fg(t.startAt.position,!t.startAt.before):null;t.D=Hv(t.path,t.collectionGroup,e,t.filters,t.limit,r,a)}return t.D}function zv(n,t,e){return new Mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Is(n,t){return dg(Mo(n),Mo(t))&&n.limitType===t.limitType}function xo(n){return`${df(Mo(n))}|lt:${n.limitType}`}function Xs(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${cg(r.value)}`;var r}).join(", ")}]`),lf(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: "+pg(n.startAt)),n.endAt&&(t+=", endAt: "+pg(n.endAt)),`Target(${t})`}(Mo(n))}; limitType=${n.limitType})`}function ff(n,t){return t.isFoundDocument()&&function(e,r){const a=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):Ke.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a)}(n,t)&&function(e,r){for(const a of e.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,t)&&function(e,r){for(const a of e.filters)if(!a.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!Gv(e.startAt,ts(e),r)||e.endAt&&Gv(e.endAt,ts(e),r)));var e,r}function Wv(n){return(t,e)=>{let r=!1;for(const a of ts(n)){const l=YA(a,t,e);if(0!==l)return l;r=r||a.field.isKeyField()}return 0}}function YA(n,t,e){const r=n.field.isKeyField()?Ke.comparator(t.key,e.key):function(a,l,h){const m=l.data.field(a),b=h.data.field(a);return null!==m&&null!==b?od(m,b):tt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function rT(n,t){if(n.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m_(t)?"-0":t}}function iT(n){return{integerValue:""+n}}function sT(n,t){return __(t)?iT(t):rT(n,t)}class pf{constructor(){this._=void 0}}function yg(n,t,e){return n instanceof gf?function(r,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(e,t):n instanceof Fl?Kv(n,t):n instanceof qa?oT(n,t):function(r,a){const l=Yv(r,a),h=Jv(l)+Jv(r.N);return w_(l)&&w_(r.N)?iT(h):rT(r.k,h)}(n,t)}function KA(n,t,e){return n instanceof Fl?Kv(n,t):n instanceof qa?oT(n,t):e}function Yv(n,t){return n instanceof ld?w_(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class gf extends pf{}class Fl extends pf{constructor(t){super(),this.elements=t}}function Kv(n,t){const e=A_(t);for(const r of n.elements)e.some(a=>ra(a,r))||e.push(r);return{arrayValue:{values:e}}}class qa extends pf{constructor(t){super(),this.elements=t}}function oT(n,t){let e=A_(t);for(const r of n.elements)e=e.filter(a=>!ra(a,r));return{arrayValue:{values:e}}}class ld extends pf{constructor(t,e){super(),this.k=t,this.N=e}}function Jv(n){return cr(n.integerValue||n.doubleValue)}function A_(n){return C_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ll{constructor(t,e){this.field=t,this.transform=e}}class uT{constructor(t,e){this.version=t,this.transformResults=e}}class dr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new dr}static exists(t){return new dr(void 0,t)}static updateTime(t){return new dr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vg(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class bg{}function lT(n,t,e){n instanceof wg?function(r,a,l){const h=r.value.clone(),m=fT(r.fieldTransforms,a,l.transformResults);h.setAll(m),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,t,e):n instanceof xu?function(r,a,l){if(!vg(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=fT(r.fieldTransforms,a,l.transformResults),m=a.data;m.setAll(hT(r)),m.setAll(h),a.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function S_(n,t,e){var a;n instanceof wg?function(r,a,l){if(!vg(r.precondition,a))return;const h=r.value.clone(),m=pT(r.fieldTransforms,l,a);h.setAll(m),a.convertToFoundDocument(dT(a),h).setHasLocalMutations()}(n,t,e):n instanceof xu?function(r,a,l){if(!vg(r.precondition,a))return;const h=pT(r.fieldTransforms,l,a),m=a.data;m.setAll(hT(r)),m.setAll(h),a.convertToFoundDocument(dT(a),m).setHasLocalMutations()}(n,t,e):vg(n.precondition,a=t)&&a.convertToNoDocument(Ft.min())}function cT(n,t){let e=null;for(const r of n.fieldTransforms){const a=t.data.field(r.field),l=Yv(r.transform,a||null);null!=l&&(null==e&&(e=_i.empty()),e.set(r.field,l))}return e||null}function Qv(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&nf(e,r,(a,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof Fl&&r instanceof Fl||e instanceof qa&&r instanceof qa?nf(e.elements,r.elements,ra):e instanceof ld&&r instanceof ld?ra(e.N,r.N):e instanceof gf&&r instanceof gf);var e,r}(a,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function dT(n){return n.isFoundDocument()?n.version:Ft.min()}class wg extends bg{constructor(t,e,r,a=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=a,this.type=0}}class xu extends bg{constructor(t,e,r,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}}function hT(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function fT(n,t,e){const r=new Map;ft(n.length===e.length);for(let a=0;a<e.length;a++){const l=n[a],h=l.transform,m=t.data.field(l.field);r.set(l.field,KA(h,m,e[a]))}return r}function pT(n,t,e){const r=new Map;for(const a of n){const l=a.transform,h=e.data.field(a.field);r.set(a.field,yg(l,h,t))}return r}class Cg extends bg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Xv extends bg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class gT{constructor(t){this.count=t}}var Nr,rn;function mT(n){switch(n){default:return tt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function _T(n){if(void 0===n)return Sr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Nr.OK:return me.OK;case Nr.CANCELLED:return me.CANCELLED;case Nr.UNKNOWN:return me.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return me.INTERNAL;case Nr.UNAVAILABLE:return me.UNAVAILABLE;case Nr.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Nr.NOT_FOUND:return me.NOT_FOUND;case Nr.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Nr.ABORTED:return me.ABORTED;case Nr.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Nr.DATA_LOSS:return me.DATA_LOSS;default:return tt()}}(rn=Nr||(Nr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class qr{constructor(t,e){this.comparator=t,this.root=e||yi.EMPTY}insert(t,e){return new qr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(t){return new qr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,yi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(0===a)return e+r.left.size;a<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new N_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new N_(this.root,t,this.comparator,!1)}getReverseIterator(){return new N_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new N_(this.root,t,this.comparator,!0)}}class N_{constructor(t,e,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class yi{constructor(t,e,r,a,l){this.key=t,this.value=e,this.color=null!=r?r:yi.RED,this.left=null!=a?a:yi.EMPTY,this.right=null!=l?l:yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,a,l){return new yi(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,r),null):0===l?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===e(t,a.key)){if(a.right.isEmpty())return yi.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const t=this.left.check();if(t!==this.right.check())throw tt();return t+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,t,e,r,a){return this}insert(n,t,e){return new yi(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(t){this.comparator=t,this.data=new qr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new eb(this.data.getIterator())}getIteratorFrom(t){return new eb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof hr)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new hr(this.comparator);return e.data=t,e}}class eb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const yT=new qr(Ke.comparator);function eo(){return yT}const vT=new qr(Ke.comparator);function M_(){return vT}const bT=new qr(Ke.comparator);function tb(){return bT}const wT=new hr(Ke.comparator);function Dn(...n){let t=wT;for(const e of n)t=t.add(e);return t}const nb=new hr(Kt);function Tg(){return nb}class ia{constructor(t,e,r,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,Eg.createSynthesizedTargetChangeForCurrentChange(t,e)),new ia(Ft.min(),r,Tg(),eo(),Dn())}}class Eg{constructor(t,e,r,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Eg(lr.EMPTY_BYTE_STRING,e,Dn(),Dn(),Dn())}}class x_{constructor(t,e,r,a){this.$=t,this.removedTargetIds=e,this.key=r,this.F=a}}class cd{constructor(t,e){this.targetId=t,this.O=e}}class JA{constructor(t,e,r=lr.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=a}}class k_{constructor(){this.M=0,this.L=ib(),this.B=lr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=Dn(),e=Dn(),r=Dn();return this.L.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:r=r.add(a);break;default:tt()}}),new Eg(this.B,this.U,t,e,r)}H(){this.q=!1,this.L=ib()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Ox{constructor(t){this.et=t,this.nt=new Map,this.st=eo(),this.it=rb(),this.rt=new hr(Kt)}ot(t){for(const e of t.$)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ut(t){this.forEachTarget(t,e=>{const r=this.ht(e);switch(t.state){case 0:this.lt(e)&&r.W(t.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(t.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(e);break;case 3:this.lt(e)&&(r.tt(),r.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),r.W(t.resumeToken));break;default:tt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach((r,a)=>{this.lt(a)&&e(a)})}dt(t){const e=t.targetId,r=t.O.count,a=this.wt(e);if(a){const l=a.target;if(hg(l))if(0===r){const h=new Ke(l.path);this.ct(e,h,Ln.newNoDocument(h,Ft.min()))}else ft(1===r);else this._t(e)!==r&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach((l,h)=>{const m=this.wt(h);if(m){if(l.current&&hg(m.target)){const b=new Ke(m.target.path);null!==this.st.get(b)||this.yt(h,b)||this.ct(h,b,Ln.newNoDocument(b,t))}l.j&&(e.set(h,l.G()),l.H())}});let r=Dn();this.it.forEach((l,h)=>{let m=!0;h.forEachWhile(b=>{const D=this.wt(b);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(l))});const a=new ia(t,e,this.rt,this.st,r);return this.st=eo(),this.it=rb(),this.rt=new hr(Kt),a}at(t,e){if(!this.lt(t))return;const r=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,r),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.lt(t))return;const a=this.ht(t);this.yt(t,e)?a.J(e,1):a.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),r&&(this.st=this.st.insert(e,r))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new k_,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new hr(Kt),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||Le("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new k_),this.et.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function rb(){return new qr(Ke.comparator)}function ib(){return new qr(Ke.comparator)}const Px={asc:"ASCENDING",desc:"DESCENDING"},dt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class QA{constructor(t,e){this.databaseId=t,this.C=e}}function Dg(n,t){return n.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CT(n,t){return n.C?t.toBase64():t.toUint8Array()}function R_(n,t){return Dg(n,t.toTimestamp())}function ni(n){return ft(!!n),Ft.fromTimestamp(function(t){const e=Ha(t);return new ti(e.seconds,e.nanos)}(n))}function mf(n,t){return(e=n,new un(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Ig(n){const t=un.fromString(n);return ft(db(t)),t}function Un(n,t){return mf(n.databaseId,t.path)}function ku(n,t){const e=Ig(t);if(e.get(1)!==n.databaseId.projectId)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ke(sb(e))}function O_(n,t){return mf(n.databaseId,t)}function P_(n){const t=Ig(n);return 4===t.length?un.emptyPath():sb(t)}function Ag(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sb(n){return ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ob(n,t,e){return{name:Un(n,t),fields:e.value.mapValue.fields}}function ab(n,t,e){const r=ku(n,t.name),a=ni(t.updateTime),l=new _i({mapValue:{fields:t.fields}}),h=Ln.newFoundDocument(r,a,l);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function F_(n,t){let e;if(t instanceof wg)e={update:ob(n,t.key,t.value)};else if(t instanceof Cg)e={delete:Un(n,t.key)};else if(t instanceof xu)e={update:ob(n,t.key,t.data),updateMask:ST(t.fieldMask)};else{if(!(t instanceof Xv))return tt();e={verify:Un(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof gf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ld)return{fieldPath:l.field.canonicalString(),increment:h.N};throw tt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(a=t.precondition).updateTime?{updateTime:R_(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:tt()),e;var a}function ET(n,t){const e=t.currentDocument?void 0!==(a=t.currentDocument).updateTime?dr.updateTime(ni(a.updateTime)):void 0!==a.exists?dr.exists(a.exists):dr.none():dr.none(),r=t.updateTransforms?t.updateTransforms.map(a=>function(l,h){let m=null;"setToServerValue"in h?(ft("REQUEST_TIME"===h.setToServerValue),m=new gf):"appendMissingElements"in h?m=new Fl(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new qa(h.removeAllFromArray.values||[]):"increment"in h?m=new ld(l,h.increment):tt();const b=$r.fromServerFormat(h.fieldPath);return new Ll(b,m)}(n,a)):[];var a;if(t.update){const a=ku(n,t.update.name),l=new _i({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=new sf((t.updateMask.fieldPaths||[]).map(D=>$r.fromServerFormat(D)));return new xu(a,l,h,e,r)}return new wg(a,l,e,r)}if(t.delete){const a=ku(n,t.delete);return new Cg(a,e)}if(t.verify){const a=ku(n,t.verify);return new Xv(a,e)}return tt()}function DT(n,t){return{documents:[O_(n,t.path)]}}function IT(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=O_(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=O_(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(m){if(0===m.length)return;const b=m.map(D=>function(N){if("=="===N.op){if($v(N.value))return{unaryFilter:{field:Ga(N.field),op:"IS_NAN"}};if(T_(N.value))return{unaryFilter:{field:Ga(N.field),op:"IS_NULL"}}}else if("!="===N.op){if($v(N.value))return{unaryFilter:{field:Ga(N.field),op:"IS_NOT_NAN"}};if(T_(N.value))return{unaryFilter:{field:Ga(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(N.field),op:Ng(N.op),value:N.value}}}(D));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);a&&(e.structuredQuery.where=a);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:Ga((D=b).field),direction:eS(D.dir)};var D})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const h=(b=t.limit,n.C||lf(b)?b:{value:b});var b;return null!==h&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=lb(t.startAt)),t.endAt&&(e.structuredQuery.endAt=lb(t.endAt)),e}function AT(n){let t=P_(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let a=null;if(r>0){ft(1===r);const N=e.from[0];N.allDescendants?a=N.collectionId:t=t.child(N.collectionId)}let l=[];e.where&&(l=ub(e.where));let h=[];e.orderBy&&(h=e.orderBy.map(N=>{return new hf(_f((M=N).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;e.limit&&(m=function(N){let M;return M="object"==typeof N?N.value:N,lf(M)?null:M}(e.limit));let b=null;e.startAt&&(b=cb(e.startAt));let D=null;return e.endAt&&(D=cb(e.endAt)),tT(t,a,h,l,m,"F",b,D)}function ub(n){return n?void 0!==n.unaryFilter?[nS(n)]:void 0!==n.fieldFilter?[tS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>ub(t)).reduce((t,e)=>t.concat(e)):tt():[]}function lb(n){return{before:n.before,values:n.position}}function cb(n){return new fg(n.values||[],!!n.before)}function eS(n){return Px[n]}function Ng(n){return dt[n]}function Ga(n){return{fieldPath:n.canonicalString()}}function _f(n){return $r.fromServerFormat(n.fieldPath)}function tS(n){return Pi.create(_f(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function nS(n){switch(n.unaryFilter.op){case"IS_NAN":const t=_f(n.unaryFilter.field);return Pi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=_f(n.unaryFilter.field);return Pi.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_f(n.unaryFilter.field);return Pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_f(n.unaryFilter.field);return Pi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function ST(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function db(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ko(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=hb(t)),t=rS(n.get(e),t);return hb(t)}function rS(n,t){let e=t;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function hb(n){return n+"\x01\x01"}function Ru(n){const t=n.length;if(ft(t>=2),2===t)return ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const e=t-2,r=[];let a="";for(let l=0;l<t;){const h=n.indexOf("\x01",l);switch((h<0||h>e)&&tt(),n.charAt(h+1)){case"\x01":const m=n.substring(l,h);let b;0===a.length?b=m:(a+=m,b=a,a=""),r.push(b);break;case"\x10":a+=n.substring(l,h),a+="\0";break;case"\x11":a+=n.substring(l,h+1);break;default:tt()}l=h+2}return new un(r)}class iS{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class Ro{constructor(t,e,r){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=r}}Ro.store="owner",Ro.key="owner";class dd{constructor(t,e,r){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=r}}dd.store="mutationQueues",dd.keyPath="userId";class tr{constructor(t,e,r,a,l){this.userId=t,this.batchId=e,this.localWriteTimeMs=r,this.baseMutations=a,this.mutations=l}}tr.store="mutations",tr.keyPath="batchId",tr.userMutationsIndex="userMutationsIndex",tr.userMutationsKeyPath=["userId","batchId"];class ns{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ko(e)]}static key(t,e,r){return[t,ko(e),r]}}ns.store="documentMutations",ns.PLACEHOLDER=new ns;class NT{constructor(t,e){this.path=t,this.readTime=e}}class V_{constructor(t,e){this.path=t,this.version=e}}class fr{constructor(t,e,r,a,l,h){this.unknownDocument=t,this.noDocument=e,this.document=r,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=h}}fr.store="remoteDocuments",fr.readTimeIndex="readTimeIndex",fr.readTimeIndexPath="readTime",fr.collectionReadTimeIndex="collectionReadTimeIndex",fr.collectionReadTimeIndexPath=["parentPath","readTime"];class za{constructor(t){this.byteSize=t}}za.store="remoteDocumentGlobal",za.key="remoteDocumentGlobalKey";class rs{constructor(t,e,r,a,l,h,m){this.targetId=t,this.canonicalId=e,this.readTime=r,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=h,this.query=m}}rs.store="targets",rs.keyPath="targetId",rs.queryTargetsIndexName="queryTargetsIndex",rs.queryTargetsKeyPath=["canonicalId","targetId"];class br{constructor(t,e,r){this.targetId=t,this.path=e,this.sequenceNumber=r}}br.store="targetDocuments",br.keyPath=["targetId","path"],br.documentTargetsIndex="documentTargetsIndex",br.documentTargetsKeyPath=["path","targetId"];class to{constructor(t,e,r,a){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=r,this.targetCount=a}}to.key="targetGlobalKey",to.store="targetGlobal";class hd{constructor(t,e){this.collectionId=t,this.parent=e}}hd.store="collectionParents",hd.keyPath=["collectionId","parent"];class Ou{constructor(t,e,r,a){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=r,this.inForeground=a}}Ou.store="clientMetadata",Ou.keyPath="clientId";class yf{constructor(t,e,r){this.bundleId=t,this.createTime=e,this.version=r}}yf.store="bundles",yf.keyPath="bundleId";class vf{constructor(t,e,r){this.name=t,this.readTime=e,this.bundledQuery=r}}vf.store="namedQueries",vf.keyPath="name";const MT=[dd.store,tr.store,ns.store,fr.store,rs.store,Ro.store,to.store,br.store,Ou.store,za.store,hd.store,yf.store,vf.store],xT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Ie{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ie((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Ie?e:Ie.resolve(e)}catch(e){return Ie.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Ie.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Ie.reject(e)}static resolve(t){return new Ie((e,r)=>{e(t)})}static reject(t){return new Ie((e,r)=>{r(t)})}static waitFor(t){return new Ie((e,r)=>{let a=0,l=0,h=!1;t.forEach(m=>{++a,m.next(()=>{++l,h&&l===a&&e()},b=>r(b))}),h=!0,l===a&&e()})}static or(t){let e=Ie.resolve(!1);for(const r of t)e=e.next(a=>a?Ie.resolve(a):r());return e}static forEach(t,e){const r=[];return t.forEach((a,l)=>{r.push(e.call(this,a,l))}),this.waitFor(r)}}class U_{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.It=new mi,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{e.error?this.It.reject(new bf(t,e.error)):this.It.resolve()},this.transaction.onerror=r=>{const a=fb(r.target.error);this.It.reject(new bf(t,a))}}static open(t,e,r,a){try{return new U_(e,t.transaction(a,r))}catch(l){throw new bf(e,l)}}get At(){return this.It.promise}abort(t){t&&this.It.reject(t),this.aborted||(Le("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new RT(e)}}class Oo{constructor(t,e,r){this.name=t,this.version=e,this.Rt=r,12.2===Oo.Pt((0,Et.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Le("SimpleDb","Removing database:",t),pd(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if(!(0,Et.hl)())return!1;if(Oo.vt())return!0;const t=(0,Et.z$)(),e=Oo.Pt(t),r=0<e&&e<10,a=Oo.Vt(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static vt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.St)}static Dt(t,e){return t.store(e)}static Pt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(t){var e=this;return(0,oe.Z)(function*(){return e.db||(Le("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,a)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{a(new bf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const m=h.target.error;a("VersionError"===m.name?new xe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new bf(t,m))},l.onupgradeneeded=h=>{Le("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',h.oldVersion),e.Rt.Nt(h.target.result,l.transaction,h.oldVersion,e.version).next(()=>{Le("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.kt&&(e.db.onversionchange=r=>e.kt(r)),e.db})()}xt(t){this.kt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,a){var l=this;return(0,oe.Z)(function*(){const h="readonly"===e;let m=0;for(;;){++m;try{l.db=yield l.Ct(t);const b=U_.open(l.db,t,h?"readonly":"readwrite",r),D=a(b).catch(N=>(b.abort(N),Ie.reject(N))).toPromise();return D.catch(()=>{}),yield b.At,D}catch(b){const D="FirebaseError"!==b.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",b.message,"Retrying:",D),l.close(),!D)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class sS{constructor(t){this.$t=t,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(t){this.$t=t}done(){this.Ft=!0}Lt(t){this.Ot=t}delete(){return pd(this.$t.delete())}}class bf extends xe{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function fd(n){return"IndexedDbTransactionError"===n.name}class RT{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(Le("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),pd(r)}add(t){return Le("SimpleDb","ADD",this.store.name,t,t),pd(this.store.add(t))}get(t){return pd(this.store.get(t)).next(e=>(void 0===e&&(e=null),Le("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Le("SimpleDb","DELETE",this.store.name,t),pd(this.store.delete(t))}count(){return Le("SimpleDb","COUNT",this.store.name),pd(this.store.count())}Bt(t,e){const r=this.cursor(this.options(t,e)),a=[];return this.Ut(r,(l,h)=>{a.push(h)}).next(()=>a)}qt(t,e){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.Kt=!1;const a=this.cursor(r);return this.Ut(a,(l,h,m)=>m.delete())}jt(t,e){let r;e?r=t:(r={},e=t);const a=this.cursor(r);return this.Ut(a,e)}Qt(t){const e=this.cursor({});return new Ie((r,a)=>{e.onerror=l=>{const h=fb(l.target.error);a(h)},e.onsuccess=l=>{const h=l.target.result;h?t(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Ut(t,e){const r=[];return new Ie((a,l)=>{t.onerror=h=>{l(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void a();const b=new sS(m),D=e(m.primaryKey,m.value,b);if(D instanceof Ie){const N=D.catch(M=>(b.done(),Ie.reject(M)));r.push(N)}b.isDone?a():null===b.Mt?m.continue():m.continue(b.Mt)}}).next(()=>Ie.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.Kt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function pd(n){return new Ie((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const a=fb(r.target.error);e(a)}})}let B_=!1;function fb(n){const t=Oo.Pt((0,Et.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return B_||(B_=!0,setTimeout(()=>{throw r},0)),r}}return n}class pb extends kT{constructor(t,e){super(),this.Wt=t,this.currentSequenceNumber=e}}function is(n,t){const e=Be(n);return Oo.Dt(e.Wt,t)}class gb{constructor(t,e,r,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&lT(l,t,r[a])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&S_(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&S_(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),a=r;this.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(Ft.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Dn())}isEqual(t){return this.batchId===t.batchId&&nf(this.mutations,t.mutations,(e,r)=>Qv(e,r))&&nf(this.baseMutations,t.baseMutations,(e,r)=>Qv(e,r))}}class mb{constructor(t,e,r,a){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=a}static from(t,e,r){ft(t.mutations.length===r.length);let a=tb();const l=t.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,r[h].version);return new mb(t,e,r,a)}}class Vl{constructor(t,e,r,a,l=Ft.min(),h=Ft.min(),m=lr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(t){return new Vl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Vl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Z_{constructor(t){this.Gt=t}}function _b(n,t){if(t.document)return ab(n.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Ke.fromSegments(t.noDocument.path),r=Cf(t.noDocument.readTime),a=Ln.newNoDocument(e,r);return t.hasCommittedMutations?a.setHasCommittedMutations():a}if(t.unknownDocument){const e=Ke.fromSegments(t.unknownDocument.path),r=Cf(t.unknownDocument.version);return Ln.newUnknownDocument(e,r)}return tt()}function yb(n,t,e){const r=vb(e),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){const l={name:Un(m=n.Gt,(b=t).key),fields:b.data.value.mapValue.fields,updateTime:Dg(m,b.version.toTimestamp())};return new fr(null,null,l,t.hasCommittedMutations,r,a)}var m,b;if(t.isNoDocument()){const l=t.key.path.toArray(),h=wf(t.version),m=t.hasCommittedMutations;return new fr(null,new NT(l,h),null,m,r,a)}if(t.isUnknownDocument()){const l=t.key.path.toArray(),h=wf(t.version);return new fr(new V_(l,h),null,null,!0,r,a)}return tt()}function vb(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function OT(n){const t=new ti(n[0],n[1]);return Ft.fromTimestamp(t)}function wf(n){const t=n.toTimestamp();return new iS(t.seconds,t.nanoseconds)}function Cf(n){const t=new ti(n.seconds,n.nanoseconds);return Ft.fromTimestamp(t)}function Tf(n,t){const e=(t.baseMutations||[]).map(l=>ET(n.Gt,l));for(let l=0;l<t.mutations.length-1;++l){const h=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(h.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>ET(n.Gt,l)),a=ti.fromMillis(t.localWriteTimeMs);return new gb(t.batchId,a,e,r)}function Mg(n){const t=Cf(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Cf(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var a;return void 0!==n.query.documents?(ft(1===(a=n.query).documents.length),r=Mo(ud(P_(a.documents[0])))):r=Mo(AT(n.query)),new Vl(r,n.targetId,0,n.lastListenSequenceNumber,t,e,lr.fromBase64String(n.resumeToken))}function PT(n,t){const e=wf(t.snapshotVersion),r=wf(t.lastLimboFreeSnapshotVersion);let a;a=hg(t.target)?DT(n.Gt,t.target):IT(n.Gt,t.target);const l=t.resumeToken.toBase64();return new rs(t.targetId,df(t.target),e,l,t.sequenceNumber,r,a)}function bb(n){const t=AT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zv(t,t.limit,"L"):t}class FT{getBundleMetadata(t,e){return wb(t).get(e).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Cf(a.createTime),version:a.version};var a})}saveBundleMetadata(t,e){return wb(t).put({bundleId:(r=e).id,createTime:wf(ni(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return Cb(t).get(e).next(r=>{if(r)return{name:(a=r).name,query:bb(a.bundledQuery),readTime:Cf(a.readTime)};var a})}saveNamedQuery(t,e){return Cb(t).put({name:(r=e).name,readTime:wf(ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wb(n){return is(n,yf.store)}function Cb(n){return is(n,vf.store)}class oS{constructor(){this.zt=new xg}addToCollectionParentIndex(t,e){return this.zt.add(e),Ie.resolve()}getCollectionParents(t,e){return Ie.resolve(this.zt.getEntries(e))}}class xg{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e]||new hr(un.comparator),l=!a.has(r);return this.index[e]=a.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e];return a&&a.has(r)}getEntries(t){return(this.index[t]||new hr(un.comparator)).toArray()}}class LT{constructor(){this.Ht=new xg}addToCollectionParentIndex(t,e){if(!this.Ht.has(e)){const r=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.Ht.add(e)});const l={collectionId:r,parent:ko(a)};return VT(t).put(l)}return Ie.resolve()}getCollectionParents(t,e){const r=[],a=IDBKeyRange.bound([e,""],[YC(e),""],!1,!0);return VT(t).Bt(a).next(l=>{for(const h of l){if(h.collectionId!==e)break;r.push(Ru(h.parent))}return r})}}function VT(n){return is(n,hd.store)}const UT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Fi(t,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function j_(n,t,e){const r=n.store(tr.store),a=n.store(ns.store),l=[],h=IDBKeyRange.only(e.batchId);let m=0;const b=r.jt({range:h},(N,M,V)=>(m++,V.delete()));l.push(b.next(()=>{ft(1===m)}));const D=[];for(const N of e.mutations){const M=ns.key(t,N.key.path,e.batchId);l.push(a.delete(M)),D.push(N.key)}return Ie.waitFor(l).next(()=>D)}function kg(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw tt();t=n.noDocument}return JSON.stringify(t).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class Rg{constructor(t,e,r,a){this.userId=t,this.k=e,this.Jt=r,this.referenceDelegate=a,this.Yt={}}static Xt(t,e,r,a){ft(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new Rg(l,e,r,a)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ul(t).jt({index:tr.userMutationsIndex,range:r},(a,l,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,r,a){const l=Bl(t),h=Ul(t);return h.add({}).next(m=>{ft("number"==typeof m);const b=new gb(m,e,r,a),D=function(V,$,ie){const ye=ie.baseMutations.map(rt=>F_(V.Gt,rt)),Se=ie.mutations.map(rt=>F_(V.Gt,rt));return new tr($,ie.batchId,ie.localWriteTime.toMillis(),ye,Se)}(this.k,this.userId,b),N=[];let M=new hr((V,$)=>Kt(V.canonicalString(),$.canonicalString()));for(const V of a){const $=ns.key(this.userId,V.key.path,m);M=M.add(V.key.path.popLast()),N.push(h.put(D)),N.push(l.put($,ns.PLACEHOLDER))}return M.forEach(V=>{N.push(this.Jt.addToCollectionParentIndex(t,V))}),t.addOnCommittedListener(()=>{this.Yt[m]=b.keys()}),Ie.waitFor(N).next(()=>b)})}lookupMutationBatch(t,e){return Ul(t).get(e).next(r=>r?(ft(r.userId===this.userId),Tf(this.k,r)):null)}Zt(t,e){return this.Yt[e]?Ie.resolve(this.Yt[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const a=r.keys();return this.Yt[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ul(t).jt({index:tr.userMutationsIndex,range:a},(h,m,b)=>{m.userId===this.userId&&(ft(m.batchId>=r),l=Tf(this.k,m)),b.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ul(t).jt({index:tr.userMutationsIndex,range:e,reverse:!0},(a,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ul(t).Bt(tr.userMutationsIndex,e).next(r=>r.map(a=>Tf(this.k,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=ns.prefixForPath(this.userId,e.path),a=IDBKeyRange.lowerBound(r),l=[];return Bl(t).jt({range:a},(h,m,b)=>{const[D,N,M]=h,V=Ru(N);if(D===this.userId&&e.path.isEqual(V))return Ul(t).get(M).next($=>{if(!$)throw tt();ft($.userId===this.userId),l.push(Tf(this.k,$))});b.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new hr(Kt);const a=[];return e.forEach(l=>{const h=ns.prefixForPath(this.userId,l.path),m=IDBKeyRange.lowerBound(h),b=Bl(t).jt({range:m},(D,N,M)=>{const[V,$,ie]=D,ye=Ru($);V===this.userId&&l.path.isEqual(ye)?r=r.add(ie):M.done()});a.push(b)}),Ie.waitFor(a).next(()=>this.te(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1,l=ns.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(l);let m=new hr(Kt);return Bl(t).jt({range:h},(b,D,N)=>{const[M,V,$]=b,ie=Ru(V);M===this.userId&&r.isPrefixOf(ie)?ie.length===a&&(m=m.add($)):N.done()}).next(()=>this.te(t,m))}te(t,e){const r=[],a=[];return e.forEach(l=>{a.push(Ul(t).get(l).next(h=>{if(null===h)throw tt();ft(h.userId===this.userId),r.push(Tf(this.k,h))}))}),Ie.waitFor(a).next(()=>r)}removeMutationBatch(t,e){return j_(t.Wt,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ee(e.batchId)}),Ie.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}ee(t){delete this.Yt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Ie.resolve();const r=IDBKeyRange.lowerBound(ns.prefixForUser(this.userId)),a=[];return Bl(t).jt({range:r},(l,h,m)=>{if(l[0]===this.userId){const b=Ru(l[1]);a.push(b)}else m.done()}).next(()=>{ft(0===a.length)})})}containsKey(t,e){return BT(t,this.userId,e)}ne(t){return ZT(t).get(this.userId).next(e=>e||new dd(this.userId,-1,""))}}function BT(n,t,e){const r=ns.prefixForPath(t,e.path),a=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return Bl(n).jt({range:l,Kt:!0},(m,b,D)=>{const[N,M,V]=m;N===t&&M===a&&(h=!0),D.done()}).next(()=>h)}function Ul(n){return is(n,tr.store)}function Bl(n){return is(n,ns.store)}function ZT(n){return is(n,dd.store)}class Zl{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new Zl(0)}static re(){return new Zl(-1)}}class aS{constructor(t,e){this.referenceDelegate=t,this.k=e}allocateTargetId(t){return this.oe(t).next(e=>{const r=new Zl(e.highestTargetId);return e.highestTargetId=r.next(),this.ae(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.oe(t).next(e=>Ft.fromTimestamp(new ti(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.oe(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.oe(t).next(a=>(a.highestListenSequenceNumber=e,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.ae(t,a)))}addTargetData(t,e){return this.ce(t,e).next(()=>this.oe(t).next(r=>(r.targetCount+=1,this.ue(e,r),this.ae(t,r))))}updateTargetData(t,e){return this.ce(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>gd(t).delete(e.targetId)).next(()=>this.oe(t)).next(r=>(ft(r.targetCount>0),r.targetCount-=1,this.ae(t,r)))}removeTargets(t,e,r){let a=0;const l=[];return gd(t).jt((h,m)=>{const b=Mg(m);b.sequenceNumber<=e&&null===r.get(b.targetId)&&(a++,l.push(this.removeTargetData(t,b)))}).next(()=>Ie.waitFor(l)).next(()=>a)}forEachTarget(t,e){return gd(t).jt((r,a)=>{const l=Mg(a);e(l)})}oe(t){return Tb(t).get(to.key).next(e=>(ft(null!==e),e))}ae(t,e){return Tb(t).put(to.key,e)}ce(t,e){return gd(t).put(PT(this.k,e))}ue(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.oe(t).next(e=>e.targetCount)}getTargetData(t,e){const r=df(e),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return gd(t).jt({range:a,index:rs.queryTargetsIndexName},(h,m,b)=>{const D=Mg(m);dg(e,D.target)&&(l=D,b.done())}).next(()=>l)}addMatchingKeys(t,e,r){const a=[],l=Pu(t);return e.forEach(h=>{const m=ko(h.path);a.push(l.put(new br(r,m))),a.push(this.referenceDelegate.addReference(t,r,h))}),Ie.waitFor(a)}removeMatchingKeys(t,e,r){const a=Pu(t);return Ie.forEach(e,l=>{const h=ko(l.path);return Ie.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=Pu(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),a=Pu(t);let l=Dn();return a.jt({range:r,Kt:!0},(h,m,b)=>{const D=Ru(h[1]),N=new Ke(D);l=l.add(N)}).next(()=>l)}containsKey(t,e){const r=ko(e.path),a=IDBKeyRange.bound([r],[YC(r)],!1,!0);let l=0;return Pu(t).jt({index:br.documentTargetsIndex,Kt:!0,range:a},([h,m],b,D)=>{0!==h&&(l++,D.done())}).next(()=>l>0)}Et(t,e){return gd(t).get(e).next(r=>r?Mg(r):null)}}function gd(n){return is(n,rs.store)}function Tb(n){return is(n,to.store)}function Pu(n){return is(n,br.store)}function Ef(n){return Eb.apply(this,arguments)}function Eb(){return(Eb=(0,oe.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==xT)throw n;Le("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function md([n,t],[e,r]){const a=Kt(n,e);return 0===a?Kt(t,r):a}class Fx{constructor(t){this.he=t,this.buffer=new hr(md),this.le=0}fe(){return++this.le}de(t){const e=[t,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();md(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Db{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.we=!1,this._e=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(t)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(t){var e=this;const r=this.we?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,oe.Z)(function*(){e._e=null,e.we=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(a){fd(a)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Ef(a)}yield e.me(t)}))}}class $_{constructor(t,e){this.ge=t,this.params=e}calculateTargetCount(t,e){return this.ge.ye(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return Ie.resolve(Oi.I);const r=new Fx(e);return this.ge.forEachTarget(t,a=>r.de(a.sequenceNumber)).next(()=>this.ge.pe(t,a=>r.de(a))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.ge.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.ge.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(UT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UT):this.Te(t,e))}getCacheSize(t){return this.ge.getCacheSize(t)}Te(t,e){let r,a,l,h,m,b,D;const N=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),a=this.params.maximumSequenceNumbersToCollect):a=M,h=Date.now(),this.nthSequenceNumber(t,a))).next(M=>(r=M,m=Date.now(),this.removeTargets(t,r,e))).next(M=>(l=M,b=Date.now(),this.removeOrphanedDocuments(t,r))).next(M=>(D=Date.now(),GC()<=Ua.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-N}ms\n\tDetermined least recently used ${a} in `+(m-h)+`ms\n\tRemoved ${l} targets in `+(b-m)+`ms\n\tRemoved ${M} documents in `+(D-b)+`ms\nTotal Duration: ${D-N}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:M})))}}class uS{constructor(t,e){this.db=t,this.garbageCollector=new $_(this,e)}ye(t){const e=this.Ee(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(a=>r+a))}Ee(t){let e=0;return this.pe(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pe(t,e){return this.Ie(t,(r,a)=>e(a))}addReference(t,e,r){return Fu(t,r)}removeReference(t,e,r){return Fu(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Fu(t,e)}Ae(t,e){return function(r,a){let l=!1;return ZT(r).Qt(h=>BT(r,h,a).next(m=>(m&&(l=!0),Ie.resolve(!m)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ie(t,(h,m)=>{if(m<=e){const b=this.Ae(t,h).next(D=>{if(!D)return l++,r.getEntry(t,h).next(()=>(r.removeEntry(h),Pu(t).delete([0,ko(h.path)])))});a.push(b)}}).next(()=>Ie.waitFor(a)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Fu(t,e)}Ie(t,e){const r=Pu(t);let a,l=Oi.I;return r.jt({index:br.documentTargetsIndex},([h,m],{path:b,sequenceNumber:D})=>{0===h?(l!==Oi.I&&e(new Ke(Ru(a)),l),l=D,a=b):l=Oi.I}).next(()=>{l!==Oi.I&&e(new Ke(Ru(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Fu(n,t){return Pu(n).put((r=n.currentSequenceNumber,new br(0,ko(t.path),r)));var r}class Df{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[a,l]of r)if(this.equalsFn(a,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),a=this.inner[r];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e])}else this.inner[r]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return 1===r.length?delete this.inner[e]:r.splice(a,1),!0;return!1}forEach(t){rd(this.inner,(e,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return jv(this.inner)}}class lS{constructor(){this.changes=new Df(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Ft.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:Ln.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?Ie.resolve(r.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cS{constructor(t,e){this.k=t,this.Jt=e}addEntry(t,e,r){return _d(t).put(yd(e),r)}removeEntry(t,e){const r=_d(t),a=yd(e);return r.delete(a)}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Re(t,r)))}getEntry(t,e){return _d(t).get(yd(e)).next(r=>this.Pe(e,r))}be(t,e){return _d(t).get(yd(e)).next(r=>({document:this.Pe(e,r),size:kg(r)}))}getEntries(t,e){let r=eo();return this.ve(t,e,(a,l)=>{const h=this.Pe(a,l);r=r.insert(a,h)}).next(()=>r)}Ve(t,e){let r=eo(),a=new qr(Ke.comparator);return this.ve(t,e,(l,h)=>{const m=this.Pe(l,h);r=r.insert(l,m),a=a.insert(l,kg(h))}).next(()=>({documents:r,Se:a}))}ve(t,e,r){if(e.isEmpty())return Ie.resolve();const a=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),l=e.getIterator();let h=l.getNext();return _d(t).jt({range:a},(m,b,D)=>{const N=Ke.fromSegments(m);for(;h&&Ke.comparator(h,N)<0;)r(h,null),h=l.getNext();h&&h.isEqual(N)&&(r(h,b),h=l.hasNext()?l.getNext():null),h?D.Lt(h.path.toArray()):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,r){let a=eo();const l=e.path.length+1,h={};if(r.isEqual(Ft.min())){const m=e.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=e.path.toArray(),b=vb(r);h.range=IDBKeyRange.lowerBound([m,b],!0),h.index=fr.collectionReadTimeIndex}return _d(t).jt(h,(m,b,D)=>{if(m.length!==l)return;const N=_b(this.k,b);e.path.isPrefixOf(N.key.path)?ff(e,N)&&(a=a.insert(N.key,N)):D.done()}).next(()=>a)}newChangeBuffer(t){return new Wa(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Ib(t).get(za.key).next(e=>(ft(!!e),e))}Re(t,e){return Ib(t).put(za.key,e)}Pe(t,e){if(e){const r=_b(this.k,e);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return Ln.newInvalidDocument(t)}}class Wa extends lS{constructor(t,e){super(),this.De=t,this.trackRemovals=e,this.Ce=new Df(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(t){const e=[];let r=0,a=new hr((l,h)=>Kt(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const m=this.Ce.get(l);if(h.document.isValidDocument()){const b=yb(this.De.k,h.document,this.getReadTime(l));a=a.add(l.path.popLast()),r+=kg(b)-m,e.push(this.De.addEntry(t,l,b))}else if(r-=m,this.trackRemovals){const b=yb(this.De.k,Ln.newNoDocument(l,Ft.min()),this.getReadTime(l));e.push(this.De.addEntry(t,l,b))}else e.push(this.De.removeEntry(t,l))}),a.forEach(l=>{e.push(this.De.Jt.addToCollectionParentIndex(t,l))}),e.push(this.De.updateMetadata(t,r)),Ie.waitFor(e)}getFromCache(t,e){return this.De.be(t,e).next(r=>(this.Ce.set(e,r.size),r.document))}getAllFromCache(t,e){return this.De.Ve(t,e).next(({documents:r,Se:a})=>(a.forEach((l,h)=>{this.Ce.set(l,h)}),r))}}function Ib(n){return is(n,za.store)}function _d(n){return is(n,fr.store)}function yd(n){return n.path.toArray()}class dS{constructor(t){this.k=t}Nt(t,e,r,a){ft(r<a&&r>=0&&a<=11);const l=new U_("createOrUpgrade",e);var m;r<1&&a>=1&&(t.createObjectStore(Ro.store),(m=t).createObjectStore(dd.store,{keyPath:dd.keyPath}),m.createObjectStore(tr.store,{keyPath:tr.keyPath,autoIncrement:!0}).createIndex(tr.userMutationsIndex,tr.userMutationsKeyPath,{unique:!0}),m.createObjectStore(ns.store),jT(t),function(m){m.createObjectStore(fr.store)}(t));let h=Ie.resolve();return r<3&&a>=3&&(0!==r&&(function(m){m.deleteObjectStore(br.store),m.deleteObjectStore(rs.store),m.deleteObjectStore(to.store)}(t),jT(t)),h=h.next(()=>function(m){const b=m.store(to.store),D=new to(0,0,Ft.min().toTimestamp(),0);return b.put(to.key,D)}(l))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(m,b){return b.store(tr.store).Bt().next(D=>{m.deleteObjectStore(tr.store),m.createObjectStore(tr.store,{keyPath:tr.keyPath,autoIncrement:!0}).createIndex(tr.userMutationsIndex,tr.userMutationsKeyPath,{unique:!0});const N=b.store(tr.store),M=D.map(V=>N.put(V));return Ie.waitFor(M)})}(t,l))),h=h.next(()=>{!function(m){m.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)})),r<5&&a>=5&&(h=h.next(()=>this.Ne(l))),r<6&&a>=6&&(h=h.next(()=>(function(m){m.createObjectStore(za.store)}(t),this.ke(l)))),r<7&&a>=7&&(h=h.next(()=>this.xe(l))),r<8&&a>=8&&(h=h.next(()=>this.$e(t,l))),r<9&&a>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t),function(m){const b=m.objectStore(fr.store);b.createIndex(fr.readTimeIndex,fr.readTimeIndexPath,{unique:!1}),b.createIndex(fr.collectionReadTimeIndex,fr.collectionReadTimeIndexPath,{unique:!1})}(e)})),r<10&&a>=10&&(h=h.next(()=>this.Fe(l))),r<11&&a>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(yf.store,{keyPath:yf.keyPath})})(t),function(m){m.createObjectStore(vf.store,{keyPath:vf.keyPath})}(t)})),h}ke(t){let e=0;return t.store(fr.store).jt((r,a)=>{e+=kg(a)}).next(()=>{const r=new za(e);return t.store(za.store).put(za.key,r)})}Ne(t){const e=t.store(dd.store),r=t.store(tr.store);return e.Bt().next(a=>Ie.forEach(a,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Bt(tr.userMutationsIndex,h).next(m=>Ie.forEach(m,b=>{ft(b.userId===l.userId);const D=Tf(this.k,b);return j_(t,l.userId,D).next(()=>{})}))}))}xe(t){const e=t.store(br.store),r=t.store(fr.store);return t.store(to.store).get(to.key).next(a=>{const l=[];return r.jt((h,m)=>{const b=new un(h),D=[0,ko(b)];l.push(e.get(D).next(N=>N?Ie.resolve():e.put(new br(0,ko(b),a.highestListenSequenceNumber))))}).next(()=>Ie.waitFor(l))})}$e(t,e){t.createObjectStore(hd.store,{keyPath:hd.keyPath});const r=e.store(hd.store),a=new xg,l=h=>{if(a.add(h)){const m=h.lastSegment(),b=h.popLast();return r.put({collectionId:m,parent:ko(b)})}};return e.store(fr.store).jt({Kt:!0},(h,m)=>{const b=new un(h);return l(b.popLast())}).next(()=>e.store(ns.store).jt({Kt:!0},([h,m,b],D)=>{const N=Ru(m);return l(N.popLast())}))}Fe(t){const e=t.store(rs.store);return e.jt((r,a)=>{const l=Mg(a),h=PT(this.k,l);return e.put(h)})}}function jT(n){n.createObjectStore(br.store,{keyPath:br.keyPath}).createIndex(br.documentTargetsIndex,br.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(rs.store,{keyPath:rs.keyPath}).createIndex(rs.queryTargetsIndexName,rs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(to.store)}const $T="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ab{constructor(t,e,r,a,l,h,m,b,D,N){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Oe=l,this.window=h,this.document=m,this.Me=D,this.Le=N,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=M=>Promise.resolve(),!Ab.bt())throw new xe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uS(this,a),this.Ge=e+"main",this.k=new Z_(b),this.ze=new Oo(this.Ge,11,new dS(this.k)),this.He=new aS(this.referenceDelegate,this.k),this.Jt=new LT,this.Je=new cS(this.k,this.Jt),this.Ye=new FT,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===N&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(me.FAILED_PRECONDITION,$T);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.He.getHighestSequenceNumber(t))}).then(t=>{this.Be=new Oi(t,this.Me)}).then(()=>{this.Ue=!0}).catch(t=>(this.ze&&this.ze.close(),Promise.reject(t)))}sn(t){var e=this;return this.We=function(){var r=(0,oe.Z)(function*(a){if(e.started)return t(a)});return function(a){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ze.xt(function(){var e=(0,oe.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((0,oe.Z)(function*(){e.started&&(yield e.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>H_(t).put(new Ou(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(t).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(t)).next(e=>this.isPrimary&&!e?this.an(t).next(()=>!1):!!e&&this.cn(t).next(()=>!0))).catch(t=>{if(fd(t))return Le("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.We(t)),this.isPrimary=t})}rn(t){return Og(t).get(Ro.key).next(e=>Ie.resolve(this.un(e)))}hn(t){return H_(t).delete(this.clientId)}ln(){var t=this;return(0,oe.Z)(function*(){if(t.isPrimary&&!t.fn(t.Qe,18e5)){t.Qe=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=is(r,Ou.store);return a.Bt().next(l=>{const h=t.dn(l,18e5),m=l.filter(b=>-1===h.indexOf(b));return Ie.forEach(m,b=>a.delete(b.clientId)).next(()=>m)})}).catch(()=>[]);if(t.Xe)for(const r of e)t.Xe.removeItem(t.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(t){return!!t&&t.ownerId===this.clientId}on(t){return this.Le?Ie.resolve(!0):Og(t).get(Ro.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)){if(this.un(e)&&this.networkEnabled)return!0;if(!this.un(e)){if(!e.allowTabSynchronization)throw new xe(me.FAILED_PRECONDITION,$T);return!1}}return!(!this.networkEnabled||!this.inForeground)||H_(t).Bt().next(r=>void 0===this.dn(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&m)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Le("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,oe.Z)(function*(){t.Ue=!1,t.mn(),t.je&&(t.je.cancel(),t.je=null),t.gn(),t.yn(),yield t.ze.runTransaction("shutdown","readwrite",[Ro.store,Ou.store],e=>{const r=new pb(e,Oi.I);return t.an(r).next(()=>t.hn(r))}),t.ze.close(),t.pn()})()}dn(t,e){return t.filter(r=>this.fn(r.updateTimeMs,e)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",t=>H_(t).Bt().next(e=>this.dn(e,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(t){return Rg.Xt(t,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(t,e,r){let l;return Le("IndexedDbPersistence","Starting transaction:",t),this.ze.runTransaction(t,"readonly"===e?"readonly":"readwrite",MT,h=>(l=new pb(h,this.Be?this.Be.next():Oi.I),"readwrite-primary"===e?this.rn(l).next(m=>!!m||this.on(l)).next(m=>{if(!m)throw Sr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new xe(me.FAILED_PRECONDITION,xT);return r(l)}).next(m=>this.cn(l).next(()=>m)):this.En(l).next(()=>r(l)))).then(h=>(l.raiseOnCommittedEvent(),h))}En(t){return Og(t).get(Ro.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new xe(me.FAILED_PRECONDITION,$T)})}cn(t){const e=new Ro(this.clientId,this.allowTabSynchronization,Date.now());return Og(t).put(Ro.key,e)}static bt(){return Oo.bt()}an(t){const e=Og(t);return e.get(Ro.key).next(r=>this.un(r)?(Le("IndexedDbPersistence","Releasing primary lease."),e.delete(Ro.key)):Ie.resolve())}fn(t,e){const r=Date.now();return!(t<r-e||t>r&&(Sr(`Detected an update time that is in the future: ${t} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.qe=()=>{this.mn(),(0,Et.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(t){var e;try{const r=null!==(null===(e=this.Xe)||void 0===e?void 0:e.getItem(this.wn(t)));return Le("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(t){Sr("Failed to set zombie client id.",t)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(t){}}wn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Og(n){return is(n,Ro.store)}function H_(n){return is(n,Ou.store)}function Pg(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class HT{constructor(t,e){this.progress=t,this.In=e}}class q_{constructor(t,e,r){this.Je=t,this.An=e,this.Jt=r}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Pn(t,e,r))}Pn(t,e,r){return this.Je.getEntry(t,e).next(a=>{for(const l of r)l.applyToLocalView(a);return a})}bn(t,e){t.forEach((r,a)=>{for(const l of e)l.applyToLocalView(a)})}vn(t,e){return this.Je.getEntries(t,e).next(r=>this.Vn(t,r).next(()=>r))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.bn(e,r))}getDocumentsMatchingQuery(t,e,r){return Ke.isDocumentKey((a=e).path)&&null===a.collectionGroup&&0===a.filters.length?this.Sn(t,e.path):_g(e)?this.Dn(t,e,r):this.Cn(t,e,r);var a}Sn(t,e){return this.Rn(t,new Ke(e)).next(r=>{let a=M_();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}Dn(t,e,r){const a=e.collectionGroup;let l=M_();return this.Jt.getCollectionParents(t,a).next(h=>Ie.forEach(h,m=>{const b=(D=e,N=m.child(a),new Mu(N,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,N;return this.Cn(t,b,r).next(D=>{D.forEach((N,M)=>{l=l.insert(N,M)})})}).next(()=>l))}Cn(t,e,r){let a,l;return this.Je.getDocumentsMatchingQuery(t,e,r).next(h=>(a=h,this.An.getAllMutationBatchesAffectingQuery(t,e))).next(h=>(l=h,this.Nn(t,l,a).next(m=>{a=m;for(const b of l)for(const D of b.mutations){const N=D.key;let M=a.get(N);null==M&&(M=Ln.newInvalidDocument(N),a=a.insert(N,M)),S_(D,M,b.localWriteTime),M.isFoundDocument()||(a=a.remove(N))}}))).next(()=>(a.forEach((h,m)=>{ff(e,m)||(a=a.remove(h))}),a))}Nn(t,e,r){let a=Dn();for(const h of e)for(const m of h.mutations)m instanceof xu&&null===r.get(m.key)&&(a=a.add(m.key));let l=r;return this.Je.getEntries(t,a).next(h=>(h.forEach((m,b)=>{b.isFoundDocument()&&(l=l.insert(m,b))}),l))}}class G_{constructor(t,e,r,a){this.targetId=t,this.fromCache=e,this.kn=r,this.xn=a}static $n(t,e){let r=Dn(),a=Dn();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new G_(t,e.fromCache,r,a)}}class qT{Fn(t){this.On=t}getDocumentsMatchingQuery(t,e,r,a){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ft.min())?this.Mn(t,e):this.On.vn(t,a).next(l=>{const h=this.Ln(e,l);return(I_(e)||gg(e))&&this.Bn(e.limitType,h,a,r)?this.Mn(t,e):(GC()<=Ua.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xs(e)),this.On.getDocumentsMatchingQuery(t,e,r).next(m=>(h.forEach(b=>{m=m.insert(b.key,b)}),m)))});var l}Ln(t,e){let r=new hr(Wv(t));return e.forEach((a,l)=>{ff(t,l)&&(r=r.add(l))}),r}Bn(t,e,r,a){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mn(t,e){return GC()<=Ua.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Xs(e)),this.On.getDocumentsMatchingQuery(t,e,Ft.min())}}class Lx{constructor(t,e,r,a){this.persistence=t,this.Un=e,this.k=a,this.qn=new qr(Kt),this.Kn=new Df(l=>df(l),dg),this.jn=Ft.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new q_(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qn))}}function GT(n,t,e,r){return new Lx(n,t,e,r)}function zT(n,t){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,oe.Z)(function*(n,t){const e=Be(n);let r=e.An,a=e.Wn;const l=yield e.persistence.runTransaction("Handle user change","readonly",h=>{let m;return e.An.getAllMutationBatches(h).next(b=>(m=b,r=e.persistence.getMutationQueue(t),a=new q_(e.Qn,r,e.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(b=>{const D=[],N=[];let M=Dn();for(const V of m){D.push(V.batchId);for(const $ of V.mutations)M=M.add($.key)}for(const V of b){N.push(V.batchId);for(const $ of V.mutations)M=M.add($.key)}return a.vn(h,M).next(V=>({Gn:V,removedBatchIds:D,addedBatchIds:N}))})});return e.An=r,e.Wn=a,e.Un.Fn(e.Wn),l})).apply(this,arguments)}function WT(n,t){const e=Be(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=e.Qn.newChangeBuffer({trackRemovals:!0});return function(h,m,b,D){const N=b.batch,M=N.keys();let V=Ie.resolve();return M.forEach($=>{V=V.next(()=>D.getEntry(m,$)).next(ie=>{const ye=b.docVersions.get($);ft(null!==ye),ie.version.compareTo(ye)<0&&(N.applyToRemoteDocument(ie,b),ie.isValidDocument()&&D.addEntry(ie,b.commitVersion))})}),V.next(()=>h.An.removeMutationBatch(m,N))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.An.performConsistencyCheck(r)).next(()=>e.Wn.vn(r,a))})}function Nb(n){const t=Be(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.He.getLastRemoteSnapshotVersion(e))}function YT(n,t){const e=Be(n),r=t.snapshotVersion;let a=e.qn;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=e.Qn.newChangeBuffer({trackRemovals:!0});a=e.qn;const m=[];t.targetChanges.forEach((D,N)=>{const M=a.get(N);if(!M)return;m.push(e.He.removeMatchingKeys(l,D.removedDocuments,N).next(()=>e.He.addMatchingKeys(l,D.addedDocuments,N)));const V=D.resumeToken;if(V.approximateByteSize()>0){const $=M.withResumeToken(V,r).withSequenceNumber(l.currentSequenceNumber);a=a.insert(N,$),ie=M,Se=D,ft((ye=$).resumeToken.approximateByteSize()>0),(0===ie.resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&m.push(e.He.updateTargetData(l,$))}var ie,ye,Se});let b=eo();if(t.documentUpdates.forEach((D,N)=>{t.resolvedLimboDocuments.has(D)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(l,D))}),m.push(KT(l,h,t.documentUpdates,r,void 0).next(D=>{b=D})),!r.isEqual(Ft.min())){const D=e.He.getLastRemoteSnapshotVersion(l).next(N=>e.He.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(D)}return Ie.waitFor(m).next(()=>h.apply(l)).next(()=>e.Wn.Vn(l,b)).next(()=>b)}).then(l=>(e.qn=a,l))}function KT(n,t,e,r,a){let l=Dn();return e.forEach(h=>l=l.add(h)),t.getEntries(n,l).next(h=>{let m=eo();return e.forEach((b,D)=>{const N=h.get(b),M=(null==a?void 0:a.get(b))||r;D.isNoDocument()&&D.version.isEqual(Ft.min())?(t.removeEntry(b,M),m=m.insert(b,D)):!N.isValidDocument()||D.version.compareTo(N.version)>0||0===D.version.compareTo(N.version)&&N.hasPendingWrites?(t.addEntry(D,M),m=m.insert(b,D)):Le("LocalStore","Ignoring outdated watch update for ",b,". Current version:",N.version," Watch version:",D.version)}),m})}function hS(n,t){const e=Be(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.An.getNextMutationBatchAfterBatchId(r,t)))}function vd(n,t){const e=Be(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return e.He.getTargetData(r,t).next(l=>l?(a=l,Ie.resolve(a)):e.He.allocateTargetId(r).next(h=>(a=new Vl(t,h,0,r.currentSequenceNumber),e.He.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=e.qn.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.qn=e.qn.insert(r.targetId,r),e.Kn.set(t,r.targetId)),r})}function Lu(n,t,e){return Mb.apply(this,arguments)}function Mb(){return(Mb=(0,oe.Z)(function*(n,t,e){const r=Be(n),a=r.qn.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!fd(h))throw h;Le("LocalStore",`Failed to update sequence numbers for target ${t}: ${h}`)}r.qn=r.qn.remove(t),r.Kn.delete(a.target)})).apply(this,arguments)}function Fg(n,t,e){const r=Be(n);let a=Ft.min(),l=Dn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,b,D){const N=Be(m),M=N.Kn.get(D);return void 0!==M?Ie.resolve(N.qn.get(M)):N.He.getTargetData(b,D)}(r,h,Mo(t)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(h,m.targetId).next(b=>{l=b})}).next(()=>r.Un.getDocumentsMatchingQuery(h,t,e?a:Ft.min(),e?l:Dn())).next(m=>({documents:m,zn:l})))}function Lg(n,t){const e=Be(n),r=Be(e.He),a=e.qn.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(h=>h?h.target:null))}function Vg(n){const t=Be(n);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(r,a,l){const h=Be(r);let m=eo(),b=vb(l);const D=_d(a),N=IDBKeyRange.lowerBound(b,!0);return D.jt({index:fr.readTimeIndex,range:N},(M,V)=>{const $=_b(h.k,V);m=m.insert($.key,$),b=V.readTime}).next(()=>({In:m,readTime:OT(b)}))}(t.Qn,e,t.jn)).then(({In:e,readTime:r})=>(t.jn=r,e))}function xb(){return(xb=(0,oe.Z)(function*(n){const t=Be(n);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(r){const a=_d(r);let l=Ft.min();return a.jt({index:fr.readTimeIndex,reverse:!0},(h,m,b)=>{m.readTime&&(l=OT(m.readTime)),b.done()}).next(()=>l)}(e)).then(e=>{t.jn=e})})).apply(this,arguments)}function JT(){return(JT=(0,oe.Z)(function*(n,t,e,r){const a=Be(n);let l=Dn(),h=eo(),m=tb();for(const N of e){const M=t.Hn(N.metadata.name);N.document&&(l=l.add(M)),h=h.insert(M,t.Jn(N)),m=m.insert(M,t.Yn(N.metadata.readTime))}const b=a.Qn.newChangeBuffer({trackRemovals:!0}),D=yield vd(a,(N=r,Mo(ud(un.fromString(`__bundle__/docs/${N}`)))));var N;return a.persistence.runTransaction("Apply bundle documents","readwrite",N=>KT(N,b,h,Ft.min(),m).next(M=>(b.apply(N),M)).next(M=>a.He.removeMatchingKeysForTargetId(N,D.targetId).next(()=>a.He.addMatchingKeys(N,l,D.targetId)).next(()=>a.Wn.Vn(N,M)).next(()=>M)))})).apply(this,arguments)}function pS(n,t){return kb.apply(this,arguments)}function kb(){return(kb=(0,oe.Z)(function*(n,t,e=Dn()){const r=yield vd(n,Mo(bb(t.bundledQuery))),a=Be(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const h=ni(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ye.saveNamedQuery(l,t);const m=r.withResumeToken(lr.EMPTY_BYTE_STRING,h);return a.qn=a.qn.insert(m.targetId,m),a.He.updateTargetData(l,m).next(()=>a.He.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.He.addMatchingKeys(l,e,r.targetId)).next(()=>a.Ye.saveNamedQuery(l,t))})})).apply(this,arguments)}class gS{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return Ie.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var r;return this.Xn.set(e.id,{id:(r=e).id,version:r.version,createTime:ni(r.createTime)}),Ie.resolve()}getNamedQuery(t,e){return Ie.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,{name:(r=e).name,query:bb(r.bundledQuery),readTime:ni(r.readTime)}),Ie.resolve();var r}}class Rb{constructor(){this.ts=new hr(ri.es),this.ns=new hr(ri.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const r=new ri(t,e);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.os(new ri(t,e))}cs(t,e){t.forEach(r=>this.removeReference(r,e))}us(t){const e=new Ke(new un([])),r=new ri(e,t),a=new ri(e,t+1),l=[];return this.ns.forEachInRange([r,a],h=>{this.os(h),l.push(h.key)}),l}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new Ke(new un([])),r=new ri(e,t),a=new ri(e,t+1);let l=Dn();return this.ns.forEachInRange([r,a],h=>{l=l.add(h.key)}),l}containsKey(t){const e=new ri(t,0),r=this.ts.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class ri{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return Ke.comparator(t.key,e.key)||Kt(t.fs,e.fs)}static ss(t,e){return Kt(t.fs,e.fs)||Ke.comparator(t.key,e.key)}}class mS{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new hr(ri.es)}checkEmpty(t){return Ie.resolve(0===this.An.length)}addMutationBatch(t,e,r,a){const l=this.ds;this.ds++;const h=new gb(l,e,r,a);this.An.push(h);for(const m of a)this.ws=this.ws.add(new ri(m.key,l)),this.Jt.addToCollectionParentIndex(t,m.key.path.popLast());return Ie.resolve(h)}lookupMutationBatch(t,e){return Ie.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const a=this.gs(e+1),l=a<0?0:a;return Ie.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return Ie.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new ri(e,0),a=new ri(e,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([r,a],h=>{const m=this._s(h.fs);l.push(m)}),Ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new hr(Kt);return e.forEach(a=>{const l=new ri(a,0),h=new ri(a,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,h],m=>{r=r.add(m.fs)})}),Ie.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1;let l=r;Ke.isDocumentKey(l)||(l=l.child(""));const h=new ri(new Ke(l),0);let m=new hr(Kt);return this.ws.forEachWhile(b=>{const D=b.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(m=m.add(b.fs)),!0)},h),Ie.resolve(this.ys(m))}ys(t){const e=[];return t.forEach(r=>{const a=this._s(r);null!==a&&e.push(a)}),e}removeMutationBatch(t,e){ft(0===this.ps(e.batchId,"removed")),this.An.shift();let r=this.ws;return Ie.forEach(e.mutations,a=>{const l=new ri(a.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.ws=r})}ee(t){}containsKey(t,e){const r=new ri(e,0),a=this.ws.firstAfterOrEqual(r);return Ie.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return Ie.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class _S{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new qr(Ke.comparator),this.size=0}addEntry(t,e,r){const a=e.key,l=this.docs.get(a),h=l?l.size:0,m=this.Ts(e);return this.docs=this.docs.insert(a,{document:e.clone(),size:m,readTime:r}),this.size+=m-h,this.Jt.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Ie.resolve(r?r.document.clone():Ln.newInvalidDocument(e))}getEntries(t,e){let r=eo();return e.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.clone():Ln.newInvalidDocument(a))}),Ie.resolve(r)}getDocumentsMatchingQuery(t,e,r){let a=eo();const l=new Ke(e.path.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:m,value:{document:b,readTime:D}}=h.getNext();if(!e.path.isPrefixOf(m.path))break;D.compareTo(r)<=0||ff(e,b)&&(a=a.insert(b.key,b.clone()))}return Ie.resolve(a)}Es(t,e){return Ie.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new yS(this)}getSize(t){return Ie.resolve(this.size)}}class yS extends lS{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach((r,a)=>{a.document.isValidDocument()?e.push(this.De.addEntry(t,a.document,this.getReadTime(r))):this.De.removeEntry(r)}),Ie.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class vS{constructor(t){this.persistence=t,this.Is=new Df(e=>df(e),dg),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.As=0,this.Rs=new Rb,this.targetCount=0,this.Ps=Zl.ie()}forEachTarget(t,e){return this.Is.forEach((r,a)=>e(a)),Ie.resolve()}getLastRemoteSnapshotVersion(t){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ie.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.As&&(this.As=e),Ie.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ps=new Zl(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Ie.resolve()}updateTargetData(t,e){return this.ce(e),Ie.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(t,e,r){let a=0;const l=[];return this.Is.forEach((h,m)=>{m.sequenceNumber<=e&&null===r.get(m.targetId)&&(this.Is.delete(h),l.push(this.removeMatchingKeysForTargetId(t,m.targetId)),a++)}),Ie.waitFor(l).next(()=>a)}getTargetCount(t){return Ie.resolve(this.targetCount)}getTargetData(t,e){const r=this.Is.get(e)||null;return Ie.resolve(r)}addMatchingKeys(t,e,r){return this.Rs.rs(e,r),Ie.resolve()}removeMatchingKeys(t,e,r){this.Rs.cs(e,r);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(h=>{l.push(a.markPotentiallyOrphaned(t,h))}),Ie.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),Ie.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Rs.ls(e);return Ie.resolve(r)}containsKey(t,e){return Ie.resolve(this.Rs.containsKey(e))}}class Vx{constructor(t,e){this.bs={},this.Be=new Oi(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new vS(this),this.Jt=new oS,this.Je=new _S(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new Z_(e),this.Ye=new gS(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new mS(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,r){Le("MemoryPersistence","Starting transaction:",t);const a=new bS(this.Be.next());return this.referenceDelegate.Vs(),r(a).next(l=>this.referenceDelegate.Ss(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ds(t,e){return Ie.or(Object.values(this.bs).map(r=>()=>r.containsKey(t,e)))}}class bS extends kT{constructor(t){super(),this.currentSequenceNumber=t}}class bd{constructor(t){this.persistence=t,this.Cs=new Rb,this.Ns=null}static ks(t){return new bd(t)}get xs(){if(this.Ns)return this.Ns;throw tt()}addReference(t,e,r){return this.Cs.addReference(r,e),this.xs.delete(r.toString()),Ie.resolve()}removeReference(t,e,r){return this.Cs.removeReference(r,e),this.xs.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Ie.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach(a=>this.xs.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.xs,r=>{const a=Ke.fromPath(r);return this.$s(t,a).next(l=>{l||e.removeEntry(a)})}).next(()=>(this.Ns=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(r=>{r?this.xs.delete(e.toString()):this.xs.add(e.toString())})}vs(t){return 0}$s(t,e){return Ie.or([()=>Ie.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}function QT(n,t){return`firestore_clients_${n}_${t}`}function XT(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Ob(n,t){return`firestore_targets_${n}_${t}`}class wd{constructor(t,e,r,a){this.user=t,this.batchId=e,this.state=r,this.error=a}static Fs(t,e,r){const a=JSON.parse(r);let l,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new xe(a.error.code,a.error.message))),h?new wd(t,e,a.state,l):(Sr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sa{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Fs(t,e){const r=JSON.parse(e);let a,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(a=new xe(r.error.code,r.error.message))),l?new sa(t,r.state,a):(Sr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Bg{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Fs(t,e){const r=JSON.parse(e);let a="object"==typeof r&&r.activeTargetIds instanceof Array,l=Tg();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=__(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return a?new Bg(t,l):(Sr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Pb{constructor(t,e){this.clientId=t,this.onlineState=e}static Fs(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Pb(e.clientId,e.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class eE{constructor(){this.activeTargetIds=Tg()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fb{constructor(t,e,r,a,l){this.window=t,this.Oe=e,this.persistenceKey=r,this.Bs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new qr(Kt),this.started=!1,this.js=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=QT(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new eE),this.Gs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,oe.Z)(function*(){const e=yield t.syncEngine.Tn();for(const a of e){if(a===t.Bs)continue;const l=t.getItem(QT(t.persistenceKey,a));if(l){const h=Bg.Fs(a,l);h&&(t.Ks=t.Ks.insert(h.clientId,h))}}t.Xs();const r=t.storage.getItem(t.Js);if(r){const a=t.Zs(r);a&&t.ti(a)}for(const a of t.js)t.qs(a);t.js=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ws,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(t){let e=!1;return this.Ks.forEach((r,a)=>{a.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ni(t,"pending")}updateMutationState(t,e,r){this.ni(t,e,r),this.si(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(Ob(this.persistenceKey,t));if(r){const a=sa.Fs(t,r);a&&(e=a.state)}}return this.ii.Ms(t),this.Xs(),e}removeLocalQueryTarget(t){this.ii.Ls(t),this.Xs()}isLocalQueryTarget(t){return this.ii.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Ob(this.persistenceKey,t))}updateQueryState(t,e,r){this.ri(t,e,r)}handleUserChange(t,e,r){e.forEach(a=>{this.si(a)}),this.currentUser=t,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(t){this.oi(t)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Le("SharedClientState","READ",t,e),e}setItem(t,e){Le("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Le("SharedClientState","REMOVE",t),this.storage.removeItem(t)}qs(t){var e=this;const r=t;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,oe.Z)(function*(){if(e.started){if(null!==r.key)if(e.Gs.test(r.key)){if(null==r.newValue){const a=e.ci(r.key);return e.ui(a,null)}{const a=e.hi(r.key,r.newValue);if(a)return e.ui(a.clientId,a)}}else if(e.zs.test(r.key)){if(null!==r.newValue){const a=e.li(r.key,r.newValue);if(a)return e.fi(a)}}else if(e.Hs.test(r.key)){if(null!==r.newValue){const a=e.di(r.key,r.newValue);if(a)return e.wi(a)}}else if(r.key===e.Js){if(null!==r.newValue){const a=e.Zs(r.newValue);if(a)return e.ti(a)}}else if(r.key===e.Ws){const a=function(l){let h=Oi.I;if(null!=l)try{const m=JSON.parse(l);ft("number"==typeof m),h=m}catch(m){Sr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);a!==Oi.I&&e.sequenceNumberHandler(a)}else if(r.key===e.Ys)return e.syncEngine._i()}else e.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(t,e,r){const a=new wd(this.currentUser,t,e,r),l=XT(this.persistenceKey,this.currentUser,t);this.setItem(l,a.Os())}si(t){const e=XT(this.persistenceKey,this.currentUser,t);this.removeItem(e)}oi(t){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:t}))}ri(t,e,r){const a=Ob(this.persistenceKey,t),l=new sa(t,e,r);this.setItem(a,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(t){const e=this.Gs.exec(t);return e?e[1]:null}hi(t,e){const r=this.ci(t);return Bg.Fs(r,e)}li(t,e){const r=this.zs.exec(t),a=Number(r[1]);return wd.Fs(new Ri(void 0!==r[2]?r[2]:null),a,e)}di(t,e){const r=this.Hs.exec(t),a=Number(r[1]);return sa.Fs(a,e)}Zs(t){return Pb.Fs(t)}fi(t){var e=this;return(0,oe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.mi(t.batchId,t.state,t.error);Le("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}wi(t){return this.syncEngine.gi(t.targetId,t.state,t.error)}ui(t,e){const r=e?this.Ks.insert(t,e):this.Ks.remove(t),a=this.ei(this.Ks),l=this.ei(r),h=[],m=[];return l.forEach(b=>{a.has(b)||h.push(b)}),a.forEach(b=>{l.has(b)||m.push(b)}),this.syncEngine.yi(h,m).then(()=>{this.Ks=r})}ti(t){this.Ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ei(t){let e=Tg();return t.forEach((r,a)=>{e=e.unionWith(a.activeTargetIds)}),e}}class Zg{constructor(){this.pi=new eE,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,r){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new eE,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class wS{Ei(t){}shutdown(){}}class tE{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rE{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}class Lb extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Mi=(t.ssl?"https":"http")+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,r,a,l){const h=this.Ui(t,e);Le("RestConnection","Sending: ",h,r);const m={};return this.qi(m,a,l),this.Ki(t,h,m,r).then(b=>(Le("RestConnection","Received: ",b),b),b=>{throw p_("RestConnection",`${t} failed with error: `,b,"url: ",h,"request:",r),b})}ji(t,e,r,a,l){return this.Bi(t,e,r,a,l)}qi(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+ef,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}Ui(t,e){return`${this.Mi}/v1/${e}:${nE[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,r,a){return new Promise((l,h)=>{const m=new VA;m.listenOnce(Sx.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Pv.NO_ERROR:const D=m.getResponseJson();Le("Connection","XHR received:",JSON.stringify(D)),l(D);break;case Pv.TIMEOUT:Le("Connection",'RPC "'+t+'" timed out'),h(new xe(me.DEADLINE_EXCEEDED,"Request time out"));break;case Pv.HTTP_ERROR:const N=m.getStatus();if(Le("Connection",'RPC "'+t+'" failed with status:',N,"response text:",m.getResponseText()),N>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const V=function($){const ie=$.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(ie)>=0?ie:me.UNKNOWN}(M.status);h(new xe(V,M.message))}else h(new xe(me.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new xe(me.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Le("Connection",'RPC "'+t+'" completed.')}});const b=JSON.stringify(a);m.send(e,"POST",b,r,15)})}Qi(t,e,r){const a=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=$C(),h=HC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new LA({})),this.qi(m.initMessageHeaders,e,r),(0,Et.uI)()||(0,Et.b$)()||(0,Et.d)()||(0,Et.w1)()||(0,Et.Mn)()||(0,Et.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const b=a.join("");Le("Connection","Creating WebChannel: "+b,m);const D=l.createWebChannel(b,m);let N=!1,M=!1;const V=new rE({Vi:ie=>{M?Le("Connection","Not sending because WebChannel is closed:",ie):(N||(Le("Connection","Opening WebChannel transport."),D.open(),N=!0),Le("Connection","WebChannel sending:",ie),D.send(ie))},Si:()=>D.close()}),$=(ie,ye,Se)=>{ie.listen(ye,rt=>{try{Se(rt)}catch(Je){setTimeout(()=>{throw Je},0)}})};return $(D,ug.EventType.OPEN,()=>{M||Le("Connection","WebChannel transport opened.")}),$(D,ug.EventType.CLOSE,()=>{M||(M=!0,Le("Connection","WebChannel transport closed"),V.Fi())}),$(D,ug.EventType.ERROR,ie=>{M||(M=!0,p_("Connection","WebChannel transport errored:",ie),V.Fi(new xe(me.UNAVAILABLE,"The operation could not be completed")))}),$(D,ug.EventType.MESSAGE,ie=>{var ye;if(!M){const Se=ie.data[0];ft(!!Se);const rt=Se,Je=rt.error||(null===(ye=rt[0])||void 0===ye?void 0:ye.error);if(Je){Le("Connection","WebChannel received error:",Je);const St=Je.status;let ot=function(Gr){const Wu=Nr[Gr];if(void 0!==Wu)return _T(Wu)}(St),ln=Je.message;void 0===ot&&(ot=me.INTERNAL,ln="Unknown error status: "+St+" with message "+Je.message),M=!0,V.Fi(new xe(ot,ln)),D.close()}else Le("Connection","WebChannel received:",Se),V.Oi(Se)}}),$(h,FA.STAT_EVENT,ie=>{ie.stat===Fv.PROXY?Le("Connection","Detected buffering proxy"):ie.stat===Fv.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.$i()},0),V}}function Vb(){return"undefined"!=typeof window?window:null}function jg(){return"undefined"!=typeof document?document:null}function $g(n){return new QA(n,!0)}class Ub{constructor(t,e,r=1e3,a=1.5,l=6e4){this.Oe=t,this.timerId=e,this.Wi=r,this.Gi=a,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),a=Math.max(0,e-r);a>0&&Le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Bb{constructor(t,e,r,a,l,h,m,b){this.Oe=t,this.nr=r,this.sr=a,this.ir=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Ub(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var t=this;return(0,oe.Z)(function*(){t.hr()&&(yield t.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}mr(){var t=this;return(0,oe.Z)(function*(){if(t.lr())return t.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(t,e){var r=this;return(0,oe.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==t?r.ur.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(Sr(e.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):e&&e.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Ni(e)})()}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.rr===e&&this.Ir(r,a)},r=>{t(()=>{const a=new xe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(a)})})}Ir(t,e){const r=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(a=>{r(()=>this.Ar(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}dr(){var t=this;this.state=5,this.ur.Zi((0,oe.Z)(function*(){t.state=0,t.start()}))}Ar(t){return Le("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Oe.enqueueAndForget(()=>this.rr===t?e():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CS extends Bb{constructor(t,e,r,a,l,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,a,h),this.k=l}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(b=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:tt(),a=t.targetChange.targetIds||[],l=function(b,D){return b.C?(ft(void 0===D||"string"==typeof D),lr.fromBase64String(D||"")):(ft(void 0===D||D instanceof Uint8Array),lr.fromUint8Array(D||new Uint8Array))}(n,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(b){const D=void 0===b.code?me.UNKNOWN:_T(b.code);return new xe(D,b.message||"")}(h);e=new JA(r,a,l,m||null)}else if("documentChange"in t){const r=t.documentChange,a=ku(n,r.document.name),l=ni(r.document.updateTime),h=new _i({mapValue:{fields:r.document.fields}}),m=Ln.newFoundDocument(a,l,h);e=new x_(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in t){const r=t.documentDelete,a=ku(n,r.document),l=r.readTime?ni(r.readTime):Ft.min(),h=Ln.newNoDocument(a,l);e=new x_([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){const r=t.documentRemove,a=ku(n,r.document);e=new x_([],r.removedTargetIds||[],a,null)}else{if(!("filter"in t))return tt();{const r=t.filter,l=new gT(r.count||0);e=new cd(r.targetId,l)}}var b;return e}(this.k,t),r=function(a){if(!("targetChange"in a))return Ft.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ft.min():l.readTime?ni(l.readTime):Ft.min()}(t);return this.listener.Pr(e,r)}br(t){const e={};e.database=Ag(this.k),e.addTarget=function(a,l){let h;const m=l.target;return h=hg(m)?{documents:DT(a,m)}:{query:IT(a,m)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=CT(a,l.resumeToken):l.snapshotVersion.compareTo(Ft.min())>0&&(h.readTime=Dg(a,l.snapshotVersion.toTimestamp())),h}(this.k,t);const r=function(n,t){const e=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.gr(e)}vr(t){const e={};e.database=Ag(this.k),e.removeTarget=t,this.gr(e)}}class iE extends Bb{constructor(t,e,r,a,l,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,a,h),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(n,t){return n&&n.length>0?(ft(void 0!==t),n.map(e=>function(r,a){let l=ni(r.updateTime?r.updateTime:a);return l.isEqual(Ft.min())&&(l=ni(a)),new uT(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ni(t.commitTime);return this.listener.Cr(r,e)}return ft(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=Ag(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>F_(this.k,r))};this.gr(e)}}class z_ extends class{}{constructor(t,e,r,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=r,this.k=a,this.$r=!1}Fr(){if(this.$r)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.Bi(t,e,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(me.UNKNOWN,a.toString())})}ji(t,e,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.ji(t,e,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(me.UNKNOWN,a.toString())})}terminate(){this.$r=!0}}class W_{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Sr(e),this.Lr=!1):Le("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Ux{constructor(t,e,r,a,l){var h=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(m=>{r.enqueueAndForget((0,oe.Z)(function*(){var b;Cd(h)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,oe.Z)(function*(D){const N=Be(D);N.Gr.add(4),yield no(N),N.Jr.set("Unknown"),N.Gr.delete(4),yield Vu(N)}),function(D){return b.apply(this,arguments)})(h))}))}),this.Jr=new W_(r,a)}}function Vu(n){return mn.apply(this,arguments)}function mn(){return(mn=(0,oe.Z)(function*(n){if(Cd(n))for(const t of n.zr)yield t(!0)})).apply(this,arguments)}function no(n){return jl.apply(this,arguments)}function jl(){return(jl=(0,oe.Z)(function*(n){for(const t of n.zr)yield t(!1)})).apply(this,arguments)}function $l(n,t){const e=Be(n);e.Wr.has(t.targetId)||(e.Wr.set(t.targetId,t),Uu(e)?Hg(e):Dd(e).lr()&&Ct(e,t))}function Y_(n,t){const e=Be(n),r=Dd(e);e.Wr.delete(t),r.lr()&&ro(e,t),0===e.Wr.size&&(r.lr()?r._r():Cd(e)&&e.Jr.set("Unknown"))}function Ct(n,t){n.Yr.X(t.targetId),Dd(n).br(t)}function ro(n,t){n.Yr.X(t),Dd(n).vr(t)}function Hg(n){n.Yr=new Ox({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Wr.get(t)||null}),Dd(n).start(),n.Jr.Br()}function Uu(n){return Cd(n)&&!Dd(n).hr()&&n.Wr.size>0}function Cd(n){return 0===Be(n).Gr.size}function Zb(n){n.Yr=void 0}function sE(n){return oE.apply(this,arguments)}function oE(){return(oE=(0,oe.Z)(function*(n){n.Wr.forEach((t,e)=>{Ct(n,t)})})).apply(this,arguments)}function TS(n,t){return jb.apply(this,arguments)}function jb(){return(jb=(0,oe.Z)(function*(n,t){Zb(n),Uu(n)?(n.Jr.Kr(t),Hg(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function Po(n,t,e){return jn.apply(this,arguments)}function jn(){return(jn=(0,oe.Z)(function*(n,t,e){if(n.Jr.set("Online"),t instanceof JA&&2===t.state&&t.cause)try{yield(r=(0,oe.Z)(function*(a,l){const h=l.cause;for(const m of l.targetIds)a.Wr.has(m)&&(yield a.remoteSyncer.rejectListen(m,h),a.Wr.delete(m),a.Yr.removeTarget(m))}),function(a,l){return r.apply(this,arguments)})(n,t)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield As(n,r)}else if(t instanceof x_?n.Yr.ot(t):t instanceof cd?n.Yr.dt(t):n.Yr.ut(t),!e.isEqual(Ft.min()))try{const r=yield Nb(n.localStore);e.compareTo(r)>=0&&(yield function(a,l){const h=a.Yr.gt(l);return h.targetChanges.forEach((m,b)=>{if(m.resumeToken.approximateByteSize()>0){const D=a.Wr.get(b);D&&a.Wr.set(b,D.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach(m=>{const b=a.Wr.get(m);if(!b)return;a.Wr.set(m,b.withResumeToken(lr.EMPTY_BYTE_STRING,b.snapshotVersion)),ro(a,m);const D=new Vl(b.target,m,1,b.sequenceNumber);Ct(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,e))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield As(n,r)}var r})).apply(this,arguments)}function As(n,t,e){return K_.apply(this,arguments)}function K_(){return(K_=(0,oe.Z)(function*(n,t,e){if(!fd(t))throw t;n.Gr.add(1),yield no(n),n.Jr.set("Offline"),e||(e=()=>Nb(n.localStore)),n.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield e(),n.Gr.delete(1),yield Vu(n)}))})).apply(this,arguments)}function aE(n,t){return t().catch(e=>As(n,e,t))}function Td(n){return qg.apply(this,arguments)}function qg(){return(qg=(0,oe.Z)(function*(n){const t=Be(n),e=Bu(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;If(t);)try{const a=yield hS(t.localStore,r);if(null===a){0===t.Qr.length&&e._r();break}r=a.batchId,Gg(t,a)}catch(a){yield As(t,a)}uE(t)&&Hl(t)})).apply(this,arguments)}function If(n){return Cd(n)&&n.Qr.length<10}function Gg(n,t){n.Qr.push(t);const e=Bu(n);e.lr()&&e.Sr&&e.Dr(t.mutations)}function uE(n){return Cd(n)&&!Bu(n).hr()&&n.Qr.length>0}function Hl(n){Bu(n).start()}function ES(n){return J_.apply(this,arguments)}function J_(){return(J_=(0,oe.Z)(function*(n){Bu(n).kr()})).apply(this,arguments)}function $b(n){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,oe.Z)(function*(n){const t=Bu(n);for(const e of n.Qr)t.Dr(e.mutations)})).apply(this,arguments)}function Hb(n,t,e){return Q_.apply(this,arguments)}function Q_(){return(Q_=(0,oe.Z)(function*(n,t,e){const r=n.Qr.shift(),a=mb.from(r,t,e);yield aE(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Td(n)})).apply(this,arguments)}function Af(n,t){return qb.apply(this,arguments)}function qb(){return(qb=(0,oe.Z)(function*(n,t){var e;t&&Bu(n).Sr&&(yield(e=(0,oe.Z)(function*(r,a){if(mT(l=a.code)&&l!==me.ABORTED){const h=r.Qr.shift();Bu(r).wr(),yield aE(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Td(r)}var l}),function(r,a){return e.apply(this,arguments)})(n,t)),uE(n)&&Hl(n)})).apply(this,arguments)}function Sf(n,t){return X_.apply(this,arguments)}function X_(){return(X_=(0,oe.Z)(function*(n,t){const e=Be(n);t?(e.Gr.delete(2),yield Vu(e)):t||(e.Gr.add(2),yield no(e),e.Jr.set("Unknown"))})).apply(this,arguments)}function Dd(n){return n.Xr||(n.Xr=function(t,e,r){const a=Be(t);return a.Fr(),new CS(e,a.ir,a.authCredentials,a.appCheckCredentials,a.k,r)}(n.datastore,n.asyncQueue,{Di:sE.bind(null,n),Ni:TS.bind(null,n),Pr:Po.bind(null,n)}),n.zr.push(function(){var t=(0,oe.Z)(function*(e){e?(n.Xr.wr(),Uu(n)?Hg(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),Zb(n))});return function(e){return t.apply(this,arguments)}}())),n.Xr}function Bu(n){return n.Zr||(n.Zr=function(t,e,r){const a=Be(t);return a.Fr(),new iE(e,a.ir,a.authCredentials,a.appCheckCredentials,a.k,r)}(n.datastore,n.asyncQueue,{Di:ES.bind(null,n),Ni:Af.bind(null,n),Nr:$b.bind(null,n),Cr:Hb.bind(null,n)}),n.zr.push(function(){var t=(0,oe.Z)(function*(e){e?(n.Zr.wr(),yield Td(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(e){return t.apply(this,arguments)}}())),n.Zr}class Nf{constructor(t,e,r,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(t,e,r,a,l){const h=Date.now()+r,m=new Nf(t,e,h,a,l);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(n,t){if(Sr("AsyncQueue",`${t}: ${n}`),fd(n))return new xe(me.UNAVAILABLE,`${t}: ${n}`);throw n}class ql{constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ke.comparator(e.key,r.key):(e,r)=>Ke.comparator(e.key,r.key),this.keyedMap=M_(),this.sortedSet=new qr(this.comparator)}static emptySet(t){return new ql(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ql)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new ql;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class ey{constructor(){this.eo=new qr(Ke.comparator)}track(t){const e=t.doc.key,r=this.eo.get(e);r?0!==t.type&&3===r.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==r.type?this.eo=this.eo.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.eo=this.eo.remove(e):1===t.type&&2===r.type?this.eo=this.eo.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):tt():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal((e,r)=>{t.push(r)}),t}}class zg{constructor(t,e,r,a,l,h,m,b){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=b}static fromInitialDocuments(t,e,r,a){const l=[];return e.forEach(h=>{l.push({type:0,doc:h})}),new zg(t,e,ql.emptySet(e),l,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Is(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==r[a].type||!e[a].doc.isEqual(r[a].doc))return!1;return!0}}class Bx{constructor(){this.so=void 0,this.listeners=[]}}class Dt{constructor(){this.queries=new Df(t=>xo(t),Is),this.onlineState="Unknown",this.io=new Set}}function lE(n,t){return Id.apply(this,arguments)}function Id(){return(Id=(0,oe.Z)(function*(n,t){const e=Be(n),r=t.query;let a=!1,l=e.queries.get(r);if(l||(a=!0,l=new Bx),a)try{l.so=yield e.onListen(r)}catch(h){const m=Mf(h,`Initialization of query '${Xs(t.query)}' failed`);return void t.onError(m)}e.queries.set(r,l),l.listeners.push(t),t.ro(e.onlineState),l.so&&t.oo(l.so)&&cE(e)})).apply(this,arguments)}function Gb(n,t){return zb.apply(this,arguments)}function zb(){return(zb=(0,oe.Z)(function*(n,t){const e=Be(n),r=t.query;let a=!1;const l=e.queries.get(r);if(l){const h=l.listeners.indexOf(t);h>=0&&(l.listeners.splice(h,1),a=0===l.listeners.length)}if(a)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function DS(n,t){const e=Be(n);let r=!1;for(const a of t){const h=e.queries.get(a.query);if(h){for(const m of h.listeners)m.oo(a)&&(r=!0);h.so=a}}r&&cE(e)}function Zx(n,t,e){const r=Be(n),a=r.queries.get(t);if(a)for(const l of a.listeners)l.onError(e);r.queries.delete(t)}function cE(n){n.io.forEach(t=>{t.next()})}class Wb{constructor(t,e,r){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)3!==a.type&&r.push(a);t=new zg(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){return!t.fromCache||!(this.options.wo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}ho(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(t){t=zg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class Li{constructor(t,e){this.payload=t,this.byteLength=e}_o(){return"metadata"in this.payload}}class dE{constructor(t){this.k=t}Hn(t){return ku(this.k,t)}Jn(t){return t.metadata.exists?ab(this.k,t.document,!1):Ln.newNoDocument(this.Hn(t.metadata.name),this.Yn(t.metadata.readTime))}Yn(t){return ni(t)}}class IS{constructor(t,e,r){this.mo=t,this.localStore=e,this.k=r,this.queries=[],this.documents=[],this.progress=ty(t)}yo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}po(t){const e=new Map,r=new dE(this.k);for(const a of t)if(a.metadata.queries){const l=r.Hn(a.metadata.name);for(const h of a.metadata.queries){const m=(e.get(h)||Dn()).add(l);e.set(h,m)}}return e}complete(){var t=this;return(0,oe.Z)(function*(){const e=yield function(n,t,e,r){return JT.apply(this,arguments)}(t.localStore,new dE(t.k),t.documents,t.mo.id),r=t.po(t.documents);for(const a of t.queries)yield pS(t.localStore,a,r.get(a.name));return t.progress.taskState="Success",new HT(Object.assign({},t.progress),e)})()}}function ty(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hE{constructor(t){this.key=t}}class fE{constructor(t){this.key=t}}class pE{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=Dn(),this.mutatedKeys=Dn(),this.Ao=Wv(t),this.Ro=new ql(this.Ao)}get Po(){return this.To}bo(t,e){const r=e?e.vo:new ey,a=e?e.Ro:this.Ro;let l=e?e.mutatedKeys:this.mutatedKeys,h=a,m=!1;const b=I_(this.query)&&a.size===this.query.limit?a.last():null,D=gg(this.query)&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((N,M)=>{const V=a.get(N),$=ff(this.query,M)?M:null,ie=!!V&&this.mutatedKeys.has(V.key),ye=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Se=!1;V&&$?V.data.isEqual($.data)?ie!==ye&&(r.track({type:3,doc:$}),Se=!0):this.Vo(V,$)||(r.track({type:2,doc:$}),Se=!0,(b&&this.Ao($,b)>0||D&&this.Ao($,D)<0)&&(m=!0)):!V&&$?(r.track({type:0,doc:$}),Se=!0):V&&!$&&(r.track({type:1,doc:V}),Se=!0,(b||D)&&(m=!0)),Se&&($?(h=h.add($),l=ye?l.add(N):l.delete(N)):(h=h.delete(N),l=l.delete(N)))}),I_(this.query)||gg(this.query))for(;h.size>this.query.limit;){const N=I_(this.query)?h.last():h.first();h=h.delete(N.key),l=l.delete(N.key),r.track({type:1,doc:N})}return{Ro:h,vo:r,Bn:m,mutatedKeys:l}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const a=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const l=t.vo.no();l.sort((D,N)=>function(M,V){const $=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return $(M)-$(V)}(D.type,N.type)||this.Ao(D.doc,N.doc)),this.So(r);const h=e?this.Do():[],m=0===this.Io.size&&this.current?1:0,b=m!==this.Eo;return this.Eo=m,0!==l.length||b?{snapshot:new zg(this.query,t.Ro,a,l,t.mutatedKeys,0===m,b,!1),Co:h}:{Co:h}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new ey,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(e=>this.To=this.To.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.To=this.To.delete(e)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=Dn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const e=[];return t.forEach(r=>{this.Io.has(r)||e.push(new fE(r))}),this.Io.forEach(r=>{t.has(r)||e.push(new hE(r))}),e}ko(t){this.To=t.zn,this.Io=Dn();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return zg.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class AS{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class SS{constructor(t){this.key=t,this.$o=!1}}class NS{constructor(t,e,r,a,l,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Fo={},this.Oo=new Df(m=>xo(m),Is),this.Mo=new Map,this.Lo=new Set,this.Bo=new qr(Ke.comparator),this.Uo=new Map,this.qo=new Rb,this.Ko={},this.jo=new Map,this.Qo=Zl.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function Yb(n,t){return Kb.apply(this,arguments)}function Kb(){return(Kb=(0,oe.Z)(function*(n,t){const e=uy(n);let r,a;const l=e.Oo.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),a=l.view.xo();else{const h=yield vd(e.localStore,Mo(t)),m=e.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield Jb(e,t,r,"current"===m),e.isPrimaryClient&&$l(e.remoteStore,h)}return a})).apply(this,arguments)}function Jb(n,t,e,r){return ny.apply(this,arguments)}function ny(){return(ny=(0,oe.Z)(function*(n,t,e,r){n.Go=(N,M,V)=>{return($=(0,oe.Z)(function*(ie,ye,Se,rt){let Je=ye.view.bo(Se);Je.Bn&&(Je=yield Fg(ie.localStore,ye.query,!1).then(({documents:ln})=>ye.view.bo(ln,Je)));const St=rt&&rt.targetChanges.get(ye.targetId),ot=ye.view.applyChanges(Je,ie.isPrimaryClient,St);return s1(ie,ye.targetId,ot.Co),ot.snapshot}),function(ie,ye,Se,rt){return $.apply(this,arguments)})(n,N,M,V);var $};const a=yield Fg(n.localStore,t,!0),l=new pE(t,a.zn),h=l.bo(a.documents),m=Eg.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),b=l.applyChanges(h,n.isPrimaryClient,m);s1(n,e,b.Co);const D=new AS(t,e,l);return n.Oo.set(t,D),n.Mo.has(e)?n.Mo.get(e).push(t):n.Mo.set(e,[t]),b.snapshot})).apply(this,arguments)}function Qb(n,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=(0,oe.Z)(function*(n,t){const e=Be(n),r=e.Oo.get(t),a=e.Mo.get(r.targetId);if(a.length>1)return e.Mo.set(r.targetId,a.filter(l=>!Is(l,t))),void e.Oo.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lu(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),Y_(e.remoteStore,r.targetId),xf(e,r.targetId)}).catch(Ef))):(xf(e,r.targetId),yield Lu(e.localStore,r.targetId,!0))})).apply(this,arguments)}function e1(){return(e1=(0,oe.Z)(function*(n,t,e){const r=ly(n);try{const a=yield function(l,h){const m=Be(l),b=ti.now(),D=h.reduce((M,V)=>M.add(V.key),Dn());let N;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>m.Wn.vn(M,D).next(V=>{N=V;const $=[];for(const ie of h){const ye=cT(ie,N.get(ie.key));null!=ye&&$.push(new xu(ie.key,ye,D_(ye.value.mapValue),dr.exists(!0)))}return m.An.addMutationBatch(M,b,$,h)})).then(M=>(M.applyToLocalDocumentSet(N),{batchId:M.batchId,changes:N}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(l,h,m){let b=l.Ko[l.currentUser.toKey()];b||(b=new qr(Kt)),b=b.insert(h,m),l.Ko[l.currentUser.toKey()]=b}(r,a.batchId,e),yield Zu(r,a.changes),yield Td(r.remoteStore)}catch(a){const l=Mf(a,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function gE(n,t){return t1.apply(this,arguments)}function t1(){return(t1=(0,oe.Z)(function*(n,t){const e=Be(n);try{const r=yield YT(e.localStore,t);t.targetChanges.forEach((a,l)=>{const h=e.Uo.get(l);h&&(ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.$o=!0:a.modifiedDocuments.size>0?ft(h.$o):a.removedDocuments.size>0&&(ft(h.$o),h.$o=!1))}),yield Zu(e,r,t)}catch(r){yield Ef(r)}})).apply(this,arguments)}function mE(n,t,e){const r=Be(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const a=[];r.Oo.forEach((l,h)=>{const m=h.view.ro(t);m.snapshot&&a.push(m.snapshot)}),function(l,h){const m=Be(l);m.onlineState=h;let b=!1;m.queries.forEach((D,N)=>{for(const M of N.listeners)M.ro(h)&&(b=!0)}),b&&cE(m)}(r.eventManager,t),a.length&&r.Fo.Pr(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function MS(n,t,e){return n1.apply(this,arguments)}function n1(){return(n1=(0,oe.Z)(function*(n,t,e){const r=Be(n);r.sharedClientState.updateQueryState(t,"rejected",e);const a=r.Uo.get(t),l=a&&a.key;if(l){let h=new qr(Ke.comparator);h=h.insert(l,Ln.newNoDocument(l,Ft.min()));const m=Dn().add(l),b=new ia(Ft.min(),new Map,new hr(Kt),h,m);yield gE(r,b),r.Bo=r.Bo.remove(l),r.Uo.delete(t),sy(r)}else yield Lu(r.localStore,t,!1).then(()=>xf(r,t,e)).catch(Ef)})).apply(this,arguments)}function Wg(n,t){return r1.apply(this,arguments)}function r1(){return(r1=(0,oe.Z)(function*(n,t){const e=Be(n),r=t.batch.batchId;try{const a=yield WT(e.localStore,t);i1(e,r,null),iy(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield Zu(e,a)}catch(a){yield Ef(a)}})).apply(this,arguments)}function xS(n,t,e){return ry.apply(this,arguments)}function ry(){return(ry=(0,oe.Z)(function*(n,t,e){const r=Be(n);try{const a=yield function(l,h){const m=Be(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let D;return m.An.lookupMutationBatch(b,h).next(N=>(ft(null!==N),D=N.keys(),m.An.removeMutationBatch(b,N))).next(()=>m.An.performConsistencyCheck(b)).next(()=>m.Wn.vn(b,D))})}(r.localStore,t);i1(r,t,e),iy(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield Zu(r,a)}catch(a){yield Ef(a)}})).apply(this,arguments)}function _E(){return(_E=(0,oe.Z)(function*(n,t){const e=Be(n);Cd(e.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=Be(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.An.getHighestUnacknowledgedBatchId(m))}(e.localStore);if(-1===r)return void t.resolve();const a=e.jo.get(r)||[];a.push(t),e.jo.set(r,a)}catch(r){const a=Mf(r,"Initialization of waitForPendingWrites() operation failed");t.reject(a)}})).apply(this,arguments)}function iy(n,t){(n.jo.get(t)||[]).forEach(e=>{e.resolve()}),n.jo.delete(t)}function i1(n,t,e){const r=Be(n);let a=r.Ko[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),r.Ko[r.currentUser.toKey()]=a}}function xf(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Mo.get(t))n.Oo.delete(r),e&&n.Fo.zo(r,e);n.Mo.delete(t),n.isPrimaryClient&&n.qo.us(t).forEach(r=>{n.qo.containsKey(r)||yE(n,r)})}function yE(n,t){n.Lo.delete(t.path.canonicalString());const e=n.Bo.get(t);null!==e&&(Y_(n.remoteStore,e),n.Bo=n.Bo.remove(t),n.Uo.delete(e),sy(n))}function s1(n,t,e){for(const r of e)r instanceof hE?(n.qo.addReference(r.key,t),kS(n,r)):r instanceof fE?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,t),n.qo.containsKey(r.key)||yE(n,r.key)):tt()}function kS(n,t){const e=t.key,r=e.path.canonicalString();n.Bo.get(e)||n.Lo.has(r)||(Le("SyncEngine","New document in limbo: "+e),n.Lo.add(r),sy(n))}function sy(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const t=n.Lo.values().next().value;n.Lo.delete(t);const e=new Ke(un.fromString(t)),r=n.Qo.next();n.Uo.set(r,new SS(e)),n.Bo=n.Bo.insert(e,r),$l(n.remoteStore,new Vl(Mo(ud(e.path)),r,2,Oi.I))}}function Zu(n,t,e){return o1.apply(this,arguments)}function o1(){return(o1=(0,oe.Z)(function*(n,t,e){const r=Be(n),a=[],l=[],h=[];var m;r.Oo.isEmpty()||(r.Oo.forEach((m,b)=>{h.push(r.Go(b,t,e).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(b.targetId,D.fromCache?"not-current":"current"),a.push(D);const N=G_.$n(b.targetId,D);l.push(N)}}))}),yield Promise.all(h),r.Fo.Pr(a),yield(m=(0,oe.Z)(function*(b,D){const N=Be(b);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>Ie.forEach(D,V=>Ie.forEach(V.kn,$=>N.persistence.referenceDelegate.addReference(M,V.targetId,$)).next(()=>Ie.forEach(V.xn,$=>N.persistence.referenceDelegate.removeReference(M,V.targetId,$)))))}catch(M){if(!fd(M))throw M;Le("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const V=M.targetId;if(!M.fromCache){const $=N.qn.get(V),ye=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);N.qn=N.qn.insert(V,ye)}}}),function(b,D){return m.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function $x(n,t){return vE.apply(this,arguments)}function vE(){return(vE=(0,oe.Z)(function*(n,t){const e=Be(n);if(!e.currentUser.isEqual(t)){Le("SyncEngine","User change. New user:",t.toKey());const r=yield zT(e.localStore,t);e.currentUser=t,(a=e).jo.forEach(h=>{h.forEach(m=>{m.reject(new xe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.jo.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield Zu(e,r.Gn)}var a})).apply(this,arguments)}function Hx(n,t){const e=Be(n),r=e.Uo.get(t);if(r&&r.$o)return Dn().add(r.key);{let a=Dn();const l=e.Mo.get(t);if(!l)return a;for(const h of l){const m=e.Oo.get(h);a=a.unionWith(m.view.Po)}return a}}function a1(n,t){return u1.apply(this,arguments)}function u1(){return(u1=(0,oe.Z)(function*(n,t){const e=Be(n),r=yield Fg(e.localStore,t.query,!0),a=t.view.ko(r);return e.isPrimaryClient&&s1(e,t.targetId,a.Co),a})).apply(this,arguments)}function RS(n){return l1.apply(this,arguments)}function l1(){return(l1=(0,oe.Z)(function*(n){const t=Be(n);return Vg(t.localStore).then(e=>Zu(t,e))})).apply(this,arguments)}function OS(n,t,e,r){return c1.apply(this,arguments)}function c1(){return(c1=(0,oe.Z)(function*(n,t,e,r){const a=Be(n),l=yield function(h,m){const b=Be(h),D=Be(b.An);return b.persistence.runTransaction("Lookup mutation documents","readonly",N=>D.Zt(N,m).next(M=>M?b.Wn.vn(N,M):Ie.resolve(null)))}(a.localStore,t);var m;null!==l?("pending"===e?yield Td(a.remoteStore):"acknowledged"===e||"rejected"===e?(i1(a,t,r||null),iy(a,t),m=t,Be(Be(a.localStore).An).ee(m)):tt(),yield Zu(a,l)):Le("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function oy(){return(oy=(0,oe.Z)(function*(n,t){const e=Be(n);if(uy(e),ly(e),!0===t&&!0!==e.Wo){const r=e.sharedClientState.getAllActiveQueryTargets(),a=yield ay(e,r.toArray());e.Wo=!0,yield Sf(e.remoteStore,!0);for(const l of a)$l(e.remoteStore,l)}else if(!1===t&&!1!==e.Wo){const r=[];let a=Promise.resolve();e.Mo.forEach((l,h)=>{e.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(xf(e,h),Lu(e.localStore,h,!0))),Y_(e.remoteStore,h)}),yield a,yield ay(e,r),function(l){const h=Be(l);h.Uo.forEach((m,b)=>{Y_(h.remoteStore,b)}),h.qo.hs(),h.Uo=new Map,h.Bo=new qr(Ke.comparator)}(e),e.Wo=!1,yield Sf(e.remoteStore,!1)}})).apply(this,arguments)}function ay(n,t,e){return d1.apply(this,arguments)}function d1(){return(d1=(0,oe.Z)(function*(n,t,e){const r=Be(n),a=[],l=[];for(const h of t){let m;const b=r.Mo.get(h);if(b&&0!==b.length){m=yield vd(r.localStore,Mo(b[0]));for(const D of b){const N=r.Oo.get(D),M=yield a1(r,N);M.snapshot&&l.push(M.snapshot)}}else{const D=yield Lg(r.localStore,h);m=yield vd(r.localStore,D),yield Jb(r,Ad(D),h,!1)}a.push(m)}return r.Fo.Pr(l),a})).apply(this,arguments)}function Ad(n){return tT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vi(n){const t=Be(n);return Be(Be(t.localStore).persistence).Tn()}function bE(n,t,e,r){return io.apply(this,arguments)}function io(){return(io=(0,oe.Z)(function*(n,t,e,r){const a=Be(n);if(a.Wo)Le("SyncEngine","Ignoring unexpected query state notification.");else if(a.Mo.has(t))switch(e){case"current":case"not-current":{const l=yield Vg(a.localStore),h=ia.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Zu(a,l,h);break}case"rejected":yield Lu(a.localStore,t,!0),xf(a,t,r);break;default:tt()}})).apply(this,arguments)}function h1(n,t,e){return f1.apply(this,arguments)}function f1(){return(f1=(0,oe.Z)(function*(n,t,e){const r=uy(n);if(r.Wo){for(const a of t){if(r.Mo.has(a)){Le("SyncEngine","Adding an already active target "+a);continue}const l=yield Lg(r.localStore,a),h=yield vd(r.localStore,l);yield Jb(r,Ad(l),h.targetId,!1),$l(r.remoteStore,h)}for(const a of e)r.Mo.has(a)&&(yield Lu(r.localStore,a,!1).then(()=>{Y_(r.remoteStore,a),xf(r,a)}).catch(Ef))}})).apply(this,arguments)}function uy(n){const t=Be(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=gE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MS.bind(null,t),t.Fo.Pr=DS.bind(null,t.eventManager),t.Fo.zo=Zx.bind(null,t.eventManager),t}function ly(n){const t=Be(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xS.bind(null,t),t}class CE{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,oe.Z)(function*(){e.k=$g(t.databaseInfo.databaseId),e.sharedClientState=e.Jo(t),e.persistence=e.Yo(t),yield e.persistence.start(),e.gcScheduler=e.Xo(t),e.localStore=e.Zo(t)})()}Xo(t){return null}Zo(t){return GT(this.persistence,new qT,t.initialUser,this.k)}Yo(t){return new Vx(bd.ks,this.k)}Jo(t){return new Zg}terminate(){var t=this;return(0,oe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class TE extends CE{constructor(t,e,r){super(),this.ta=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield e().call(r,t),yield function(n){return xb.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,t),yield ly(r.ta.syncEngine),yield Td(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(t){return GT(this.persistence,new qT,t.initialUser,this.k)}Xo(t){return new Db(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}Yo(t){const e=Pg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new Ab(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Vb(),jg(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(t){return new Zg}}class FS extends TE{constructor(t,e){super(t,e,!1),this.ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield e().call(r,t);const a=r.ta.syncEngine;r.sharedClientState instanceof Fb&&(r.sharedClientState.syncEngine={mi:OS.bind(null,a),gi:bE.bind(null,a),yi:h1.bind(null,a),Tn:Vi.bind(null,a),_i:RS.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var l=(0,oe.Z)(function*(h){yield function(n,t){return oy.apply(this,arguments)}(r.ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}Jo(t){const e=Vb();if(!Fb.bt(e))throw new xe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fb(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class cy{initialize(t,e){var r=this;return(0,oe.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>mE(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=$x.bind(null,r.syncEngine),yield Sf(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Dt}createDatastore(t){const e=$g(t.databaseInfo.databaseId),r=new Lb(t.databaseInfo);return new z_(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,a=t.asyncQueue,l=m=>mE(this.syncEngine,m,0),h=tE.bt()?new tE:new wS,new Ux(e,r,a,l,h);var e,r,a,l,h}createSyncEngine(t,e){return function(r,a,l,h,m,b,D){const N=new NS(r,a,l,h,m,b);return D&&(N.Wo=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,oe.Z)(function*(e){const r=Be(e);Le("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield no(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function EE(n,t=10240){let e=0;return{read:()=>(0,oe.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class p1{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class LS{constructor(t,e){this.sa=t,this.k=e,this.metadata=new mi,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var t=this;return(0,oe.Z)(function*(){return t.metadata.promise})()}Ho(){var t=this;return(0,oe.Z)(function*(){return yield t.getMetadata(),t.ra()})()}ra(){var t=this;return(0,oe.Z)(function*(){const e=yield t.oa();if(null===e)return null;const r=t.ia.decode(e),a=Number(r);isNaN(a)&&t.aa(`length string (${r}) is not valid number`);const l=yield t.ca(a);return new Li(JSON.parse(l),e.length+a)})()}ua(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}oa(){var t=this;return(0,oe.Z)(function*(){for(;t.ua()<0&&!(yield t.ha()););if(0===t.buffer.length)return null;const e=t.ua();e<0&&t.aa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ca(t){var e=this;return(0,oe.Z)(function*(){for(;e.buffer.length<t;)(yield e.ha())&&e.aa("Reached the end of bundle when more is expected.");const r=e.ia.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}aa(t){throw this.sa.cancel(),new Error(`Invalid bundle format: ${t}`)}ha(){var t=this;return(0,oe.Z)(function*(){const e=yield t.sa.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class VS{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new xe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,oe.Z)(function*(l,h){const m=Be(l),b=Ag(m.k)+"/documents",D={documents:h.map($=>Un(m.k,$))},N=yield m.ji("BatchGetDocuments",b,D),M=new Map;N.forEach($=>{const ie=function(n,t){return"found"in t?function(e,r){ft(!!r.found);const a=ku(e,r.found.name),l=ni(r.found.updateTime),h=new _i({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(a,l,h)}(n,t):"missing"in t?function(e,r){ft(!!r.missing),ft(!!r.readTime);const a=ku(e,r.missing),l=ni(r.readTime);return Ln.newNoDocument(a,l)}(n,t):tt()}(m.k,$);M.set(ie.key.toString(),ie)});const V=[];return h.forEach($=>{const ie=M.get($.toString());ft(!!ie),V.push(ie)}),V}),function(l,h){return a.apply(this,arguments)})(e.datastore,t);var a;return r.forEach(a=>e.recordVersion(a)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new Cg(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,a)=>{const l=Ke.fromPath(a);t.mutations.push(new Xv(l,t.precondition(l)))}),yield(r=(0,oe.Z)(function*(a,l){const h=Be(a),m=Ag(h.k)+"/documents",b={writes:l.map(D=>F_(h.k,D))};yield h.Bi("Commit",m,b)}),function(a,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw tt();e=Ft.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new xe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?dr.updateTime(e):dr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ft.min()))throw new xe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(e)}return dr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class kf{constructor(t,e,r,a){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=a,this.la=5,this.ur=new Ub(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var t=this;this.ur.Zi((0,oe.Z)(function*(){const e=new VS(t.datastore),r=t.da(e);r&&r.then(a=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(a)}).catch(l=>{t.wa(l)}))}).catch(a=>{t.wa(a)})}))}da(t){try{const e=this.updateFunction(t);return!lf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wa(t){this.la>0&&this._a(t)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(t)}_a(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!mT(e)}return!1}}class qx{constructor(t,e,r,a){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=a,this.user=Ri.UNAUTHENTICATED,this.clientId=Bv.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,oe.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var t=this;return(0,oe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const a=Mf(r,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}function g1(n,t){return m1.apply(this,arguments)}function m1(){return(m1=(0,oe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var a=(0,oe.Z)(function*(l){r.isEqual(l)||(yield zT(t.localStore,l),r=l)});return function(l){return a.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function US(n,t){return dy.apply(this,arguments)}function dy(){return(dy=(0,oe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield _1(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(a=>{return(l=(0,oe.Z)(function*(h,m){const b=Be(h);b.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const D=Cd(b);b.Gr.add(3),yield no(b),D&&b.Jr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(m),b.Gr.delete(3),yield Vu(b)}),function(h,m){return l.apply(this,arguments)})(t.remoteStore,a);var l}),n.onlineComponents=t})).apply(this,arguments)}function _1(n){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,oe.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield g1(n,new CE)),n.offlineComponents})).apply(this,arguments)}function hy(n){return fy.apply(this,arguments)}function fy(){return(fy=(0,oe.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield US(n,new cy)),n.onlineComponents})).apply(this,arguments)}function y1(n){return _1(n).then(t=>t.persistence)}function py(n){return _1(n).then(t=>t.localStore)}function DE(n){return hy(n).then(t=>t.remoteStore)}function v1(n){return hy(n).then(t=>t.syncEngine)}function Rf(n){return b1.apply(this,arguments)}function b1(){return(b1=(0,oe.Z)(function*(n){const t=yield hy(n),e=t.eventManager;return e.onListen=Yb.bind(null,t.syncEngine),e.onUnlisten=Qb.bind(null,t.syncEngine),e})).apply(this,arguments)}function w1(n,t,e={}){const r=new mi;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(a,l,h,m,b){const D=new p1({next:M=>{l.enqueueAndForget(()=>Gb(a,N));const V=M.docs.has(h);!V&&M.fromCache?b.reject(new xe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&M.fromCache&&m&&"server"===m.source?b.reject(new xe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(M)},error:M=>b.reject(M)}),N=new Wb(ud(h.path),D,{includeMetadataChanges:!0,wo:!0});return lE(a,N)}(yield Rf(n),n.asyncQueue,t,e,r)})),r.promise}function C1(n,t,e={}){const r=new mi;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(a,l,h,m,b){const D=new p1({next:M=>{l.enqueueAndForget(()=>Gb(a,N)),M.fromCache&&"server"===m.source?b.reject(new xe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(M)},error:M=>b.reject(M)}),N=new Wb(h,D,{includeMetadataChanges:!0,wo:!0});return lE(a,N)}(yield Rf(n),n.asyncQueue,t,e,r)})),r.promise}class ME{constructor(t,e,r,a,l,h,m,b){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=b}}class Of{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Of&&t.projectId===this.projectId&&t.database===this.database}}const xE=new Map;function T1(n,t,e){if(!e)throw new xe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function kE(n,t,e,r){if(!0===t&&!0===r)throw new xe(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Pf(n){if(!Ke.isDocumentKey(n))throw new xe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ff(n){if(Ke.isDocumentKey(n))throw new xe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":tt()}function Jt(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new xe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=gy(n);throw new xe(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function oa(n,t){if(t<=0)throw new xe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class RE{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gl{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RE({}),this._settingsFrozen=!1,t instanceof Of?this._databaseId=t:(this._app=t,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(a.options.projectId)}(t))}get app(){if(!this._app)throw new xe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RE(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new WC;switch(e.type){case"gapi":const r=e.client;return ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new BA(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new xe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=xE.get(t);e&&(Le("ComponentProvider","Removing Datastore"),xE.delete(t),e.terminate())}(this),Promise.resolve()}}class $n{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $n(this.firestore,t,this._key)}}class ss{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ss(this.firestore,t,this._query)}}class Fo extends ss{constructor(t,e,r){super(t,e,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $n(this.firestore,null,new Ke(t))}withConverter(t){return new Fo(this.firestore,t,this._path)}}function my(n,t,...e){if(n=(0,Et.m9)(n),T1("collection","path",t),n instanceof Gl){const r=un.fromString(t,...e);return Ff(r),new Fo(n,null,r)}{if(!(n instanceof $n||n instanceof Fo))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(t,...e));return Ff(r),new Fo(n.firestore,null,r)}}function Lf(n,t,...e){if(n=(0,Et.m9)(n),1===arguments.length&&(t=Bv.A()),T1("doc","path",t),n instanceof Gl){const r=un.fromString(t,...e);return Pf(r),new $n(n,null,new Ke(r))}{if(!(n instanceof $n||n instanceof Fo))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(t,...e));return Pf(r),new $n(n.firestore,n instanceof Fo?n.converter:null,new Ke(r))}}function _y(n,t){return n=(0,Et.m9)(n),t=(0,Et.m9)(t),(n instanceof $n||n instanceof Fo)&&(t instanceof $n||t instanceof Fo)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function PE(n,t){return n=(0,Et.m9)(n),t=(0,Et.m9)(t),n instanceof ss&&t instanceof ss&&n.firestore===t.firestore&&Is(n._query,t._query)&&n.converter===t.converter}class HS{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Ub(this,"async_queue_retry"),this.Ra=()=>{const e=jg();e&&Le("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const t=jg();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=jg();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise(()=>{});const e=new mi;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ga.push(t),this.va()))}va(){var t=this;return(0,oe.Z)(function*(){if(0!==t.ga.length){try{yield t.ga[0](),t.ga.shift(),t.ur.reset()}catch(e){if(!fd(e))throw e;Le("AsyncQueue","Operation failed with retryable error: "+e)}t.ga.length>0&&t.ur.Zi(()=>t.va())}})()}ba(t){const e=this.ma.then(()=>(this.Ea=!0,t().catch(r=>{throw this.Ta=r,this.Ea=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=e,e}enqueueAfterDelay(t,e,r){this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);const a=Nf.createAndSchedule(this,t,e,r,l=>this.Va(l));return this.pa.push(a),a}Pa(){this.Ta&&tt()}verifyOperationInProgress(){}Sa(){var t=this;return(0,oe.Z)(function*(){let e;do{e=t.ma,yield e}while(e!==t.ma)})()}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then(()=>{this.pa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()})}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}function E1(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class qS{constructor(){this._progressObserver={},this._taskCompletionResolver=new mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Hn extends Gl{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new HS,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||D1(this),this._firestoreClient.terminate()}}function Mr(n){return n._firestoreClient||D1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function D1(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new ME(n._databaseId,l,n._persistenceKey,(m=e).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new qx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function I1(n,t,e){const r=new mi;return n.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield g1(n,e),yield US(n,t),r.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function BE(n){if(n._initialized||n._terminated)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new xe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ya{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ya(lr.fromBase64String(t))}catch(e){throw new xe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ya(lr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ju{constructor(t){this._methodName=t}}class vy{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new xe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}}const ZE=/^__.*__$/;class JS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new xu(t,this.data,this.fieldMask,e,this.fieldTransforms):new wg(t,this.data,e,this.fieldTransforms)}}class jE{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new xu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function by(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Qg{constructor(t,e,r,a,l,h){this.settings=t,this.databaseId=e,this.k=r,this.ignoreUndefinedProperties=a,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new Qg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),a=this.$a({path:r,Oa:!1});return a.Ma(t),a}La(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),a=this.$a({path:r,Oa:!1});return a.ka(),a}Ba(t){return this.$a({path:void 0,Oa:!0})}Ua(t){return em(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(by(this.xa)&&ZE.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class $E{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=r||$g(t)}ja(t,e,r,a=!1){return new Qg({xa:t,methodName:e,Ka:r,path:$r.emptyPath(),Oa:!1,qa:a},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Ka(n){const t=n._freezeSettings(),e=$g(n._databaseId);return new $E(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Uf(n,t,e,r,a,l={}){const h=n.ja(l.merge||l.mergeFields?2:0,t,e,a);Ey("Data must be an object, but it was:",h,r);const m=GE(r,h);let b,D;if(l.merge)b=new sf(h.fieldMask),D=h.fieldTransforms;else if(l.mergeFields){const N=[];for(const M of l.mergeFields){const V=Dy(t,M,e);if(!h.contains(V))throw new xe(me.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);zE(N,V)||N.push(V)}b=new sf(N),D=h.fieldTransforms.filter(M=>b.covers(M.field))}else b=null,D=h.fieldTransforms;return new JS(new _i(m),b,D)}class wy extends ju{_toFieldTransform(t){if(2!==t.xa)throw t.Ua(1===t.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wy}}function A1(n,t,e){return new Qg({xa:3,Ka:t.settings.Ka,methodName:n._methodName,Oa:e},t.databaseId,t.k,t.ignoreUndefinedProperties)}class S1 extends ju{_toFieldTransform(t){return new Ll(t.path,new gf)}isEqual(t){return t instanceof S1}}class HE extends ju{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=A1(this,t,!0),r=this.Qa.map(l=>Sd(l,e)),a=new Fl(r);return new Ll(t.path,a)}isEqual(t){return this===t}}class Cy extends ju{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=A1(this,t,!0),r=this.Qa.map(l=>Sd(l,e)),a=new qa(r);return new Ll(t.path,a)}isEqual(t){return this===t}}class qE extends ju{constructor(t,e){super(t),this.Wa=e}_toFieldTransform(t){const e=new ld(t.k,sT(t.k,this.Wa));return new Ll(t.path,e)}isEqual(t){return this===t}}function N1(n,t,e,r){const a=n.ja(1,t,e);Ey("Data must be an object, but it was:",a,r);const l=[],h=_i.empty();rd(r,(b,D)=>{const N=Iy(t,b,e);D=(0,Et.m9)(D);const M=a.La(N);if(D instanceof wy)l.push(N);else{const V=Sd(D,M);null!=V&&(l.push(N),h.set(N,V))}});const m=new sf(l);return new jE(h,m,a.fieldTransforms)}function Xg(n,t,e,r,a,l){const h=n.ja(1,t,e),m=[Dy(t,r,e)],b=[a];if(l.length%2!=0)throw new xe(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<l.length;V+=2)m.push(Dy(t,l[V])),b.push(l[V+1]);const D=[],N=_i.empty();for(let V=m.length-1;V>=0;--V)if(!zE(D,m[V])){const $=m[V];let ie=b[V];ie=(0,Et.m9)(ie);const ye=h.La($);if(ie instanceof wy)D.push($);else{const Se=Sd(ie,ye);null!=Se&&(D.push($),N.set($,Se))}}const M=new sf(D);return new jE(N,M,h.fieldTransforms)}function Ty(n,t,e,r=!1){return Sd(e,n.ja(r?4:3,t))}function Sd(n,t){if(M1(n=(0,Et.m9)(n)))return Ey("Unsupported field value:",t,n),GE(n,t);if(n instanceof ju)return function(e,r){if(!by(r.xa))throw r.Ua(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${e._methodName}() is not currently supported inside arrays`);const a=e._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,r){const a=[];let l=0;for(const h of e){let m=Sd(h,r.Ba(l));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),l++}return{arrayValue:{values:a}}}(n,t)}return function(e,r){if(null===(e=(0,Et.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sT(r.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const a=ti.fromDate(e);return{timestampValue:Dg(r.k,a)}}if(e instanceof ti){const a=new ti(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dg(r.k,a)}}if(e instanceof vy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ya)return{bytesValue:CT(r.k,e._byteString)};if(e instanceof $n){const a=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(a))throw r.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:mf(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.Ua(`Unsupported field value: ${gy(e)}`)}(n,t)}function GE(n,t){const e={};return jv(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rd(n,(r,a)=>{const l=Sd(a,t.Fa(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function M1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ti||n instanceof vy||n instanceof Ya||n instanceof $n||n instanceof ju)}function Ey(n,t,e){if(!M1(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gy(e);throw t.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function Dy(n,t,e){if((t=(0,Et.m9)(t))instanceof zl)return t._internalPath;if("string"==typeof t)return Iy(n,t);throw em("Field path arguments must be of type string or FieldPath.",n,!1,void 0,e)}const QS=new RegExp("[~\\*/\\[\\]]");function Iy(n,t,e){if(t.search(QS)>=0)throw em(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new zl(...t.split("."))._internalPath}catch(r){throw em(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function em(n,t,e,r,a){const l=r&&!r.isEmpty(),h=void 0!==a;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(l||h)&&(b+=" (found",l&&(b+=` in field ${r}`),h&&(b+=` in document ${a}`),b+=")"),new xe(me.INVALID_ARGUMENT,m+n+b)}function zE(n,t){return n.some(e=>e.isEqual(t))}class tm{constructor(t,e,r,a,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new WE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ay("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class WE extends tm{data(){return super.data()}}function Ay(n,t){return"string"==typeof t?Iy(n,t):t instanceof zl?t._internalPath:t._delegate._internalPath}class Wl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ja extends tm{constructor(t,e,r,a,l,h){super(t,e,r,a,h),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Ay("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Bf extends Ja{data(t={}){return super.data(t)}}class $u{constructor(t,e,r,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Wl(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Bf(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Bf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const m=new Bf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let b=-1,D=-1;return 0!==h.type&&(b=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),D=l.indexOf(h.doc.key)),{type:XS(h.type),doc:m,oldIndex:b,newIndex:D}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function XS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function YE(n,t){return n instanceof Ja&&t instanceof Ja?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof $u&&t instanceof $u&&n._firestore===t._firestore&&PE(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function KE(n){if(gg(n)&&0===n.explicitOrderBy.length)throw new xe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zf{}function Nd(n,...t){for(const e of t)n=e._apply(n);return n}class zx extends Zf{constructor(t,e,r){super(),this.Ga=t,this.za=e,this.Ha=r,this.type="where"}_apply(t){const e=Ka(t.firestore),r=function(a,l,h,m,b,D,N){let M;if(b.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on FieldPath.documentId().`);if("in"===D||"not-in"===D){sN(N,D);const $=[];for(const ie of N)$.push(iN(m,a,ie));M={arrayValue:{values:$}}}else M=iN(m,a,N)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||sN(N,D),M=Ty(h,"where",N,"in"===D||"not-in"===D);const V=Pi.create(b,D,M);return function($,ie){if(ie.V()){const Se=mg($);if(null!==Se&&!Se.isEqual(ie.field))throw new xe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Se.toString()}' and '${ie.field.toString()}'`);const rt=nT($);null!==rt&&JE(0,ie.field,rt)}const ye=function(Se,rt){for(const Je of Se.filters)if(rt.indexOf(Je.op)>=0)return Je.op;return null}($,function(Se){switch(Se){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==ye)throw new xe(me.INVALID_ARGUMENT,ye===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${ye.toString()}' filters.`)}(a,V),V}(t._query,0,e,t.firestore._databaseId,this.Ga,this.za,this.Ha);return new ss(t.firestore,t.converter,function(a,l){const h=a.filters.concat([l]);return new Mu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}class Yx extends Zf{constructor(t,e){super(),this.Ga=t,this.Ja=e,this.type="orderBy"}_apply(t){const e=function(r,a,l){if(null!==r.startAt)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new hf(a,l);return function(m,b){if(null===nT(m)){const D=mg(m);null!==D&&JE(0,D,b.field)}}(r,h),h}(t._query,this.Ga,this.Ja);return new ss(t.firestore,t.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new Mu(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class eN extends Zf{constructor(t,e,r){super(),this.type=t,this.Ya=e,this.Xa=r}_apply(t){return new ss(t.firestore,t.converter,zv(t._query,this.Ya,this.Xa))}}class tN extends Zf{constructor(t,e,r){super(),this.type=t,this.Za=e,this.tc=r}_apply(t){const e=rN(t,this.type,this.Za,this.tc);return new ss(t.firestore,t.converter,(a=e,new Mu((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class nN extends Zf{constructor(t,e,r){super(),this.type=t,this.Za=e,this.tc=r}_apply(t){const e=rN(t,this.type,this.Za,this.tc);return new ss(t.firestore,t.converter,(a=e,new Mu((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function rN(n,t,e,r){if(e[0]=(0,Et.m9)(e[0]),e[0]instanceof tm)return function(a,l,h,m,b){if(!m)throw new xe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const N of ts(a))if(N.field.isKeyField())D.push(b_(l,m.key));else{const M=m.data.field(N.field);if(lg(M))throw new xe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const V=N.field.canonicalString();throw new xe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(M)}return new fg(D,b)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const a=Ka(n.firestore);return function(l,h,m,b,D,N){const M=l.explicitOrderBy;if(D.length>M.length)throw new xe(me.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let $=0;$<D.length;$++){const ie=D[$];if(M[$].field.isKeyField()){if("string"!=typeof ie)throw new xe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof ie}`);if(!_g(l)&&-1!==ie.indexOf("/"))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${ie}' contains a slash.`);const ye=l.path.child(un.fromString(ie));if(!Ke.isDocumentKey(ye))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Se=new Ke(ye);V.push(b_(h,Se))}else{const ye=Ty(m,b,ie);V.push(ye)}}return new fg(V,N)}(n._query,n.firestore._databaseId,a,t,e,r)}}function iN(n,t,e){if("string"==typeof(e=(0,Et.m9)(e))){if(""===e)throw new xe(me.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_g(t)&&-1!==e.indexOf("/"))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(un.fromString(e));if(!Ke.isDocumentKey(r))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b_(n,new Ke(r))}if(e instanceof $n)return b_(n,e._key);throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${gy(e)}.`)}function sN(n,t){if(!Array.isArray(n)||0===n.length)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function JE(n,t,e){if(!e.isEqual(t))throw new xe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class x1{convertValue(t,e="none"){switch(id(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(af(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw tt()}}convertObject(t,e){const r={};return rd(t.fields,(a,l)=>{r[a]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new vy(cr(t.latitude),cr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=g_(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(uf(t));default:return null}}convertTimestamp(t){const e=Ha(t);return new ti(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=un.fromString(t);ft(db(r));const a=new Of(r.get(1),r.get(3)),l=new Ke(r.popFirst(5));return a.isEqual(e)||Sr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function Sy(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class rk extends x1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ya(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $n(this.firestore,null,e)}}class oN{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ka(t)}set(t,e,r){this._verifyNotCommitted();const a=Md(t,this._firestore),l=Sy(a.converter,e,r),h=Uf(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,dr.none())),this}update(t,e,r,...a){this._verifyNotCommitted();const l=Md(t,this._firestore);let h;return h="string"==typeof(e=(0,Et.m9)(e))||e instanceof zl?Xg(this._dataReader,"WriteBatch.update",l._key,e,r,a):N1(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(h.toMutation(l._key,dr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Md(t,this._firestore);return this._mutations=this._mutations.concat(new Cg(e._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Md(n,t){if((n=(0,Et.m9)(n)).firestore!==t)throw new xe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xd extends x1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ya(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $n(this.firestore,null,e)}}function QE(n,t,e){n=Jt(n,$n);const r=Jt(n.firestore,Hn),a=Sy(n.converter,t,e);return jf(r,[Uf(Ka(r),"setDoc",n._key,a,null!==n.converter,e).toMutation(n._key,dr.none())])}function lN(n,t,e,...r){n=Jt(n,$n);const a=Jt(n.firestore,Hn),l=Ka(a);let h;return h="string"==typeof(t=(0,Et.m9)(t))||t instanceof zl?Xg(l,"updateDoc",n._key,t,e,r):N1(l,"updateDoc",n._key,t),jf(a,[h.toMutation(n._key,dr.exists(!0))])}function kd(n,...t){var e,r,a;n=(0,Et.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof t[h]||E1(t[h])||(l=t[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges};if(E1(t[h])){const M=t[h];t[h]=null===(e=M.next)||void 0===e?void 0:e.bind(M),t[h+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),t[h+2]=null===(a=M.complete)||void 0===a?void 0:a.bind(M)}let b,D,N;if(n instanceof $n)D=Jt(n.firestore,Hn),N=ud(n._key.path),b={next:M=>{t[h]&&t[h](R1(D,n,M))},error:t[h+1],complete:t[h+2]};else{const M=Jt(n,ss);D=Jt(M.firestore,Hn),N=M._query;const V=new xd(D);b={next:$=>{t[h]&&t[h](new $u(D,V,M,$))},error:t[h+1],complete:t[h+2]},KE(n._query)}return function(M,V,$,ie){const ye=new p1(ie),Se=new Wb(V,ye,$);return M.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return lE(yield Rf(M),Se)})),()=>{ye.na(),M.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return Gb(yield Rf(M),Se)}))}}(Mr(D),N,m,b)}function jf(n,t){return function(e,r){const a=new mi;return e.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(n,t,e){return e1.apply(this,arguments)}(yield v1(e),r,a)})),a.promise}(Mr(n),t)}function R1(n,t,e){const r=e.docs.get(t._key),a=new xd(n);return new Ja(n,a,t._key,r,new Wl(e.hasPendingWrites,e.fromCache),t.converter)}class O1 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ka(t)}get(t){const e=Md(t,this._firestore),r=new rk(this._firestore);return this._transaction.lookup([e._key]).then(a=>{if(!a||1!==a.length)return tt();const l=a[0];if(l.isFoundDocument())return new tm(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new tm(this._firestore,r,e._key,null,e.converter);throw tt()})}set(t,e,r){const a=Md(t,this._firestore),l=Sy(a.converter,e,r),h=Uf(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(t,e,r,...a){const l=Md(t,this._firestore);let h;return h="string"==typeof(e=(0,Et.m9)(e))||e instanceof zl?Xg(this._dataReader,"Transaction.update",l._key,e,r,a):N1(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,h),this}delete(t){const e=Md(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Md(t,this._firestore),r=new xd(this._firestore);return super.get(t).then(a=>new Ja(this._firestore,r,e._key,a._document,new Wl(!1,!1),e.converter))}}function iD(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function sD(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function hN(){if("undefined"==typeof atob)throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){ef=Ys.SDK_VERSION,(0,Ys._registerComponent)(new jc.wA("firestore",(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),l=new Hn(a,new UA(e.getProvider("auth-internal")),new ZA(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,Ys.registerVersion)(qC,"3.4.0",n),(0,Ys.registerVersion)(qC,"3.4.0","esm2017")}();class Yl{constructor(t){this._delegate=t}static fromBase64String(t){return hN(),new Yl(Ya.fromBase64String(t))}static fromUint8Array(t){return sD(),new Yl(Ya.fromUint8Array(t))}toBase64(){return hN(),this._delegate.toBase64()}toUint8Array(){return sD(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function P1(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class hk{enableIndexedDbPersistence(t,e){return function(n,t){BE(n=Jt(n,Hn));const e=Mr(n),r=n._freezeSettings(),a=new cy;return I1(e,a,new TE(a,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){BE(n=Jt(n,Hn));const t=Mr(n),e=n._freezeSettings(),r=new cy;return I1(t,r,new FS(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new xe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new mi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(e=(0,oe.Z)(function*(r){if(!Oo.bt())return Promise.resolve();const a=r+"main";yield Oo.delete(a)}),function(r){return e.apply(this,arguments)})(Pg(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class My{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof Of||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&p_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var a;const l=(n=Jt(n,Gl))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&p_("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Ri.MOCK_USER;else{h=(0,Et.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ri(b)}n._authCredentials=new Mx(new zC(h,m))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const t=yield y1(n),e=yield DE(n);return t.setNetworkEnabled(!0),function(r){const a=Be(r);return a.Gr.delete(0),Vu(a)}(e)}))}(Mr(n=Jt(n,Hn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const t=yield y1(n),e=yield DE(n);return t.setNetworkEnabled(!1),(r=(0,oe.Z)(function*(a){const l=Be(a);l.Gr.add(0),yield no(l),l.Jr.set("Offline")}),function(a){return r.apply(this,arguments)})(e);var r}))}(Mr(n=Jt(n,Hn)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,kE("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new mi;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(n,t){return _E.apply(this,arguments)}(yield v1(t),e)})),e.promise}(Mr(n=Jt(n,Hn)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new p1(t);return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return r=yield Rf(n),a=e,Be(r).io.add(a),void a.next();var r,a})),()=>{e.na(),n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return r=yield Rf(n),a=e,void Be(r).io.delete(a);var r,a}))}}(Mr(n=Jt(n,Hn)),E1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Kl(this,my(this._delegate,t))}catch(e){throw os(e,"collection()","Firestore.collection()")}}doc(t){try{return new so(this,Lf(this._delegate,t))}catch(e){throw os(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new as(this,function(n,t){if(n=Jt(n,Gl),T1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(e=t,new Mu(un.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw os(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new mi;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const r=yield(a=n,hy(a).then(l=>l.datastore));var a;new kf(n.asyncQueue,r,t,e).run()})),e.promise}(Mr(n=Jt(n,Hn)),e=>t(new O1(n,e)))}(this._delegate,e=>t(new fN(this,e)))}batch(){return Mr(this._delegate),new oD(new oN(this._delegate,t=>jf(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Mr(n=Jt(n,Hn)),r=new qS;return function(n,t,e,r){const a=function(l,h){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,b=function(b,D){if(b instanceof Uint8Array)return EE(b,D);if(b instanceof ArrayBuffer)return EE(new Uint8Array(b),D);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new LS(b,h);var b}(e,$g(t));n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function(n,t,e){const r=Be(n);var a;(a=(0,oe.Z)(function*(l,h,m){try{const b=yield h.getMetadata();if(yield function(V,$){const ie=Be(V),ye=ni($.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Se=>ie.Ye.getBundleMetadata(Se,$.id)).then(Se=>!!Se&&Se.createTime.compareTo(ye)>=0)}(l.localStore,b))return yield h.close(),void m._completeWith((V=b,{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}));m._updateProgress(ty(b));const D=new IS(b,l.localStore,h.k);let N=yield h.Ho();for(;N;){const V=yield D.yo(N);V&&m._updateProgress(V),N=yield h.Ho()}const M=yield D.complete();yield Zu(l,M.In,void 0),yield function(V,$){const ie=Be(V);return ie.persistence.runTransaction("Save bundle","readwrite",ye=>ie.Ye.saveBundleMetadata(ye,$))}(l.localStore,b),m._completeWith(M.progress)}catch(b){p_("SyncEngine",`Loading bundle failed with ${b}`),m._failWith(b)}var V}),function(l,h,m){return a.apply(this,arguments)})(r,t,e).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield v1(n),a,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,oe.Z)(function*(){return function(e,r){const a=Be(e);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ye.getNamedQuery(l,r))}(yield py(n),t)}))}(Mr(n=Jt(n,Hn)),t).then(e=>e?new ss(n,null,e.query):null)}(this._delegate,t).then(e=>e?new as(this,e):null)}}class xy extends x1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yl(new Ya(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return so.forKey(e,this.firestore,null)}}class fN{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new xy(t)}get(t){const e=Rd(t);return this._delegate.get(e).then(r=>new nm(this._firestore,new Ja(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const a=Rd(t);return r?(iD("Transaction.set",r),this._delegate.set(a,e,r)):this._delegate.set(a,e),this}update(t,e,r,...a){const l=Rd(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...a),this}delete(t){const e=Rd(t);return this._delegate.delete(e),this}}class oD{constructor(t){this._delegate=t}set(t,e,r){const a=Rd(t);return r?(iD("WriteBatch.set",r),this._delegate.set(a,e,r)):this._delegate.set(a,e),this}update(t,e,r,...a){const l=Rd(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...a),this}delete(t){const e=Rd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class $f{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new Bf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Hu(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=$f.INSTANCES;let a=r.get(t);a||(a=new WeakMap,r.set(t,a));let l=a.get(e);return l||(l=new $f(t,new xy(t),e),a.set(e,l)),l}}$f.INSTANCES=new WeakMap;class so{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new xy(t)}static forPath(t,e,r){if(t.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new so(e,new $n(e._delegate,r,new Ke(t)))}static forKey(t,e,r){return new so(e,new $n(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Kl(this.firestore,my(this._delegate,t))}catch(e){throw os(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Et.m9)(t))instanceof $n&&_y(this._delegate,t)}set(t,e){e=iD("DocumentReference.set",e);try{return e?QE(this._delegate,t,e):QE(this._delegate,t)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?lN(this._delegate,t):lN(this._delegate,t,e,...r)}catch(a){throw os(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return jf(Jt(n.firestore,Hn),[new Cg(n._key,dr.none())])}(this._delegate)}onSnapshot(...t){const e=pN(t),r=gN(t,a=>new nm(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return kd(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Jt(n,$n);const t=Jt(n.firestore,Hn),e=Mr(t),r=new xd(t);return function(n,t){const e=new mi;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(a,l,h){try{const m=yield function(b,D){const N=Be(b);return N.persistence.runTransaction("read document","readonly",M=>N.Wn.Rn(M,D))}(a,l);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new xe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const b=Mf(m,`Failed to get document '${l} from cache`);h.reject(b)}}),function(a,l,h){return r.apply(this,arguments)})(yield py(n),t,e);var r})),e.promise}(e,n._key).then(a=>new Ja(t,r,n._key,a,new Wl(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Jt(n,$n);const t=Jt(n.firestore,Hn);return w1(Mr(t),n._key,{source:"server"}).then(e=>R1(t,n,e))}(this._delegate):function(n){n=Jt(n,$n);const t=Jt(n.firestore,Hn);return w1(Mr(t),n._key).then(e=>R1(t,n,e))}(this._delegate),e.then(r=>new nm(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new so(this.firestore,this._delegate.withConverter(t?$f.getInstance(this.firestore,t):null))}}function os(n,t,e){return n.message=n.message.replace(t,e),n}function pN(n){for(const t of n)if("object"==typeof t&&!P1(t))return t;return{}}function gN(n,t){var e,r;let a;return a=P1(n[0])?n[0]:P1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(t(l))},error:null===(e=a.error)||void 0===e?void 0:e.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class nm{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new so(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return YE(this._delegate,t._delegate)}}class Hu extends nm{data(t){const e=this._delegate.data(t);return function(n,t){n||tt()}(void 0!==e),e}}class as{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new xy(t)}where(t,e,r){try{return new as(this.firestore,Nd(this._delegate,function(n,t,e){const r=t,a=Ay("where",n);return new zx(a,r,e)}(t,e,r)))}catch(a){throw os(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new as(this.firestore,Nd(this._delegate,function(n,t="asc"){const e=t,r=Ay("orderBy",n);return new Yx(r,e)}(t,e)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new as(this.firestore,Nd(this._delegate,function(n){return oa("limit",n),new eN("limit",n,"F")}(t)))}catch(e){throw os(e,"limit()","Query.limit()")}}limitToLast(t){try{return new as(this.firestore,Nd(this._delegate,function(n){return oa("limitToLast",n),new eN("limitToLast",n,"L")}(t)))}catch(e){throw os(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new as(this.firestore,Nd(this._delegate,function(...n){return new tN("startAt",n,!0)}(...t)))}catch(e){throw os(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new as(this.firestore,Nd(this._delegate,function(...n){return new tN("startAfter",n,!1)}(...t)))}catch(e){throw os(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new as(this.firestore,Nd(this._delegate,function(...n){return new nN("endBefore",n,!0)}(...t)))}catch(e){throw os(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new as(this.firestore,Nd(this._delegate,function(...n){return new nN("endAt",n,!1)}(...t)))}catch(e){throw os(e,"endAt()","Query.endAt()")}}isEqual(t){return PE(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Jt(n,ss);const t=Jt(n.firestore,Hn),e=Mr(t),r=new xd(t);return function(n,t){const e=new mi;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(a,l,h){try{const m=yield Fg(a,l,!0),b=new pE(l,m.zn),D=b.bo(m.documents),N=b.applyChanges(D,!1);h.resolve(N.snapshot)}catch(m){const b=Mf(m,`Failed to execute query '${l} against cache`);h.reject(b)}}),function(a,l,h){return r.apply(this,arguments)})(yield py(n),t,e);var r})),e.promise}(e,n._query).then(a=>new $u(t,r,n,a))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Jt(n,ss);const t=Jt(n.firestore,Hn),e=Mr(t),r=new xd(t);return C1(e,n._query,{source:"server"}).then(a=>new $u(t,r,n,a))}(this._delegate):function(n){n=Jt(n,ss);const t=Jt(n.firestore,Hn),e=Mr(t),r=new xd(t);return KE(n._query),C1(e,n._query).then(a=>new $u(t,r,n,a))}(this._delegate),e.then(r=>new F1(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=pN(t),r=gN(t,a=>new F1(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return kd(this._delegate,e,r)}withConverter(t){return new as(this.firestore,this._delegate.withConverter(t?$f.getInstance(this.firestore,t):null))}}class mN{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class F1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Hu(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new mN(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new Hu(this._firestore,r))})}isEqual(t){return YE(this._delegate,t._delegate)}}class Kl extends as{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new so(this.firestore,t):null}doc(t){try{return new so(this.firestore,void 0===t?Lf(this._delegate):Lf(this._delegate,t))}catch(e){throw os(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=Jt(n.firestore,Hn),r=Lf(n),a=Sy(n.converter,t);return jf(e,[Uf(Ka(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new so(this.firestore,e))}isEqual(t){return _y(this._delegate,t._delegate)}withConverter(t){return new Kl(this.firestore,this._delegate.withConverter(t?$f.getInstance(this.firestore,t):null))}}function Rd(n){return Jt(n,$n)}class us{constructor(...t){this._delegate=new zl(...t)}static documentId(){return new us($r.keyField().canonicalString())}isEqual(t){return(t=(0,Et.m9)(t))instanceof zl&&this._delegate._internalPath.isEqual(t._internalPath)}}class Od{constructor(t){this._delegate=t}static serverTimestamp(){const t=new S1("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Od(t)}static delete(){const t=new wy("deleteField");return t._methodName="FieldValue.delete",new Od(t)}static arrayUnion(...t){const e=function(...n){return new HE("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Od(e)}static arrayRemove(...t){const e=function(...n){return new Cy("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Od(e)}static increment(t){const e=function(n){return new qE("increment",n)}(t);return e._methodName="FieldValue.increment",new Od(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const L1={Firestore:My,GeoPoint:vy,Timestamp:ti,Blob:Yl,Transaction:fN,WriteBatch:oD,DocumentReference:so,DocumentSnapshot:nm,Query:as,QueryDocumentSnapshot:Hu,QuerySnapshot:F1,CollectionReference:Kl,FieldPath:us,FieldValue:Od,setLogLevel:function(n){!function(n){Nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,t){n.INTERNAL.registerComponent(new jc.wA("firestore-compat",e=>((t,e)=>new My(t,e,new hk))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},L1)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(Va.Z);var rm=F(6682),Hf=F(9746),aD=F(7771),vN=F(8858);class uD extends an.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new lD(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=r.length;let h;if(this.closed)throw new ch.N;if(this.isStopped||this.hasError?h=_p.w.EMPTY:(this.observers.push(t),h=new vN.W(this,t)),a&&t.add(t=new Hf.ht(t,a)),e)for(let m=0;m<l&&!t.closed;m++)t.next(r[m]);else for(let m=0;m<l&&!t.closed;m++)t.next(r[m].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),h}_getNow(){return(this.scheduler||aD.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,a=this._events,l=a.length;let h=0;for(;h<l&&!(t-a[h].time<r);)h++;return l>e&&(h=Math.max(h,l-e)),h>0&&a.splice(0,h),a}}class lD{constructor(t,e){this.time=t,this.value=e}}function cD(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let a,h,l=0,m=!1,b=!1;return function(N){let M;l++,!a||m?(m=!1,a=new uD(n,t,r),M=a.subscribe(this),h=N.subscribe({next(V){a.next(V)},error(V){m=!0,a.error(V)},complete(){b=!0,h=void 0,a.complete()}}),b&&(h=void 0)):M=a.subscribe(this),this.add(()=>{l--,M.unsubscribe(),M=void 0,h&&!b&&e&&0===l&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}function ky(n,t){return t?ir(()=>n,t):ir(()=>n)}var Ry=F(2639);F(2329);const AN=new Map,hD={activated:!1,tokenObservers:[]},fD={initialized:!1,enabled:!1};function ii(n){return AN.get(n)||hD}function aa(n,t){AN.set(n,t)}function im(){return fD}class wk{constructor(t,e,r,a,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,oe.Z)(function*(){e.stop();try{e.pending=new Et.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new Et.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Ui=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _D(n){if(!ii(n).activated)throw Ui.create("use-before-activation",{appName:n.name})}function yD(n,t){return vD.apply(this,arguments)}function vD(){return(vD=(0,oe.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},a=e.getImmediate({optional:!0});a&&(r["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(t),headers:r};let h,m;try{h=yield fetch(n,l)}catch(M){throw Ui.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==h.status)throw Ui.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(M){throw Ui.create("fetch-parse-error",{originalErrorMessage:M.message})}const b=m.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(b[1]),N=Date.now();return{token:m.attestationToken,expireTimeMillis:N+D,issuedAtTimeMillis:N}})).apply(this,arguments)}function si(n,t){const{projectId:e,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:t}}}const Gf="firebase-app-check-store";let Fd=null;function CD(){return Fd||(Fd=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var a;t(Ui.create("storage-open",{originalErrorMessage:null===(a=r.target.error)||void 0===a?void 0:a.message}))},e.onupgradeneeded=r=>{const a=r.target.result;switch(r.oldVersion){case 0:a.createObjectStore(Gf,{keyPath:"compositeKey"})}}}catch(e){t(Ui.create("storage-open",{originalErrorMessage:e.message}))}}),Fd)}function om(){return(om=(0,oe.Z)(function*(n,t){const r=(yield CD()).transaction(Gf,"readwrite"),l=r.objectStore(Gf).put({compositeKey:n,value:t});return new Promise((h,m)=>{l.onsuccess=b=>{h()},r.onerror=b=>{var D;m(Ui.create("storage-set",{originalErrorMessage:null===(D=b.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Vd=new Ua.Yd("@firebase/app-check");function kN(n,t){return(0,Et.hl)()?function(n,t){return function(n,t){return om.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Vd.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function ON(){return im().enabled}function am(){return $1.apply(this,arguments)}function $1(){return($1=(0,oe.Z)(function*(){const n=im();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dk={error:"UNKNOWN_ERROR"};function Ik(n){return Et.US.encodeString(JSON.stringify(n),!1)}function Fy(n){return H1.apply(this,arguments)}function H1(){return(H1=(0,oe.Z)(function*(n,t=!1){const e=n.app;_D(e);const r=ii(e);let l,a=r.token;if(!a){const b=yield r.cachedTokenPromise;b&&Ly(b)&&(a=b)}if(!t&&a&&Ly(a))return{token:a.token};let m,h=!1;if(ON()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yD(si(e,yield am()),n.platformLoggerProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),h=!0);const b=yield r.exchangeTokenPromise;return yield kN(e,b),aa(e,Object.assign(Object.assign({},r),{token:b})),{token:b.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(b=>(r.exchangeTokenPromise=void 0,b)),h=!0),a=yield r.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Vd.warn(b.message):Vd.error(b),l=b}return a?(m={token:a.token},aa(e,Object.assign(Object.assign({},r),{token:a})),yield kN(e,a)):m=PN(l),h&&ND(e,m),m})).apply(this,arguments)}function G1(n,t){const e=ii(n),r=e.tokenObservers.filter(a=>a.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),aa(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function SD(n){const{app:t}=n,e=ii(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new wk((0,oe.Z)(function*(){let r;if(r=ii(t).token?yield Fy(n,!0):yield Fy(n),r.error)throw r.error}),()=>!0,()=>{const e=ii(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),aa(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function ND(n,t){const e=ii(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(a){}}function Ly(n){return n.expireTimeMillis-Date.now()>0}function PN(n){return{token:Ik(Dk),error:n}}class Sk{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=ii(this.app);for(const e of t)G1(this.app,e.next);return Promise.resolve()}}const PD="app-check-internal";(0,Ys._registerComponent)(new jc.wA("app-check",n=>function(n,t){return new Sk(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(PD).initialize()})),(0,Ys._registerComponent)(new jc.wA(PD,n=>function(n){return{getToken:t=>Fy(n,t),addTokenListener:t=>function(n,t,e,r){const{app:a}=n,l=ii(a),h={next:e,error:r,type:t};if(aa(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&Ly(l.token)){const m=l.token;Promise.resolve().then(()=>{e({token:m.token}),SD(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>SD(n))}(n,"INTERNAL",t),removeTokenListener:t=>G1(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ys.registerVersion)("@firebase/app-check","0.5.2");class Y1{constructor(){return(0,er.vb)("app-check")}}"undefined"!=typeof window&&window;const UD=new o.OlP("angularfire2.auth.use-emulator"),BD=new o.OlP("angularfire2.auth.settings"),By=new o.OlP("angularfire2.auth.tenant-id"),ZD=new o.OlP("angularfire2.auth.langugage-code"),Bi=new o.OlP("angularfire2.auth.use-device-language"),Yf=new o.OlP("angularfire.auth.persistence"),um=(n,t,e,r,a,l,h,m)=>(0,Xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=t.runOutsideAngular(()=>n.auth());if(e&&b.useEmulator(...e),r&&(b.tenantId=r),b.languageCode=a,l&&b.useDeviceLanguage(),h)for(const[D,N]of Object.entries(h))b.settings[D]=N;return m&&b.setPersistence(m),b},[e,r,a,l,h,m]);let Kf=(()=>{class n{constructor(e,r,a,l,h,m,b,D,N,M,V,$){const ie=new an.xQ,ye=(0,Ge.of)(void 0).pipe((0,Hf.QV)(h.outsideAngular),ir(()=>l.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4828)))),(0,at.U)(()=>(0,Xi.on)(e,l,r)),(0,at.U)(Se=>um(Se,l,m,D,N,M,b,V)),cD({bufferSize:1,refCount:!1}));if(ma(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ge.of)(null);else{ye.pipe(Jn()).subscribe();const rt=ye.pipe(ir(ot=>ot.getRedirectResult().then(ln=>ln,()=>null)),er.iC,cD({bufferSize:1,refCount:!1})),Je=ye.pipe(ir(ot=>new kt.y(ln=>({unsubscribe:l.runOutsideAngular(()=>ot.onAuthStateChanged(Gr=>ln.next(Gr),Gr=>ln.error(Gr),()=>ln.complete()))})))),St=ye.pipe(ir(ot=>new kt.y(ln=>({unsubscribe:l.runOutsideAngular(()=>ot.onIdTokenChanged(Gr=>ln.next(Gr),Gr=>ln.error(Gr),()=>ln.complete()))}))));this.authState=rt.pipe(ky(Je),(0,Ry.R)(h.outsideAngular),(0,Hf.QV)(h.insideAngular)),this.user=rt.pipe(ky(St),(0,Ry.R)(h.outsideAngular),(0,Hf.QV)(h.insideAngular)),this.idToken=this.user.pipe(ir(ot=>ot?(0,gn.D)(ot.getIdToken()):(0,Ge.of)(null))),this.idTokenResult=this.user.pipe(ir(ot=>ot?(0,gn.D)(ot.getIdTokenResult()):(0,Ge.of)(null))),this.credential=(0,rm.T)(rt,ie,this.authState.pipe(Pn(ot=>!ot))).pipe((0,at.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,Ry.R)(h.outsideAngular),(0,Hf.QV)(h.insideAngular))}return(0,Xi.pX)(this,ye,l,{spy:{apply:(Se,rt,Je)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&Je.then(St=>ie.next(St))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xi.Dh),o.LFG(Xi.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(er.HU),o.LFG(UD,8),o.LFG(BD,8),o.LFG(By,8),o.LFG(ZD,8),o.LFG(Bi,8),o.LFG(Yf,8),o.LFG(Y1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zy=(()=>{class n{constructor(){Km.Z.registerVersion("angularfire",er.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Kf]}),n})();function tw(n,t){return function(n,t=Jm.z){return new kt.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function nw(n,t){return tw(n,t).pipe((0,at.U)(e=>({payload:e,type:"query"})))}function $y(n,t){return nw(n,t).pipe(Ia(void 0),wt(),(0,at.U)(([e,r])=>{const a=r.payload.docChanges(),l=a.map(h=>({type:h.type,payload:h}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const b=a.find(N=>N.doc.ref.isEqual(h.ref)),D=null==e?void 0:e.payload.docs.find(N=>N.ref.isEqual(h.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(h.metadata)||!b&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),l}))}function jD(n,t,e){return $y(n,e).pipe(vu((r,a)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return Hy(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return Hy(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Hy(n,t.oldIndex,1)}return n}(n,r))}),n}(r,a.map(l=>l.payload),t),[]),function(n,t){return e=>e.lift(new ta(n,t))}(),(0,at.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function Hy(n,t,e,...r){const a=n.slice();return a.splice(t,e,...r),a}function $D(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HD{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=$y(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,at.U)(r=>r.filter(a=>t.indexOf(a.type)>-1)))),e.pipe(Ia(void 0),wt(),Pn(([r,a])=>a.length>0||!r),(0,at.U)(([r,a])=>a),er.iC)}auditTrail(t){return this.stateChanges(t).pipe(vu((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=$D(t);return jD(this.query,e,this.afs.schedulers.outsideAngular).pipe(er.iC)}valueChanges(t={}){return nw(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),er.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(er.iC)}add(t){return this.ref.add(t)}doc(t){return new qu(this.ref.doc(t),this.afs)}}class qu{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:a,query:l}=Gy(r,e);return new HD(a,l,this.afs)}snapshotChanges(){return function(n,t){return tw(n,t).pipe(Ia(void 0),wt(),(0,at.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(er.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,at.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gn.D)(this.ref.get(t)).pipe(er.iC)}}class lm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?$y(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Pn(e=>e.length>0),er.iC):$y(this.query,this.afs.schedulers.outsideAngular).pipe(er.iC)}auditTrail(t){return this.stateChanges(t).pipe(vu((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=$D(t);return jD(this.query,e,this.afs.schedulers.outsideAngular).pipe(er.iC)}valueChanges(t={}){return nw(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(a=>t.idField?Object.assign({[t.idField]:a.id},a.data()):a.data())),er.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(er.iC)}}const qy=new o.OlP("angularfire2.enableFirestorePersistence"),qD=new o.OlP("angularfire2.firestore.persistenceSettings"),rM=new o.OlP("angularfire2.firestore.settings"),iM=new o.OlP("angularfire2.firestore.use-emulator");function Gy(n,t=(e=>e)){return{query:t(n),ref:n}}let zy=(()=>{class n{constructor(e,r,a,l,h,m,b,D,N,M,V,$,ie,ye,Se,rt,Je){this.schedulers=b;const St=(0,Xi.on)(e,m,r),ot=N;M&&um(St,m,V,ie,ye,Se,$,rt),[this.firestore,this.persistenceEnabled$]=(0,Xi.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const ln=m.runOutsideAngular(()=>St.firestore());if(l&&ln.settings(l),ot&&ln.useEmulator(...ot),a&&!ma(h)){const Gr=()=>{try{return(0,gn.D)(ln.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Wu){return"undefined"!=typeof console&&console.warn(Wu),(0,Ge.of)(!1)}};return[ln,m.runOutsideAngular(Gr)]}return[ln,(0,Ge.of)(!1)]},[l,ot,a])}collection(e,r){let a;a="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:h}=Gy(a,r),m=this.schedulers.ngZone.run(()=>l);return new HD(m,h,this)}collectionGroup(e,r){const a=r||(h=>h),l=this.firestore.collectionGroup(e);return new lm(a(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const a=this.schedulers.ngZone.run(()=>r);return new qu(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xi.Dh),o.LFG(Xi.xv,8),o.LFG(qy,8),o.LFG(rM,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(er.HU),o.LFG(qD,8),o.LFG(iM,8),o.LFG(Kf,8),o.LFG(UD,8),o.LFG(BD,8),o.LFG(By,8),o.LFG(ZD,8),o.LFG(Bi,8),o.LFG(Yf,8),o.LFG(Y1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GD=(()=>{class n{constructor(){Km.Z.registerVersion("angularfire",er.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:qy,useValue:!0},{provide:qD,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[zy]}),n})(),la=(()=>{class n{constructor(e,r){var a=this;this.afs=e,this.auth=r,this.user=null,this.currUser=null,this.userCollection=e.collection("Users"),this.auth.user.subscribe(function(){var l=(0,oe.Z)(function*(h){h?yield a.userExist(h):yield a.userNotExist()});return function(h){return l.apply(this,arguments)}}())}userExist(e){var r=this;return(0,oe.Z)(function*(){r.user=e;const a=yield r.getUser(e.uid);a?(r.currUser=a,console.log("Cargo User: ",r.currUser),console.log("user still logged in")):yield r.userNotExist()})()}userNotExist(){var e=this;return(0,oe.Z)(function*(){e.user=null,e.currUser=null,console.log("no User")})()}getUser(e){var r=this;return(0,oe.Z)(function*(){return r.getAllUser().then(a=>a.find(l=>l.uid===e))})()}getAllUser(){var e=this;return(0,oe.Z)(function*(){return e.userCollection.get().toPromise().then(r=>r.docs.map(a=>{const l=a.data();return l.dId=a.id,l}))})()}addUser(e){var r=this;return(0,oe.Z)(function*(){const a=r.copyAndPrepareUser(e);yield r.userCollection.add(a).then().catch(l=>{console.log(l)})})()}updateUser(e){var r=this;return(0,oe.Z)(function*(){yield r.userCollection.doc(e.dId).update(r.copyAndPrepareUser(e))})()}deleteUser(){var e=this;return(0,oe.Z)(function*(){e.currUser?yield e.userCollection.doc(e.currUser.dId).delete():console.log("User not logged in")})()}copyAndPrepareUser(e){return Object.assign({},e)}login(e,r){var a=this;return(0,oe.Z)(function*(){yield a.auth.signInWithEmailAndPassword(e,r)})()}logout(){var e=this;return(0,oe.Z)(function*(){yield e.auth.signOut()})()}deleteAccount(){return(0,oe.Z)(function*(){var e;yield null===(e=Km.Z.auth().currentUser)||void 0===e?void 0:e.delete()})()}register(e,r){var a=this;return(0,oe.Z)(function*(){yield a.auth.createUserWithEmailAndPassword(e,r)})()}deleteCar(e){var r=this;return(0,oe.Z)(function*(){if(r.currUser){const a=r.currUser.car.indexOf(e,0);r.currUser.car.splice(a,1),yield r.updateUser(r.currUser)}})()}addCar(e){var r=this;return(0,oe.Z)(function*(){r.currUser&&(r.currUser.car.push(e),yield r.updateUser(r.currUser))})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy),o.LFG(Kf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var sM=F(9105);function vi(n,t,e,r){return(0,sM.m)(e)&&(r=e,e=void 0),r?vi(n,t,e).pipe((0,at.U)(a=>(0,vs.k)(a)?r(...a):r(a))):new kt.y(a=>{Xa(n,t,function(h){a.next(arguments.length>1?Array.prototype.slice.call(arguments):h)},a,e)})}function Xa(n,t,e,r,a){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const h=n;n.addEventListener(t,e,a),l=()=>h.removeEventListener(t,e,a)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const h=n;n.on(t,e),l=()=>h.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const h=n;n.addListener(t,e),l=()=>h.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let h=0,m=n.length;h<m;h++)Xa(n[h],t,e,r,a)}r.add(l)}var Ud=F(6561);function oM(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class YD{call(t,e){return e.subscribe(new KD(t))}}class KD extends _u{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=Tc(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let a=0;a<this.subscriptions.length;a++)if(a!==r){let l=this.subscriptions[a];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var JD=F(8640);new kt.y(JD.Z);var Yy=F(377);function Ky(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,To.n)(n,void 0).lift(new XD(t))}class XD{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Bd(t,this.resultSelector))}}class Bd extends Kn.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,vs.k)(t)?e.push(new aM(t)):e.push("function"==typeof t[Yy.hZ]?new iw(t[Yy.hZ]()):new uM(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let a=t[r];a.stillUnsubscribed?this.destination.add(a.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let h=0;h<e;h++){let m=t[h];if("function"==typeof m.hasValue&&!m.hasValue())return}let a=!1;const l=[];for(let h=0;h<e;h++){let m=t[h],b=m.next();if(m.hasCompleted()&&(a=!0),b.done)return void r.complete();l.push(b.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),a&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class iw{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class aM{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[Yy.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class uM extends li.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Yy.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,li.ft)(this.observable,new li.IY(this))}}function wr(n){return t=>t.lift(new Vk(n))}class Vk{constructor(t){this.notifier=t}call(t,e){const r=new Uk(t),a=(0,li.ft)(this.notifier,new li.IY(r));return a&&!r.seenValue?(r.add(a),e.subscribe(r)):r}}class Uk extends li.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function sw(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new lM(n,e))}}class lM{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Bk(t,this.observables,this.project))}}class Bk extends _u{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const a=e.length;this.values=new Array(a);for(let l=0;l<a;l++)this.toRespond.push(l);for(let l=0;l<a;l++)this.add(Tc(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const a=this.toRespond;if(a.length>0){const l=a.indexOf(r);-1!==l&&a.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}F(1593),F(8819);var u=F(1555);function d(n,t){return new kt.y(e=>{const r=n.length;if(0===r)return void e.complete();const a=new Array(r);let l=0,h=0;for(let m=0;m<r;m++){const b=(0,gn.D)(n[m]);let D=!1;e.add(b.subscribe({next:N=>{D||(D=!0,h++),a[m]=N},error:N=>e.error(N),complete:()=>{l++,(l===r||!D)&&(h===r&&e.next(t?t.reduce((N,M,V)=>(N[M]=a[V],N),{}):a),e.complete())}}))}})}let f=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),g=(()=>{class n extends f{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const y=new o.OlP("NgValueAccessor"),A={provide:y,useExisting:(0,o.Gpc)(()=>j),multi:!0},P=new o.OlP("CompositionEventMode");let j=(()=>{class n extends f{constructor(e,r,a){super(e,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(P,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&o.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[o._Bn([A]),o.qOj]}),n})();const te=new o.OlP("NgValidators"),Ne=new o.OlP("NgAsyncValidators");function Jy(n){return null!=n}function Qy(n){const t=(0,o.QGY)(n)?(0,gn.D)(n):n;return(0,o.CqO)(t),t}function Xy(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function e0(n,t){return t.map(e=>e(n))}function qk(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function fM(n){return null!=n?function(n){if(!n)return null;const t=n.filter(Jy);return 0==t.length?null:function(e){return Xy(e0(e,t))}}(qk(n)):null}function pM(n){return null!=n?function(n){if(!n)return null;const t=n.filter(Jy);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,vs.k)(t))return d(t,null);if((0,u.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return d(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return d(n=1===n.length&&(0,vs.k)(n[0])?n[0]:n,null).pipe((0,at.U)(e=>t(...e)))}return d(n,null)}(e0(e,t).map(Qy)).pipe((0,at.U)(Xy))}}(qk(n)):null}function Wk(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Yk(n){return n._rawValidators}function Kk(n){return n._rawAsyncValidators}function gM(n){return n?Array.isArray(n)?n:[n]:[]}function tI(n,t){return Array.isArray(n)?n.includes(t):n===t}function Jk(n,t){const e=gM(t);return gM(n).forEach(a=>{tI(e,a)||e.push(a)}),e}function Qk(n,t){return gM(t).filter(e=>!tI(n,e))}let Xk=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n}),n})(),uo=(()=>{class n extends Xk{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();class Xf extends Xk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class eR{constructor(t){this._cd=t}is(t){var e,r,a;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[t])}}let t0=(()=>{class n extends eR{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Xf,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&o.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[o.qOj]}),n})(),tR=(()=>{class n extends eR{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&o.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[o.qOj]}),n})();function rI(n,t){return[...t.path,n]}function ow(n,t){yM(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nR(n,t)})}(n,t),function(n,t){const e=(r,a)=>{t.valueAccessor.writeValue(r),a&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nR(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function iI(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),oI(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sI(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function yM(n,t){const e=Yk(n);null!==t.validator?n.setValidators(Wk(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=Kk(n);null!==t.asyncValidator?n.setAsyncValidators(Wk(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();sI(t._rawValidators,a),sI(t._rawAsyncValidators,a)}function oI(n,t){let e=!1;if(null!==n){if(null!==t.validator){const a=Yk(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==t.validator);l.length!==a.length&&(e=!0,n.setValidators(l))}}if(null!==t.asyncValidator){const a=Kk(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==t.asyncValidator);l.length!==a.length&&(e=!0,n.setAsyncValidators(l))}}}const r=()=>{};return sI(t._rawValidators,r),sI(t._rawAsyncValidators,r),e}function nR(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vM(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function bM(n,t){if(!t)return null;let e,r,a;return Array.isArray(t),t.forEach(l=>{l.constructor===j?e=l:function(n){return Object.getPrototypeOf(n.constructor)===g}(l)?r=l:a=l}),a||r||e||null}function aI(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const aw="VALID",uI="INVALID",n0="PENDING",uw="DISABLED";function wM(n){return(TM(n)?n.validators:n)||null}function sR(n){return Array.isArray(n)?fM(n):n||null}function CM(n,t){return(TM(t)?t.asyncValidators:n)||null}function oR(n){return Array.isArray(n)?pM(n):n||null}function TM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class EM{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=sR(this._rawValidators),this._composedAsyncValidatorFn=oR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===aw}get invalid(){return this.status===uI}get pending(){return this.status==n0}get disabled(){return this.status===uw}get enabled(){return this.status!==uw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=sR(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=oR(t)}addValidators(t){this.setValidators(Jk(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Jk(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Qk(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Qk(t,this._rawAsyncValidators))}hasValidator(t){return tI(this._rawValidators,t)}hasAsyncValidator(t){return tI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=n0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=uw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=aw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aw||this.status===n0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uw:aw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=n0,this._hasOwnPendingAsyncValidator=!0;const e=Qy(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(a=>{r=r instanceof lI?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof ZP&&r.at(a)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?uw:this.errors?uI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(n0)?n0:this._anyControlsHaveStatus(uI)?uI:aw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){TM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ep extends EM{constructor(t=null,e,r){super(wM(e),CM(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){aI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){aI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class lI extends EM{constructor(t,e,r){super(wM(e),CM(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,a)=>{r.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof ep?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((a,l)=>{r=e(r,a,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class ZP extends EM{constructor(t,e,r){super(wM(e),CM(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,a)=>{r.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ep?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const HP={provide:Xf,useExisting:(0,o.Gpc)(()=>r0)},lR=(()=>Promise.resolve(null))();let r0=(()=>{class n extends Xf{constructor(e,r,a,l){super(),this.control=new ep,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=bM(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),vM(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?rI(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ow(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){lR.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,a=""===r||r&&"false"!==r;lR.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,9),o.Y36(te,10),o.Y36(Ne,10),o.Y36(y,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([HP]),o.qOj,o.TTD]}),n})(),cR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const qP={provide:y,useExisting:(0,o.Gpc)(()=>IM),multi:!0};let IM=(()=>{class n extends g{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&o.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([qP]),o.qOj]}),n})(),dR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const WP={provide:y,useExisting:(0,o.Gpc)(()=>AM),multi:!0};let AM=(()=>{class n extends g{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,r){1&e&&o.NdJ("change",function(l){return r.onChange(l.target.value)})("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([WP]),o.qOj]}),n})();const SM=new o.OlP("NgModelWithFormControlWarning"),KP={provide:uo,useExisting:(0,o.Gpc)(()=>cI)};let cI=(()=>{class n extends uo{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return ow(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){iI(e.control||null,e,!1),aI(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,function(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,a=this.form.get(e.path);r!==a&&(iI(r||null,e),a instanceof ep&&(ow(a,e),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);(function(n,t){yM(n,t)})(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function(n,t){return oI(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yM(this.form,this),this._oldForm&&oI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(te,10),o.Y36(Ne,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&o.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([KP]),o.qOj,o.TTD]}),n})();const XP={provide:Xf,useExisting:(0,o.Gpc)(()=>xM)};let xM=(()=>{class n extends Xf{constructor(e,r,a,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=bM(0,l)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),vM(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return rI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,13),o.Y36(te,10),o.Y36(Ne,10),o.Y36(y,10),o.Y36(SM,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([XP]),o.qOj,o.TTD]}),n._ngModelWarningSentOnce=!1,n})();const eF={provide:y,useExisting:(0,o.Gpc)(()=>s0),multi:!0};function gR(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let s0=(()=>{class n extends g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const a=gR(r,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&o.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([eF]),o.qOj]}),n})(),cw=(()=>{class n{constructor(e,r,a){this._element=e,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(gR(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(s0,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const nF={provide:y,useExisting:(0,o.Gpc)(()=>kM),multi:!0};function mR(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let kM=(()=>{class n extends g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const a=e.map(l=>this._getOptionId(l));r=(l,h)=>{l._setSelected(a.indexOf(h.toString())>-1)}}else r=(a,l)=>{a._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const a=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let h=0;h<l.length;h++){const m=l.item(h),b=this._getOptionValue(m.value);a.push(b)}}else{const l=r.options;for(let h=0;h<l.length;h++){const m=l.item(h);if(m.selected){const b=this._getOptionValue(m.value);a.push(b)}}}this.value=a,e(a)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&o.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([nF]),o.qOj]}),n})(),dw=(()=>{class n{constructor(e,r,a){this._element=e,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(mR(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(mR(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(kM,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const oF={provide:te,useExisting:(0,o.Gpc)(()=>dI),multi:!0};let dI=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&o.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[o._Bn([oF])]}),n})(),IR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[dR]]}),n})(),AR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[IR]}),n})(),hF=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:SM,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[IR]}),n})();function bF(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",1),o.NdJ("click",function(){return o.CHM(e),o.oxw().close()}),o.TgZ(1,"span",2),o._uU(2,"\xd7"),o.qZA(),o.qZA()}}const o0=["*"],e2=["dialog"];function F2(n,t){1&n&&o._uU(0),2&n&&o.Oqu(100===t.fill?"\u2605":"\u2606")}function L2(n,t){}function V2(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",2),o._uU(1),o.qZA(),o.TgZ(2,"span",3),o.NdJ("mouseenter",function(){const l=o.CHM(e).index;return o.oxw().enter(l+1)})("click",function(){const l=o.CHM(e).index;return o.oxw().handleClick(l+1)}),o.YNc(3,L2,0,0,"ng-template",4),o.qZA()}if(2&n){const e=t.index,r=o.oxw(),a=o.MAs(1);o.xp6(1),o.hij("(",e<r.nextRate?"*":" ",")"),o.xp6(1),o.Udp("cursor",r.isInteractive()?"pointer":"default"),o.xp6(1),o.Q6J("ngTemplateOutlet",r.starTemplate||r.starTemplateFromContent||a)("ngTemplateOutletContext",r.contexts[e])}}function hI(n,t,e=0){return Math.max(Math.min(n,t),e)}function tp(n){return null!=n}function u0(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const MR={animation:!0,transitionTimerDelayMs:5};let Zi=(()=>{class n{constructor(){this.animation=MR.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const hL=()=>{},{transitionTimerDelayMs:fL}=MR,fw=new Map,bi=(n,t,e,r)=>{let a=r.context||{};const l=fw.get(t);if(l)switch(r.runningTransition){case"continue":return Kr.E;case"stop":n.run(()=>l.transition$.complete()),a=Object.assign(l.context,a),fw.delete(t)}const h=e(t,r.animation,a)||hL;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>h()),(0,Ge.of)(void 0).pipe(function(n){return t=>new kt.y(e=>t.subscribe(h=>n.run(()=>e.next(h)),h=>n.run(()=>e.error(h)),()=>n.run(()=>e.complete())))}(n));const m=new an.xQ,b=new an.xQ,D=m.pipe(function(...n){return t=>Yi(t,(0,Ge.of)(...n))}(!0));fw.set(t,{transition$:m,complete:()=>{b.next(),b.complete()},context:a});const N=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const M=vi(t,"transitionend").pipe(wr(D),Pn(({target:$})=>$===t));(function(...n){if(1===n.length){if(!(0,vs.k)(n[0]))return n[0];n=n[0]}return(0,To.n)(n,void 0).lift(new YD)})(function(n=0,t,e){let r=-1;return(0,Ud.k)(t)?r=Number(t)<1?1:Number(t):(0,mu.K)(t)&&(e=t),(0,mu.K)(e)||(e=Jm.P),new kt.y(a=>{const l=(0,Ud.k)(n)?n:+n-e.now();return e.schedule(oM,l,{index:0,period:r,subscriber:a})})}(N+fL).pipe(wr(D)),M,b).pipe(wr(D)).subscribe(()=>{fw.delete(t),n.run(()=>{h(),m.next(),m.complete()})})}),m.asObservable()};let PR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),_L=(()=>{class n{constructor(e){this._ngbConfig=e,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zi))},n.\u0275prov=o.Yz7({factory:function(){return new n(o.LFG(Zi))},token:n,providedIn:"root"}),n})();const yL=({classList:n})=>{n.remove("show")};let vL=(()=>{class n{constructor(e,r,a,l){this._renderer=r,this._element=a,this._zone=l,this.closed=new o.vpe,this.dismissible=e.dismissible,this.type=e.type,this.animation=e.animation}close(){const e=bi(this._zone,this._element.nativeElement,yL,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}ngOnChanges(e){const r=e.type;r&&!r.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${r.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${r.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(_L),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(e,r){2&e&&o.ekj("fade",r.animation)("alert-dismissible",r.dismissible)},inputs:{dismissible:"dismissible",type:"type",animation:"animation"},outputs:{closed:"closed"},exportAs:["ngbAlert"],features:[o.TTD],ngContentSelectors:o0,decls:2,vars:1,consts:function(){let t;return t=$localize`:@@ngb.alert.close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["type","button","class","close","aria-label",t,3,"click",4,"ngIf"],["type","button","aria-label",t,1,"close",3,"click"],["aria-hidden","true"]]},template:function(e,r){1&e&&(o.F$t(),o.Hsn(0),o.YNc(1,bF,3,0,"button",0)),2&e&&(o.xp6(1),o.Q6J("ngIf",r.dismissible))},directives:[pn],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),n})(),FR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),VR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),ZR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),jR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Gt=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Gt||(Gt={})),Gt))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const zR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function WR(n){const t=Array.from(n.querySelectorAll(zR)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,a={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(a=this.offset(l,!1)),a.top+=l.clientTop,a.left+=l.clientLeft}return r.top-=a.top,r.bottom-=a.top,r.left-=a.left,r.right-=a.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),a_top=window.pageYOffset-document.documentElement.clientTop,a_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+a_top,bottom:r.bottom+a_top,left:r.left+a_left,right:r.right+a_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,a){const[l="top",h="center"]=r.split("-"),m=a?this.offset(t,!1):this.position(t,!1),b=this.getAllStyles(e),D=parseFloat(b.marginTop),N=parseFloat(b.marginBottom),M=parseFloat(b.marginLeft),V=parseFloat(b.marginRight);let $=0,ie=0;switch(l){case"top":$=m.top-(e.offsetHeight+D+N);break;case"bottom":$=m.top+m.height;break;case"left":ie=m.left-(e.offsetWidth+M+V);break;case"right":ie=m.left+m.width}switch(h){case"top":$=m.top;break;case"bottom":$=m.top+m.height-e.offsetHeight;break;case"left":ie=m.left;break;case"right":ie=m.left+m.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?ie=m.left+m.width/2-e.offsetWidth/2:$=m.top+m.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(ie)}px, ${Math.round($)}px)`;const ye=e.getBoundingClientRect(),Se=document.documentElement,rt=window.innerHeight||Se.clientHeight,Je=window.innerWidth||Se.clientWidth;return ye.left>=0&&ye.top>=0&&ye.right<=Je&&ye.bottom<=rt}},new Date(1882,10,12),new Date(2174,10,25);let iO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r,AR]]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),uO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zi))},n.\u0275prov=o.Yz7({factory:function(){return new n(o.LFG(Zi))},token:n,providedIn:"root"}),n})();class gm{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const dV=()=>{};let lO=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):dV}_adjustBody(e){const r=this._document.body,a=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=a}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const a=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),a}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({factory:function(){return new n(o.LFG(de))},token:n,providedIn:"root"}),n})(),hV=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(ci(1)).subscribe(()=>{bi(this._zone,this._el.nativeElement,(e,r)=>{r&&u0(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return bi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(o.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),o.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class EI{close(t){}dismiss(t){}}class fV{constructor(t,e,r,a){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=a,this._closed=new an.xQ,this._dismissed=new an.xQ,this._hidden=new an.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,h)=>{this._resolve=l,this._reject=h}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(wr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(wr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ge.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ky(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vw=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(vw||(vw={})),vw))();let pV=(()=>{class n{constructor(e,r,a){this._document=e,this._elRef=r,this._zone=a,this._closed$=new an.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new an.xQ,this.hidden=new an.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ci(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},h=Ky(bi(this._zone,e,()=>e.classList.remove("show"),r),bi(this._zone,this._dialogEl.nativeElement,()=>{},r));return h.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),h}_show(){const e={animation:this.animation,runningTransition:"continue"};Ky(bi(this._zone,this._elRef.nativeElement,(l,h)=>{h&&u0(l),l.classList.add("show")},e),bi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{vi(e,"keydown").pipe(wr(this._closed$),Pn(a=>a.which===Gt.Escape)).subscribe(a=>{this.keyboard?requestAnimationFrame(()=>{a.defaultPrevented||this._zone.run(()=>this.dismiss(vw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;vi(this._dialogEl.nativeElement,"mousedown").pipe(wr(this._closed$),(0,Qn.b)(()=>r=!1),ir(()=>vi(e,"mouseup").pipe(wr(this._closed$),ci(1))),Pn(({target:a})=>e===a)).subscribe(()=>{r=!0}),vi(e,"click").pipe(wr(this._closed$)).subscribe(({target:a})=>{e===a&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(vw.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),a=WR(e)[0];(r||a||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let a;a=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>a.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&bi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(de),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&o.Gf(e2,7),2&e){let a;o.iGM(a=o.CRH())&&(r._dialogEl=a.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(o.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),o.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),o.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:o0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(o.F$t(),o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o.Hsn(3),o.qZA(),o.qZA()),2&e&&o.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),cO=(()=>{class n{constructor(e,r,a,l,h,m){this._applicationRef=e,this._injector=r,this._document=a,this._scrollBar=l,this._rendererFactory=h,this._ngZone=m,this._activeWindowCmptHasChanged=new an.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const b=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const a=vi(t,"focusin").pipe(wr(e),(0,at.U)(l=>l.target));vi(t,"keydown").pipe(wr(e),Pn(l=>l.which===Gt.Tab),sw(a)).subscribe(([l,h])=>{const[m,b]=WR(t);(h===m||h===t)&&l.shiftKey&&(b.focus(),l.preventDefault()),h===b&&!l.shiftKey&&(m.focus(),l.preventDefault())}),r&&vi(t,"click").pipe(wr(e),sw(a),(0,at.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,b.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(b.location.nativeElement)}})}open(e,r,a,l){const h=l.container instanceof HTMLElement?l.container:tp(l.container)?this._document.querySelector(l.container):this._document.body,m=this._rendererFactory.createRenderer(null,null),b=this._scrollBar.compensate(),D=()=>{this._modalRefs.length||(m.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!h)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const N=new EI,M=this._getContentRef(e,l.injector||r,a,N,l);let V=!1!==l.backdrop?this._attachBackdrop(e,h):void 0,$=this._attachWindowComponent(e,h,M),ie=new fV($,M,V,l.beforeDismiss);return this._registerModalRef(ie),this._registerWindowCmpt($),ie.result.then(b,b),ie.result.then(D,D),N.close=ye=>{ie.close(ye)},N.dismiss=ye=>{ie.dismiss(ye)},this._applyWindowOptions($.instance,l),1===this._modalRefs.length&&m.addClass(this._document.body,"modal-open"),V&&V.instance&&(this._applyBackdropOptions(V.instance,l),V.changeDetectorRef.detectChanges()),$.changeDetectorRef.detectChanges(),ie}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(hV).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,a){let h=e.resolveComponentFactory(pV).create(this._injector,a.nodes);return this._applicationRef.attachView(h.hostView),r.appendChild(h.location.nativeElement),h}_applyWindowOptions(e,r){this._windowAttributes.forEach(a=>{tp(r[a])&&(e[a]=r[a])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(a=>{tp(r[a])&&(e[a]=r[a])})}_getContentRef(e,r,a,l,h){return a?a instanceof o.Rgc?this._createFromTemplateRef(a,l):function(n){return"string"==typeof n}(a)?this._createFromString(a):this._createFromComponent(e,r,a,l,h):new gm([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(h){r.close(h)},dismiss(h){r.dismiss(h)}});return this._applicationRef.attachView(l),new gm([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new gm([[r]])}_createFromComponent(e,r,a,l,h){const m=e.resolveComponentFactory(a),b=o.zs3.create({providers:[{provide:EI,useValue:l}],parent:r}),D=m.create(b),N=D.location.nativeElement;return h.scrollable&&N.classList.add("component-host-scrollable"),this._applicationRef.attachView(D.hostView),new gm([[N]],D.hostView,D)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(a=>{a!==e&&"SCRIPT"!==a.nodeName&&(this._ariaHiddenValues.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const a=this._modalRefs.indexOf(e);a>-1&&(this._modalRefs.splice(a,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(de),o.LFG(lO),o.LFG(o.FYo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({factory:function(){return new n(o.LFG(o.z2F),o.LFG(o.gxx),o.LFG(de),o.LFG(lO),o.LFG(o.FYo),o.LFG(o.R0b))},token:n,providedIn:"root"}),n})(),zM=(()=>{class n{constructor(e,r,a,l){this._moduleCFR=e,this._injector=r,this._modalStack=a,this._config=l}open(e,r={}){const a=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,a)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o._Vd),o.LFG(o.zs3),o.LFG(cO),o.LFG(uO))},n.\u0275prov=o.Yz7({factory:function(){return new n(o.LFG(o._Vd),o.LFG(o.gxx),o.LFG(cO),o.LFG(uO))},token:n,providedIn:"root"}),n})(),dO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[zM]}),n})(),gO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),TO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),IO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),AO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),xV=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),kV=(()=>{class n{constructor(e,r){this._changeDetectorRef=r,this.contexts=[],this.disabled=!1,this.hover=new o.vpe,this.leave=new o.vpe,this.rateChange=new o.vpe(!0),this.onChange=a=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case Gt.ArrowDown:case Gt.ArrowLeft:this.update(this.rate-1);break;case Gt.ArrowUp:case Gt.ArrowRight:this.update(this.rate+1);break;case Gt.Home:this.update(0);break;case Gt.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(e,r)=>({fill:0,index:r})),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,r=!0){const a=hI(e,this.max,0);this.isInteractive()&&this.rate!==a&&(this.rate=a,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((r,a)=>r.fill=Math.round(100*hI(e-a,1,0)))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xV),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(e,r,a){if(1&e&&o.Suo(a,o.Rgc,5),2&e){let l;o.iGM(l=o.CRH())&&(r.starTemplateFromContent=l.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,r){1&e&&o.NdJ("blur",function(){return r.handleBlur()})("keydown",function(l){return r.handleKeyDown(l)})("mouseleave",function(){return r.reset()}),2&e&&(o.Ikx("tabindex",r.disabled?-1:0),o.uIk("aria-valuemax",r.max)("aria-valuenow",r.nextRate)("aria-valuetext",r.ariaValueText())("aria-disabled",!!r.readonly||null))},inputs:{max:"max",readonly:"readonly",rate:"rate",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[o._Bn([{provide:y,useExisting:(0,o.Gpc)(()=>n),multi:!0}]),o.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"sr-only"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&(o.YNc(0,F2,1,1,"ng-template",null,0,o.W1O),o.YNc(2,V2,4,5,"ng-template",1)),2&e&&(o.xp6(2),o.Q6J("ngForOf",r.contexts))},directives:[_t,Ur],encapsulation:2,changeDetection:0}),n})(),SO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),kO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),RO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})(),OO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();new o.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let LO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_r]]}),n})();const QV=[PR,FR,VR,ZR,jR,iO,aO,dO,gO,TO,IO,AO,SO,kO,RO,OO,LO];let XV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[QV,PR,FR,VR,ZR,jR,iO,aO,dO,gO,TO,IO,AO,SO,kO,RO,OO,LO]}),n})();function e3(n,t){if(1&n&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.lastnameMessage)}}function t3(n,t){if(1&n&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.firstnameMessage)}}function n3(n,t){if(1&n&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.genderMessage)}}function r3(n,t){if(1&n&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.birthdayMessage)}}function i3(n,t){if(1&n&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.usernameMessage)}}function s3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",16),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",17),o.TgZ(4,"div",18),o.TgZ(5,"label",19),o._uU(6,"Nachname"),o.qZA(),o.TgZ(7,"input",20,21),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().userData.currUser.lastname=a})("keydown",function(){o.CHM(e);const a=o.MAs(8);return o.oxw().validLastname(a.value)})("keydown.enter",function(){return o.CHM(e),o.oxw().inputCheck()}),o.qZA(),o.YNc(9,e3,2,1,"div",22),o.qZA(),o.qZA(),o.TgZ(10,"div",17),o.TgZ(11,"div",18),o.TgZ(12,"label",23),o._uU(13,"Vorname"),o.qZA(),o.TgZ(14,"input",24,25),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().userData.currUser.firstname=a})("keydown",function(){o.CHM(e);const a=o.MAs(15);return o.oxw().validFirstname(a.value)})("keydown.enter",function(){return o.CHM(e),o.oxw().inputCheck()}),o.qZA(),o.YNc(16,t3,2,1,"div",22),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",2),o.TgZ(18,"div",17),o.TgZ(19,"div",18),o.TgZ(20,"label",26),o._uU(21,"Geschlecht"),o.qZA(),o.TgZ(22,"select",27,28),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().userData.currUser.gender=a})("change",function(){o.CHM(e);const a=o.MAs(23);return o.oxw().validGender(a.value)})("keydown.enter",function(){return o.CHM(e),o.oxw().inputCheck()}),o._UZ(24,"option",29),o.TgZ(25,"option",30),o._uU(26,"Weiblich"),o.qZA(),o.TgZ(27,"option",31),o._uU(28,"M\xe4nnlich"),o.qZA(),o.TgZ(29,"option",32),o._uU(30,"Divers"),o.qZA(),o.qZA(),o.YNc(31,n3,2,1,"div",22),o.qZA(),o.qZA(),o.TgZ(32,"div",17),o.TgZ(33,"div",18),o.TgZ(34,"label",33),o._uU(35,"Geburtstag"),o.qZA(),o.TgZ(36,"input",34,35),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().userData.currUser.birthday=a})("change",function(){o.CHM(e);const a=o.MAs(37);return o.oxw().validBirthday(a.value)})("keydown.enter",function(){return o.CHM(e),o.oxw().inputCheck()}),o.qZA(),o.YNc(38,r3,2,1,"div",22),o.qZA(),o.qZA(),o.qZA(),o.TgZ(39,"div",2),o.TgZ(40,"div",17),o.TgZ(41,"div",18),o.TgZ(42,"label",36),o._uU(43,"Nutzername"),o.qZA(),o.TgZ(44,"input",37,38),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().userData.currUser.username=a})("keydown",function(){o.CHM(e);const a=o.MAs(45);return o.oxw().validUsername(a.value)})("keydown.enter",function(){return o.CHM(e),o.oxw().inputCheck()}),o.qZA(),o.YNc(46,i3,2,1,"div",22),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&n){const e=o.oxw();o.xp6(7),o.Gre("form-control ",e.wrongLastname,""),o.Q6J("ngModel",e.userData.currUser.lastname),o.xp6(2),o.Q6J("ngIf",""!==e.lastnameMessage),o.xp6(5),o.Gre("form-control ",e.wrongFirstname,""),o.Q6J("ngModel",e.userData.currUser.firstname),o.xp6(2),o.Q6J("ngIf",""!==e.firstnameMessage),o.xp6(6),o.Gre("form-control ",e.wrongGender,""),o.Q6J("ngModel",e.userData.currUser.gender),o.xp6(9),o.Q6J("ngIf",""!==e.genderMessage),o.xp6(5),o.Gre("form-control ",e.wrongBirthday,""),o.Q6J("ngModel",e.userData.currUser.birthday),o.xp6(2),o.Q6J("ngIf",""!==e.birthdayMessage),o.xp6(6),o.Gre("form-control ",e.wrongUsername,""),o.Q6J("ngModel",e.userData.currUser.username),o.xp6(2),o.Q6J("ngIf",""!==e.usernameMessage)}}let o3=(()=>{class n{constructor(e,r,a){var l,h,m,b,D;this.activeModal=e,this.router=r,this.userData=a,this.firstname=(null===(l=this.userData.currUser)||void 0===l?void 0:l.firstname)?this.userData.currUser.firstname:"",this.lastname=(null===(h=this.userData.currUser)||void 0===h?void 0:h.lastname)?this.userData.currUser.lastname:"",this.username=(null===(m=this.userData.currUser)||void 0===m?void 0:m.username)?this.userData.currUser.username:"",this.birthday=(null===(b=this.userData.currUser)||void 0===b?void 0:b.birthday)?this.userData.currUser.birthday:void 0,this.gender=(null===(D=this.userData.currUser)||void 0===D?void 0:D.gender)?this.userData.currUser.gender:"",this.wrongFirstname="",this.wrongLastname="",this.wrongUsername="",this.wrongBirthday="",this.wrongGender="",this.wrongRepeatPasswordClass="",this.firstnameMessage="",this.lastnameMessage="",this.usernameMessage="",this.birthdayMessage="",this.genderMessage="",this.passwordRepeatMessage=""}updateUser(){var e=this;return(0,oe.Z)(function*(){e.userData.currUser&&(yield e.userData.updateUser(e.userData.currUser))})()}inputCheck(){var e=this;return(0,oe.Z)(function*(){e.lastname.trim().length>0&&e.gender.trim().length>0&&e.username.trim().length>0&&null!=e.birthday?yield e.updateUser():(0===e.firstname.trim().length&&(e.firstnameMessage="Geben Sie Ihren Vornamen an",e.wrongFirstname="border-danger"),0===e.lastname.trim().length&&(e.lastnameMessage="Geben Sie Ihren Nachnamen an",e.wrongLastname="border-danger"),0===e.username.trim().length&&(e.usernameMessage="Geben Sie einen Nutzername an",e.wrongUsername="border-danger"),0===e.gender.trim().length&&(e.genderMessage="Geben Sie Ihr Geschlecht an",e.wrongGender="border-danger"),void 0===e.birthday&&(e.birthdayMessage="Geben Sie Ihren Geburtstag an",e.wrongBirthday="border-danger"))})()}validFirstname(e){e.trim().length>=0&&(this.firstnameMessage="",this.wrongFirstname="")}validLastname(e){e.trim().length>=0&&(this.lastnameMessage="",this.wrongLastname="")}validUsername(e){e.trim().length>=0&&(this.usernameMessage="",this.wrongUsername="")}validBirthday(e){console.log(e),e.trim().length>=0&&(this.birthdayMessage="",this.wrongBirthday="")}validGender(e){console.log(e),e.trim().length>=0&&(this.genderMessage="",this.wrongGender="")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(EI),o.Y36(vr),o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-update-user"]],decls:23,vars:1,consts:[[1,"modal-header","border-0"],[1,"container"],[1,"row"],[1,"col-3"],[1,"col-6","justify-content-center"],[1,"modal-title","text-center","h4","mx-auto","logoGreenDark"],[1,"col-2"],[1,"col-1","p-0"],["type","button","aria-label","Close",1,"close","logoGreenDark",2,"position","absolute",3,"click"],["aria-hidden","true"],["class","modal-body border-0",4,"ngIf"],[1,"modal-footer"],[1,"row","justify-content-center"],[1,"col-6"],["type","button",1,"btn","btn-success","mx-auto","m-3","btn-block",3,"click"],["type","button",1,"btn","btn-danger","mx-auto","btn-block",3,"click"],[1,"modal-body","border-0"],[1,"col"],[1,"form-group"],["for","userLastname"],["type","text","id","userLastname",3,"ngModel","ngModelChange","keydown","keydown.enter"],["ln",""],["class","text-danger",4,"ngIf"],["for","userFirstname"],["type","text","id","userFirstname",3,"ngModel","ngModelChange","keydown","keydown.enter"],["fn",""],["for",""],["name","","id","",3,"ngModel","ngModelChange","change","keydown.enter"],["gd",""],["value",""],["value","FEMALE"],["value","MALE"],["value","DIVERSE"],["for","userBirthday"],["type","date","id","userBirthday",3,"ngModel","ngModelChange","change","keydown.enter"],["bd",""],["for","userUsername"],["type","text","id","userUsername",3,"ngModel","ngModelChange","keydown","keydown.enter"],["un",""],[1,"text-danger"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._UZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o._uU(6,"Update"),o.qZA(),o.qZA(),o._UZ(7,"div",6),o.TgZ(8,"div",7),o.TgZ(9,"button",8),o.NdJ("click",function(){return r.activeModal.dismiss()}),o.TgZ(10,"span",9),o._uU(11,"\xd7"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(12,s3,47,25,"div",10),o.TgZ(13,"div",11),o.TgZ(14,"div",1),o.TgZ(15,"div",12),o.TgZ(16,"div",13),o.TgZ(17,"button",14),o.NdJ("click",function(){return r.inputCheck()})("click",function(){return r.updateUser()})("click",function(){return r.activeModal.dismiss()}),o._uU(18," Speichern "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"div",12),o.TgZ(20,"div",13),o.TgZ(21,"button",15),o.NdJ("click",function(){return r.activeModal.dismiss()}),o._uU(22,"Abbrechen "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(12),o.Q6J("ngIf",r.userData.currUser))},directives:[pn,j,t0,r0,s0,cw,dw],styles:[""]}),n})(),DI=(()=>{class n{constructor(e){this.afs=e,this.tourCollection=e.collection("Tours")}copyAndPrepareTour(e){return Object.assign({},e)}addTour(e){var r=this;return(0,oe.Z)(function*(){r.tourCollection.add(r.copyAndPrepareTour(e)).catch(a=>console.log(a))})()}deleteTour(e){var r=this;return(0,oe.Z)(function*(){r.tourCollection.doc(e.dID).delete().catch(a=>console.log(a))})()}updateTour(e){var r=this;return(0,oe.Z)(function*(){r.tourCollection.doc(e.dID).update(e).catch(a=>console.log(a))})()}getAllTours(){var e=this;return(0,oe.Z)(function*(){return e.tourCollection.get().toPromise().then(r=>r.docs.map(a=>{const l=a.data();return l.dID=a.id,l}))})()}getAllOpenToursFromUser(e){var r=this;return(0,oe.Z)(function*(){let a=yield r.getAllToursAsDriverFromUser(e,!1),l=yield r.getAllToursAsPassengerFromUser(e,!1);return a.concat(l)})()}getAllBookedToursFromUser(e){var r=this;return(0,oe.Z)(function*(){let a=yield r.getAllToursAsDriverFromUser(e,!0),l=yield r.getAllToursAsPassengerFromUser(e,!0);return a.concat(l)})()}getAllToursAsDriverFromUser(e,r){var a=this;return(0,oe.Z)(function*(){return a.afs.collection("Tours",l=>l.where("driver","==",e).where("booked","==",r)).get().toPromise().then(l=>l.docs.map(h=>{const m=h.data();return m.dID=h.id,m}))})()}getAllToursAsPassengerFromUser(e,r){var a=this;return(0,oe.Z)(function*(){return a.afs.collection("Tours",l=>l.where("passengers","==",[e]).where("booked","==",r)).get().toPromise().then(l=>l.docs.map(h=>{const m=h.data();return m.dID=h.id,m}))})()}searchTours(e,r,a,l,h,m){var b=this;return(0,oe.Z)(function*(){return b.afs.collection("Tours",D=>D.where("offer","==",e).where("booked","==",!1).where("date","==",l).where("startCity","==",r).where("endCity","==",a).where("storage",">=",h).orderBy("storage","asc")).get().toPromise().then(D=>D.docs.map(N=>{const M=N.data();return M.dID=N.id,M})).then(D=>D.filter(N=>N.seats>=m))})()}sortPrice(e){return e.sort((r,a)=>this.compare(r.price,a.price))}sortEva(e){return e.sort((r,a)=>this.compare(r.price,a.price))}sortStorage(e){return e.sort((r,a)=>this.compare(r.price,a.price))}sortSeats(e){return e.sort((r,a)=>this.compare(r.price,a.price))}compare(e,r){return e==r?0:e>r?1:-1}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"div",6),o.TgZ(2,"h3",3),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"div",6),o.O4$(),o.TgZ(5,"svg",7),o._UZ(6,"path",8),o.qZA(),o.qZA(),o.kcU(),o.TgZ(7,"div",6),o.TgZ(8,"ngb-rating",9),o.NdJ("rateChange",function(a){return o.CHM(e),o.oxw().currentRate=a}),o.qZA(),o.qZA(),o.TgZ(9,"div",6),o.TgZ(10,"button",10),o.NdJ("click",function(){return o.CHM(e),o.oxw().openUpdateModal()}),o._uU(11,"Profil bearbeiten"),o.qZA(),o.qZA(),o.TgZ(12,"div",6),o.TgZ(13,"button",10),o.NdJ("click",function(){return o.CHM(e),o.oxw().navigateToCarList()}),o._uU(14,"Fahrzeuge verwalten"),o.qZA(),o.qZA(),o.TgZ(15,"div",6),o.TgZ(16,"button",10),o.NdJ("click",function(){return o.CHM(e),o.oxw().logout()}),o._uU(17,"Logout"),o.qZA(),o.qZA(),o.TgZ(18,"div",6),o.TgZ(19,"button",11),o.NdJ("click",function(){return o.CHM(e),o.oxw().deleteAccount()}),o._uU(20,"Account l\xf6schen"),o.qZA(),o.qZA(),o.qZA()}if(2&n){const e=o.oxw();o.xp6(3),o.Oqu(e.userData.currUser.username),o.xp6(5),o.Q6J("rate",e.currentRate)("readonly",!0)("max",5)}}let u3=(()=>{class n{constructor(e,r,a,l){this.userData=e,this.router=r,this.tourData=a,this.modalService=l,this.currentRate=3}logout(){var e=this;return(0,oe.Z)(function*(){yield e.userData.logout()})()}deleteAccount(){var e=this;return(0,oe.Z)(function*(){if(yield e.userData.deleteUser(),yield e.userData.deleteAccount(),e.userData.currUser){const r=yield e.tourData.getAllOpenToursFromUser(e.userData.currUser.uid);for(const a of r)yield e.tourData.deleteTour(a)}})()}openUpdateModal(){this.modalService.open(o3,{animation:!0,centered:!0})}navigateToCarList(){this.router.navigate(["/carList"])}test(){var e=this;return(0,oe.Z)(function*(){const r=e.userData.currUser;r&&(console.log("Open Tours: ",yield e.tourData.getAllOpenToursFromUser(r.uid)),console.log("Booked Tours: ",yield e.tourData.getAllBookedToursFromUser(r.uid)))})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(vr),o.Y36(DI),o.Y36(zM))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-loggedin"]],decls:9,vars:1,consts:[["class","d-inline-flex justify-content-around flex-column align-items-center","style","width: 25%; background-color: #F3FBED",4,"ngIf"],[1,"d-inline-flex","flex-column"],[1,"",2,"height","40vh"],[1,"h3","font-weight-bold","logoGreenDark"],[1,"resp"],[1,"d-inline-flex","justify-content-around","flex-column","align-items-center",2,"width","25%","background-color","#F3FBED"],[1,"mt-3"],["xmlns","http://www.w3.org/2000/svg","width","10em","viewBox","0 0 240 240"],["id","ic_account_circle_24px","d","M122,2A120,120,0,1,0,242,122,120.044,120.044,0,0,0,122,2Zm0,36A36,36,0,1,1,86,74,35.952,35.952,0,0,1,122,38Zm0,170.4a86.406,86.406,0,0,1-72-38.64c.36-23.88,48-36.96,72-36.96,23.88,0,71.64,13.08,72,36.96A86.407,86.407,0,0,1,122,208.4Z","transform","translate(-2 -2)","fill","#208479"],[3,"rate","readonly","max","rateChange"],[1,"logoGreenMedium",3,"click"],[1,"red",3,"click"]],template:function(e,r){1&e&&(o.YNc(0,a3,21,4,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"h3",3),o._uU(4,"Du f\xe4hrst"),o.qZA(),o.qZA(),o.TgZ(5,"div",2),o.TgZ(6,"h3",3),o._uU(7,"Du wirst mitgenommen"),o.qZA(),o.qZA(),o.qZA(),o._UZ(8,"div",4)),2&e&&o.Q6J("ngIf",r.userData.currUser)},directives:[pn,kV],styles:[".logoGreenMedium[_ngcontent-%COMP%]:hover{color:#005b51}.red[_ngcontent-%COMP%]{color:#dc3545}.red[_ngcontent-%COMP%]:hover{color:#c82333}button[_ngcontent-%COMP%]{border:none;background-color:transparent}.resp[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:25%;background-color:#f3fbed;z-index:-1}"]}),n})();var l3=F(2476);class c3{constructor(t,e,r,a,l,h){this.uid=t,this.firstname=e,this.lastname=r,this.username=a,this.birthday=l,this.gender=h,this.car=[],this.money=0,this.evaluation=-1}}function d3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.lastnameMessage)}}function h3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.firstnameMessage)}}function f3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.genderMessage)}}function p3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.birthdayMessage)}}function g3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.emailMessage)}}function m3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.usernameMessage)}}function _3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.passwordMessage)}}function y3(n,t){if(1&n&&(o.TgZ(0,"div",47),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.passwordRepeatMessage)}}let v3=(()=>{class n{constructor(e,r,a){this.activeModal=e,this.router=r,this.userData=a,this.email="",this.firstname="",this.lastname="",this.username="",this.birthday=new Date,this.password="",this.repeatPassword="",this.gender="",this.wrongEmailClass="",this.wrongFirstname="",this.wrongLastname="",this.wrongUsername="",this.wrongBirthday="",this.wrongGender="",this.wrongPasswordClass="",this.wrongRepeatPasswordClass="",this.emailMessage="",this.firstnameMessage="",this.lastnameMessage="",this.usernameMessage="",this.birthdayMessage="",this.genderMessage="",this.passwordMessage="",this.passwordRepeatMessage=""}register(){var e=this;return(0,oe.Z)(function*(){try{yield e.userData.register(e.email,e.password);const a=(0,l3.n)().currentUser;e.activeModal.close(),e.router.navigate(["/profil"]),a&&(yield e.userData.addUser(new c3(a.uid,e.firstname,e.lastname,e.username,e.birthday,e.gender)))}catch(r){"auth/invalid-email"===r.code?(e.emailMessage="E-Mail ist nicht richtig formatiert",e.wrongEmailClass="border-danger"):"auth/weak-password"===r.code&&(e.passwordMessage="Das Passwort ist nicht korrekt",e.wrongPasswordClass="border-danger")}})()}inputCheck(){var e=this;return(0,oe.Z)(function*(){e.email.trim().length>0&&e.password.trim().length>0&&e.firstname.trim().length>0&&e.lastname.trim().length>0&&e.gender.trim().length>0&&e.username.trim().length>0&&null!=e.birthday&&e.password===e.repeatPassword?yield e.register():(0===e.email.trim().length&&(e.emailMessage="Geben Sie Ihre E-Mail an",e.wrongEmailClass="border-danger"),0===e.password.trim().length&&(e.passwordMessage="Geben Sie ein Passwort an",e.wrongPasswordClass="border-danger"),0===e.repeatPassword.trim().length&&(e.passwordRepeatMessage="Wiederholen Sie Ihr Passwort",e.wrongRepeatPasswordClass="border-danger"),e.repeatPassword!==e.password&&(e.passwordRepeatMessage="Die Passw\xf6rter sind nicht identisch",e.wrongRepeatPasswordClass="border-danger"),0===e.firstname.trim().length&&(e.firstnameMessage="Geben Sie Ihren Vornamen an",e.wrongFirstname="border-danger"),0===e.lastname.trim().length&&(e.lastnameMessage="Geben Sie Ihren Nachnamen an",e.wrongLastname="border-danger"),0===e.username.trim().length&&(e.usernameMessage="Geben Sie einen Nutzername an",e.wrongUsername="border-danger"),0===e.gender.trim().length&&(e.genderMessage="Geben Sie Ihr Geschlecht an",e.wrongGender="border-danger"),void 0===e.birthday&&(e.birthdayMessage="Geben Sie Ihren Geburtstag an",e.wrongBirthday="border-danger"))})()}validEmail(e){e.trim().length>=0&&(this.emailMessage="",this.wrongEmailClass="")}validFirstname(e){e.trim().length>=0&&(this.firstnameMessage="",this.wrongFirstname="")}validLastname(e){e.trim().length>=0&&(this.lastnameMessage="",this.wrongLastname="")}validUsername(e){e.trim().length>=0&&(this.usernameMessage="",this.wrongUsername="")}validBirthday(e){console.log(e),e.trim().length>=0&&(this.birthdayMessage="",this.wrongBirthday="")}validPassword(e){e.trim().length>=0&&(this.passwordMessage="",this.wrongPasswordClass="")}validGender(e){console.log(e),e.trim().length>=0&&(this.genderMessage="",this.wrongGender="")}validRepeatPassword(e){e.trim().length>=0&&(this.passwordRepeatMessage="",this.wrongRepeatPasswordClass="")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(EI),o.Y36(vr),o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-registration"]],decls:91,vars:40,consts:[[1,"modal-header","border-0"],[1,"container"],[1,"row"],[1,"col-3"],[1,"col-6","justify-content-center"],[1,"modal-title","text-center","h4","mx-auto","logoGreenDark"],[1,"col-2"],[1,"col-1","p-0"],["type","button","aria-label","Close",1,"close","logoGreenDark",2,"position","absolute",3,"click"],["aria-hidden","true"],[1,"modal-body","border-0"],[1,"col"],[1,"form-group"],["for","userLastname"],["type","text","id","userLastname",3,"ngModel","ngModelChange","keydown","keydown.enter"],["ln",""],["class","text-danger",4,"ngIf"],["for","userFirstname"],["type","text","id","userFirstname",3,"ngModel","ngModelChange","keydown","keydown.enter"],["fn",""],["for",""],["name","","id","",3,"ngModel","ngModelChange","change","keydown.enter"],["gd",""],["value",""],["value","FEMALE"],["value","MALE"],["value","DIVERSE"],["for","userBirthday"],["type","date","id","userBirthday",3,"ngModel","ngModelChange","change","keydown.enter"],["bd",""],["for","userEmail"],["type","text","id","userEmail",3,"ngModel","ngModelChange","keydown","keydown.enter"],["mail",""],["for","userUsername"],["type","text","id","userUsername",3,"ngModel","ngModelChange","keydown","keydown.enter"],["un",""],["for","userPassword"],["type","password","id","userPassword",3,"ngModel","ngModelChange","keydown","keydown.enter"],["pw",""],["for","repeatPassword"],["type","password","id","repeatPassword",3,"ngModel","ngModelChange","keydown","keydown.enter"],["rpw",""],[1,"modal-footer"],[1,"row","justify-content-center"],[1,"col-6"],["type","button",1,"btn","btn-success","mx-auto","m-3","btn-block",3,"click"],["type","button",1,"btn","btn-danger","mx-auto","btn-block",3,"click"],[1,"text-danger"]],template:function(e,r){if(1&e){const a=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._UZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o._uU(6,"Registrieren"),o.qZA(),o.qZA(),o._UZ(7,"div",6),o.TgZ(8,"div",7),o.TgZ(9,"button",8),o.NdJ("click",function(){return r.activeModal.dismiss()}),o.TgZ(10,"span",9),o._uU(11,"\xd7"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",10),o.TgZ(13,"div",1),o.TgZ(14,"div",2),o.TgZ(15,"div",11),o.TgZ(16,"div",12),o.TgZ(17,"label",13),o._uU(18,"Nachname"),o.qZA(),o.TgZ(19,"input",14,15),o.NdJ("ngModelChange",function(h){return r.lastname=h})("keydown",function(){o.CHM(a);const h=o.MAs(20);return r.validLastname(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(21,d3,2,1,"div",16),o.qZA(),o.qZA(),o.TgZ(22,"div",11),o.TgZ(23,"div",12),o.TgZ(24,"label",17),o._uU(25,"Vorname"),o.qZA(),o.TgZ(26,"input",18,19),o.NdJ("ngModelChange",function(h){return r.firstname=h})("keydown",function(){o.CHM(a);const h=o.MAs(27);return r.validFirstname(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(28,h3,2,1,"div",16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(29,"div",2),o.TgZ(30,"div",11),o.TgZ(31,"div",12),o.TgZ(32,"label",20),o._uU(33,"Geschlecht"),o.qZA(),o.TgZ(34,"select",21,22),o.NdJ("ngModelChange",function(h){return r.gender=h})("change",function(){o.CHM(a);const h=o.MAs(35);return r.validGender(h.value)})("keydown.enter",function(){return r.inputCheck()}),o._UZ(36,"option",23),o.TgZ(37,"option",24),o._uU(38,"Weiblich"),o.qZA(),o.TgZ(39,"option",25),o._uU(40,"M\xe4nnlich"),o.qZA(),o.TgZ(41,"option",26),o._uU(42,"Divers"),o.qZA(),o.qZA(),o.YNc(43,f3,2,1,"div",16),o.qZA(),o.qZA(),o.TgZ(44,"div",11),o.TgZ(45,"div",12),o.TgZ(46,"label",27),o._uU(47,"Geburtstag"),o.qZA(),o.TgZ(48,"input",28,29),o.NdJ("ngModelChange",function(h){return r.birthday=h})("change",function(){o.CHM(a);const h=o.MAs(49);return r.validBirthday(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(50,p3,2,1,"div",16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(51,"div",2),o.TgZ(52,"div",11),o.TgZ(53,"div",12),o.TgZ(54,"label",30),o._uU(55,"Email"),o.qZA(),o.TgZ(56,"input",31,32),o.NdJ("ngModelChange",function(h){return r.email=h})("keydown",function(){o.CHM(a);const h=o.MAs(57);return r.validEmail(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(58,g3,2,1,"div",16),o.qZA(),o.qZA(),o.TgZ(59,"div",11),o.TgZ(60,"div",12),o.TgZ(61,"label",33),o._uU(62,"Nutzername"),o.qZA(),o.TgZ(63,"input",34,35),o.NdJ("ngModelChange",function(h){return r.username=h})("keydown",function(){o.CHM(a);const h=o.MAs(64);return r.validUsername(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(65,m3,2,1,"div",16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(66,"div",2),o.TgZ(67,"div",11),o.TgZ(68,"div",12),o.TgZ(69,"label",36),o._uU(70,"Passwort"),o.qZA(),o.TgZ(71,"input",37,38),o.NdJ("ngModelChange",function(h){return r.password=h})("keydown",function(){o.CHM(a);const h=o.MAs(72);return r.validPassword(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(73,_3,2,1,"div",16),o.qZA(),o.qZA(),o.TgZ(74,"div",11),o.TgZ(75,"div",12),o.TgZ(76,"label",39),o._uU(77,"Passwort wiederholen"),o.qZA(),o.TgZ(78,"input",40,41),o.NdJ("ngModelChange",function(h){return r.repeatPassword=h})("keydown",function(){o.CHM(a);const h=o.MAs(79);return r.validRepeatPassword(h.value)})("keydown.enter",function(){return r.inputCheck()}),o.qZA(),o.YNc(80,y3,2,1,"div",16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(81,"div",42),o.TgZ(82,"div",1),o.TgZ(83,"div",43),o.TgZ(84,"div",44),o.TgZ(85,"button",45),o.NdJ("click",function(){return r.inputCheck()}),o._uU(86,"Registrieren "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(87,"div",43),o.TgZ(88,"div",44),o.TgZ(89,"button",46),o.NdJ("click",function(){return r.activeModal.dismiss()}),o._uU(90,"Abbrechen "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(19),o.Gre("form-control ",r.wrongLastname,""),o.Q6J("ngModel",r.lastname),o.xp6(2),o.Q6J("ngIf",""!==r.lastnameMessage),o.xp6(5),o.Gre("form-control ",r.wrongFirstname,""),o.Q6J("ngModel",r.firstname),o.xp6(2),o.Q6J("ngIf",""!==r.firstnameMessage),o.xp6(6),o.Gre("form-control ",r.wrongGender,""),o.Q6J("ngModel",r.gender),o.xp6(9),o.Q6J("ngIf",""!==r.genderMessage),o.xp6(5),o.Gre("form-control ",r.wrongBirthday,""),o.Q6J("ngModel",r.birthday),o.xp6(2),o.Q6J("ngIf",""!==r.birthdayMessage),o.xp6(6),o.Gre("form-control ",r.wrongEmailClass,""),o.Q6J("ngModel",r.email),o.xp6(2),o.Q6J("ngIf",""!==r.emailMessage),o.xp6(5),o.Gre("form-control ",r.wrongUsername,""),o.Q6J("ngModel",r.username),o.xp6(2),o.Q6J("ngIf",""!==r.usernameMessage),o.xp6(6),o.Gre("form-control ",r.wrongPasswordClass,""),o.Q6J("ngModel",r.password),o.xp6(2),o.Q6J("ngIf",""!==r.passwordMessage),o.xp6(5),o.Gre("form-control ",r.wrongRepeatPasswordClass,""),o.Q6J("ngModel",r.repeatPassword),o.xp6(2),o.Q6J("ngIf",""!==r.passwordRepeatMessage))},directives:[j,t0,r0,pn,s0,cw,dw],styles:[""]}),n})();function b3(n,t){if(1&n&&(o.TgZ(0,"div",17),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.emailMessage)}}function w3(n,t){if(1&n&&(o.TgZ(0,"div",17),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.passwordMessage)}}let C3=(()=>{class n{constructor(e,r){this.modalService=e,this.userData=r,this.email="",this.password="",this.wrongEmail="",this.wrongPassword="",this.emailMessage="",this.passwordMessage=""}openRegistrationModal(){this.modalService.open(v3,{animation:!0,centered:!0})}inputCheck(){var e=this;return(0,oe.Z)(function*(){0===e.email.trim().length&&0===e.password.trim().length?(e.wrongEmail="border-danger",e.wrongPassword="border-danger",e.passwordMessage="Please fill out your password",e.emailMessage="Please fill out your email"):0===e.email.trim().length?(e.emailMessage="Please fill out your email",e.wrongEmail="border-danger"):0===e.password.trim().length?(e.wrongPassword="border-danger",e.passwordMessage="Please fill out your password"):(e.wrongEmail="",yield e.login())})()}login(){var e=this;return(0,oe.Z)(function*(){e.userData.login(e.email,e.password).then(()=>{}).catch(r=>{console.log(r),"auth/invalid-email"===r.code&&(e.emailMessage="E-Mail falsch formatiert",e.wrongEmail="border-danger"),"auth/wrong-password"===r.code&&(e.passwordMessage="Falsches Passwort",e.wrongPassword="border-danger"),"auth/user-not-found"===r.code&&(e.emailMessage="Nutzer nicht gefunden",e.wrongEmail="border-danger")})})()}validEmail(e){e.trim().length>=0&&(this.wrongEmail="",this.emailMessage="")}validPassword(e){e.trim().length>=0&&(this.wrongPassword="",this.passwordMessage="")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(zM),o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-notloggedin"]],decls:28,vars:10,consts:[[1,"card","rounded","shadow","container","mt-5","bg-white","border-0",2,"max-width","500px"],[1,"card-body"],[1,"container"],[1,"row"],[1,"h4","mt-2","logoGreenDark","mx-auto"],[1,"form-group","col-md-12"],["for","inputEmail",1,"logoGreenDark"],["type","email","id","inputEmail","placeholder","name@example.com",3,"ngModel","keydown","keydown.enter","ngModelChange"],["mail",""],["class","text-danger",4,"ngIf"],["for","inputPassword",1,"logoGreenDark"],["type","password","id","inputPassword",3,"ngModel","keypress","keydown.enter","ngModelChange"],["passw",""],[1,"row","justify-content-center"],[1,"col-6"],["type","button",1,"btn","btn-success","mx-auto","m-3","btn-block",3,"click"],["type","button",1,"btn","btn-dark","mx-auto","btn-block",3,"click"],[1,"text-danger"]],template:function(e,r){if(1&e){const a=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o._uU(5,"Login"),o.qZA(),o.qZA(),o.TgZ(6,"div",3),o.TgZ(7,"div",5),o.TgZ(8,"label",6),o._uU(9,"Email"),o.qZA(),o.TgZ(10,"input",7,8),o.NdJ("keydown",function(){o.CHM(a);const h=o.MAs(11);return r.validEmail(h.value)})("keydown.enter",function(){return r.inputCheck()})("ngModelChange",function(h){return r.email=h}),o.qZA(),o.YNc(12,b3,2,1,"div",9),o.qZA(),o.qZA(),o.TgZ(13,"div",3),o.TgZ(14,"div",5),o.TgZ(15,"label",10),o._uU(16,"Password"),o.qZA(),o.TgZ(17,"input",11,12),o.NdJ("keypress",function(){o.CHM(a);const h=o.MAs(18);return r.validPassword(h.value)})("keydown.enter",function(){return r.inputCheck()})("ngModelChange",function(h){return r.password=h}),o.qZA(),o.YNc(19,w3,2,1,"div",9),o.qZA(),o.qZA(),o.TgZ(20,"div",13),o.TgZ(21,"div",14),o.TgZ(22,"button",15),o.NdJ("click",function(){return r.inputCheck()}),o._uU(23,"Anmelden "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"div",13),o.TgZ(25,"div",14),o.TgZ(26,"button",16),o.NdJ("click",function(){return r.openRegistrationModal()}),o._uU(27,"Registrieren "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(10),o.Gre("form-control ",r.wrongEmail,""),o.Q6J("ngModel",r.email),o.xp6(2),o.Q6J("ngIf",""!==r.emailMessage),o.xp6(5),o.Gre("form-control ",r.wrongPassword,""),o.Q6J("ngModel",r.password),o.xp6(2),o.Q6J("ngIf",""!==r.passwordMessage))},directives:[j,t0,r0,pn],styles:[""]}),n})();function T3(n,t){1&n&&o._UZ(0,"app-loggedin")}function E3(n,t){1&n&&o._UZ(0,"app-notloggedin")}let D3=(()=>{class n{constructor(e){this.userData=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-profil"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(o.YNc(0,T3,1,0,"app-loggedin",0),o.YNc(1,E3,1,0,"app-notloggedin",0)),2&e&&(o.Q6J("ngIf",r.userData.user),o.xp6(1),o.Q6J("ngIf",!r.userData.user))},directives:[pn,u3,C3],styles:[""]}),n})();class I3{constructor(t,e,r,a){this.model=t,this.mark=e,this.seats=r,this.storage=a}}let JM=(()=>{class n{constructor(e){this.afs=e,this.carCollection=e.collection("Cars")}copyAndPrepareCar(e){return Object.assign({},e)}addCar(e){var r=this;return(0,oe.Z)(function*(){return r.carCollection.add(r.copyAndPrepareCar(e)).then(a=>a.id)})()}updateCar(e){var r=this;return(0,oe.Z)(function*(){yield r.carCollection.doc(e.dId).update(r.copyAndPrepareCar(e))})()}deleteCar(e){var r=this;return(0,oe.Z)(function*(){r.carCollection.doc(e).delete().catch(a=>console.log(a))})()}getCarById(e){var r=this;return(0,oe.Z)(function*(){return r.carCollection.doc(e).get().toPromise().then(a=>{if(a.exists){const l=a.data();return null!=l?(l.dId=a.id,l):null}return null})})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function A3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"h5",3),o._uU(2),o.qZA(),o.TgZ(3,"p",4),o._uU(4),o.qZA(),o.TgZ(5,"p",5),o._uU(6),o.qZA(),o.TgZ(7,"p",5),o._uU(8),o.qZA(),o.TgZ(9,"a",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().deleteEvent.emit()}),o._uU(10,"Delete"),o.qZA(),o.qZA()}if(2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.car.model),o.xp6(2),o.Oqu(e.car.mark),o.xp6(2),o.hij("",e.car.seats," Pl\xe4tze"),o.xp6(2),o.hij("",e.car.storage," \u33a5")}}let S3=(()=>{class n{constructor(e,r){this.userService=e,this.carData=r,this.carId="",this.deleteEvent=new o.vpe,this.car=null}ngOnInit(){var e=this;return(0,oe.Z)(function*(){e.car=yield e.carData.getCarById(e.carId)})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(JM))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-car-item"]],inputs:{carId:"carId"},outputs:{deleteEvent:"deleteEvent"},decls:2,vars:1,consts:[[1,"card",2,"width","18rem"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card","text"],[1,"btn","btn-primary","btn-danger","ml-1",3,"click"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.YNc(1,A3,11,4,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",r.car))},directives:[pn],styles:[""]}),n})();function N3(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1," Name is required. "),o.qZA())}function M3(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,N3,2,0,"div",0),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form.controls.fahrzeugModel.errors?null:e.form.controls.fahrzeugModel.errors.required)}}function x3(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1," Name is required. "),o.qZA())}function k3(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,x3,2,0,"div",0),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form.controls.fahrzeugKennzeichen.errors?null:e.form.controls.fahrzeugKennzeichen.errors.required)}}function R3(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1," Name is required. "),o.qZA())}function O3(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,R3,2,0,"div",0),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form.controls.fahrzeugSitzplaetze.errors?null:e.form.controls.fahrzeugSitzplaetze.errors.required)}}function P3(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1," Name is required. "),o.qZA())}function F3(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,P3,2,0,"div",0),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form.controls.fahrzeugStauraum.errors?null:e.form.controls.fahrzeugStauraum.errors.required)}}function L3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",17),o.TgZ(2,"app-car-item",18),o.NdJ("deleteEvent",function(){const l=o.CHM(e).$implicit;return o.oxw(2).deleteCar(l)}),o.qZA(),o.qZA(),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(2),o.Q6J("carId",e)}}function V3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"form",1),o.NdJ("ngSubmit",function(){return o.CHM(e),o.oxw().onSubmit()}),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"span",4),o._uU(5,"Fahrzeug-Model"),o.qZA(),o.qZA(),o._UZ(6,"input",5),o.YNc(7,M3,2,1,"div",6),o.TgZ(8,"div",3),o.TgZ(9,"span",7),o._uU(10,"Kennzeichen"),o.qZA(),o.qZA(),o._UZ(11,"input",8),o.YNc(12,k3,2,1,"div",6),o.qZA(),o.TgZ(13,"div",2),o.TgZ(14,"div",3),o.TgZ(15,"span",9),o._uU(16,"Sitzpl\xe4tze"),o.qZA(),o.qZA(),o._UZ(17,"input",10),o.YNc(18,O3,2,1,"div",6),o.TgZ(19,"div",3),o.TgZ(20,"span",11),o._uU(21,"Stauraum"),o.qZA(),o.qZA(),o._UZ(22,"input",12),o.YNc(23,F3,2,1,"div",6),o.qZA(),o.TgZ(24,"div",2),o.TgZ(25,"button",13),o._uU(26,"Fahrzeug hinzuf\xfcgen"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(27,"div",14),o.YNc(28,L3,3,1,"div",15),o.qZA(),o.qZA()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("formGroup",e.form),o.xp6(6),o.Q6J("ngIf",e.form.controls.fahrzeugModel.invalid&&(e.form.controls.fahrzeugModel.dirty||e.form.controls.fahrzeugModel.touched)),o.xp6(5),o.Q6J("ngIf",e.form.controls.fahrzeugKennzeichen.invalid&&(e.form.controls.fahrzeugKennzeichen.dirty||e.form.controls.fahrzeugKennzeichen.touched)),o.xp6(6),o.Q6J("ngIf",e.form.controls.fahrzeugSitzplaetze.invalid&&(e.form.controls.fahrzeugSitzplaetze.dirty||e.form.controls.fahrzeugSitzplaetze.touched)),o.xp6(5),o.Q6J("ngIf",e.form.controls.fahrzeugStauraum.invalid&&(e.form.controls.fahrzeugStauraum.dirty||e.form.controls.fahrzeugStauraum.touched)),o.xp6(2),o.Q6J("disabled",e.form.invalid||e.form.pristine),o.xp6(3),o.Q6J("ngForOf",e.userService.currUser.car)}}let U3=(()=>{class n{constructor(e,r,a){this.userService=e,this.router=r,this.carData=a,this.form=new lI({fahrzeugModel:new ep,fahrzeugKennzeichen:new ep,fahrzeugSitzplaetze:new ep,fahrzeugStauraum:new ep}),this.userService.currUser||this.router.navigate(["/"])}deleteCar(e){var r=this;return(0,oe.Z)(function*(){yield r.userService.deleteCar(e),yield r.carData.deleteCar(e)})()}onSubmit(){var e=this;if(this.fahrzeugModel=this.form.controls.fahrzeugModel.value,this.fahrzeugKennzeichen=this.form.controls.fahrzeugKennzeichen.value,this.fahrzeugSitzplaetze=this.form.controls.fahrzeugSitzplaetze.value,this.fahrzeugStauraum=this.form.controls.fahrzeugStauraum.value,this.fahrzeugModel&&this.fahrzeugKennzeichen&&this.fahrzeugSitzplaetze&&this.fahrzeugStauraum){let r=new I3(this.fahrzeugModel,this.fahrzeugKennzeichen,this.fahrzeugSitzplaetze,this.fahrzeugStauraum);this.userService.currUser&&this.carData.addCar(r).then(function(){var a=(0,oe.Z)(function*(l){console.log(l),yield e.userService.addCar(l)});return function(l){return a.apply(this,arguments)}}()),document.getElementById("add-car-form").reset()}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(vr),o.Y36(JM))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-carlist"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","add-car-form",2,"margin-top","100px",3,"formGroup","ngSubmit"],[1,"input-group","mb-3",2,"width","60%","position","relative","margin-right","auto","margin-left","auto"],[1,"input-group-prepend"],["id","add-car-model",1,"input-group-text"],["type","text","placeholder","VW Touran, Porsche 911, ...","aria-label","Fahrzeug-Model","aria-describedby","add-fahrzeug-model","id","add-fahrzeug-model-input","formControlName","fahrzeugModel","required","",1,"form-control"],["class","alert-danger",4,"ngIf"],["id","add-fahrzeug-kennzeichen",1,"input-group-text"],["type","text","placeholder","Kennzeichen","aria-label","Kennzeichen","aria-describedby","add-fahrzeug-kennzeichen","id","add-fahrzeug-kennzeichen-input","formControlName","fahrzeugKennzeichen","required","",1,"form-control"],["id","add-fahrzeug-Sitzplaetze",1,"input-group-text"],["type","number","placeholder","Sitzpl\xe4tze","aria-label","Sitzplaetze","aria-describedby","add-fahrzeug-sitzplaetze","id","add-fahrzeug-sitzplaetze-input","formControlName","fahrzeugSitzplaetze","required","",1,"form-control"],["id","add-Stauraum",1,"input-group-text"],["type","number","placeholder","Stauraum in \u33a5","aria-label","Stauraum","aria-describedby","add-stauraum","id","add-stauraum-input","formControlName","fahrzeugStauraum","required","",1,"form-control"],["type","submit",1,"btn","btn-info",2,"background-color","#005B51",3,"disabled"],[2,"display","flex","flex-direction","row","justify-content","center"],[4,"ngFor","ngForOf"],[1,"alert-danger"],[1,"ml-3","mr-3"],[3,"carId","deleteEvent"]],template:function(e,r){1&e&&o.YNc(0,V3,29,7,"div",0),2&e&&o.Q6J("ngIf",r.userService.currUser)},directives:[pn,cR,tR,cI,j,t0,xM,dI,IM,_t,S3],styles:[""]}),n})(),VO=(()=>{class n{constructor(){this.searchbarheigth="5em",this.iconsize="25px"}scroll(e){e.scrollIntoView({behavior:"smooth"})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-suchleiste"]],decls:42,vars:36,consts:[[1,"masthead"],[1,"center"],[2,"font-size","4em","color","#005B51","text-align","center","margin-bottom","20px"],[1,"form-row","form-row-style","align-items-center"],[1,"col","colpad"],[1,"input-group","mb-3","border-right"],[1,"row"],[1,"input-group-text","input-opaque"],["src","../../../../assets/img/Icons/von_icon.png"],["type","text","placeholder","Von...",1,"text-opaque"],["src","../../../../assets/img/Icons/nach_icon.png"],["type","text","placeholder","Nach...",1,"text-opaque"],["src","../../../../assets/img/Icons/kalender_icon.png"],["type","date","placeholder","Datum",1,"text-opaque"],["src","../../../../assets/img/Icons/koffer_icon_white.png"],["type","number","placeholder","m\xb3",1,"text-opaque"],["src","../../../../assets/img/Icons/mitfahrer_icon_white.png"],["type","number","placeholder","1",1,"text-opaque"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[2,"height","200px"],["target",""]],template:function(e,r){if(1&e){const a=o.EpF();o.TgZ(0,"header",0),o.TgZ(1,"div",1),o.TgZ(2,"h1",2),o._uU(3,"Wir fahren, du sparst!"),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"div",6),o.TgZ(8,"span",7),o._UZ(9,"img",8),o.qZA(),o._UZ(10,"input",9),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"div",4),o.TgZ(12,"div",5),o.TgZ(13,"div",6),o.TgZ(14,"span",7),o._UZ(15,"img",10),o.qZA(),o._UZ(16,"input",11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",4),o.TgZ(18,"div",5),o.TgZ(19,"div",6),o.TgZ(20,"span",7),o._UZ(21,"img",12),o.qZA(),o._UZ(22,"input",13),o.qZA(),o.qZA(),o.qZA(),o.TgZ(23,"div",4),o.TgZ(24,"div",5),o.TgZ(25,"div",6),o.TgZ(26,"span",7),o._UZ(27,"img",14),o.qZA(),o._UZ(28,"input",15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(29,"div",4),o.TgZ(30,"div",5),o.TgZ(31,"div",6),o.TgZ(32,"span",7),o._UZ(33,"img",16),o.qZA(),o._UZ(34,"input",17),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",4),o.TgZ(36,"button",18),o.NdJ("click",function(){o.CHM(a);const h=o.MAs(41);return r.scroll(h)}),o.TgZ(37,"h3"),o._uU(38,"Suchen"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(39,"div",19),o._UZ(40,"div",null,20),o.qZA()}2&e&&(o.xp6(4),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(2),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(3),o.Jzz("width: ",r.iconsize,"; margin-left: 10px"),o.xp6(3),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(3),o.Jzz("width: ",r.iconsize,"; margin-left: 10px"),o.xp6(3),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(3),o.Jzz("width: ",r.iconsize,"; margin-left: 10px"),o.xp6(3),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(3),o.Jzz("width: ",r.iconsize,"; margin-left: 10px"),o.xp6(3),o.Jzz("height: ",r.searchbarheigth,""),o.xp6(3),o.Jzz("width: ",r.iconsize,"; margin-left: 10px"),o.xp6(3),o.Jzz("margin-top: -1em; background-color: #005B51;  height: ",r.searchbarheigth,"; border-radius: 0px 35px 35px 0px"))},styles:["header.masthead[_ngcontent-%COMP%]{position:relative;background-color:#343a40;background:url(Zeichenflache_4.661da432fc963621ee16.svg) no-repeat center center;background-size:cover;padding-top:8rem;padding-bottom:8rem;height:40em}[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:1}.center[_ngcontent-%COMP%]{margin:auto;width:70%}input[type=date][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{display:none;-webkit-appearance:none}.colpad[_ngcontent-%COMP%]{padding:0;margin:0;width:2em}.input-opaque[_ngcontent-%COMP%]{background-color:#0000;border-color:#0000}.text-opaque[_ngcontent-%COMP%]{background-color:#0000;color:#fff;border-color:#0000;outline:none}.form-row-style[_ngcontent-%COMP%]{background-color:#0000004d;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border-radius:35px;position:center;margin:0;padding:0}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),n})(),B3=(()=>{class n{constructor(){this.boxTitle="",this.infoText="",this.imagePath=""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-infobox"]],inputs:{boxTitle:"boxTitle",infoText:"infoText",imagePath:"imagePath"},decls:6,vars:3,consts:[[1,"shadow","p-3","mb-5","bg-white","rounded","infoheight",2,"width","300px","margin","2em","margin-top","5em"],[1,"infoicon",3,"src"],[2,"color","#005B51","text-align","center"],[2,"text-align","center"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"img",1),o.TgZ(2,"h3",2),o._uU(3),o.qZA(),o.TgZ(4,"p",3),o._uU(5),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.s9C("src",r.imagePath,o.LSH),o.xp6(2),o.Oqu(r.boxTitle),o.xp6(2),o.hij(" ",r.infoText," "))},styles:[".infoicon[_ngcontent-%COMP%]{width:20%;position:relative;top:-45px;display:block;margin-left:auto;margin-right:auto}.infoheight[_ngcontent-%COMP%]{height:20em}"]}),n})();function Z3(n,t){if(1&n&&(o.TgZ(0,"div",3),o._UZ(1,"app-infobox",4),o.qZA()),2&n){const e=t.index,r=o.oxw();o.xp6(1),o.Q6J("boxTitle",r.boxTitles[e])("infoText",r.infoTexts[e])("imagePath",r.imagePaths[e])}}let j3=(()=>{class n{constructor(){this.boxTitles=["Lass dich fahren f\xfcr weniger Geld","Dein Transport: Einfach und unkompliziert","Sorglos fahren, dank Nutzerbewertungen"],this.infoTexts=["Hier steht ein Beispieltext zum anlocken von neuen Nutzern durch unser Feature, dass es relativ g\xfcnstig ist, mit uns zu fahren!","Hier steht ein Beispieltext zum anlocken von neuen Nutzern durch unser Feature, dass es einfach und unkompliziert ist, mit uns zu fahren!","Hier steht ein Beispieltext zum anlocken von neuen Nutzern durch unser Feature, dass es sorglos, durch Nutzerbewertung, ist, mit uns zu fahren!"],this.imagePaths=["../../assets/img/Icons/money_icon.png","../../assets/img/Icons/transporter_icon.png","../../assets/img/Icons/thumbs_icon.png"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main-page"]],decls:4,vars:1,consts:[[1,"container"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[3,"boxTitle","infoText","imagePath"]],template:function(e,r){1&e&&(o._UZ(0,"app-suchleiste"),o.TgZ(1,"div",0),o.TgZ(2,"div",1),o.YNc(3,Z3,2,3,"div",2),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("ngForOf",r.boxTitles))},directives:[VO,_t,B3],styles:[""]}),n})(),UO=(()=>{class n{constructor(){this.changeState=new o.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-slide-checker"]],outputs:{changeState:"changeState"},decls:13,vars:0,consts:[[1,"row","m-3","justify-content-center"],[1,"col"],[1,"d-flex","justify-content-center"],[1,"logoGreenDark","mr-3"],[1,"switch"],["type","checkbox",3,"click"],[1,"slider","round"],[1,"logoGreenDark","ml-3"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"h5"),o._uU(5,"Angebote"),o.qZA(),o.qZA(),o.TgZ(6,"div"),o.TgZ(7,"label",4),o.TgZ(8,"input",5),o.NdJ("click",function(){return r.changeState.emit()}),o.qZA(),o._UZ(9,"span",6),o.qZA(),o.qZA(),o.TgZ(10,"div",7),o.TgZ(11,"h5"),o._uU(12,"Anfragen"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA())},styles:['.title-background[_ngcontent-%COMP%]{height:130px;width:100vw;background-color:#f3fbed}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#005b51;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:3px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#005b51}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 5px #005b51}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(34px)}.slider.round[_ngcontent-%COMP%]{border-radius:32px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),n})();var II=(()=>(function(n){n[n.NOSTARTEDYET=0]="NOSTARTEDYET",n[n.ONTHEWAY=1]="ONTHEWAY",n[n.ARRIVED=2]="ARRIVED"}(II||(II={})),II))();class BO{constructor(t,e,r,a,l,h,m,b,D,N,M,V,$){this.offer=t,this.startCity=e,this.endCity=r,this.startTime=a,this.duration=l,this.date=h,this.price=m,this.storage=b,this.seats=D,this.description=N||"",this.driver=M||"",this.passengers=V||[],this.booked=!1,this.status=II.NOSTARTEDYET,this.car=$||"",this.evaluation=-1}}let $3=(()=>{class n{constructor(e){this.userService=e,this.tour=new BO(!1,"","","",0,"",0,0,0,""),this.mergeDateAndTime="",this.userName=""}ngOnInit(){this.mergeDateAndTime=this.tour.date+"T"+this.tour.startTime,this.changeUserName()}navigateToDetails(){console.log(this.tour)}changeUserName(){this.userService.getUser(this.tour.offer?this.tour.driver:this.tour.passengers[0]).then(e=>{this.userName=e?e.username:"Kein User"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-tour-card"]],inputs:{tour:"tour"},decls:54,vars:8,consts:[[1,"card","mx-auto","border-0","mb-3",2,"max-width","600px"],[1,"card-body","rounded","shadow","mt-4","bg-white","border-0",3,"click"],[1,"container","cardio"],[1,"row"],[1,"col-4"],["for","startCity",1,"logoGreenDark","mr-1"],["id","startCity",1,"logoGreenDark"],["for","endCity",1,"logoGreenDark","mr-1"],["id","endCity",1,"logoGreenDark"],[1,"text-right"],[1,"mr-2","logoGreenDark"],["xmlns","http://www.w3.org/2000/svg","width","2em","viewBox","0 0 65 65",1,"profil"],["id","ic_account_circle_24px","d","M34.5,2A32.5,32.5,0,1,0,67,34.5,32.512,32.512,0,0,0,34.5,2Zm0,9.75a9.75,9.75,0,1,1-9.75,9.75A9.737,9.737,0,0,1,34.5,11.75Zm0,46.15A23.4,23.4,0,0,1,15,47.435c.1-6.468,13-10.01,19.5-10.01,6.467,0,19.4,3.542,19.5,10.01A23.4,23.4,0,0,1,34.5,57.9Z","transform","translate(-2 -2)","fill","#208479"],[1,"col"],[1,"col-9"],[1,"form-group"],["for","time",1,"logoGreenDark"],["type","datetime-local","id","time","readonly","",1,"form-control",3,"value"],[1,"col-2"],[1,"col","text-center"],["xmlns","http://www.w3.org/2000/svg","width","2em","viewBox","0 0 35 33.25"],["id","ic_work_24px","d","M33.5,9h-7V5.5A3.488,3.488,0,0,0,23,2H16a3.488,3.488,0,0,0-3.5,3.5V9h-7a3.473,3.473,0,0,0-3.482,3.5L2,31.75a3.488,3.488,0,0,0,3.5,3.5h28a3.488,3.488,0,0,0,3.5-3.5V12.5A3.488,3.488,0,0,0,33.5,9ZM23,9H16V5.5h7Z","transform","translate(-2 -2)","fill","#208479"],[1,"logoGreenDark","ml-1"],["xmlns","http://www.w3.org/2000/svg","width","2em","viewBox","0 0 35 35"],["id","ic_perm_identity_24px","d","M21.5,8.156a4.594,4.594,0,1,1-4.594,4.594A4.593,4.593,0,0,1,21.5,8.156m0,19.687c6.5,0,13.344,3.194,13.344,4.594v2.406H8.156V32.438c0-1.4,6.847-4.594,13.344-4.594M21.5,4a8.75,8.75,0,0,0,0,17.5,9.171,9.171,0,0,0,5.78-2.179,8.385,8.385,0,0,0,2.97-6.571A8.748,8.748,0,0,0,21.5,4Zm0,19.688c-5.841,0-17.5,2.931-17.5,8.75V39H39V32.438C39,26.619,27.341,23.688,21.5,23.688Z","transform","translate(-4 -4)","fill","#208479"],["id","ic_monetization_on_24px","d","M19.5,2A17.5,17.5,0,1,0,37,19.5,17.506,17.506,0,0,0,19.5,2Zm2.468,28.157V33.5H17.3V30.122c-2.993-.63-5.53-2.555-5.722-5.95H15c.175,1.838,1.435,3.273,4.637,3.273,3.43,0,4.2-1.715,4.2-2.782,0-1.453-.77-2.818-4.672-3.745-4.34-1.05-7.315-2.835-7.315-6.422,0-3.01,2.432-4.97,5.442-5.618V5.5h4.672V8.912a6.187,6.187,0,0,1,4.988,5.933h-3.43c-.088-1.943-1.12-3.273-3.885-3.273-2.625,0-4.2,1.19-4.2,2.87,0,1.47,1.138,2.432,4.673,3.342s7.315,2.433,7.315,6.842c-.018,3.2-2.415,4.953-5.46,5.53Z","transform","translate(-2 -2)","fill","#208479"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.NdJ("click",function(){return r.navigateToDetails()}),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"label",5),o._uU(6,"Von:"),o.qZA(),o.TgZ(7,"span",6),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"div",4),o.TgZ(10,"label",7),o._uU(11,"Nach:"),o.qZA(),o.TgZ(12,"span",8),o._uU(13),o.qZA(),o.qZA(),o.TgZ(14,"div",4),o.TgZ(15,"div",9),o.TgZ(16,"span",10),o._uU(17),o.qZA(),o.O4$(),o.TgZ(18,"svg",11),o._UZ(19,"path",12),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.kcU(),o.TgZ(20,"div",3),o.TgZ(21,"div",13),o._UZ(22,"hr"),o.qZA(),o.qZA(),o.TgZ(23,"div",3),o.TgZ(24,"div",14),o.TgZ(25,"div",15),o.TgZ(26,"label",16),o._uU(27,"Abahrtszeit"),o.qZA(),o._UZ(28,"input",17),o.qZA(),o.qZA(),o.TgZ(29,"div",18),o.TgZ(30,"div",15),o.TgZ(31,"label",16),o._uU(32,"Dauer"),o.qZA(),o.TgZ(33,"div"),o._uU(34),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",3),o.TgZ(36,"div",13),o._UZ(37,"hr"),o.qZA(),o.qZA(),o.TgZ(38,"div",3),o.TgZ(39,"div",19),o.O4$(),o.TgZ(40,"svg",20),o._UZ(41,"path",21),o.qZA(),o.kcU(),o.TgZ(42,"span",22),o._uU(43),o.qZA(),o.qZA(),o.TgZ(44,"div",19),o.O4$(),o.TgZ(45,"svg",23),o._UZ(46,"path",24),o.qZA(),o.kcU(),o.TgZ(47,"span",22),o._uU(48),o.qZA(),o.qZA(),o.TgZ(49,"div",19),o.O4$(),o.TgZ(50,"svg",23),o._UZ(51,"path",25),o.qZA(),o.kcU(),o.TgZ(52,"span",22),o._uU(53),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(8),o.Oqu(r.tour.startCity),o.xp6(5),o.Oqu(r.tour.endCity),o.xp6(4),o.Oqu(r.userName),o.xp6(11),o.s9C("value",r.mergeDateAndTime),o.xp6(6),o.Oqu(r.tour.duration),o.xp6(9),o.Oqu(r.tour.storage),o.xp6(5),o.hij(" ",r.tour.seats,""),o.xp6(5),o.Oqu(r.tour.price))},styles:[".profil[_ngcontent-%COMP%]{position:relative;bottom:+8px;left:+10px}.card-body[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();function H3(n,t){if(1&n&&o._UZ(0,"app-tour-card",6),2&n){const e=o.oxw().$implicit;o.Q6J("tour",e)}}function q3(n,t){if(1&n&&(o.TgZ(0,"div",3),o.TgZ(1,"div",4),o.YNc(2,H3,1,1,"app-tour-card",5),o.qZA(),o.qZA()),2&n){const e=t.$implicit,r=o.oxw();o.xp6(2),o.Q6J("ngIf",e.offer!==r.isOffer)}}let G3=(()=>{class n{constructor(e){this.tourService=e,this.tours=[],this.isOffer=!1}ngOnInit(){this.setTours().then()}setTours(){var e=this;return(0,oe.Z)(function*(){e.tours=yield e.tourService.getAllTours().then()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(DI))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-tour-list"]],inputs:{isOffer:"isOffer"},decls:3,vars:1,consts:[[1,"container"],["class","row justify-content-center",4,"ngFor","ngForOf"],[2,"height","50px"],[1,"row","justify-content-center"],[1,"col-6"],[3,"tour",4,"ngIf"],[3,"tour"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.YNc(1,q3,3,1,"div",1),o.qZA(),o._UZ(2,"div",2)),2&e&&(o.xp6(1),o.Q6J("ngForOf",r.tours))},directives:[_t,pn,$3],styles:[""]}),n})(),z3=(()=>{class n{constructor(){this.searchbarheigth="5em",this.isOffer=!1}offerOnOff(){this.isOffer=!this.isOffer,console.log(this.isOffer)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-tour-site"]],decls:3,vars:1,consts:[[3,"changeState"],[3,"isOffer"]],template:function(e,r){1&e&&(o._UZ(0,"app-suchleiste"),o.TgZ(1,"app-slide-checker",0),o.NdJ("changeState",function(){return r.offerOnOff()}),o.qZA(),o._UZ(2,"app-tour-list",1)),2&e&&(o.xp6(2),o.Q6J("isOffer",r.isOffer))},directives:[VO,UO,G3],styles:[""]}),n})(),ZO=(()=>{class n{constructor(){this.alerts=[]}showAlert(e){this.alerts.push(e),this.closeAlert(e)}closeAlert(e){setTimeout(()=>{this.alerts.includes(e,0)&&this.alerts.splice(this.alerts.indexOf(e),1)},5e3)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function W3(n,t){1&n&&(o.TgZ(0,"div",50),o._uU(1,"Erstelle eine Angebot"),o.qZA())}function Y3(n,t){1&n&&(o.TgZ(0,"div",50),o._uU(1,"Erstelle ein Anfrage"),o.qZA())}function K3(n,t){if(1&n&&(o.TgZ(0,"option",54),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.s9C("value",e.dId),o.xp6(1),o.HOy(" ",e.model," ",e.mark,", Sitze: ",e.seats," Stauraum: ",e.storage,"qm ")}}function J3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",9),o.TgZ(1,"div",10),o.TgZ(2,"label",51),o._uU(3,"Fahrzeug"),o.qZA(),o.TgZ(4,"select",52),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw(2).chosenCar=a}),o.YNc(5,K3,2,5,"option",53),o.qZA(),o.qZA(),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(4),o.Q6J("ngModel",e.chosenCar),o.xp6(1),o.Q6J("ngForOf",e.userCars)}}function Q3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",2),o.TgZ(2,"div",3),o.TgZ(3,"div",4),o.YNc(4,W3,2,0,"div",5),o.YNc(5,Y3,2,0,"div",5),o.qZA(),o.qZA(),o.TgZ(6,"app-slide-checker",6),o.NdJ("changeState",function(){return o.CHM(e),o.oxw().offerOnOff()}),o.qZA(),o.qZA(),o.TgZ(7,"div",7),o._UZ(8,"div",8),o.TgZ(9,"div",3),o.TgZ(10,"div",9),o.TgZ(11,"div",10),o.TgZ(12,"label",11),o._uU(13,"Von"),o.qZA(),o.TgZ(14,"input",12),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().startCity=a}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",9),o.TgZ(16,"div",10),o.TgZ(17,"label",13),o._uU(18,"Nach"),o.qZA(),o.TgZ(19,"input",14),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().endCity=a}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(20,"div",9),o.TgZ(21,"div",10),o.TgZ(22,"label",15),o._uU(23,"Datum"),o.qZA(),o.TgZ(24,"input",16),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().date=a})("change",function(){return o.CHM(e),o.oxw().calculateEndTime()}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"div",3),o.TgZ(26,"div",9),o.TgZ(27,"div",10),o.TgZ(28,"label",17),o._uU(29,"Abfahrtszeit"),o.qZA(),o.TgZ(30,"input",18),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().startTime=a})("change",function(){return o.CHM(e),o.oxw().calculateEndTime()}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(31,"div",9),o.TgZ(32,"div",10),o.TgZ(33,"label",19),o._uU(34,"Dauer"),o.qZA(),o.TgZ(35,"select",20),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().duration=a})("change",function(){return o.CHM(e),o.oxw().calculateEndTime()}),o._UZ(36,"option",21),o.TgZ(37,"option",22),o._uU(38,"1h"),o.qZA(),o.TgZ(39,"option",23),o._uU(40,"2h"),o.qZA(),o.TgZ(41,"option",24),o._uU(42,"3h"),o.qZA(),o.TgZ(43,"option",25),o._uU(44,"4h"),o.qZA(),o.TgZ(45,"option",26),o._uU(46,"5h"),o.qZA(),o.TgZ(47,"option",27),o._uU(48,"6h"),o.qZA(),o.TgZ(49,"option",28),o._uU(50,"7h"),o.qZA(),o.TgZ(51,"option",29),o._uU(52,"8h"),o.qZA(),o.TgZ(53,"option",30),o._uU(54,"9h"),o.qZA(),o.TgZ(55,"option",31),o._uU(56,"10h"),o.qZA(),o.TgZ(57,"option",32),o._uU(58,"11h"),o.qZA(),o.TgZ(59,"option",33),o._uU(60,"12h"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(61,"div",9),o.TgZ(62,"div",10),o.TgZ(63,"label",34),o._uU(64,"Ankunftszeit"),o.qZA(),o.TgZ(65,"input",35),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().endTime=a}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(66,"div",3),o.TgZ(67,"div",36),o.TgZ(68,"div",10),o.TgZ(69,"label",37),o._uU(70,"Sitzpl\xe4tze"),o.qZA(),o.TgZ(71,"select",38),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().seats=a}),o._UZ(72,"option",21),o.TgZ(73,"option",22),o._uU(74,"1"),o.qZA(),o.TgZ(75,"option",23),o._uU(76,"2"),o.qZA(),o.TgZ(77,"option",24),o._uU(78,"3"),o.qZA(),o.TgZ(79,"option",25),o._uU(80,"4"),o.qZA(),o.TgZ(81,"option",26),o._uU(82,"5"),o.qZA(),o.TgZ(83,"option",27),o._uU(84,"6"),o.qZA(),o.TgZ(85,"option",28),o._uU(86,"7"),o.qZA(),o.TgZ(87,"option",29),o._uU(88,"8"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(89,"div",36),o.TgZ(90,"div",10),o.TgZ(91,"label",39),o._uU(92,"Stauraum"),o.qZA(),o.TgZ(93,"select",40),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().storage=a}),o._UZ(94,"option",21),o.TgZ(95,"option",22),o._uU(96,"1"),o.qZA(),o.TgZ(97,"option",23),o._uU(98,"2"),o.qZA(),o.TgZ(99,"option",24),o._uU(100,"3"),o.qZA(),o.TgZ(101,"option",25),o._uU(102,"4"),o.qZA(),o.TgZ(103,"option",26),o._uU(104,"5"),o.qZA(),o.TgZ(105,"option",27),o._uU(106,"6"),o.qZA(),o.TgZ(107,"option",28),o._uU(108,"7"),o.qZA(),o.TgZ(109,"option",29),o._uU(110,"8"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(111,"div",36),o.TgZ(112,"div"),o.TgZ(113,"label",41),o._uU(114),o.qZA(),o.qZA(),o.TgZ(115,"div",42),o.TgZ(116,"input",43),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().price=a}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(117,"div",3),o.TgZ(118,"div",9),o.TgZ(119,"label",44),o._uU(120,"Beschreibung"),o.qZA(),o.TgZ(121,"textarea",45),o.NdJ("ngModelChange",function(a){return o.CHM(e),o.oxw().description=a}),o.qZA(),o.qZA(),o.YNc(122,J3,6,2,"div",46),o.qZA(),o.TgZ(123,"div",47),o.TgZ(124,"div",48),o.TgZ(125,"button",49),o.NdJ("click",function(){return o.CHM(e),o.oxw().checkInput()}),o._uU(126,"Erstellen"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&n){const e=o.oxw();o.xp6(4),o.Q6J("ngIf",e.isOffer),o.xp6(1),o.Q6J("ngIf",!e.isOffer),o.xp6(9),o.Q6J("ngModel",e.startCity),o.xp6(5),o.Q6J("ngModel",e.endCity),o.xp6(5),o.Q6J("ngModel",e.date),o.xp6(6),o.Q6J("ngModel",e.startTime),o.xp6(5),o.Q6J("ngModel",e.duration),o.xp6(30),o.Q6J("ngModel",e.endTime),o.xp6(6),o.Q6J("ngModel",e.seats),o.xp6(22),o.Q6J("ngModel",e.storage),o.xp6(21),o.hij("Preis: ",e.price,""),o.xp6(2),o.Q6J("ngModel",e.price),o.xp6(5),o.Q6J("ngModel",e.description),o.xp6(1),o.Q6J("ngIf",e.isOffer)}}function X3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",55),o.TgZ(1,"div",3),o.TgZ(2,"div",56),o._uU(3," Melde dich an, um eine Tour zu erstellen! "),o.qZA(),o.qZA(),o.TgZ(4,"div",3),o._UZ(5,"br"),o.qZA(),o.TgZ(6,"div",3),o.TgZ(7,"div",4),o.TgZ(8,"button",57),o.NdJ("click",function(){return o.CHM(e),o.oxw().navigateToProfil()}),o._uU(9,"Anmelden"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}}const eU=[{path:"profil",component:D3},{path:"carList",component:U3},{path:"",component:j3},{path:"tours",component:z3},{path:"createTours",component:(()=>{class n{constructor(e,r,a,l,h,m){var b=this;this.tourData=e,this.userData=r,this.alert=a,this.router=l,this.carData=h,this.auth=m,this.userCars=[],this.isOffer=!0,this.startCity="",this.endCity="",this.startTime="",this.duration="",this.endTime="",this.date="",this.seats="",this.storage="",this.price="",this.description="",this.chosenCar="",this.auth.user.subscribe(function(){var D=(0,oe.Z)(function*(N){if(N){const M=yield b.userData.getUser(N.uid);null!=M&&(yield b.fillCars(M))}});return function(N){return D.apply(this,arguments)}}())}fillCars(e){var r=this;return(0,oe.Z)(function*(){if(e){const a=[];for(const l of e.car){const h=yield r.carData.getCarById(l);h&&a.push(h)}r.userCars=[...a]}})()}navigateToProfil(){this.router.navigate(["/profil"])}offerOnOff(){this.isOffer=!this.isOffer}calculateEndTime(){if(this.startTime.trim().length>0&&this.duration.trim().length>0&&this.date.trim().length>0){let a=Number.parseInt(this.startTime.substr(0,2))+Number.parseInt(this.duration),l=this.date.substr(8,2);a>=24&&(l=(Number.parseInt(l)+1).toString(),l.trim().length<2&&(l="0"+l),a%=24),this.endTime=a<10?this.date.substr(0,8)+l+"T0"+a.toString():this.date.substr(0,8)+l+"T"+a.toString(),this.endTime+=this.startTime.substr(2,3)}}checkUniqueInputs(){return this.startTime.trim().length>0&&this.endCity.trim().length>0&&this.startTime.trim().length>0&&this.duration.trim().length>0&&this.date.trim().length>0&&this.seats.trim().length>0&&this.storage.trim().length>0&&Number.parseInt(this.price)>0}checkInput(){var e=this;return(0,oe.Z)(function*(){const r=e.userData.currUser;let a=e.newTour();r&&(e.isOffer&&e.checkUniqueInputs()&&e.chosenCar.trim().length>0?yield e.addOffer(a,r):e.checkUniqueInputs()?yield e.addNoOffer(a,r):e.alert.showAlert({type:"danger",message:"Alle Felder ausf\xfcllen!"}))})()}addOffer(e,r){var a=this;return(0,oe.Z)(function*(){e.driver=r.uid,e.car=a.chosenCar,yield a.addTour(e)})()}addNoOffer(e,r){var a=this;return(0,oe.Z)(function*(){e.passengers[0]=r.uid,yield a.addTour(e)})()}addTour(e){var r=this;return(0,oe.Z)(function*(){yield r.tourData.addTour(e),r.clearInputs()})()}newTour(){return new BO(this.isOffer,this.startCity,this.endCity,this.startTime,Number.parseInt(this.duration),this.date,Number.parseInt(this.price),Number.parseInt(this.storage),Number.parseInt(this.seats),this.description)}clearInputs(){this.startCity="",this.endCity="",this.startTime="",this.duration="",this.date="",this.price="",this.storage="",this.seats="",this.description="",this.chosenCar="",this.endTime=""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(DI),o.Y36(la),o.Y36(ZO),o.Y36(vr),o.Y36(JM),o.Y36(Kf))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-create-tours"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notloggedin",""],[1,"container","title-background","mw-100"],[1,"row"],[1,"col","text-center"],["class","h2 logoGreenDark m-3",4,"ngIf"],[3,"changeState"],[1,"container","rounded","shadow","mt-4","bg-white","border-0"],[1,"row","m-4"],[1,"col"],[1,"form-group"],["for","cityStart",1,"logoGreenDark"],["type","text","id","cityStart",1,"form-control",3,"ngModel","ngModelChange"],["for","endCity",1,"logoGreenDark"],["type","text","id","endCity",1,"form-control",3,"ngModel","ngModelChange"],["for","date",1,"logoGreenDark"],["type","date","id","date",1,"form-control",3,"ngModel","ngModelChange","change"],["for","startTime",1,"logoGreenDark"],["type","time","id","startTime",1,"form-control",3,"ngModel","ngModelChange","change"],["for","duration",1,"logoGreenDark"],["name","","id","duration",1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["for","endTime",1,"logoGreenDark"],["type","datetime-local","readonly","","id","endTime",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4"],["for","seats",1,"logoGreenDark"],["name","","id","seats",1,"form-control",3,"ngModel","ngModelChange"],["for","storage",1,"logoGreenDark"],["name","","id","storage",1,"form-control",3,"ngModel","ngModelChange"],["for","customRange3",1,"logoGreenDark"],[1,""],["type","range","min","0","max","500","id","customRange3",1,"form-range","mt-2",2,"min-width","100%","max-width","100%",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label","logoGreenDark"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["class","col",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-5","m-4"],[1,"btn","btn-success","btn-block",3,"click"],[1,"h2","logoGreenDark","m-3"],["for","cars",1,"logoGreenDark"],["name","","id","cars",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"container","mt-5","rounded","shadow","container","bg-white","border-0",2,"width","700px"],[1,"col","text-center","mt-3","h2","logoGreenDark"],[1,"btn","btn-outline-success","btn-lg","m-3",3,"click"]],template:function(e,r){if(1&e&&(o.YNc(0,Q3,127,14,"div",0),o.YNc(1,X3,10,0,"ng-template",null,1,o.W1O)),2&e){const a=o.MAs(2);o.Q6J("ngIf",r.userData.currUser)("ngIfElse",a)}},directives:[pn,UO,j,t0,r0,s0,cw,dw,AM,_t],styles:['.title-background[_ngcontent-%COMP%]{height:130px;width:100vw;background-color:#f3fbed}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#005b51;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:3px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#005b51}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 5px #005b51}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(34px)}.slider.round[_ngcontent-%COMP%]{border-radius:32px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),n})()},{path:"exprofile",component:(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-stranger-profile"]],decls:2,vars:0,template:function(e,r){1&e&&(o.TgZ(0,"p"),o._uU(1,"stranger-profile works!"),o.qZA())},styles:[""]}),n})()}];let tU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[H0.forRoot(eU)],H0]}),n})();function nU(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p"),o.TgZ(1,"ngb-alert",2),o.NdJ("closed",function(){const l=o.CHM(e).$implicit;return o.oxw().close(l)}),o._uU(2),o.qZA(),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("type",e.type),o.xp6(1),o.Oqu(e.message)}}let rU=(()=>{class n{constructor(e){this.alert=e}close(e){this.alert.alerts.splice(this.alert.alerts.indexOf(e),1)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ZO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-alerts"]],decls:2,vars:1,consts:[[1,"d-flex","justify-content-center","w-100","test"],[4,"ngFor","ngForOf"],[3,"type","closed"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.YNc(1,nU,3,2,"p",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngForOf",r.alert.alerts))},directives:[_t,vL],styles:[".test[_ngcontent-%COMP%]{z-index:+1;padding-top:20px;position:absolute}"]}),n})(),iU=(()=>{class n{constructor(e,r){this.router=e,this.authData=r}navigateToUser(){this.router.navigate(["/profil"])}navigateToTours(){this.router.navigate(["/tours"])}navigateToMainPage(){this.router.navigate(["/"])}navigateToCreateTourPage(){this.router.navigate(["/createTours"])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(vr),o.Y36(la))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar"]],decls:29,vars:0,consts:[[1,"navbar","navbar-expand-xl","navbar-light","bg-light","py-2"],[1,"container-fluid",2,"margin-left","15em","margin-right","15em"],[2,"border","none","background-color","Transparent",3,"click"],["src","../../../assets/img/SVG/LKW.svg","width","180","height","75"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","mr-auto"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item"],[2,"border","none","background-color","Transparent"],["aria-current","page",1,"nav-link","active",2,"color","#005B51","font-size","20px","font-style","italic","font-family","Arial",3,"click"],["href","#",1,"nav-link","active",2,"color","#005B51","font-size","20px","font-style","italic","font-family","Arial"],[1,"navbar-nav","me-auto","my-2","my-lg-0"],["href","#",1,"nav-item",2,"margin-right","14px"],["src","../../../assets/img/Icons/search_icon.png","width","30","height","30",2,"float","left","margin-top","7px"],[1,"nav-link","active",2,"color","#005B51","float","left","font-size","20px","font-style","italic","font-family","Arial"],[1,"nav-item",2,"margin-right","12px"],["src","../../../assets/img/Icons/add_icon.png","width","30","height","30",2,"float","left","margin-top","7px"],["src","../../../assets/img/Icons/user_icon.png","width","43","height","43",2,"float","left"]],template:function(e,r){1&e&&(o.TgZ(0,"nav",0),o.TgZ(1,"div",1),o.TgZ(2,"button",2),o.NdJ("click",function(){return r.navigateToMainPage()}),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"button",4),o._UZ(5,"span",5),o.qZA(),o.TgZ(6,"div",6),o.TgZ(7,"ul",7),o.TgZ(8,"li",8),o.TgZ(9,"button",9),o.TgZ(10,"a",10),o.NdJ("click",function(){return r.navigateToTours()}),o._uU(11,"Mitfahrgelegenheit"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"li",8),o.TgZ(13,"a",11),o._uU(14,"Meine Angebote & Anfragen"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"ul",12),o.TgZ(16,"li",13),o.TgZ(17,"button",9),o._UZ(18,"img",14),o.TgZ(19,"a",15),o._uU(20,"Suchen"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"li",16),o.TgZ(22,"button",2),o.NdJ("click",function(){return r.navigateToCreateTourPage()}),o._UZ(23,"img",17),o.TgZ(24,"a",15),o._uU(25,"Angebot & Anfrage erstellen"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(26,"li"),o.TgZ(27,"button",2),o.NdJ("click",function(){return r.navigateToUser()}),o._UZ(28,"img",18),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA())},directives:[qM],styles:[".navbar[_ngcontent-%COMP%]{height:100px}"]}),n})(),sU=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"footer","bg-light"],[1,"container","p-0","m-0"],[1,"row","p-0","m-0"],[1,"col","m-2"]],template:function(e,r){1&e&&(o.TgZ(0,"footer",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o._uU(4,"\xa9Cargonaut"),o.qZA(),o.qZA(),o.qZA(),o.qZA())},styles:[".footer[_ngcontent-%COMP%]{height:40px;padding:0;margin:0;width:100%}"]}),n})(),oU=(()=>{class n{constructor(e,r){this.router=e,this.tour=r,this.title="Cargonaut","/profil"===this.router.url&&this.router.navigate(["/profil"]),"/carList"===this.router.url&&this.router.navigate(["/carList"]),"/tours"===this.router.url&&this.router.navigate(["/tours"]),"/createTours"===this.router.url&&this.router.navigate(["/createTours"]),"/exprofile"===this.router.url&&this.router.navigate(["/exprofile"])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(vr),o.Y36(DI))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"wrapper"],[1,"content"],[1,"footer"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._UZ(2,"app-alerts"),o._UZ(3,"app-navbar"),o._UZ(4,"router-outlet"),o.qZA(),o._UZ(5,"app-footer",2),o.qZA())},directives:[rU,iU,Fh,sU],styles:[".wrapper[_ngcontent-%COMP%]{position:relative;min-height:100%;height:auto!important}.content[_ngcontent-%COMP%]{padding-bottom:50px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}"]}),n})();class uU{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new lU(t,this.dueTime,this.scheduler))}}class lU extends Kn.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(cU,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function cU(n){n.debouncedNext()}const jO="firebasestorage.googleapis.com",$O="storageBucket";class Or extends Et.ZR{constructor(t,e){super(QM(t),`Firebase Storage: ${e} (${QM(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Or.prototype)}_codeEquals(t){return QM(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function QM(n){return"storage/"+n}function XM(){return new Or("unknown","An unknown error occurred, please check the error payload for server response.")}function HO(){return new Or("canceled","User canceled the upload/download.")}function qO(){return new Or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function h0(n){return new Or("invalid-argument",n)}function GO(){return new Or("app-deleted","The Firebase app was deleted.")}function zO(n){return new Or("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bw(n,t){return new Or("invalid-format","String does not match format '"+n+"': "+t)}function ww(n){throw new Or("internal-error","Internal error: "+n)}class Ns{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Ns.makeFromUrl(t,e)}catch(a){return new Ns(t,"")}if(""===r.path)return r;throw function(n){return new Or("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const a="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+a+"(/(.*))?$","i");function D(ot){ot.path_=decodeURIComponent(ot.path)}const M=e.replace(/[.]/g,"\\."),St=[{regex:m,indices:{bucket:1,path:3},postModify:function(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${e===jO?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let ot=0;ot<St.length;ot++){const ln=St[ot],Gr=ln.regex.exec(t);if(Gr){let Lo=Gr[ln.indices.path];Lo||(Lo=""),r=new Ns(Gr[ln.indices.bucket],Lo),ln.postModify(r);break}}if(null==r)throw function(n){return new Or("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class EU{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function AI(n){return"string"==typeof n||n instanceof String}function WO(n){return ex()&&n instanceof Blob}function ex(){return"undefined"!=typeof Blob}function tx(n,t,e,r){if(r<t)throw h0(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw h0(`Invalid value for '${n}'. Expected ${e} or less.`)}function Hd(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function YO(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var rp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(rp||(rp={})),rp))();class MU{constructor(t,e,r,a,l,h,m,b,D,N,M){this.url_=t,this.method_=e,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=b,this.timeout_=D,this.progressCallback_=N,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,$)=>{this.resolve_=V,this.reject_=$,this.start_()})}start_(){const e=(r,a)=>{const l=this.resolve_,h=this.reject_,m=a.connection;if(a.wasSuccessCode)try{const b=this.callback_(m,m.getResponse());!function(n){return void 0!==n}(b)?l():l(b)}catch(b){h(b)}else if(null!==m){const b=XM();b.serverResponse=m.getErrorText(),h(this.errorCallback_?this.errorCallback_(m,b):b)}else h(a.canceled?this.appDelete_?GO():HO():new Or("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new SI(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,a=null,l=null,h=!1,m=0;function b(){return 2===m}let D=!1;function N(...Se){D||(D=!0,t.apply(null,Se))}function M(Se){a=setTimeout(()=>{a=null,n($,b())},Se)}function V(){l&&clearTimeout(l)}function $(Se,...rt){if(D)return void V();if(Se)return V(),void N.call(null,Se,...rt);if(b()||h)return V(),void N.call(null,Se,...rt);let St;r<64&&(r*=2),1===m?(m=2,St=0):St=1e3*(r+Math.random()),M(St)}let ie=!1;function ye(Se){ie||(ie=!0,V(),!D&&(null!==a?(Se||(m=2),clearTimeout(a),M(0)):Se||(m=1)))}return M(0),l=setTimeout(()=>{h=!0,ye(!0)},e),ye}((r,a)=>{if(a)return void r(!1,new SI(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const h=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const m=l.getErrorCode()===rp.NO_ERROR,b=l.getStatus();if(!m||this.isRetryStatusCode_(b)){const N=l.getErrorCode()===rp.ABORT;return void r(!1,new SI(!1,null,N))}const D=-1!==this.successCodes_.indexOf(b);r(!0,new SI(D,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,a=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||a||l}}class SI{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function LU(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(ex())return new Blob(n);throw new Or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nx{constructor(t,e){this.data=t,this.contentType=e||null}}function rx(n,t){switch(n){case ca.RAW:return new nx(KO(t));case ca.BASE64:case ca.BASE64URL:return new nx(JO(n,t));case ca.DATA_URL:return new nx(function(n){const t=new QO(n);return t.base64?JO(ca.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw bw(ca.DATA_URL,"Malformed data URL.")}return KO(t)}(t.rest)}(t),function(n){return new QO(n).contentType}(t))}throw XM()}function KO(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function JO(n,t){switch(n){case ca.BASE64:{const a=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(a||l)throw bw(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case ca.BASE64URL:{const a=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(a||l)throw bw(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(a){throw bw(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}class QO{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw bw(ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class Jl{constructor(t,e){let r=0,a="";WO(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,e){if(WO(this.data_)){const a=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===a?null:new Jl(a)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Jl(r,!0)}}static getBlob(...t){if(ex()){const e=t.map(r=>r instanceof Jl?r.data_:r);return new Jl(LU.apply(null,e))}{const e=t.map(h=>AI(h)?rx(ca.RAW,h).data:h.data_);let r=0;e.forEach(h=>{r+=h.byteLength});const a=new Uint8Array(r);let l=0;return e.forEach(h=>{for(let m=0;m<h.length;m++)a[l++]=h[m]}),new Jl(a,!0)}}uploadData(){return this.data_}}function ix(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function XO(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function GU(n,t){return t}class lo{constructor(t,e,r,a){this.server=t,this.local=e||t,this.writable=!!r,this.xform=a||GU}}let NI=null;function Cw(){if(NI)return NI;const n=[];n.push(new lo("bucket")),n.push(new lo("generation")),n.push(new lo("metageneration")),n.push(new lo("name","fullPath",!0));const e=new lo("name");e.xform=function(l,h){return function(n){return!AI(n)||n.length<2?n:XO(n)}(h)},n.push(e);const a=new lo("size");return a.xform=function(l,h){return void 0!==h?Number(h):h},n.push(a),n.push(new lo("timeCreated")),n.push(new lo("updated")),n.push(new lo("md5Hash",null,!0)),n.push(new lo("cacheControl",null,!0)),n.push(new lo("contentDisposition",null,!0)),n.push(new lo("contentEncoding",null,!0)),n.push(new lo("contentLanguage",null,!0)),n.push(new lo("contentType",null,!0)),n.push(new lo("metadata","customMetadata",!0)),NI=n,NI}function eP(n,t,e){const r=ix(t);return null===r?null:function(n,t,e){const r={type:"file"},a=e.length;for(let l=0;l<a;l++){const h=e[l];r[h.local]=h.xform(r,t[h.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new Ns(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function sx(n,t){const e={},r=t.length;for(let a=0;a<r;a++){const l=t[a];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const tP="prefixes";class Ql{constructor(t,e,r,a){this.url=t,this.method=e,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xl(n){if(!n)throw XM()}function MI(n,t){return function(r,a){const l=eP(n,a,t);return Xl(null!==l),l}}function f0(n){return function(e,r){let a;return a=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new Or("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new Or("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new Or("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,a.serverResponse=r.serverResponse,a}}function Tw(n){const t=f0(n);return function(r,a){let l=t(r,a);return 404===r.getStatus()&&(l=function(n){return new Or("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=a.serverResponse,l}}function rP(n,t,e){const a=Hd(t.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,m=new Ql(a,"GET",MI(n,e),h);return m.errorHandler=Tw(t),m}function tB(n,t,e,r,a){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),a&&(l.maxResults=a);const m=Hd(t.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,N=new Ql(m,"GET",function(n,t){return function(r,a){const l=function(n,t,e){const r=ix(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[tP])for(const a of e[tP]){const l=a.replace(/\/$/,""),h=n._makeStorageReference(new Ns(t,l));r.prefixes.push(h)}if(e.items)for(const a of e.items){const l=n._makeStorageReference(new Ns(t,a.name));r.items.push(l)}return r}(n,t,r)}(n,t,a);return Xl(null!==l),l}}(n,t.bucket),D);return N.urlParams=l,N.errorHandler=f0(t),N}function sP(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class xI{constructor(t,e,r,a){this.current=t,this.total=e,this.finalized=!!r,this.metadata=a||null}}function ox(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(a){Xl(!1)}return Xl(!!e&&-1!==(t||["active"]).indexOf(e)),e}const lB={STATE_CHANGED:"state_changed"},co={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ax(n){switch(n){case"running":case"pausing":case"canceling":return co.RUNNING;case"paused":return co.PAUSED;case"success":return co.SUCCESS;case"canceled":return co.CANCELED;case"error":default:return co.ERROR}}class cB{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function p0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class hB extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,a){if(this.sent_)throw ww("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==a)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ww("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ww("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw ww("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ww("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function zu(){return new hB}class lP{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=Cw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{this._request=void 0,this._chunkMultiplier=1,a._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=a,this._transition("error"))},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals("canceled")?this.completeTransitions_():(this._error=a,this._transition("error"))},this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,a){const l=t.bucketOnlyServerUrl(),h=sP(t,r,a),m={name:h.fullPath},b=Hd(l,n.host,n._protocol),N={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},M=sx(h,e),ie=new Ql(b,"POST",function(ye){let Se;ox(ye);try{Se=ye.getResponseHeader("X-Goog-Upload-URL")}catch(rt){Xl(!1)}return Xl(AI(Se)),Se},n.maxUploadRetryTime);return ie.urlParams=m,ie.headers=N,ie.body=M,ie.errorHandler=f0(t),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,zu,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const a=function(n,t,e,r){const b=new Ql(e,"POST",function(D){const N=ox(D,["active","final"]);let M=null;try{M=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){Xl(!1)}M||Xl(!1);const V=Number(M);return Xl(!isNaN(V)),new xI(V,r.size(),"final"===N)},n.maxUploadRetryTime);return b.headers={"X-Goog-Upload-Command":"query"},b.errorHandler=f0(t),b}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(a,zu,e,r);this._request=l,l.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new xI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,l)=>{let h;try{h=function(n,t,e,r,a,l,h,m){const b=new xI(0,0);if(h?(b.current=h.current,b.total=h.total):(b.current=0,b.total=r.size()),r.size()!==b.total)throw new Or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const D=b.total-b.current;let N=D;a>0&&(N=Math.min(N,a));const M=b.current,ie={"X-Goog-Upload-Command":N===D?"upload, finalize":"upload","X-Goog-Upload-Offset":`${b.current}`},ye=r.slice(M,M+N);if(null===ye)throw qO();const St=new Ql(e,"POST",function(ot,ln){const Gr=ox(ot,["active","final"]),Wu=b.current+N,Lo=r.size();let cx;return cx="final"===Gr?MI(t,l)(ot,ln):null,new xI(Wu,Lo,"final"===Gr,cx)},t.maxUploadRetryTime);return St.headers=ie,St.body=ye.uploadData(),St.progressCallback=m||null,St.errorHandler=f0(n),St}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(b){return this._error=b,void this._transition("error")}const m=this._ref.storage._makeRequest(h,zu,a,l);this._request=m,m.getPromise().then(b=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(b.current),b.finalized?(this._metadata=b.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=rP(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,zu,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,a){const l=t.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},b=function(){let St="";for(let ot=0;ot<2;ot++)St+=Math.random().toString().slice(2);return St}();h["Content-Type"]="multipart/related; boundary="+b;const D=sP(t,r,a),N=sx(D,e),$=Jl.getBlob("--"+b+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+N+"\r\n--"+b+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+b+"--");if(null===$)throw qO();const ie={name:D.fullPath},ye=Hd(l,n.host,n._protocol),rt=n.maxUploadRetryTime,Je=new Ql(ye,"POST",MI(n,e),rt);return Je.urlParams=ie,Je.headers=h,Je.body=$.uploadData(),Je.errorHandler=f0(t),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,zu,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=HO(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=ax(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,a){const l=new cB(e||void 0,r||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(ax(this._state)){case co.SUCCESS:p0(this._resolve.bind(null,this.snapshot))();break;case co.CANCELED:case co.ERROR:p0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(ax(this._state)){case co.RUNNING:case co.PAUSED:t.next&&p0(t.next.bind(t,this.snapshot))();break;case co.SUCCESS:t.complete&&p0(t.complete.bind(t))();break;case co.CANCELED:case co.ERROR:t.error&&p0(t.error.bind(t,this._error))();break;default:t.error&&p0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class mm{constructor(t,e){this._service=t,this._location=e instanceof Ns?e:Ns.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new mm(t,e)}get root(){const t=new Ns(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XO(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ns(this._location.bucket,t);return new mm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw zO(t)}}function dP(n,t,e){return ux.apply(this,arguments)}function ux(){return(ux=(0,oe.Z)(function*(n,t,e){const a=yield hP(n,{pageToken:e});t.prefixes.push(...a.prefixes),t.items.push(...a.items),null!=a.nextPageToken&&(yield dP(n,t,a.nextPageToken))})).apply(this,arguments)}function hP(n,t){null!=t&&"number"==typeof t.maxResults&&tx("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=tB(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,zu)}function EB(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const a=Hd(t.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,m=new Ql(a,"GET",function(n,t){return function(r,a){const l=eP(n,a,t);return Xl(null!==l),function(n,t,e,r){const a=ix(t);if(null===a||!AI(a.downloadTokens))return null;const l=a.downloadTokens;if(0===l.length)return null;const h=encodeURIComponent;return l.split(",").map(D=>{const M=n.fullPath;return Hd("/b/"+h(n.bucket)+"/o/"+h(M),e,r)+YO({alt:"media",token:D})})[0]}(l,a,n.host,n._protocol)}}(n,e),h);return m.errorHandler=Tw(t),m}(n.storage,n._location,Cw());return n.storage.makeRequestWithTokens(t,zu).then(e=>{if(null===e)throw new Or("no-download-url","The given file does not have any download URLs.");return e})}function fP(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Ns(n._location.bucket,e);return new mm(n.storage,r)}function pP(n,t){if(n instanceof lx){const e=n;if(null==e._bucket)throw new Or("no-default-bucket","No default bucket found. Did you set the '"+$O+"' property when initializing the app?");const r=new mm(e,e._bucket);return null!=t?pP(r,t):r}return void 0!==t?fP(n,t):n}function SB(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof lx)return function(n,t){return new mm(n,t)}(n,t);throw h0("To use ref(service, url), the first argument must be a Storage instance.")}return pP(n,t)}function gP(n,t){const e=null==t?void 0:t[$O];return null==e?null:Ns.makeFromBucketSpec(e,n)}class lx{constructor(t,e,r,a,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=jO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Ns.makeFromBucketSpec(a,this._host):gP(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ns.makeFromBucketSpec(this._url,t):gP(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){tx("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){tx("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,oe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,oe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new mm(this,t)}_makeRequest(t,e,r,a){if(this._deleted)return new EU(GO());{const l=function(n,t,e,r,a,l){const h=YO(n.urlParams),m=n.url+h,b=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(b,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(b,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(b,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(b,r),new MU(m,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a)}(t,this._appId,r,a,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,oe.Z)(function*(){const[a,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,a,l).getPromise()})()}}const mP="@firebase/storage";function vP(n,t){return SB(n=(0,Et.m9)(n),t)}(0,Ys._registerComponent)(new jc.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new lx(e,r,a,t,Ys.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ys.registerVersion)(mP,"0.9.0",""),(0,Ys.registerVersion)(mP,"0.9.0","esm2017");class kI{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bP{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new kI(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new kI(r,this,this._ref))},e)}on(t,e,r,a){let l;return e&&(l="function"==typeof e?h=>e(new kI(h,this,this._ref)):{next:e.next?h=>e.next(new kI(h,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,a||void 0)}}class wP{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new qd(t,this._service))}get items(){return this._delegate.items.map(t=>new qd(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qd{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return fP(n,t)}(this._delegate,t);return new qd(e,this.storage)}get root(){return new qd(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new qd(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new bP(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new lP(n,new Jl(t),e)}(n=(0,Et.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ca.RAW,r){this._throwIfRoot("putString");const a=rx(e,t),l=Object.assign({},r);return null==l.contentType&&null!=a.contentType&&(l.contentType=a.contentType),new bP(new lP(this._delegate,new Jl(a.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return dP(n,t).then(()=>t)}(n=(0,Et.m9)(n))}(this._delegate).then(t=>new wP(t,this.storage))}list(t){return function(n,t){return hP(n=(0,Et.m9)(n),t)}(this._delegate,t||void 0).then(e=>new wP(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=rP(n.storage,n._location,Cw());return n.storage.makeRequestWithTokens(t,zu)}(n=(0,Et.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=Hd(t.fullServerUrl(),n.host,n._protocol),m=sx(e,r),D=n.maxOperationRetryTime,N=new Ql(l,"PATCH",MI(n,r),D);return N.headers={"Content-Type":"application/json; charset=utf-8"},N.body=m,N.errorHandler=Tw(t),N}(n.storage,n._location,t,Cw());return n.storage.makeRequestWithTokens(e,zu)}(n=(0,Et.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return EB(n=(0,Et.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=Hd(t.fullServerUrl(),n.host,n._protocol),m=new Ql(r,"DELETE",function(b,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Tw(t),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,zu)}(n=(0,Et.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw zO(t)}}class CP{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(TP(t))throw h0("ref() expected a child path but got a URL, use refFromURL instead.");return new qd(vP(this._delegate,t),this)}refFromURL(t){if(!TP(t))throw h0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ns.makeFromUrl(t,this._delegate.host)}catch(e){throw h0("refFromUrl() expected a valid full URL but got an invalid one.")}return new qd(vP(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken="string"==typeof a?a:(0,Et.Sg)(a,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function TP(n){return/^[A-Za-z]+:\/\//.test(n)}function HB(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new CP(e,r)}function EP(n){const t=function(n){return new kt.y(t=>{const e=h=>t.next(h);e(n.snapshot);const l=n.on("state_changed",e);return n.then(h=>{e(h),t.complete()},h=>{e(n.snapshot),(h=>{t.error(h)})(h)}),function(){l()}}).pipe(function(n,t=Jm.P){return e=>e.lift(new uU(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,at.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function RI(n){return{getDownloadURL:()=>(0,Ge.of)(void 0).pipe(er.fc,ir(()=>n.getDownloadURL()),er.iC),getMetadata:()=>(0,Ge.of)(void 0).pipe(er.fc,ir(()=>n.getMetadata()),er.iC),delete:()=>(0,gn.D)(n.delete()),child:t=>RI(n.child(t)),updateMetadata:t=>(0,gn.D)(n.updateMetadata(t)),put:(t,e)=>EP(n.put(t,e)),putString:(t,e,r)=>EP(n.putString(t,e,r)),list:t=>(0,gn.D)(n.list(t)),listAll:()=>(0,gn.D)(n.listAll())}}!function(n){const t={TaskState:co,TaskEvent:lB,StringFormat:ca,Storage:CP,Reference:qd};n.INTERNAL.registerComponent(new jc.wA("storage-compat",HB,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.8")}(Va.Z);const zB=new o.OlP("angularfire2.storageBucket"),WB=new o.OlP("angularfire2.storage.maxUploadRetryTime"),YB=new o.OlP("angularfire2.storage.maxOperationRetryTime"),KB=new o.OlP("angularfire2.storage.use-emulator");let JB=(()=>{class n{constructor(e,r,a,l,h,m,b,D,N,M){const V=(0,Xi.on)(e,h,r);this.storage=(0,Xi.cc)(`${V.name}.storage.${a}`,"AngularFireStorage",V.name,()=>{const $=h.runOutsideAngular(()=>V.storage(a||void 0)),ie=N;return ie&&$.useEmulator(...ie),b&&$.setMaxUploadRetryTime(b),D&&$.setMaxOperationRetryTime(D),$},[b,D])}ref(e){return RI(this.storage.ref(e))}refFromURL(e){return RI(this.storage.refFromURL(e))}upload(e,r,a){return RI(this.storage.ref(e)).put(r,a)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xi.Dh),o.LFG(Xi.xv,8),o.LFG(zB,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(er.HU),o.LFG(WB,8),o.LFG(YB,8),o.LFG(KB,8),o.LFG(Y1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),XB=(()=>{class n{constructor(){Km.Z.registerVersion("angularfire",er.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[JB],imports:[QB]}),n})();const DP_firebaseConfig={apiKey:"AIzaSyAzFvzwYxlMK_XDHfw1FZj2KdVqf0CXleA",authDomain:"kmsws21-cargonaut.firebaseapp.com",projectId:"kmsws21-cargonaut",storageBucket:"kmsws21-cargonaut.appspot.com",messagingSenderId:"1019573337686",appId:"1:1019573337686:web:6c95b8ee68daf7613cc5f7",measurementId:"${config.measurementId}"};let e6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[oU]}),n.\u0275inj=o.cJS({providers:[],imports:[[hp,tU,XV,Xi.hO.initializeApp(DP_firebaseConfig),GD,Zy,XB,AR,hF]]}),n})();(0,o.G48)(),Go().bootstrapModule(e6).catch(n=>console.error(n))},3394:(We,be,F)=>{"use strict";F.d(be,{Z:()=>Me});var o=F(3854),Z=F(3910),O=F(8026),ce=F(5422);class ue{constructor(ge,re){this._delegate=ge,this.firebase=re,(0,O._addComponent)(ge,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,re=O._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(ge);return!Te.isInitialized()&&"EXPLICIT"===(null===(ae=Te.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:re})}_removeServiceInstance(ge,re=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(re)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function z(){const Ee=function(Ee){const ge={},re={__esModule:!0,initializeApp:function(yt,In={}){const Tt=O.initializeApp(yt,In);if((0,o.r3)(ge,Tt.name))return ge[Tt.name];const pt=new Ee(Tt,re);return ge[Tt.name]=pt,pt},app:Te,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(yt){const In=yt.name,Tt=In.replace("-compat","");if(O._registerComponent(yt)&&"PUBLIC"===yt.type){const pt=(Rt=Te())=>{if("function"!=typeof Rt[Tt])throw de.create("invalid-app-argument",{appName:In});return Rt[Tt]()};void 0!==yt.serviceProps&&(0,o.ZB)(pt,yt.serviceProps),re[Tt]=pt,Ee.prototype[Tt]=function(...Rt){return this._getService.bind(this,In).apply(this,yt.multipleInstances?Rt:[])}}return"PUBLIC"===yt.type?re[Tt]:null},removeApp:function(yt){delete ge[yt]},useAsService:function(yt,In){return"serverAuth"===In?null:In},modularAPIs:O}};function Te(yt){if(!(0,o.r3)(ge,yt=yt||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:yt});return ge[yt]}return re.default=re,Object.defineProperty(re,"apps",{get:function(){return Object.keys(ge).map(yt=>ge[yt])}}),Te.App=Ee,re}(ue);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:z,extendNamespace:function(re){(0,o.ZB)(Ee,re)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),Ee}(),B=new ce.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=L;(0,O.registerVersion)("@firebase/app-compat","0.1.11",undefined)},8026:(We,be,F)=>{"use strict";F.r(be),F.d(be,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>ji,_addComponent:()=>ds,_addOrOverwriteComponent:()=>Ms,_apps:()=>Wt,_clearComponents:()=>_n,_components:()=>Bt,_getProvider:()=>sn,_registerComponent:()=>Ci,_removeServiceInstance:()=>xs,deleteApp:()=>qn,getApp:()=>Re,getApps:()=>wn,initializeApp:()=>$i,onLog:()=>jt,registerVersion:()=>Ze,setLogLevel:()=>gr});var o=F(8239),Z=F(3910),O=F(5422),ce=F(3854);class ue{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function(it){const et=it.getComponent();return"VERSION"===(null==et?void 0:et.type)}(Mt)){const Ot=Mt.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(Mt=>Mt).join(" ")}}const de="@firebase/app",Q="0.7.10",z=new O.Yd("@firebase/app"),ji="[DEFAULT]",ho={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,Bt=new Map;function ds(it,et){try{it.container.addComponent(et)}catch(Mt){z.debug(`Component ${et.name} failed to register with FirebaseApp ${it.name}`,Mt)}}function Ms(it,et){it.container.addOrOverwriteComponent(et)}function Ci(it){const et=it.name;if(Bt.has(et))return z.debug(`There were multiple attempts to register component ${et}.`),!1;Bt.set(et,it);for(const Mt of Wt.values())ds(Mt,it);return!0}function sn(it,et){return it.container.getProvider(et)}function xs(it,et,Mt=ji){sn(it,et).clearInstance(Mt)}function _n(){Bt.clear()}const Qt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class ks{constructor(et,Mt,Ot){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Ti="9.6.0";function $i(it,et={}){"object"!=typeof et&&(et={name:et});const Mt=Object.assign({name:ji,automaticDataCollectionEnabled:!1},et),Ot=Mt.name;if("string"!=typeof Ot||!Ot)throw Qt.create("bad-app-name",{appName:String(Ot)});const zn=Wt.get(Ot);if(zn){if((0,ce.vZ)(it,zn.options)&&(0,ce.vZ)(Mt,zn.config))return zn;throw Qt.create("duplicate-app",{appName:Ot})}const en=new Z.H0(Ot);for(const Xe of Bt.values())en.addComponent(Xe);const Pe=new ks(it,Mt,en);return Wt.set(Ot,Pe),Pe}function Re(it=ji){const et=Wt.get(it);if(!et)throw Qt.create("no-app",{appName:it});return et}function wn(){return Array.from(Wt.values())}function qn(it){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,o.Z)(function*(it){const et=it.name;Wt.has(et)&&(Wt.delete(et),yield Promise.all(it.container.getProviders().map(Mt=>Mt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function Ze(it,et,Mt){var Ot;let zn=null!==(Ot=ho[it])&&void 0!==Ot?Ot:it;Mt&&(zn+=`-${Mt}`);const en=zn.match(/\s|\//),Pe=et.match(/\s|\//);if(en||Pe){const Xe=[`Unable to register library "${zn}" with version "${et}":`];return en&&Xe.push(`library name "${zn}" contains illegal characters (whitespace or "/")`),en&&Pe&&Xe.push("and"),Pe&&Xe.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void z.warn(Xe.join(" "))}Ci(new Z.wA(`${zn}-version`,()=>({library:zn,version:et}),"VERSION"))}function jt(it,et){if(null!==it&&"function"!=typeof it)throw Qt.create("invalid-log-argument");(0,O.Am)(it,et)}function gr(it){(0,O.Ub)(it)}Ci(new Z.wA("platform-logger",et=>new ue(et),"PRIVATE")),Ze(de,Q,""),Ze(de,Q,"esm2017"),Ze("fire-js","")},3910:(We,be,F)=>{"use strict";F.d(be,{wA:()=>O,H0:()=>Q});var o=F(8239),Z=F(3854);class O{constructor(L,B,H){this.name=L,this.instanceFactory=B,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const ce="[DEFAULT]";class ue{constructor(L,B){this.name=L,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const B=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(B)){const H=new Z.BH;if(this.instancesDeferred.set(B,H),this.isInitialized(B)||this.shouldAutoInitialize())try{const he=this.getOrInitializeService({instanceIdentifier:B});he&&H.resolve(he)}catch(he){}}return this.instancesDeferred.get(B).promise}getImmediate(L){var B;const H=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),he=null!==(B=null==L?void 0:L.optional)&&void 0!==B&&B;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(he)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(Oe){if(he)return null;throw Oe}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if("EAGER"===L.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(B){}for(const[B,H]of this.instancesDeferred.entries()){const he=this.normalizeInstanceIdentifier(B);try{const Oe=this.getOrInitializeService({instanceIdentifier:he});H.resolve(Oe)}catch(Oe){}}}}clearInstance(L=ce){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,o.Z)(function*(){const B=Array.from(L.instances.values());yield Promise.all([...B.filter(H=>"INTERNAL"in H).map(H=>H.INTERNAL.delete()),...B.filter(H=>"_delete"in H).map(H=>H._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=ce){return this.instances.has(L)}getOptions(L=ce){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:B={}}=L,H=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const he=this.getOrInitializeService({instanceIdentifier:H,options:B});for(const[Oe,Me]of this.instancesDeferred.entries())H===this.normalizeInstanceIdentifier(Oe)&&Me.resolve(he);return he}onInit(L,B){var H;const he=this.normalizeInstanceIdentifier(B),Oe=null!==(H=this.onInitCallbacks.get(he))&&void 0!==H?H:new Set;Oe.add(L),this.onInitCallbacks.set(he,Oe);const Me=this.instances.get(he);return Me&&L(Me,he),()=>{Oe.delete(L)}}invokeOnInitCallbacks(L,B){const H=this.onInitCallbacks.get(B);if(H)for(const he of H)try{he(L,B)}catch(Oe){}}getOrInitializeService({instanceIdentifier:L,options:B={}}){let H=this.instances.get(L);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(z=L,z===ce?void 0:z),options:B}),this.instances.set(L,H),this.instancesOptions.set(L,B),this.invokeOnInitCallbacks(H,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,H)}catch(he){}var z;return H||null}normalizeInstanceIdentifier(L=ce){return this.component?this.component.multipleInstances?L:ce:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Q{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const B=this.getProvider(L.name);if(B.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);B.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const B=new ue(L,this);return this.providers.set(L,B),B}getProviders(){return Array.from(this.providers.values())}}},5422:(We,be,F)=>{"use strict";F.d(be,{in:()=>Z,Yd:()=>de,Ub:()=>Q,Am:()=>z});const o=[];var Z=(()=>{return(L=Z||(Z={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",Z;var L})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ce=Z.INFO,ue={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},ee=(L,B,...H)=>{if(B<L.logLevel)return;const he=(new Date).toISOString(),Oe=ue[B];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Oe](`[${he}]  ${L.name}:`,...H)};class de{constructor(B){this.name=B,this._logLevel=ce,this._logHandler=ee,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Z))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...B),this._logHandler(this,Z.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...B),this._logHandler(this,Z.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...B),this._logHandler(this,Z.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...B),this._logHandler(this,Z.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...B),this._logHandler(this,Z.ERROR,...B)}}function Q(L){o.forEach(B=>{B.setLogLevel(L)})}function z(L,B){for(const H of o){let he=null;B&&B.level&&(he=O[B.level]),H.userLogHandler=null===L?null:(Oe,Me,...Ee)=>{const ge=Ee.map(re=>{if(null==re)return null;if("string"==typeof re)return re;if("number"==typeof re||"boolean"==typeof re)return re.toString();if(re instanceof Error)return re.message;try{return JSON.stringify(re)}catch(ae){return null}}).filter(re=>re).join(" ");Me>=(null!=he?he:Oe.logLevel)&&L({level:Z[Me].toLowerCase(),message:ge,args:Ee,type:Oe.name})}}}},8239:(We,be,F)=>{"use strict";function o(O,ce,ue,ee,de,Q,z){try{var L=O[Q](z),B=L.value}catch(H){return void ue(H)}L.done?ce(B):Promise.resolve(B).then(ee,de)}function Z(O){return function(){var ce=this,ue=arguments;return new Promise(function(ee,de){var Q=O.apply(ce,ue);function z(B){o(Q,ee,de,z,L,"next",B)}function L(B){o(Q,ee,de,z,L,"throw",B)}z(void 0)})}}F.d(be,{Z:()=>Z})}},We=>{We(We.s=5697)}]);